function QI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function JI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cf={exports:{}},hl={},Pf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function XI(){if(e_)return xe;e_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,j={};function k(M,Q,fe){this.props=M,this.context=Q,this.refs=j,this.updater=fe||L}k.prototype.isReactComponent={},k.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ee(){}ee.prototype=k.prototype;function se(M,Q,fe){this.props=M,this.context=Q,this.refs=j,this.updater=fe||L}var $=se.prototype=new ee;$.constructor=se,x($,k.prototype),$.isPureReactComponent=!0;var re=Array.isArray,me=Object.prototype.hasOwnProperty,_e={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function A(M,Q,fe){var Re,Pe={},Ve=null,ze=null;if(Q!=null)for(Re in Q.ref!==void 0&&(ze=Q.ref),Q.key!==void 0&&(Ve=""+Q.key),Q)me.call(Q,Re)&&!b.hasOwnProperty(Re)&&(Pe[Re]=Q[Re]);var $e=arguments.length-2;if($e===1)Pe.children=fe;else if(1<$e){for(var Je=Array($e),Ct=0;Ct<$e;Ct++)Je[Ct]=arguments[Ct+2];Pe.children=Je}if(M&&M.defaultProps)for(Re in $e=M.defaultProps,$e)Pe[Re]===void 0&&(Pe[Re]=$e[Re]);return{$$typeof:n,type:M,key:Ve,ref:ze,props:Pe,_owner:_e.current}}function P(M,Q){return{$$typeof:n,type:M.type,key:Q,ref:M.ref,props:M.props,_owner:M._owner}}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return Q[fe]})}var F=/\/+/g;function C(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):Q.toString(36)}function He(M,Q,fe,Re,Pe){var Ve=typeof M;(Ve==="undefined"||Ve==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(Ve){case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case n:case e:ze=!0}}if(ze)return ze=M,Pe=Pe(ze),M=Re===""?"."+C(ze,0):Re,re(Pe)?(fe="",M!=null&&(fe=M.replace(F,"$&/")+"/"),He(Pe,Q,fe,"",function(Ct){return Ct})):Pe!=null&&(D(Pe)&&(Pe=P(Pe,fe+(!Pe.key||ze&&ze.key===Pe.key?"":(""+Pe.key).replace(F,"$&/")+"/")+M)),Q.push(Pe)),1;if(ze=0,Re=Re===""?".":Re+":",re(M))for(var $e=0;$e<M.length;$e++){Ve=M[$e];var Je=Re+C(Ve,$e);ze+=He(Ve,Q,fe,Je,Pe)}else if(Je=I(M),typeof Je=="function")for(M=Je.call(M),$e=0;!(Ve=M.next()).done;)Ve=Ve.value,Je=Re+C(Ve,$e++),ze+=He(Ve,Q,fe,Je,Pe);else if(Ve==="object")throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ze}function wt(M,Q,fe){if(M==null)return M;var Re=[],Pe=0;return He(M,Re,"","",function(Ve){return Q.call(fe,Ve,Pe++)}),Re}function Ge(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var Be={current:null},ne={transition:null},ge={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ne,ReactCurrentOwner:_e};function ae(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:wt,forEach:function(M,Q,fe){wt(M,function(){Q.apply(this,arguments)},fe)},count:function(M){var Q=0;return wt(M,function(){Q++}),Q},toArray:function(M){return wt(M,function(Q){return Q})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},xe.Component=k,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=se,xe.StrictMode=r,xe.Suspense=f,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,xe.act=ae,xe.cloneElement=function(M,Q,fe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Re=x({},M.props),Pe=M.key,Ve=M.ref,ze=M._owner;if(Q!=null){if(Q.ref!==void 0&&(Ve=Q.ref,ze=_e.current),Q.key!==void 0&&(Pe=""+Q.key),M.type&&M.type.defaultProps)var $e=M.type.defaultProps;for(Je in Q)me.call(Q,Je)&&!b.hasOwnProperty(Je)&&(Re[Je]=Q[Je]===void 0&&$e!==void 0?$e[Je]:Q[Je])}var Je=arguments.length-2;if(Je===1)Re.children=fe;else if(1<Je){$e=Array(Je);for(var Ct=0;Ct<Je;Ct++)$e[Ct]=arguments[Ct+2];Re.children=$e}return{$$typeof:n,type:M.type,key:Pe,ref:Ve,props:Re,_owner:ze}},xe.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},xe.createElement=A,xe.createFactory=function(M){var Q=A.bind(null,M);return Q.type=M,Q},xe.createRef=function(){return{current:null}},xe.forwardRef=function(M){return{$$typeof:d,render:M}},xe.isValidElement=D,xe.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Ge}},xe.memo=function(M,Q){return{$$typeof:m,type:M,compare:Q===void 0?null:Q}},xe.startTransition=function(M){var Q=ne.transition;ne.transition={};try{M()}finally{ne.transition=Q}},xe.unstable_act=ae,xe.useCallback=function(M,Q){return Be.current.useCallback(M,Q)},xe.useContext=function(M){return Be.current.useContext(M)},xe.useDebugValue=function(){},xe.useDeferredValue=function(M){return Be.current.useDeferredValue(M)},xe.useEffect=function(M,Q){return Be.current.useEffect(M,Q)},xe.useId=function(){return Be.current.useId()},xe.useImperativeHandle=function(M,Q,fe){return Be.current.useImperativeHandle(M,Q,fe)},xe.useInsertionEffect=function(M,Q){return Be.current.useInsertionEffect(M,Q)},xe.useLayoutEffect=function(M,Q){return Be.current.useLayoutEffect(M,Q)},xe.useMemo=function(M,Q){return Be.current.useMemo(M,Q)},xe.useReducer=function(M,Q,fe){return Be.current.useReducer(M,Q,fe)},xe.useRef=function(M){return Be.current.useRef(M)},xe.useState=function(M){return Be.current.useState(M)},xe.useSyncExternalStore=function(M,Q,fe){return Be.current.useSyncExternalStore(M,Q,fe)},xe.useTransition=function(){return Be.current.useTransition()},xe.version="18.3.1",xe}var t_;function Vp(){return t_||(t_=1,Pf.exports=XI()),Pf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function YI(){if(n_)return hl;n_=1;var n=Vp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var _,w={},I=null,L=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(L=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:d,key:I,ref:L,props:w,_owner:o.current}}return hl.Fragment=t,hl.jsx=u,hl.jsxs=u,hl}var r_;function ZI(){return r_||(r_=1,Cf.exports=YI()),Cf.exports}var E=ZI(),G=Vp();const eS=JI(G),tS=QI({__proto__:null,default:eS},[G]);var Ec={},kf={exports:{}},cn={},xf={exports:{}},Nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function nS(){return s_||(s_=1,(function(n){function e(ne,ge){var ae=ne.length;ne.push(ge);e:for(;0<ae;){var M=ae-1>>>1,Q=ne[M];if(0<o(Q,ge))ne[M]=ge,ne[ae]=Q,ae=M;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var ge=ne[0],ae=ne.pop();if(ae!==ge){ne[0]=ae;e:for(var M=0,Q=ne.length,fe=Q>>>1;M<fe;){var Re=2*(M+1)-1,Pe=ne[Re],Ve=Re+1,ze=ne[Ve];if(0>o(Pe,ae))Ve<Q&&0>o(ze,Pe)?(ne[M]=ze,ne[Ve]=ae,M=Ve):(ne[M]=Pe,ne[Re]=ae,M=Re);else if(Ve<Q&&0>o(ze,ae))ne[M]=ze,ne[Ve]=ae,M=Ve;else break e}}return ge}function o(ne,ge){var ae=ne.sortIndex-ge.sortIndex;return ae!==0?ae:ne.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,w=null,I=3,L=!1,x=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ne){for(var ge=t(m);ge!==null;){if(ge.callback===null)r(m);else if(ge.startTime<=ne)r(m),ge.sortIndex=ge.expirationTime,e(f,ge);else break;ge=t(m)}}function re(ne){if(j=!1,$(ne),!x)if(t(f)!==null)x=!0,Ge(me);else{var ge=t(m);ge!==null&&Be(re,ge.startTime-ne)}}function me(ne,ge){x=!1,j&&(j=!1,ee(A),A=-1),L=!0;var ae=I;try{for($(ge),w=t(f);w!==null&&(!(w.expirationTime>ge)||ne&&!O());){var M=w.callback;if(typeof M=="function"){w.callback=null,I=w.priorityLevel;var Q=M(w.expirationTime<=ge);ge=n.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(f)&&r(f),$(ge)}else r(f);w=t(f)}if(w!==null)var fe=!0;else{var Re=t(m);Re!==null&&Be(re,Re.startTime-ge),fe=!1}return fe}finally{w=null,I=ae,L=!1}}var _e=!1,b=null,A=-1,P=5,D=-1;function O(){return!(n.unstable_now()-D<P)}function F(){if(b!==null){var ne=n.unstable_now();D=ne;var ge=!0;try{ge=b(!0,ne)}finally{ge?C():(_e=!1,b=null)}}else _e=!1}var C;if(typeof se=="function")C=function(){se(F)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,wt=He.port2;He.port1.onmessage=F,C=function(){wt.postMessage(null)}}else C=function(){k(F,0)};function Ge(ne){b=ne,_e||(_e=!0,C())}function Be(ne,ge){A=k(function(){ne(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){x||L||(x=!0,Ge(me))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var ge=3;break;default:ge=I}var ae=I;I=ge;try{return ne()}finally{I=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,ge){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=I;I=ne;try{return ge()}finally{I=ae}},n.unstable_scheduleCallback=function(ne,ge,ae){var M=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,ne){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,ne={id:_++,callback:ge,priorityLevel:ne,startTime:ae,expirationTime:Q,sortIndex:-1},ae>M?(ne.sortIndex=ae,e(m,ne),t(f)===null&&ne===t(m)&&(j?(ee(A),A=-1):j=!0,Be(re,ae-M))):(ne.sortIndex=Q,e(f,ne),x||L||(x=!0,Ge(me))),ne},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ne){var ge=I;return function(){var ae=I;I=ge;try{return ne.apply(this,arguments)}finally{I=ae}}}})(Nf)),Nf}var i_;function rS(){return i_||(i_=1,xf.exports=nS()),xf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function sS(){if(o_)return cn;o_=1;var n=Vp(),e=rS();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){u(s,i),u(s+"Capture",i)}function u(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(s){return f.call(w,s)?!0:f.call(_,s)?!1:m.test(s)?w[s]=!0:(_[s]=!0,!1)}function L(s,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,i,l,h){if(i===null||typeof i>"u"||L(s,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(s,i,l,h,p,y,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=y,this.removeEmptyString=T}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];k[i]=new j(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function se(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(ee,se);k[i]=new j(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(ee,se);k[i]=new j(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(ee,se);k[i]=new j(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,i,l,h){var p=k.hasOwnProperty(i)?k[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(x(i,l,p,h)&&(l=null),h||p===null?I(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):p.mustUseProperty?s[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,h=p.attributeNamespace,l===null?s.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?s.setAttributeNS(h,i,l):s.setAttribute(i,l))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),_e=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=ne&&s[ne]||s["@@iterator"],typeof s=="function"?s:null)}var ae=Object.assign,M;function Q(s){if(M===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+s}var fe=!1;function Re(s,i){if(!s||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(q){var h=q}Reflect.construct(s,[],i)}else{try{i.call()}catch(q){h=q}s.call(i.prototype)}else{try{throw Error()}catch(q){h=q}s()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var p=q.stack.split(`
`),y=h.stack.split(`
`),T=p.length-1,R=y.length-1;1<=T&&0<=R&&p[T]!==y[R];)R--;for(;1<=T&&0<=R;T--,R--)if(p[T]!==y[R]){if(T!==1||R!==1)do if(T--,R--,0>R||p[T]!==y[R]){var N=`
`+p[T].replace(" at new "," at ");return s.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",s.displayName)),N}while(1<=T&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?Q(s):""}function Pe(s){switch(s.tag){case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return s=Re(s.type,!1),s;case 11:return s=Re(s.type.render,!1),s;case 1:return s=Re(s.type,!0),s;default:return""}}function Ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case _e:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case He:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case O:return(s.displayName||"Context")+".Consumer";case D:return(s._context.displayName||"Context")+".Provider";case F:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case wt:return i=s.displayName||null,i!==null?i:Ve(s.type)||"Memo";case Ge:i=s._payload,s=s._init;try{return Ve(s(i))}catch{}}return null}function ze(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Je(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ct(s){var i=Je(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),h=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Ar(s){s._valueTracker||(s._valueTracker=Ct(s))}function $i(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return s&&(h=Je(s)?s.checked?"true":"false":s.value),s=h,s!==l?(i.setValue(s),!0):!1}function Yr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Js(s,i){var l=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function qi(s,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=$e(i.value!=null?i.value:l),s._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ya(s,i){i=i.checked,i!=null&&$(s,"checked",i,!1)}function _a(s,i){ya(s,i);var l=$e(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(h==="submit"||h==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?Hi(s,i.type,l):i.hasOwnProperty("defaultValue")&&Hi(s,i.type,$e(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function ou(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function Hi(s,i,l){(i!=="number"||Yr(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var Rr=Array.isArray;function Cr(s,i,l,h){if(s=s.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=i.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&h&&(s[l].defaultSelected=!0)}else{for(l=""+$e(l),i=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,h&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function va(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Wi(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:$e(l)}}function Ki(s,i){var l=$e(i.value),h=$e(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),h!=null&&(s.defaultValue=""+h)}function wa(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function Et(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?Et(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Pr,Ea=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,p){MSApp.execUnsafeLocalFunction(function(){return s(i,l,h,p)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Pr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function Zr(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var Xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ys=["Webkit","ms","Moz","O"];Object.keys(Xs).forEach(function(s){Ys.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),Xs[i]=Xs[s]})});function Ta(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Xs.hasOwnProperty(s)&&Xs[s]?(""+i).trim():i+"px"}function Ia(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Ta(l,i[l],h);l==="float"&&(l="cssFloat"),h?s.setProperty(l,p):s[l]=p}}var Sa=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(s,i){if(i){if(Sa[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ra(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zs=null;function Gi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qi=null,An=null,sr=null;function Ji(s){if(s=Ja(s)){if(typeof Qi!="function")throw Error(t(280));var i=s.stateNode;i&&(i=Lu(i),Qi(s.stateNode,s.type,i))}}function ir(s){An?sr?sr.push(s):sr=[s]:An=s}function Ca(){if(An){var s=An,i=sr;if(sr=An=null,Ji(s),i)for(s=0;s<i.length;s++)Ji(i[s])}}function ei(s,i){return s(i)}function Pa(){}var kr=!1;function ka(s,i,l){if(kr)return s(i,l);kr=!0;try{return ei(s,i,l)}finally{kr=!1,(An!==null||sr!==null)&&(Pa(),Ca())}}function lt(s,i){var l=s.stateNode;if(l===null)return null;var h=Lu(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Xi=!1;if(d)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Xi=!1}function ti(s,i,l,h,p,y,T,R,N){var q=Array.prototype.slice.call(arguments,3);try{i.apply(l,q)}catch(Y){this.onError(Y)}}var ni=!1,Yi=null,jn=!1,xa=null,ed={onError:function(s){ni=!0,Yi=s}};function Zi(s,i,l,h,p,y,T,R,N){ni=!1,Yi=null,ti.apply(ed,arguments)}function au(s,i,l,h,p,y,T,R,N){if(Zi.apply(this,arguments),ni){if(ni){var q=Yi;ni=!1,Yi=null}else throw Error(t(198));jn||(jn=!0,xa=q)}}function Fn(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function ri(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Un(s){if(Fn(s)!==s)throw Error(t(188))}function lu(s){var i=s.alternate;if(!i){if(i=Fn(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,h=i;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Un(p),s;if(y===h)return Un(p),i;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var T=!1,R=p.child;R;){if(R===l){T=!0,l=p,h=y;break}if(R===h){T=!0,h=p,l=y;break}R=R.sibling}if(!T){for(R=y.child;R;){if(R===l){T=!0,l=y,h=p;break}if(R===h){T=!0,h=y,l=p;break}R=R.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function Na(s){return s=lu(s),s!==null?eo(s):null}function eo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=eo(s);if(i!==null)return i;s=s.sibling}return null}var to=e.unstable_scheduleCallback,ba=e.unstable_cancelCallback,uu=e.unstable_shouldYield,td=e.unstable_requestPaint,Xe=e.unstable_now,cu=e.unstable_getCurrentPriorityLevel,si=e.unstable_ImmediatePriority,es=e.unstable_UserBlockingPriority,Rn=e.unstable_NormalPriority,Oa=e.unstable_LowPriority,hu=e.unstable_IdlePriority,ii=null,pn=null;function du(s){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ii,s,void 0,(s.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:pu,Da=Math.log,fu=Math.LN2;function pu(s){return s>>>=0,s===0?32:31-(Da(s)/fu|0)|0}var no=64,ro=4194304;function ts(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function oi(s,i){var l=s.pendingLanes;if(l===0)return 0;var h=0,p=s.suspendedLanes,y=s.pingedLanes,T=l&268435455;if(T!==0){var R=T&~p;R!==0?h=ts(R):(y&=T,y!==0&&(h=ts(y)))}else T=l&~p,T!==0?h=ts(T):y!==0&&(h=ts(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,y=i&-i,p>=y||p===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=h;0<i;)l=31-Xt(i),p=1<<l,h|=s[l],i&=~p;return h}function nd(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(s,i){for(var l=s.suspendedLanes,h=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes;0<y;){var T=31-Xt(y),R=1<<T,N=p[T];N===-1?((R&l)===0||(R&h)!==0)&&(p[T]=nd(R,i)):N<=i&&(s.expiredLanes|=R),y&=~R}}function mn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ai(){var s=no;return no<<=1,(no&4194240)===0&&(no=64),s}function ns(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function rs(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Xt(i),s[i]=l}function Qe(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var h=s.eventTimes;for(s=s.expirationTimes;0<l;){var p=31-Xt(l),y=1<<p;i[p]=0,h[p]=-1,s[p]=-1,l&=~y}}function ss(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var h=31-Xt(l),p=1<<h;p&i|s[h]&i&&(s[h]|=i),l&=~p}}var Oe=0;function is(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var mu,so,gu,yu,_u,Va=!1,or=[],Dt=null,Bn=null,zn=null,os=new Map,Cn=new Map,ar=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(s,i){switch(s){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":os.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(i.pointerId)}}function nn(s,i,l,h,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},i!==null&&(i=Ja(i),i!==null&&so(i)),s):(s.eventSystemFlags|=h,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function sd(s,i,l,h,p){switch(i){case"focusin":return Dt=nn(Dt,s,i,l,h,p),!0;case"dragenter":return Bn=nn(Bn,s,i,l,h,p),!0;case"mouseover":return zn=nn(zn,s,i,l,h,p),!0;case"pointerover":var y=p.pointerId;return os.set(y,nn(os.get(y)||null,s,i,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Cn.set(y,nn(Cn.get(y)||null,s,i,l,h,p)),!0}return!1}function wu(s){var i=di(s.target);if(i!==null){var l=Fn(i);if(l!==null){if(i=l.tag,i===13){if(i=ri(l),i!==null){s.blockedOn=i,_u(s.priority,function(){gu(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Nr(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=io(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);Zs=h,l.target.dispatchEvent(h),Zs=null}else return i=Ja(l),i!==null&&so(i),s.blockedOn=l,!1;i.shift()}return!0}function li(s,i,l){Nr(s)&&l.delete(i)}function Eu(){Va=!1,Dt!==null&&Nr(Dt)&&(Dt=null),Bn!==null&&Nr(Bn)&&(Bn=null),zn!==null&&Nr(zn)&&(zn=null),os.forEach(li),Cn.forEach(li)}function $n(s,i){s.blockedOn===i&&(s.blockedOn=null,Va||(Va=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Eu)))}function qn(s){function i(p){return $n(p,s)}if(0<or.length){$n(or[0],s);for(var l=1;l<or.length;l++){var h=or[l];h.blockedOn===s&&(h.blockedOn=null)}}for(Dt!==null&&$n(Dt,s),Bn!==null&&$n(Bn,s),zn!==null&&$n(zn,s),os.forEach(i),Cn.forEach(i),l=0;l<ar.length;l++)h=ar[l],h.blockedOn===s&&(h.blockedOn=null);for(;0<ar.length&&(l=ar[0],l.blockedOn===null);)wu(l),l.blockedOn===null&&ar.shift()}var br=re.ReactCurrentBatchConfig,as=!0;function tt(s,i,l,h){var p=Oe,y=br.transition;br.transition=null;try{Oe=1,La(s,i,l,h)}finally{Oe=p,br.transition=y}}function id(s,i,l,h){var p=Oe,y=br.transition;br.transition=null;try{Oe=4,La(s,i,l,h)}finally{Oe=p,br.transition=y}}function La(s,i,l,h){if(as){var p=io(s,i,l,h);if(p===null)gd(s,i,h,ui,l),vu(s,h);else if(sd(p,s,i,l,h))h.stopPropagation();else if(vu(s,h),i&4&&-1<rd.indexOf(s)){for(;p!==null;){var y=Ja(p);if(y!==null&&mu(y),y=io(s,i,l,h),y===null&&gd(s,i,h,ui,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else gd(s,i,h,null,l)}}var ui=null;function io(s,i,l,h){if(ui=null,s=Gi(h),s=di(s),s!==null)if(i=Fn(s),i===null)s=null;else if(l=i.tag,l===13){if(s=ri(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return ui=s,null}function Ma(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cu()){case si:return 1;case es:return 4;case Rn:case Oa:return 16;case hu:return 536870912;default:return 16}default:return 16}}var gn=null,oo=null,rn=null;function ja(){if(rn)return rn;var s,i=oo,l=i.length,h,p="value"in gn?gn.value:gn.textContent,y=p.length;for(s=0;s<l&&i[s]===p[s];s++);var T=l-s;for(h=1;h<=T&&i[l-h]===p[y-h];h++);return rn=p.slice(s,1<h?1-h:void 0)}function ao(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function lr(){return!0}function Fa(){return!1}function Vt(s){function i(l,h,p,y,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?lr:Fa,this.isPropagationStopped=Fa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),i}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Vt(Hn),ur=ae({},Hn,{view:0,detail:0}),od=Vt(ur),uo,Or,ls,ci=ae({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ls&&(ls&&s.type==="mousemove"?(uo=s.screenX-ls.screenX,Or=s.screenY-ls.screenY):Or=uo=0,ls=s),uo)},movementY:function(s){return"movementY"in s?s.movementY:Or}}),co=Vt(ci),Ua=ae({},ci,{dataTransfer:0}),Tu=Vt(Ua),ho=ae({},ur,{relatedTarget:0}),fo=Vt(ho),Iu=ae({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dr=Vt(Iu),Su=ae({},Hn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Au=Vt(Su),Ru=ae({},Hn,{data:0}),Ba=Vt(Ru),po={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pu(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Cu[s])?!!i[s]:!1}function cr(){return Pu}var c=ae({},ur,{key:function(s){if(s.key){var i=po[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=ao(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Yt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cr,charCode:function(s){return s.type==="keypress"?ao(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ao(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),g=Vt(c),v=ae({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Vt(v),U=ae({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cr}),W=Vt(U),ie=ae({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Vt(ie),It=ae({},ci,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Vt(It),Pt=[9,13,27,32],pt=d&&"CompositionEvent"in window,Pn=null;d&&"documentMode"in document&&(Pn=document.documentMode);var yn=d&&"TextEvent"in window&&!Pn,hi=d&&(!pt||Pn&&8<Pn&&11>=Pn),mo=" ",Gm=!1;function Qm(s,i){switch(s){case"keyup":return Pt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var go=!1;function WT(s,i){switch(s){case"compositionend":return Jm(i);case"keypress":return i.which!==32?null:(Gm=!0,mo);case"textInput":return s=i.data,s===mo&&Gm?null:s;default:return null}}function KT(s,i){if(go)return s==="compositionend"||!pt&&Qm(s,i)?(s=ja(),rn=oo=gn=null,go=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return hi&&i.locale!=="ko"?null:i.data;default:return null}}var GT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!GT[s.type]:i==="textarea"}function Ym(s,i,l,h){ir(h),i=Ou(i,"onChange"),0<i.length&&(l=new lo("onChange","change",null,l,h),s.push({event:l,listeners:i}))}var za=null,$a=null;function QT(s){gg(s,0)}function ku(s){var i=Eo(s);if($i(i))return s}function JT(s,i){if(s==="change")return i}var Zm=!1;if(d){var ad;if(d){var ld="oninput"in document;if(!ld){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),ld=typeof eg.oninput=="function"}ad=ld}else ad=!1;Zm=ad&&(!document.documentMode||9<document.documentMode)}function tg(){za&&(za.detachEvent("onpropertychange",ng),$a=za=null)}function ng(s){if(s.propertyName==="value"&&ku($a)){var i=[];Ym(i,$a,s,Gi(s)),ka(QT,i)}}function XT(s,i,l){s==="focusin"?(tg(),za=i,$a=l,za.attachEvent("onpropertychange",ng)):s==="focusout"&&tg()}function YT(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ku($a)}function ZT(s,i){if(s==="click")return ku(i)}function eI(s,i){if(s==="input"||s==="change")return ku(i)}function tI(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Wn=typeof Object.is=="function"?Object.is:tI;function qa(s,i){if(Wn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(i,p)||!Wn(s[p],i[p]))return!1}return!0}function rg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function sg(s,i){var l=rg(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=i&&h>=i)return{node:l,offset:i-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rg(l)}}function ig(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ig(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function og(){for(var s=window,i=Yr();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=Yr(s.document)}return i}function ud(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function nI(s){var i=og(),l=s.focusedElem,h=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&ig(l.ownerDocument.documentElement,l)){if(h!==null&&ud(l)){if(i=h.start,s=h.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!s.extend&&y>h&&(p=h,h=y,y=p),p=sg(l,y);var T=sg(l,h);p&&T&&(s.rangeCount!==1||s.anchorNode!==p.node||s.anchorOffset!==p.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),s.removeAllRanges(),y>h?(s.addRange(i),s.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var rI=d&&"documentMode"in document&&11>=document.documentMode,yo=null,cd=null,Ha=null,hd=!1;function ag(s,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hd||yo==null||yo!==Yr(h)||(h=yo,"selectionStart"in h&&ud(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ha&&qa(Ha,h)||(Ha=h,h=Ou(cd,"onSelect"),0<h.length&&(i=new lo("onSelect","select",null,i,l),s.push({event:i,listeners:h}),i.target=yo)))}function xu(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var _o={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},dd={},lg={};d&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Nu(s){if(dd[s])return dd[s];if(!_o[s])return s;var i=_o[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in lg)return dd[s]=i[l];return s}var ug=Nu("animationend"),cg=Nu("animationiteration"),hg=Nu("animationstart"),dg=Nu("transitionend"),fg=new Map,pg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(s,i){fg.set(s,i),a(i,[s])}for(var fd=0;fd<pg.length;fd++){var pd=pg[fd],sI=pd.toLowerCase(),iI=pd[0].toUpperCase()+pd.slice(1);us(sI,"on"+iI)}us(ug,"onAnimationEnd"),us(cg,"onAnimationIteration"),us(hg,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(dg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function mg(s,i,l){var h=s.type||"unknown-event";s.currentTarget=l,au(h,i,void 0,s),s.currentTarget=null}function gg(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],p=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var T=h.length-1;0<=T;T--){var R=h[T],N=R.instance,q=R.currentTarget;if(R=R.listener,N!==y&&p.isPropagationStopped())break e;mg(p,R,q),y=N}else for(T=0;T<h.length;T++){if(R=h[T],N=R.instance,q=R.currentTarget,R=R.listener,N!==y&&p.isPropagationStopped())break e;mg(p,R,q),y=N}}}if(jn)throw s=xa,jn=!1,xa=null,s}function Ze(s,i){var l=i[Td];l===void 0&&(l=i[Td]=new Set);var h=s+"__bubble";l.has(h)||(yg(i,s,2,!1),l.add(h))}function md(s,i,l){var h=0;i&&(h|=4),yg(l,s,h,i)}var bu="_reactListening"+Math.random().toString(36).slice(2);function Ka(s){if(!s[bu]){s[bu]=!0,r.forEach(function(l){l!=="selectionchange"&&(oI.has(l)||md(l,!1,s),md(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[bu]||(i[bu]=!0,md("selectionchange",!1,i))}}function yg(s,i,l,h){switch(Ma(i)){case 1:var p=tt;break;case 4:p=id;break;default:p=La}l=p.bind(null,i,l,s),p=void 0,!Xi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?s.addEventListener(i,l,{capture:!0,passive:p}):s.addEventListener(i,l,!0):p!==void 0?s.addEventListener(i,l,{passive:p}):s.addEventListener(i,l,!1)}function gd(s,i,l,h,p){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var R=h.stateNode.containerInfo;if(R===p||R.nodeType===8&&R.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var N=T.tag;if((N===3||N===4)&&(N=T.stateNode.containerInfo,N===p||N.nodeType===8&&N.parentNode===p))return;T=T.return}for(;R!==null;){if(T=di(R),T===null)return;if(N=T.tag,N===5||N===6){h=y=T;continue e}R=R.parentNode}}h=h.return}ka(function(){var q=y,Y=Gi(l),Z=[];e:{var X=fg.get(s);if(X!==void 0){var le=lo,he=s;switch(s){case"keypress":if(ao(l)===0)break e;case"keydown":case"keyup":le=g;break;case"focusin":he="focus",le=fo;break;case"focusout":he="blur",le=fo;break;case"beforeblur":case"afterblur":le=fo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=W;break;case ug:case cg:case hg:le=Dr;break;case dg:le=We;break;case"scroll":le=od;break;case"wheel":le=Le;break;case"copy":case"cut":case"paste":le=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=S}var de=(i&4)!==0,ut=!de&&s==="scroll",B=de?X!==null?X+"Capture":null:X;de=[];for(var V=q,z;V!==null;){z=V;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,B!==null&&(te=lt(V,B),te!=null&&de.push(Ga(V,te,z)))),ut)break;V=V.return}0<de.length&&(X=new le(X,he,null,l,Y),Z.push({event:X,listeners:de}))}}if((i&7)===0){e:{if(X=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",X&&l!==Zs&&(he=l.relatedTarget||l.fromElement)&&(di(he)||he[Vr]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(he=l.relatedTarget||l.toElement,le=q,he=he?di(he):null,he!==null&&(ut=Fn(he),he!==ut||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=q),le!==he)){if(de=co,te="onMouseLeave",B="onMouseEnter",V="mouse",(s==="pointerout"||s==="pointerover")&&(de=S,te="onPointerLeave",B="onPointerEnter",V="pointer"),ut=le==null?X:Eo(le),z=he==null?X:Eo(he),X=new de(te,V+"leave",le,l,Y),X.target=ut,X.relatedTarget=z,te=null,di(Y)===q&&(de=new de(B,V+"enter",he,l,Y),de.target=z,de.relatedTarget=ut,te=de),ut=te,le&&he)t:{for(de=le,B=he,V=0,z=de;z;z=vo(z))V++;for(z=0,te=B;te;te=vo(te))z++;for(;0<V-z;)de=vo(de),V--;for(;0<z-V;)B=vo(B),z--;for(;V--;){if(de===B||B!==null&&de===B.alternate)break t;de=vo(de),B=vo(B)}de=null}else de=null;le!==null&&_g(Z,X,le,de,!1),he!==null&&ut!==null&&_g(Z,ut,he,de,!0)}}e:{if(X=q?Eo(q):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=JT;else if(Xm(X))if(Zm)pe=eI;else{pe=YT;var we=XT}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=ZT);if(pe&&(pe=pe(s,q))){Ym(Z,pe,l,Y);break e}we&&we(s,X,q),s==="focusout"&&(we=X._wrapperState)&&we.controlled&&X.type==="number"&&Hi(X,"number",X.value)}switch(we=q?Eo(q):window,s){case"focusin":(Xm(we)||we.contentEditable==="true")&&(yo=we,cd=q,Ha=null);break;case"focusout":Ha=cd=yo=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,ag(Z,l,Y);break;case"selectionchange":if(rI)break;case"keydown":case"keyup":ag(Z,l,Y)}var Ee;if(pt)e:{switch(s){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else go?Qm(s,l)&&(Se="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(hi&&l.locale!=="ko"&&(go||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&go&&(Ee=ja()):(gn=Y,oo="value"in gn?gn.value:gn.textContent,go=!0)),we=Ou(q,Se),0<we.length&&(Se=new Ba(Se,s,null,l,Y),Z.push({event:Se,listeners:we}),Ee?Se.data=Ee:(Ee=Jm(l),Ee!==null&&(Se.data=Ee)))),(Ee=yn?WT(s,l):KT(s,l))&&(q=Ou(q,"onBeforeInput"),0<q.length&&(Y=new Ba("onBeforeInput","beforeinput",null,l,Y),Z.push({event:Y,listeners:q}),Y.data=Ee))}gg(Z,i)})}function Ga(s,i,l){return{instance:s,listener:i,currentTarget:l}}function Ou(s,i){for(var l=i+"Capture",h=[];s!==null;){var p=s,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=lt(s,l),y!=null&&h.unshift(Ga(s,y,p)),y=lt(s,i),y!=null&&h.push(Ga(s,y,p))),s=s.return}return h}function vo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function _g(s,i,l,h,p){for(var y=i._reactName,T=[];l!==null&&l!==h;){var R=l,N=R.alternate,q=R.stateNode;if(N!==null&&N===h)break;R.tag===5&&q!==null&&(R=q,p?(N=lt(l,y),N!=null&&T.unshift(Ga(l,N,R))):p||(N=lt(l,y),N!=null&&T.push(Ga(l,N,R)))),l=l.return}T.length!==0&&s.push({event:i,listeners:T})}var aI=/\r\n?/g,lI=/\u0000|\uFFFD/g;function vg(s){return(typeof s=="string"?s:""+s).replace(aI,`
`).replace(lI,"")}function Du(s,i,l){if(i=vg(i),vg(s)!==i&&l)throw Error(t(425))}function Vu(){}var yd=null,_d=null;function vd(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,uI=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,cI=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(s){return wg.resolve(null).then(s).catch(hI)}:wd;function hI(s){setTimeout(function(){throw s})}function Ed(s,i){var l=i,h=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){s.removeChild(p),qn(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);qn(i)}function cs(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function Eg(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var wo=Math.random().toString(36).slice(2),hr="__reactFiber$"+wo,Qa="__reactProps$"+wo,Vr="__reactContainer$"+wo,Td="__reactEvents$"+wo,dI="__reactListeners$"+wo,fI="__reactHandles$"+wo;function di(s){var i=s[hr];if(i)return i;for(var l=s.parentNode;l;){if(i=l[Vr]||l[hr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=Eg(s);s!==null;){if(l=s[hr])return l;s=Eg(s)}return i}s=l,l=s.parentNode}return null}function Ja(s){return s=s[hr]||s[Vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Eo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Lu(s){return s[Qa]||null}var Id=[],To=-1;function hs(s){return{current:s}}function et(s){0>To||(s.current=Id[To],Id[To]=null,To--)}function Ye(s,i){To++,Id[To]=s.current,s.current=i}var ds={},zt=hs(ds),sn=hs(!1),fi=ds;function Io(s,i){var l=s.type.contextTypes;if(!l)return ds;var h=s.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=i[y];return h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=p),p}function on(s){return s=s.childContextTypes,s!=null}function Mu(){et(sn),et(zt)}function Tg(s,i,l){if(zt.current!==ds)throw Error(t(168));Ye(zt,i),Ye(sn,l)}function Ig(s,i,l){var h=s.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,ze(s)||"Unknown",p));return ae({},l,h)}function ju(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ds,fi=zt.current,Ye(zt,s),Ye(sn,sn.current),!0}function Sg(s,i,l){var h=s.stateNode;if(!h)throw Error(t(169));l?(s=Ig(s,i,fi),h.__reactInternalMemoizedMergedChildContext=s,et(sn),et(zt),Ye(zt,s)):et(sn),Ye(sn,l)}var Lr=null,Fu=!1,Sd=!1;function Ag(s){Lr===null?Lr=[s]:Lr.push(s)}function pI(s){Fu=!0,Ag(s)}function fs(){if(!Sd&&Lr!==null){Sd=!0;var s=0,i=Oe;try{var l=Lr;for(Oe=1;s<l.length;s++){var h=l[s];do h=h(!0);while(h!==null)}Lr=null,Fu=!1}catch(p){throw Lr!==null&&(Lr=Lr.slice(s+1)),to(si,fs),p}finally{Oe=i,Sd=!1}}return null}var So=[],Ao=0,Uu=null,Bu=0,kn=[],xn=0,pi=null,Mr=1,jr="";function mi(s,i){So[Ao++]=Bu,So[Ao++]=Uu,Uu=s,Bu=i}function Rg(s,i,l){kn[xn++]=Mr,kn[xn++]=jr,kn[xn++]=pi,pi=s;var h=Mr;s=jr;var p=32-Xt(h)-1;h&=~(1<<p),l+=1;var y=32-Xt(i)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,Mr=1<<32-Xt(i)+p|l<<p|h,jr=y+s}else Mr=1<<y|l<<p|h,jr=s}function Ad(s){s.return!==null&&(mi(s,1),Rg(s,1,0))}function Rd(s){for(;s===Uu;)Uu=So[--Ao],So[Ao]=null,Bu=So[--Ao],So[Ao]=null;for(;s===pi;)pi=kn[--xn],kn[xn]=null,jr=kn[--xn],kn[xn]=null,Mr=kn[--xn],kn[xn]=null}var _n=null,vn=null,nt=!1,Kn=null;function Cg(s,i){var l=Dn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function Pg(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,_n=s,vn=cs(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,_n=s,vn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=pi!==null?{id:Mr,overflow:jr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Dn(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,_n=s,vn=null,!0):!1;default:return!1}}function Cd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Pd(s){if(nt){var i=vn;if(i){var l=i;if(!Pg(s,i)){if(Cd(s))throw Error(t(418));i=cs(l.nextSibling);var h=_n;i&&Pg(s,i)?Cg(h,l):(s.flags=s.flags&-4097|2,nt=!1,_n=s)}}else{if(Cd(s))throw Error(t(418));s.flags=s.flags&-4097|2,nt=!1,_n=s}}}function kg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;_n=s}function zu(s){if(s!==_n)return!1;if(!nt)return kg(s),nt=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!vd(s.type,s.memoizedProps)),i&&(i=vn)){if(Cd(s))throw xg(),Error(t(418));for(;i;)Cg(s,i),i=cs(i.nextSibling)}if(kg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){vn=cs(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}vn=null}}else vn=_n?cs(s.stateNode.nextSibling):null;return!0}function xg(){for(var s=vn;s;)s=cs(s.nextSibling)}function Ro(){vn=_n=null,nt=!1}function kd(s){Kn===null?Kn=[s]:Kn.push(s)}var mI=re.ReactCurrentBatchConfig;function Xa(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,s));var p=h,y=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(T){var R=p.refs;T===null?delete R[y]:R[y]=T},i._stringRef=y,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function $u(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function Ng(s){var i=s._init;return i(s._payload)}function bg(s){function i(B,V){if(s){var z=B.deletions;z===null?(B.deletions=[V],B.flags|=16):z.push(V)}}function l(B,V){if(!s)return null;for(;V!==null;)i(B,V),V=V.sibling;return null}function h(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function p(B,V){return B=Es(B,V),B.index=0,B.sibling=null,B}function y(B,V,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<V?(B.flags|=2,V):z):(B.flags|=2,V)):(B.flags|=1048576,V)}function T(B){return s&&B.alternate===null&&(B.flags|=2),B}function R(B,V,z,te){return V===null||V.tag!==6?(V=Ef(z,B.mode,te),V.return=B,V):(V=p(V,z),V.return=B,V)}function N(B,V,z,te){var pe=z.type;return pe===b?Y(B,V,z.props.children,te,z.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Ge&&Ng(pe)===V.type)?(te=p(V,z.props),te.ref=Xa(B,V,z),te.return=B,te):(te=fc(z.type,z.key,z.props,null,B.mode,te),te.ref=Xa(B,V,z),te.return=B,te)}function q(B,V,z,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Tf(z,B.mode,te),V.return=B,V):(V=p(V,z.children||[]),V.return=B,V)}function Y(B,V,z,te,pe){return V===null||V.tag!==7?(V=Ii(z,B.mode,te,pe),V.return=B,V):(V=p(V,z),V.return=B,V)}function Z(B,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Ef(""+V,B.mode,z),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case me:return z=fc(V.type,V.key,V.props,null,B.mode,z),z.ref=Xa(B,null,V),z.return=B,z;case _e:return V=Tf(V,B.mode,z),V.return=B,V;case Ge:var te=V._init;return Z(B,te(V._payload),z)}if(Rr(V)||ge(V))return V=Ii(V,B.mode,z,null),V.return=B,V;$u(B,V)}return null}function X(B,V,z,te){var pe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:R(B,V,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case me:return z.key===pe?N(B,V,z,te):null;case _e:return z.key===pe?q(B,V,z,te):null;case Ge:return pe=z._init,X(B,V,pe(z._payload),te)}if(Rr(z)||ge(z))return pe!==null?null:Y(B,V,z,te,null);$u(B,z)}return null}function le(B,V,z,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return B=B.get(z)||null,R(V,B,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case me:return B=B.get(te.key===null?z:te.key)||null,N(V,B,te,pe);case _e:return B=B.get(te.key===null?z:te.key)||null,q(V,B,te,pe);case Ge:var we=te._init;return le(B,V,z,we(te._payload),pe)}if(Rr(te)||ge(te))return B=B.get(z)||null,Y(V,B,te,pe,null);$u(V,te)}return null}function he(B,V,z,te){for(var pe=null,we=null,Ee=V,Se=V=0,Nt=null;Ee!==null&&Se<z.length;Se++){Ee.index>Se?(Nt=Ee,Ee=null):Nt=Ee.sibling;var Ue=X(B,Ee,z[Se],te);if(Ue===null){Ee===null&&(Ee=Nt);break}s&&Ee&&Ue.alternate===null&&i(B,Ee),V=y(Ue,V,Se),we===null?pe=Ue:we.sibling=Ue,we=Ue,Ee=Nt}if(Se===z.length)return l(B,Ee),nt&&mi(B,Se),pe;if(Ee===null){for(;Se<z.length;Se++)Ee=Z(B,z[Se],te),Ee!==null&&(V=y(Ee,V,Se),we===null?pe=Ee:we.sibling=Ee,we=Ee);return nt&&mi(B,Se),pe}for(Ee=h(B,Ee);Se<z.length;Se++)Nt=le(Ee,B,Se,z[Se],te),Nt!==null&&(s&&Nt.alternate!==null&&Ee.delete(Nt.key===null?Se:Nt.key),V=y(Nt,V,Se),we===null?pe=Nt:we.sibling=Nt,we=Nt);return s&&Ee.forEach(function(Ts){return i(B,Ts)}),nt&&mi(B,Se),pe}function de(B,V,z,te){var pe=ge(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var we=pe=null,Ee=V,Se=V=0,Nt=null,Ue=z.next();Ee!==null&&!Ue.done;Se++,Ue=z.next()){Ee.index>Se?(Nt=Ee,Ee=null):Nt=Ee.sibling;var Ts=X(B,Ee,Ue.value,te);if(Ts===null){Ee===null&&(Ee=Nt);break}s&&Ee&&Ts.alternate===null&&i(B,Ee),V=y(Ts,V,Se),we===null?pe=Ts:we.sibling=Ts,we=Ts,Ee=Nt}if(Ue.done)return l(B,Ee),nt&&mi(B,Se),pe;if(Ee===null){for(;!Ue.done;Se++,Ue=z.next())Ue=Z(B,Ue.value,te),Ue!==null&&(V=y(Ue,V,Se),we===null?pe=Ue:we.sibling=Ue,we=Ue);return nt&&mi(B,Se),pe}for(Ee=h(B,Ee);!Ue.done;Se++,Ue=z.next())Ue=le(Ee,B,Se,Ue.value,te),Ue!==null&&(s&&Ue.alternate!==null&&Ee.delete(Ue.key===null?Se:Ue.key),V=y(Ue,V,Se),we===null?pe=Ue:we.sibling=Ue,we=Ue);return s&&Ee.forEach(function(GI){return i(B,GI)}),nt&&mi(B,Se),pe}function ut(B,V,z,te){if(typeof z=="object"&&z!==null&&z.type===b&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case me:e:{for(var pe=z.key,we=V;we!==null;){if(we.key===pe){if(pe=z.type,pe===b){if(we.tag===7){l(B,we.sibling),V=p(we,z.props.children),V.return=B,B=V;break e}}else if(we.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Ge&&Ng(pe)===we.type){l(B,we.sibling),V=p(we,z.props),V.ref=Xa(B,we,z),V.return=B,B=V;break e}l(B,we);break}else i(B,we);we=we.sibling}z.type===b?(V=Ii(z.props.children,B.mode,te,z.key),V.return=B,B=V):(te=fc(z.type,z.key,z.props,null,B.mode,te),te.ref=Xa(B,V,z),te.return=B,B=te)}return T(B);case _e:e:{for(we=z.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){l(B,V.sibling),V=p(V,z.children||[]),V.return=B,B=V;break e}else{l(B,V);break}else i(B,V);V=V.sibling}V=Tf(z,B.mode,te),V.return=B,B=V}return T(B);case Ge:return we=z._init,ut(B,V,we(z._payload),te)}if(Rr(z))return he(B,V,z,te);if(ge(z))return de(B,V,z,te);$u(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(l(B,V.sibling),V=p(V,z),V.return=B,B=V):(l(B,V),V=Ef(z,B.mode,te),V.return=B,B=V),T(B)):l(B,V)}return ut}var Co=bg(!0),Og=bg(!1),qu=hs(null),Hu=null,Po=null,xd=null;function Nd(){xd=Po=Hu=null}function bd(s){var i=qu.current;et(qu),s._currentValue=i}function Od(s,i,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),s===l)break;s=s.return}}function ko(s,i){Hu=s,xd=Po=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(an=!0),s.firstContext=null)}function Nn(s){var i=s._currentValue;if(xd!==s)if(s={context:s,memoizedValue:i,next:null},Po===null){if(Hu===null)throw Error(t(308));Po=s,Hu.dependencies={lanes:0,firstContext:s}}else Po=Po.next=s;return i}var gi=null;function Dd(s){gi===null?gi=[s]:gi.push(s)}function Dg(s,i,l,h){var p=i.interleaved;return p===null?(l.next=l,Dd(i)):(l.next=p.next,p.next=l),i.interleaved=l,Fr(s,h)}function Fr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var ps=!1;function Vd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vg(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ur(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function ms(s,i,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Fe&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Fr(s,l)}return p=h.interleaved,p===null?(i.next=i,Dd(h)):(i.next=p.next,p.next=i),h.interleaved=i,Fr(s,l)}function Wu(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=s.pendingLanes,l|=h,i.lanes=l,ss(s,l)}}function Lg(s,i){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=i:y=y.next=i}else p=y=i;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function Ku(s,i,l,h){var p=s.updateQueue;ps=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var N=R,q=N.next;N.next=null,T===null?y=q:T.next=q,T=N;var Y=s.alternate;Y!==null&&(Y=Y.updateQueue,R=Y.lastBaseUpdate,R!==T&&(R===null?Y.firstBaseUpdate=q:R.next=q,Y.lastBaseUpdate=N))}if(y!==null){var Z=p.baseState;T=0,Y=q=N=null,R=y;do{var X=R.lane,le=R.eventTime;if((h&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var he=s,de=R;switch(X=i,le=l,de.tag){case 1:if(he=de.payload,typeof he=="function"){Z=he.call(le,Z,X);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,X=typeof he=="function"?he.call(le,Z,X):he,X==null)break e;Z=ae({},Z,X);break e;case 2:ps=!0}}R.callback!==null&&R.lane!==0&&(s.flags|=64,X=p.effects,X===null?p.effects=[R]:X.push(R))}else le={eventTime:le,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Y===null?(q=Y=le,N=Z):Y=Y.next=le,T|=X;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;X=R,R=X.next,X.next=null,p.lastBaseUpdate=X,p.shared.pending=null}}while(!0);if(Y===null&&(N=Z),p.baseState=N,p.firstBaseUpdate=q,p.lastBaseUpdate=Y,i=p.shared.interleaved,i!==null){p=i;do T|=p.lane,p=p.next;while(p!==i)}else y===null&&(p.shared.lanes=0);vi|=T,s.lanes=T,s.memoizedState=Z}}function Mg(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var h=s[i],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ya={},dr=hs(Ya),Za=hs(Ya),el=hs(Ya);function yi(s){if(s===Ya)throw Error(t(174));return s}function Ld(s,i){switch(Ye(el,i),Ye(Za,s),Ye(dr,Ya),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Tt(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=Tt(i,s)}et(dr),Ye(dr,i)}function xo(){et(dr),et(Za),et(el)}function jg(s){yi(el.current);var i=yi(dr.current),l=Tt(i,s.type);i!==l&&(Ye(Za,s),Ye(dr,l))}function Md(s){Za.current===s&&(et(dr),et(Za))}var rt=hs(0);function Gu(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var jd=[];function Fd(){for(var s=0;s<jd.length;s++)jd[s]._workInProgressVersionPrimary=null;jd.length=0}var Qu=re.ReactCurrentDispatcher,Ud=re.ReactCurrentBatchConfig,_i=0,st=null,St=null,kt=null,Ju=!1,tl=!1,nl=0,gI=0;function $t(){throw Error(t(321))}function Bd(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!Wn(s[l],i[l]))return!1;return!0}function zd(s,i,l,h,p,y){if(_i=y,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Qu.current=s===null||s.memoizedState===null?wI:EI,s=l(h,p),tl){y=0;do{if(tl=!1,nl=0,25<=y)throw Error(t(301));y+=1,kt=St=null,i.updateQueue=null,Qu.current=TI,s=l(h,p)}while(tl)}if(Qu.current=Zu,i=St!==null&&St.next!==null,_i=0,kt=St=st=null,Ju=!1,i)throw Error(t(300));return s}function $d(){var s=nl!==0;return nl=0,s}function fr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?st.memoizedState=kt=s:kt=kt.next=s,kt}function bn(){if(St===null){var s=st.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var i=kt===null?st.memoizedState:kt.next;if(i!==null)kt=i,St=s;else{if(s===null)throw Error(t(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},kt===null?st.memoizedState=kt=s:kt=kt.next=s}return kt}function rl(s,i){return typeof i=="function"?i(s):i}function qd(s){var i=bn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var h=St,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var R=T=null,N=null,q=y;do{var Y=q.lane;if((_i&Y)===Y)N!==null&&(N=N.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:s(h,q.action);else{var Z={lane:Y,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};N===null?(R=N=Z,T=h):N=N.next=Z,st.lanes|=Y,vi|=Y}q=q.next}while(q!==null&&q!==y);N===null?T=h:N.next=R,Wn(h,i.memoizedState)||(an=!0),i.memoizedState=h,i.baseState=T,i.baseQueue=N,l.lastRenderedState=h}if(s=l.interleaved,s!==null){p=s;do y=p.lane,st.lanes|=y,vi|=y,p=p.next;while(p!==s)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Hd(s){var i=bn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var h=l.dispatch,p=l.pending,y=i.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=s(y,T.action),T=T.next;while(T!==p);Wn(y,i.memoizedState)||(an=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,h]}function Fg(){}function Ug(s,i){var l=st,h=bn(),p=i(),y=!Wn(h.memoizedState,p);if(y&&(h.memoizedState=p,an=!0),h=h.queue,Wd($g.bind(null,l,h,s),[s]),h.getSnapshot!==i||y||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,sl(9,zg.bind(null,l,h,p,i),void 0,null),xt===null)throw Error(t(349));(_i&30)!==0||Bg(l,i,p)}return p}function Bg(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=st.updateQueue,i===null?(i={lastEffect:null,stores:null},st.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function zg(s,i,l,h){i.value=l,i.getSnapshot=h,qg(i)&&Hg(s)}function $g(s,i,l){return l(function(){qg(i)&&Hg(s)})}function qg(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!Wn(s,l)}catch{return!0}}function Hg(s){var i=Fr(s,1);i!==null&&Xn(i,s,1,-1)}function Wg(s){var i=fr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:s},i.queue=s,s=s.dispatch=vI.bind(null,st,s),[i.memoizedState,s]}function sl(s,i,l,h){return s={tag:s,create:i,destroy:l,deps:h,next:null},i=st.updateQueue,i===null?(i={lastEffect:null,stores:null},st.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,i.lastEffect=s)),s}function Kg(){return bn().memoizedState}function Xu(s,i,l,h){var p=fr();st.flags|=s,p.memoizedState=sl(1|i,l,void 0,h===void 0?null:h)}function Yu(s,i,l,h){var p=bn();h=h===void 0?null:h;var y=void 0;if(St!==null){var T=St.memoizedState;if(y=T.destroy,h!==null&&Bd(h,T.deps)){p.memoizedState=sl(i,l,y,h);return}}st.flags|=s,p.memoizedState=sl(1|i,l,y,h)}function Gg(s,i){return Xu(8390656,8,s,i)}function Wd(s,i){return Yu(2048,8,s,i)}function Qg(s,i){return Yu(4,2,s,i)}function Jg(s,i){return Yu(4,4,s,i)}function Xg(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Yg(s,i,l){return l=l!=null?l.concat([s]):null,Yu(4,4,Xg.bind(null,i,s),l)}function Kd(){}function Zg(s,i){var l=bn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Bd(i,h[1])?h[0]:(l.memoizedState=[s,i],s)}function ey(s,i){var l=bn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Bd(i,h[1])?h[0]:(s=s(),l.memoizedState=[s,i],s)}function ty(s,i,l){return(_i&21)===0?(s.baseState&&(s.baseState=!1,an=!0),s.memoizedState=l):(Wn(l,i)||(l=ai(),st.lanes|=l,vi|=l,s.baseState=!0),i)}function yI(s,i){var l=Oe;Oe=l!==0&&4>l?l:4,s(!0);var h=Ud.transition;Ud.transition={};try{s(!1),i()}finally{Oe=l,Ud.transition=h}}function ny(){return bn().memoizedState}function _I(s,i,l){var h=vs(s);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},ry(s))sy(i,l);else if(l=Dg(s,i,l,h),l!==null){var p=en();Xn(l,s,h,p),iy(l,i,h)}}function vI(s,i,l){var h=vs(s),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(ry(s))sy(i,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var T=i.lastRenderedState,R=y(T,l);if(p.hasEagerState=!0,p.eagerState=R,Wn(R,T)){var N=i.interleaved;N===null?(p.next=p,Dd(i)):(p.next=N.next,N.next=p),i.interleaved=p;return}}catch{}finally{}l=Dg(s,i,p,h),l!==null&&(p=en(),Xn(l,s,h,p),iy(l,i,h))}}function ry(s){var i=s.alternate;return s===st||i!==null&&i===st}function sy(s,i){tl=Ju=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function iy(s,i,l){if((l&4194240)!==0){var h=i.lanes;h&=s.pendingLanes,l|=h,i.lanes=l,ss(s,l)}}var Zu={readContext:Nn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},wI={readContext:Nn,useCallback:function(s,i){return fr().memoizedState=[s,i===void 0?null:i],s},useContext:Nn,useEffect:Gg,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,Xu(4194308,4,Xg.bind(null,i,s),l)},useLayoutEffect:function(s,i){return Xu(4194308,4,s,i)},useInsertionEffect:function(s,i){return Xu(4,2,s,i)},useMemo:function(s,i){var l=fr();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var h=fr();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},h.queue=s,s=s.dispatch=_I.bind(null,st,s),[h.memoizedState,s]},useRef:function(s){var i=fr();return s={current:s},i.memoizedState=s},useState:Wg,useDebugValue:Kd,useDeferredValue:function(s){return fr().memoizedState=s},useTransition:function(){var s=Wg(!1),i=s[0];return s=yI.bind(null,s[1]),fr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var h=st,p=fr();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),xt===null)throw Error(t(349));(_i&30)!==0||Bg(h,i,l)}p.memoizedState=l;var y={value:l,getSnapshot:i};return p.queue=y,Gg($g.bind(null,h,y,s),[s]),h.flags|=2048,sl(9,zg.bind(null,h,y,l,i),void 0,null),l},useId:function(){var s=fr(),i=xt.identifierPrefix;if(nt){var l=jr,h=Mr;l=(h&~(1<<32-Xt(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=nl++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=gI++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},EI={readContext:Nn,useCallback:Zg,useContext:Nn,useEffect:Wd,useImperativeHandle:Yg,useInsertionEffect:Qg,useLayoutEffect:Jg,useMemo:ey,useReducer:qd,useRef:Kg,useState:function(){return qd(rl)},useDebugValue:Kd,useDeferredValue:function(s){var i=bn();return ty(i,St.memoizedState,s)},useTransition:function(){var s=qd(rl)[0],i=bn().memoizedState;return[s,i]},useMutableSource:Fg,useSyncExternalStore:Ug,useId:ny,unstable_isNewReconciler:!1},TI={readContext:Nn,useCallback:Zg,useContext:Nn,useEffect:Wd,useImperativeHandle:Yg,useInsertionEffect:Qg,useLayoutEffect:Jg,useMemo:ey,useReducer:Hd,useRef:Kg,useState:function(){return Hd(rl)},useDebugValue:Kd,useDeferredValue:function(s){var i=bn();return St===null?i.memoizedState=s:ty(i,St.memoizedState,s)},useTransition:function(){var s=Hd(rl)[0],i=bn().memoizedState;return[s,i]},useMutableSource:Fg,useSyncExternalStore:Ug,useId:ny,unstable_isNewReconciler:!1};function Gn(s,i){if(s&&s.defaultProps){i=ae({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}function Gd(s,i,l,h){i=s.memoizedState,l=l(h,i),l=l==null?i:ae({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ec={isMounted:function(s){return(s=s._reactInternals)?Fn(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var h=en(),p=vs(s),y=Ur(h,p);y.payload=i,l!=null&&(y.callback=l),i=ms(s,y,p),i!==null&&(Xn(i,s,p,h),Wu(i,s,p))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var h=en(),p=vs(s),y=Ur(h,p);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=ms(s,y,p),i!==null&&(Xn(i,s,p,h),Wu(i,s,p))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=en(),h=vs(s),p=Ur(l,h);p.tag=2,i!=null&&(p.callback=i),i=ms(s,p,h),i!==null&&(Xn(i,s,h,l),Wu(i,s,h))}};function oy(s,i,l,h,p,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,T):i.prototype&&i.prototype.isPureReactComponent?!qa(l,h)||!qa(p,y):!0}function ay(s,i,l){var h=!1,p=ds,y=i.contextType;return typeof y=="object"&&y!==null?y=Nn(y):(p=on(i)?fi:zt.current,h=i.contextTypes,y=(h=h!=null)?Io(s,p):ds),i=new i(l,y),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ec,s.stateNode=i,i._reactInternals=s,h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=p,s.__reactInternalMemoizedMaskedChildContext=y),i}function ly(s,i,l,h){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==s&&ec.enqueueReplaceState(i,i.state,null)}function Qd(s,i,l,h){var p=s.stateNode;p.props=l,p.state=s.memoizedState,p.refs={},Vd(s);var y=i.contextType;typeof y=="object"&&y!==null?p.context=Nn(y):(y=on(i)?fi:zt.current,p.context=Io(s,y)),p.state=s.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Gd(s,i,y,l),p.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&ec.enqueueReplaceState(p,p.state,null),Ku(s,l,p,h),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308)}function No(s,i){try{var l="",h=i;do l+=Pe(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:i,stack:p,digest:null}}function Jd(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function Xd(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var II=typeof WeakMap=="function"?WeakMap:Map;function uy(s,i,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){ac||(ac=!0,ff=h),Xd(s,i)},l}function cy(s,i,l){l=Ur(-1,l),l.tag=3;var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;l.payload=function(){return h(p)},l.callback=function(){Xd(s,i)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Xd(s,i),typeof h!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),l}function hy(s,i,l){var h=s.pingCache;if(h===null){h=s.pingCache=new II;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(l)||(p.add(l),s=MI.bind(null,s,i,l),i.then(s,s))}function dy(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function fy(s,i,l,h,p){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Ur(-1,1),i.tag=2,ms(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=p,s)}var SI=re.ReactCurrentOwner,an=!1;function Zt(s,i,l,h){i.child=s===null?Og(i,null,l,h):Co(i,s.child,l,h)}function py(s,i,l,h,p){l=l.render;var y=i.ref;return ko(i,p),h=zd(s,i,l,h,y,p),l=$d(),s!==null&&!an?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~p,Br(s,i,p)):(nt&&l&&Ad(i),i.flags|=1,Zt(s,i,h,p),i.child)}function my(s,i,l,h,p){if(s===null){var y=l.type;return typeof y=="function"&&!wf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,gy(s,i,y,h,p)):(s=fc(l.type,null,h,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,(s.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:qa,l(T,h)&&s.ref===i.ref)return Br(s,i,p)}return i.flags|=1,s=Es(y,h),s.ref=i.ref,s.return=i,i.child=s}function gy(s,i,l,h,p){if(s!==null){var y=s.memoizedProps;if(qa(y,h)&&s.ref===i.ref)if(an=!1,i.pendingProps=h=y,(s.lanes&p)!==0)(s.flags&131072)!==0&&(an=!0);else return i.lanes=s.lanes,Br(s,i,p)}return Yd(s,i,l,h,p)}function yy(s,i,l){var h=i.pendingProps,p=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Oo,wn),wn|=l;else{if((l&1073741824)===0)return s=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Ye(Oo,wn),wn|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Ye(Oo,wn),wn|=h}else y!==null?(h=y.baseLanes|l,i.memoizedState=null):h=l,Ye(Oo,wn),wn|=h;return Zt(s,i,p,l),i.child}function _y(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Yd(s,i,l,h,p){var y=on(l)?fi:zt.current;return y=Io(i,y),ko(i,p),l=zd(s,i,l,h,y,p),h=$d(),s!==null&&!an?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~p,Br(s,i,p)):(nt&&h&&Ad(i),i.flags|=1,Zt(s,i,l,p),i.child)}function vy(s,i,l,h,p){if(on(l)){var y=!0;ju(i)}else y=!1;if(ko(i,p),i.stateNode===null)nc(s,i),ay(i,l,h),Qd(i,l,h,p),h=!0;else if(s===null){var T=i.stateNode,R=i.memoizedProps;T.props=R;var N=T.context,q=l.contextType;typeof q=="object"&&q!==null?q=Nn(q):(q=on(l)?fi:zt.current,q=Io(i,q));var Y=l.getDerivedStateFromProps,Z=typeof Y=="function"||typeof T.getSnapshotBeforeUpdate=="function";Z||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==h||N!==q)&&ly(i,T,h,q),ps=!1;var X=i.memoizedState;T.state=X,Ku(i,h,T,p),N=i.memoizedState,R!==h||X!==N||sn.current||ps?(typeof Y=="function"&&(Gd(i,l,Y,h),N=i.memoizedState),(R=ps||oy(i,l,R,h,X,N,q))?(Z||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=N),T.props=h,T.state=N,T.context=q,h=R):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{T=i.stateNode,Vg(s,i),R=i.memoizedProps,q=i.type===i.elementType?R:Gn(i.type,R),T.props=q,Z=i.pendingProps,X=T.context,N=l.contextType,typeof N=="object"&&N!==null?N=Nn(N):(N=on(l)?fi:zt.current,N=Io(i,N));var le=l.getDerivedStateFromProps;(Y=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==Z||X!==N)&&ly(i,T,h,N),ps=!1,X=i.memoizedState,T.state=X,Ku(i,h,T,p);var he=i.memoizedState;R!==Z||X!==he||sn.current||ps?(typeof le=="function"&&(Gd(i,l,le,h),he=i.memoizedState),(q=ps||oy(i,l,q,h,X,he,N)||!1)?(Y||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,he,N),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,he,N)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=he),T.props=h,T.state=he,T.context=N,h=q):(typeof T.componentDidUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),h=!1)}return Zd(s,i,l,h,y,p)}function Zd(s,i,l,h,p,y){_y(s,i);var T=(i.flags&128)!==0;if(!h&&!T)return p&&Sg(i,l,!1),Br(s,i,y);h=i.stateNode,SI.current=i;var R=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,s!==null&&T?(i.child=Co(i,s.child,null,y),i.child=Co(i,null,R,y)):Zt(s,i,R,y),i.memoizedState=h.state,p&&Sg(i,l,!0),i.child}function wy(s){var i=s.stateNode;i.pendingContext?Tg(s,i.pendingContext,i.pendingContext!==i.context):i.context&&Tg(s,i.context,!1),Ld(s,i.containerInfo)}function Ey(s,i,l,h,p){return Ro(),kd(p),i.flags|=256,Zt(s,i,l,h),i.child}var ef={dehydrated:null,treeContext:null,retryLane:0};function tf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ty(s,i,l){var h=i.pendingProps,p=rt.current,y=!1,T=(i.flags&128)!==0,R;if((R=T)||(R=s!==null&&s.memoizedState===null?!1:(p&2)!==0),R?(y=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(p|=1),Ye(rt,p&1),s===null)return Pd(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=h.children,s=h.fallback,y?(h=i.mode,y=i.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=pc(T,h,0,null),s=Ii(s,h,l,null),y.return=i,s.return=i,y.sibling=s,i.child=y,i.child.memoizedState=tf(l),i.memoizedState=ef,s):nf(i,T));if(p=s.memoizedState,p!==null&&(R=p.dehydrated,R!==null))return AI(s,i,T,h,R,p,l);if(y){y=h.fallback,T=i.mode,p=s.child,R=p.sibling;var N={mode:"hidden",children:h.children};return(T&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=N,i.deletions=null):(h=Es(p,N),h.subtreeFlags=p.subtreeFlags&14680064),R!==null?y=Es(R,y):(y=Ii(y,T,l,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,T=s.child.memoizedState,T=T===null?tf(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=s.childLanes&~l,i.memoizedState=ef,h}return y=s.child,s=y.sibling,h=Es(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=h,i.memoizedState=null,h}function nf(s,i){return i=pc({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function tc(s,i,l,h){return h!==null&&kd(h),Co(i,s.child,null,l),s=nf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function AI(s,i,l,h,p,y,T){if(l)return i.flags&256?(i.flags&=-257,h=Jd(Error(t(422))),tc(s,i,T,h)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(y=h.fallback,p=i.mode,h=pc({mode:"visible",children:h.children},p,0,null),y=Ii(y,p,T,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&Co(i,s.child,null,T),i.child.memoizedState=tf(T),i.memoizedState=ef,y);if((i.mode&1)===0)return tc(s,i,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(t(419)),h=Jd(y,h,void 0),tc(s,i,T,h)}if(R=(T&s.childLanes)!==0,an||R){if(h=xt,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Fr(s,p),Xn(h,s,p,-1))}return vf(),h=Jd(Error(t(421))),tc(s,i,T,h)}return p.data==="$?"?(i.flags|=128,i.child=s.child,i=jI.bind(null,s),p._reactRetry=i,null):(s=y.treeContext,vn=cs(p.nextSibling),_n=i,nt=!0,Kn=null,s!==null&&(kn[xn++]=Mr,kn[xn++]=jr,kn[xn++]=pi,Mr=s.id,jr=s.overflow,pi=i),i=nf(i,h.children),i.flags|=4096,i)}function Iy(s,i,l){s.lanes|=i;var h=s.alternate;h!==null&&(h.lanes|=i),Od(s.return,i,l)}function rf(s,i,l,h,p){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function Sy(s,i,l){var h=i.pendingProps,p=h.revealOrder,y=h.tail;if(Zt(s,i,h.children,l),h=rt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Iy(s,l,i);else if(s.tag===19)Iy(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}if(Ye(rt,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)s=l.alternate,s!==null&&Gu(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),rf(i,!1,p,l,y);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&Gu(s)===null){i.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}rf(i,!0,l,null,y);break;case"together":rf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function nc(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Br(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),vi|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=Es(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=Es(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function RI(s,i,l){switch(i.tag){case 3:wy(i),Ro();break;case 5:jg(i);break;case 1:on(i.type)&&ju(i);break;case 4:Ld(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;Ye(qu,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Ye(rt,rt.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Ty(s,i,l):(Ye(rt,rt.current&1),s=Br(s,i,l),s!==null?s.sibling:null);Ye(rt,rt.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(s.flags&128)!==0){if(h)return Sy(s,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ye(rt,rt.current),h)break;return null;case 22:case 23:return i.lanes=0,yy(s,i,l)}return Br(s,i,l)}var Ay,sf,Ry,Cy;Ay=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},sf=function(){},Ry=function(s,i,l,h){var p=s.memoizedProps;if(p!==h){s=i.stateNode,yi(dr.current);var y=null;switch(l){case"input":p=Js(s,p),h=Js(s,h),y=[];break;case"select":p=ae({},p,{value:void 0}),h=ae({},h,{value:void 0}),y=[];break;case"textarea":p=va(s,p),h=va(s,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(s.onclick=Vu)}Aa(l,h);var T;l=null;for(q in p)if(!h.hasOwnProperty(q)&&p.hasOwnProperty(q)&&p[q]!=null)if(q==="style"){var R=p[q];for(T in R)R.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in h){var N=h[q];if(R=p!=null?p[q]:void 0,h.hasOwnProperty(q)&&N!==R&&(N!=null||R!=null))if(q==="style")if(R){for(T in R)!R.hasOwnProperty(T)||N&&N.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in N)N.hasOwnProperty(T)&&R[T]!==N[T]&&(l||(l={}),l[T]=N[T])}else l||(y||(y=[]),y.push(q,l)),l=N;else q==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(y=y||[]).push(q,N)):q==="children"?typeof N!="string"&&typeof N!="number"||(y=y||[]).push(q,""+N):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(N!=null&&q==="onScroll"&&Ze("scroll",s),y||R===N||(y=[])):(y=y||[]).push(q,N))}l&&(y=y||[]).push("style",l);var q=y;(i.updateQueue=q)&&(i.flags|=4)}},Cy=function(s,i,l,h){l!==h&&(i.flags|=4)};function il(s,i){if(!nt)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function qt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(i)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=h,s.childLanes=l,i}function CI(s,i,l){var h=i.pendingProps;switch(Rd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return on(i.type)&&Mu(),qt(i),null;case 3:return h=i.stateNode,xo(),et(sn),et(zt),Fd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(zu(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kn!==null&&(gf(Kn),Kn=null))),sf(s,i),qt(i),null;case 5:Md(i);var p=yi(el.current);if(l=i.type,s!==null&&i.stateNode!=null)Ry(s,i,l,h,p),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return qt(i),null}if(s=yi(dr.current),zu(i)){h=i.stateNode,l=i.type;var y=i.memoizedProps;switch(h[hr]=i,h[Qa]=y,s=(i.mode&1)!==0,l){case"dialog":Ze("cancel",h),Ze("close",h);break;case"iframe":case"object":case"embed":Ze("load",h);break;case"video":case"audio":for(p=0;p<Wa.length;p++)Ze(Wa[p],h);break;case"source":Ze("error",h);break;case"img":case"image":case"link":Ze("error",h),Ze("load",h);break;case"details":Ze("toggle",h);break;case"input":qi(h,y),Ze("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Ze("invalid",h);break;case"textarea":Wi(h,y),Ze("invalid",h)}Aa(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var R=y[T];T==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&Du(h.textContent,R,s),p=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&Du(h.textContent,R,s),p=["children",""+R]):o.hasOwnProperty(T)&&R!=null&&T==="onScroll"&&Ze("scroll",h)}switch(l){case"input":Ar(h),ou(h,y,!0);break;case"textarea":Ar(h),wa(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Vu)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Et(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof h.is=="string"?s=T.createElement(l,{is:h.is}):(s=T.createElement(l),l==="select"&&(T=s,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):s=T.createElementNS(s,l),s[hr]=i,s[Qa]=h,Ay(s,i,!1,!1),i.stateNode=s;e:{switch(T=Ra(l,h),l){case"dialog":Ze("cancel",s),Ze("close",s),p=h;break;case"iframe":case"object":case"embed":Ze("load",s),p=h;break;case"video":case"audio":for(p=0;p<Wa.length;p++)Ze(Wa[p],s);p=h;break;case"source":Ze("error",s),p=h;break;case"img":case"image":case"link":Ze("error",s),Ze("load",s),p=h;break;case"details":Ze("toggle",s),p=h;break;case"input":qi(s,h),p=Js(s,h),Ze("invalid",s);break;case"option":p=h;break;case"select":s._wrapperState={wasMultiple:!!h.multiple},p=ae({},h,{value:void 0}),Ze("invalid",s);break;case"textarea":Wi(s,h),p=va(s,h),Ze("invalid",s);break;default:p=h}Aa(l,p),R=p;for(y in R)if(R.hasOwnProperty(y)){var N=R[y];y==="style"?Ia(s,N):y==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Ea(s,N)):y==="children"?typeof N=="string"?(l!=="textarea"||N!=="")&&Zr(s,N):typeof N=="number"&&Zr(s,""+N):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?N!=null&&y==="onScroll"&&Ze("scroll",s):N!=null&&$(s,y,N,T))}switch(l){case"input":Ar(s),ou(s,h,!1);break;case"textarea":Ar(s),wa(s);break;case"option":h.value!=null&&s.setAttribute("value",""+$e(h.value));break;case"select":s.multiple=!!h.multiple,y=h.value,y!=null?Cr(s,!!h.multiple,y,!1):h.defaultValue!=null&&Cr(s,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(s.onclick=Vu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return qt(i),null;case 6:if(s&&i.stateNode!=null)Cy(s,i,s.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=yi(el.current),yi(dr.current),zu(i)){if(h=i.stateNode,l=i.memoizedProps,h[hr]=i,(y=h.nodeValue!==l)&&(s=_n,s!==null))switch(s.tag){case 3:Du(h.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Du(h.nodeValue,l,(s.mode&1)!==0)}y&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[hr]=i,i.stateNode=h}return qt(i),null;case 13:if(et(rt),h=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(nt&&vn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)xg(),Ro(),i.flags|=98560,y=!1;else if(y=zu(i),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[hr]=i}else Ro(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),y=!1}else Kn!==null&&(gf(Kn),Kn=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(rt.current&1)!==0?At===0&&(At=3):vf())),i.updateQueue!==null&&(i.flags|=4),qt(i),null);case 4:return xo(),sf(s,i),s===null&&Ka(i.stateNode.containerInfo),qt(i),null;case 10:return bd(i.type._context),qt(i),null;case 17:return on(i.type)&&Mu(),qt(i),null;case 19:if(et(rt),y=i.memoizedState,y===null)return qt(i),null;if(h=(i.flags&128)!==0,T=y.rendering,T===null)if(h)il(y,!1);else{if(At!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(T=Gu(s),T!==null){for(i.flags|=128,il(y,!1),h=T.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)y=l,s=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,s=T.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return Ye(rt,rt.current&1|2),i.child}s=s.sibling}y.tail!==null&&Xe()>Do&&(i.flags|=128,h=!0,il(y,!1),i.lanes=4194304)}else{if(!h)if(s=Gu(T),s!==null){if(i.flags|=128,h=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),il(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!nt)return qt(i),null}else 2*Xe()-y.renderingStartTime>Do&&l!==1073741824&&(i.flags|=128,h=!0,il(y,!1),i.lanes=4194304);y.isBackwards?(T.sibling=i.child,i.child=T):(l=y.last,l!==null?l.sibling=T:i.child=T,y.last=T)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=Xe(),i.sibling=null,l=rt.current,Ye(rt,h?l&1|2:l&1),i):(qt(i),null);case 22:case 23:return _f(),h=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(wn&1073741824)!==0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function PI(s,i){switch(Rd(i),i.tag){case 1:return on(i.type)&&Mu(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return xo(),et(sn),et(zt),Fd(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Md(i),null;case 13:if(et(rt),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ro()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return et(rt),null;case 4:return xo(),null;case 10:return bd(i.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var rc=!1,Ht=!1,kI=typeof WeakSet=="function"?WeakSet:Set,ce=null;function bo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ot(s,i,h)}else l.current=null}function of(s,i,l){try{l()}catch(h){ot(s,i,h)}}var Py=!1;function xI(s,i){if(yd=as,s=og(),ud(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,R=-1,N=-1,q=0,Y=0,Z=s,X=null;t:for(;;){for(var le;Z!==l||p!==0&&Z.nodeType!==3||(R=T+p),Z!==y||h!==0&&Z.nodeType!==3||(N=T+h),Z.nodeType===3&&(T+=Z.nodeValue.length),(le=Z.firstChild)!==null;)X=Z,Z=le;for(;;){if(Z===s)break t;if(X===l&&++q===p&&(R=T),X===y&&++Y===h&&(N=T),(le=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=le}l=R===-1||N===-1?null:{start:R,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(_d={focusedElem:s,selectionRange:l},as=!1,ce=i;ce!==null;)if(i=ce,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,ce=s;else for(;ce!==null;){i=ce;try{var he=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,ut=he.memoizedState,B=i.stateNode,V=B.getSnapshotBeforeUpdate(i.elementType===i.type?de:Gn(i.type,de),ut);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){ot(i,i.return,te)}if(s=i.sibling,s!==null){s.return=i.return,ce=s;break}ce=i.return}return he=Py,Py=!1,he}function ol(s,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&s)===s){var y=p.destroy;p.destroy=void 0,y!==void 0&&of(i,l,y)}p=p.next}while(p!==h)}}function sc(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function af(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function ky(s){var i=s.alternate;i!==null&&(s.alternate=null,ky(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[hr],delete i[Qa],delete i[Td],delete i[dI],delete i[fI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function xy(s){return s.tag===5||s.tag===3||s.tag===4}function Ny(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||xy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function lf(s,i,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Vu));else if(h!==4&&(s=s.child,s!==null))for(lf(s,i,l),s=s.sibling;s!==null;)lf(s,i,l),s=s.sibling}function uf(s,i,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(h!==4&&(s=s.child,s!==null))for(uf(s,i,l),s=s.sibling;s!==null;)uf(s,i,l),s=s.sibling}var Lt=null,Qn=!1;function gs(s,i,l){for(l=l.child;l!==null;)by(s,i,l),l=l.sibling}function by(s,i,l){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ii,l)}catch{}switch(l.tag){case 5:Ht||bo(l,i);case 6:var h=Lt,p=Qn;Lt=null,gs(s,i,l),Lt=h,Qn=p,Lt!==null&&(Qn?(s=Lt,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Lt.removeChild(l.stateNode));break;case 18:Lt!==null&&(Qn?(s=Lt,l=l.stateNode,s.nodeType===8?Ed(s.parentNode,l):s.nodeType===1&&Ed(s,l),qn(s)):Ed(Lt,l.stateNode));break;case 4:h=Lt,p=Qn,Lt=l.stateNode.containerInfo,Qn=!0,gs(s,i,l),Lt=h,Qn=p;break;case 0:case 11:case 14:case 15:if(!Ht&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&of(l,i,T),p=p.next}while(p!==h)}gs(s,i,l);break;case 1:if(!Ht&&(bo(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(R){ot(l,i,R)}gs(s,i,l);break;case 21:gs(s,i,l);break;case 22:l.mode&1?(Ht=(h=Ht)||l.memoizedState!==null,gs(s,i,l),Ht=h):gs(s,i,l);break;default:gs(s,i,l)}}function Oy(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new kI),i.forEach(function(h){var p=FI.bind(null,s,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Jn(s,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=s,T=i,R=T;e:for(;R!==null;){switch(R.tag){case 5:Lt=R.stateNode,Qn=!1;break e;case 3:Lt=R.stateNode.containerInfo,Qn=!0;break e;case 4:Lt=R.stateNode.containerInfo,Qn=!0;break e}R=R.return}if(Lt===null)throw Error(t(160));by(y,T,p),Lt=null,Qn=!1;var N=p.alternate;N!==null&&(N.return=null),p.return=null}catch(q){ot(p,i,q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Dy(i,s),i=i.sibling}function Dy(s,i){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Jn(i,s),pr(s),h&4){try{ol(3,s,s.return),sc(3,s)}catch(de){ot(s,s.return,de)}try{ol(5,s,s.return)}catch(de){ot(s,s.return,de)}}break;case 1:Jn(i,s),pr(s),h&512&&l!==null&&bo(l,l.return);break;case 5:if(Jn(i,s),pr(s),h&512&&l!==null&&bo(l,l.return),s.flags&32){var p=s.stateNode;try{Zr(p,"")}catch(de){ot(s,s.return,de)}}if(h&4&&(p=s.stateNode,p!=null)){var y=s.memoizedProps,T=l!==null?l.memoizedProps:y,R=s.type,N=s.updateQueue;if(s.updateQueue=null,N!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&ya(p,y),Ra(R,T);var q=Ra(R,y);for(T=0;T<N.length;T+=2){var Y=N[T],Z=N[T+1];Y==="style"?Ia(p,Z):Y==="dangerouslySetInnerHTML"?Ea(p,Z):Y==="children"?Zr(p,Z):$(p,Y,Z,q)}switch(R){case"input":_a(p,y);break;case"textarea":Ki(p,y);break;case"select":var X=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?Cr(p,!!y.multiple,le,!1):X!==!!y.multiple&&(y.defaultValue!=null?Cr(p,!!y.multiple,y.defaultValue,!0):Cr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Qa]=y}catch(de){ot(s,s.return,de)}}break;case 6:if(Jn(i,s),pr(s),h&4){if(s.stateNode===null)throw Error(t(162));p=s.stateNode,y=s.memoizedProps;try{p.nodeValue=y}catch(de){ot(s,s.return,de)}}break;case 3:if(Jn(i,s),pr(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{qn(i.containerInfo)}catch(de){ot(s,s.return,de)}break;case 4:Jn(i,s),pr(s);break;case 13:Jn(i,s),pr(s),p=s.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(df=Xe())),h&4&&Oy(s);break;case 22:if(Y=l!==null&&l.memoizedState!==null,s.mode&1?(Ht=(q=Ht)||Y,Jn(i,s),Ht=q):Jn(i,s),pr(s),h&8192){if(q=s.memoizedState!==null,(s.stateNode.isHidden=q)&&!Y&&(s.mode&1)!==0)for(ce=s,Y=s.child;Y!==null;){for(Z=ce=Y;ce!==null;){switch(X=ce,le=X.child,X.tag){case 0:case 11:case 14:case 15:ol(4,X,X.return);break;case 1:bo(X,X.return);var he=X.stateNode;if(typeof he.componentWillUnmount=="function"){h=X,l=X.return;try{i=h,he.props=i.memoizedProps,he.state=i.memoizedState,he.componentWillUnmount()}catch(de){ot(h,l,de)}}break;case 5:bo(X,X.return);break;case 22:if(X.memoizedState!==null){My(Z);continue}}le!==null?(le.return=X,ce=le):My(Z)}Y=Y.sibling}e:for(Y=null,Z=s;;){if(Z.tag===5){if(Y===null){Y=Z;try{p=Z.stateNode,q?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=Z.stateNode,N=Z.memoizedProps.style,T=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=Ta("display",T))}catch(de){ot(s,s.return,de)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=q?"":Z.memoizedProps}catch(de){ot(s,s.return,de)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===s)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===s)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===s)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Jn(i,s),pr(s),h&4&&Oy(s);break;case 21:break;default:Jn(i,s),pr(s)}}function pr(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(xy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Zr(p,""),h.flags&=-33);var y=Ny(s);uf(s,y,p);break;case 3:case 4:var T=h.stateNode.containerInfo,R=Ny(s);lf(s,R,T);break;default:throw Error(t(161))}}catch(N){ot(s,s.return,N)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function NI(s,i,l){ce=s,Vy(s)}function Vy(s,i,l){for(var h=(s.mode&1)!==0;ce!==null;){var p=ce,y=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||rc;if(!T){var R=p.alternate,N=R!==null&&R.memoizedState!==null||Ht;R=rc;var q=Ht;if(rc=T,(Ht=N)&&!q)for(ce=p;ce!==null;)T=ce,N=T.child,T.tag===22&&T.memoizedState!==null?jy(p):N!==null?(N.return=T,ce=N):jy(p);for(;y!==null;)ce=y,Vy(y),y=y.sibling;ce=p,rc=R,Ht=q}Ly(s)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,ce=y):Ly(s)}}function Ly(s){for(;ce!==null;){var i=ce;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ht||sc(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Ht)if(l===null)h.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:Gn(i.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Mg(i,y,h);break;case 3:var T=i.updateQueue;if(T!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Mg(i,T,l)}break;case 5:var R=i.stateNode;if(l===null&&i.flags&4){l=R;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&l.focus();break;case"img":N.src&&(l.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var q=i.alternate;if(q!==null){var Y=q.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&qn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||i.flags&512&&af(i)}catch(X){ot(i,i.return,X)}}if(i===s){ce=null;break}if(l=i.sibling,l!==null){l.return=i.return,ce=l;break}ce=i.return}}function My(s){for(;ce!==null;){var i=ce;if(i===s){ce=null;break}var l=i.sibling;if(l!==null){l.return=i.return,ce=l;break}ce=i.return}}function jy(s){for(;ce!==null;){var i=ce;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{sc(4,i)}catch(N){ot(i,l,N)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(N){ot(i,p,N)}}var y=i.return;try{af(i)}catch(N){ot(i,y,N)}break;case 5:var T=i.return;try{af(i)}catch(N){ot(i,T,N)}}}catch(N){ot(i,i.return,N)}if(i===s){ce=null;break}var R=i.sibling;if(R!==null){R.return=i.return,ce=R;break}ce=i.return}}var bI=Math.ceil,ic=re.ReactCurrentDispatcher,cf=re.ReactCurrentOwner,On=re.ReactCurrentBatchConfig,Fe=0,xt=null,mt=null,Mt=0,wn=0,Oo=hs(0),At=0,al=null,vi=0,oc=0,hf=0,ll=null,ln=null,df=0,Do=1/0,zr=null,ac=!1,ff=null,ys=null,lc=!1,_s=null,uc=0,ul=0,pf=null,cc=-1,hc=0;function en(){return(Fe&6)!==0?Xe():cc!==-1?cc:cc=Xe()}function vs(s){return(s.mode&1)===0?1:(Fe&2)!==0&&Mt!==0?Mt&-Mt:mI.transition!==null?(hc===0&&(hc=ai()),hc):(s=Oe,s!==0||(s=window.event,s=s===void 0?16:Ma(s.type)),s)}function Xn(s,i,l,h){if(50<ul)throw ul=0,pf=null,Error(t(185));rs(s,l,h),((Fe&2)===0||s!==xt)&&(s===xt&&((Fe&2)===0&&(oc|=l),At===4&&ws(s,Mt)),un(s,h),l===1&&Fe===0&&(i.mode&1)===0&&(Do=Xe()+500,Fu&&fs()))}function un(s,i){var l=s.callbackNode;xr(s,i);var h=oi(s,s===xt?Mt:0);if(h===0)l!==null&&ba(l),s.callbackNode=null,s.callbackPriority=0;else if(i=h&-h,s.callbackPriority!==i){if(l!=null&&ba(l),i===1)s.tag===0?pI(Uy.bind(null,s)):Ag(Uy.bind(null,s)),cI(function(){(Fe&6)===0&&fs()}),l=null;else{switch(is(h)){case 1:l=si;break;case 4:l=es;break;case 16:l=Rn;break;case 536870912:l=hu;break;default:l=Rn}l=Gy(l,Fy.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function Fy(s,i){if(cc=-1,hc=0,(Fe&6)!==0)throw Error(t(327));var l=s.callbackNode;if(Vo()&&s.callbackNode!==l)return null;var h=oi(s,s===xt?Mt:0);if(h===0)return null;if((h&30)!==0||(h&s.expiredLanes)!==0||i)i=dc(s,h);else{i=h;var p=Fe;Fe|=2;var y=zy();(xt!==s||Mt!==i)&&(zr=null,Do=Xe()+500,Ei(s,i));do try{VI();break}catch(R){By(s,R)}while(!0);Nd(),ic.current=y,Fe=p,mt!==null?i=0:(xt=null,Mt=0,i=At)}if(i!==0){if(i===2&&(p=mn(s),p!==0&&(h=p,i=mf(s,p))),i===1)throw l=al,Ei(s,0),ws(s,h),un(s,Xe()),l;if(i===6)ws(s,h);else{if(p=s.current.alternate,(h&30)===0&&!OI(p)&&(i=dc(s,h),i===2&&(y=mn(s),y!==0&&(h=y,i=mf(s,y))),i===1))throw l=al,Ei(s,0),ws(s,h),un(s,Xe()),l;switch(s.finishedWork=p,s.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ti(s,ln,zr);break;case 3:if(ws(s,h),(h&130023424)===h&&(i=df+500-Xe(),10<i)){if(oi(s,0)!==0)break;if(p=s.suspendedLanes,(p&h)!==h){en(),s.pingedLanes|=s.suspendedLanes&p;break}s.timeoutHandle=wd(Ti.bind(null,s,ln,zr),i);break}Ti(s,ln,zr);break;case 4:if(ws(s,h),(h&4194240)===h)break;for(i=s.eventTimes,p=-1;0<h;){var T=31-Xt(h);y=1<<T,T=i[T],T>p&&(p=T),h&=~y}if(h=p,h=Xe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*bI(h/1960))-h,10<h){s.timeoutHandle=wd(Ti.bind(null,s,ln,zr),h);break}Ti(s,ln,zr);break;case 5:Ti(s,ln,zr);break;default:throw Error(t(329))}}}return un(s,Xe()),s.callbackNode===l?Fy.bind(null,s):null}function mf(s,i){var l=ll;return s.current.memoizedState.isDehydrated&&(Ei(s,i).flags|=256),s=dc(s,i),s!==2&&(i=ln,ln=l,i!==null&&gf(i)),s}function gf(s){ln===null?ln=s:ln.push.apply(ln,s)}function OI(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Wn(y(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ws(s,i){for(i&=~hf,i&=~oc,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-Xt(i),h=1<<l;s[l]=-1,i&=~h}}function Uy(s){if((Fe&6)!==0)throw Error(t(327));Vo();var i=oi(s,0);if((i&1)===0)return un(s,Xe()),null;var l=dc(s,i);if(s.tag!==0&&l===2){var h=mn(s);h!==0&&(i=h,l=mf(s,h))}if(l===1)throw l=al,Ei(s,0),ws(s,i),un(s,Xe()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Ti(s,ln,zr),un(s,Xe()),null}function yf(s,i){var l=Fe;Fe|=1;try{return s(i)}finally{Fe=l,Fe===0&&(Do=Xe()+500,Fu&&fs())}}function wi(s){_s!==null&&_s.tag===0&&(Fe&6)===0&&Vo();var i=Fe;Fe|=1;var l=On.transition,h=Oe;try{if(On.transition=null,Oe=1,s)return s()}finally{Oe=h,On.transition=l,Fe=i,(Fe&6)===0&&fs()}}function _f(){wn=Oo.current,et(Oo)}function Ei(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,uI(l)),mt!==null)for(l=mt.return;l!==null;){var h=l;switch(Rd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Mu();break;case 3:xo(),et(sn),et(zt),Fd();break;case 5:Md(h);break;case 4:xo();break;case 13:et(rt);break;case 19:et(rt);break;case 10:bd(h.type._context);break;case 22:case 23:_f()}l=l.return}if(xt=s,mt=s=Es(s.current,null),Mt=wn=i,At=0,al=null,hf=oc=vi=0,ln=ll=null,gi!==null){for(i=0;i<gi.length;i++)if(l=gi[i],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,h.next=T}l.pending=h}gi=null}return s}function By(s,i){do{var l=mt;try{if(Nd(),Qu.current=Zu,Ju){for(var h=st.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Ju=!1}if(_i=0,kt=St=st=null,tl=!1,nl=0,cf.current=null,l===null||l.return===null){At=1,al=i,mt=null;break}e:{var y=s,T=l.return,R=l,N=i;if(i=Mt,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var q=N,Y=R,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=dy(T);if(le!==null){le.flags&=-257,fy(le,T,R,y,i),le.mode&1&&hy(y,q,i),i=le,N=q;var he=i.updateQueue;if(he===null){var de=new Set;de.add(N),i.updateQueue=de}else he.add(N);break e}else{if((i&1)===0){hy(y,q,i),vf();break e}N=Error(t(426))}}else if(nt&&R.mode&1){var ut=dy(T);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),fy(ut,T,R,y,i),kd(No(N,R));break e}}y=N=No(N,R),At!==4&&(At=2),ll===null?ll=[y]:ll.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var B=uy(y,N,i);Lg(y,B);break e;case 1:R=N;var V=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ys===null||!ys.has(z)))){y.flags|=65536,i&=-i,y.lanes|=i;var te=cy(y,R,i);Lg(y,te);break e}}y=y.return}while(y!==null)}qy(l)}catch(pe){i=pe,mt===l&&l!==null&&(mt=l=l.return);continue}break}while(!0)}function zy(){var s=ic.current;return ic.current=Zu,s===null?Zu:s}function vf(){(At===0||At===3||At===2)&&(At=4),xt===null||(vi&268435455)===0&&(oc&268435455)===0||ws(xt,Mt)}function dc(s,i){var l=Fe;Fe|=2;var h=zy();(xt!==s||Mt!==i)&&(zr=null,Ei(s,i));do try{DI();break}catch(p){By(s,p)}while(!0);if(Nd(),Fe=l,ic.current=h,mt!==null)throw Error(t(261));return xt=null,Mt=0,At}function DI(){for(;mt!==null;)$y(mt)}function VI(){for(;mt!==null&&!uu();)$y(mt)}function $y(s){var i=Ky(s.alternate,s,wn);s.memoizedProps=s.pendingProps,i===null?qy(s):mt=i,cf.current=null}function qy(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=CI(l,i,wn),l!==null){mt=l;return}}else{if(l=PI(l,i),l!==null){l.flags&=32767,mt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{At=6,mt=null;return}}if(i=i.sibling,i!==null){mt=i;return}mt=i=s}while(i!==null);At===0&&(At=5)}function Ti(s,i,l){var h=Oe,p=On.transition;try{On.transition=null,Oe=1,LI(s,i,l,h)}finally{On.transition=p,Oe=h}return null}function LI(s,i,l,h){do Vo();while(_s!==null);if((Fe&6)!==0)throw Error(t(327));l=s.finishedWork;var p=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=l.lanes|l.childLanes;if(Qe(s,y),s===xt&&(mt=xt=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||lc||(lc=!0,Gy(Rn,function(){return Vo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=On.transition,On.transition=null;var T=Oe;Oe=1;var R=Fe;Fe|=4,cf.current=null,xI(s,l),Dy(l,s),nI(_d),as=!!yd,_d=yd=null,s.current=l,NI(l),td(),Fe=R,Oe=T,On.transition=y}else s.current=l;if(lc&&(lc=!1,_s=s,uc=p),y=s.pendingLanes,y===0&&(ys=null),du(l.stateNode),un(s,Xe()),i!==null)for(h=s.onRecoverableError,l=0;l<i.length;l++)p=i[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(ac)throw ac=!1,s=ff,ff=null,s;return(uc&1)!==0&&s.tag!==0&&Vo(),y=s.pendingLanes,(y&1)!==0?s===pf?ul++:(ul=0,pf=s):ul=0,fs(),null}function Vo(){if(_s!==null){var s=is(uc),i=On.transition,l=Oe;try{if(On.transition=null,Oe=16>s?16:s,_s===null)var h=!1;else{if(s=_s,_s=null,uc=0,(Fe&6)!==0)throw Error(t(331));var p=Fe;for(Fe|=4,ce=s.current;ce!==null;){var y=ce,T=y.child;if((ce.flags&16)!==0){var R=y.deletions;if(R!==null){for(var N=0;N<R.length;N++){var q=R[N];for(ce=q;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:ol(8,Y,y)}var Z=Y.child;if(Z!==null)Z.return=Y,ce=Z;else for(;ce!==null;){Y=ce;var X=Y.sibling,le=Y.return;if(ky(Y),Y===q){ce=null;break}if(X!==null){X.return=le,ce=X;break}ce=le}}}var he=y.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var ut=de.sibling;de.sibling=null,de=ut}while(de!==null)}}ce=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,ce=T;else e:for(;ce!==null;){if(y=ce,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ol(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,ce=B;break e}ce=y.return}}var V=s.current;for(ce=V;ce!==null;){T=ce;var z=T.child;if((T.subtreeFlags&2064)!==0&&z!==null)z.return=T,ce=z;else e:for(T=V;ce!==null;){if(R=ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:sc(9,R)}}catch(pe){ot(R,R.return,pe)}if(R===T){ce=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,ce=te;break e}ce=R.return}}if(Fe=p,fs(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ii,s)}catch{}h=!0}return h}finally{Oe=l,On.transition=i}}return!1}function Hy(s,i,l){i=No(l,i),i=uy(s,i,1),s=ms(s,i,1),i=en(),s!==null&&(rs(s,1,i),un(s,i))}function ot(s,i,l){if(s.tag===3)Hy(s,s,l);else for(;i!==null;){if(i.tag===3){Hy(i,s,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ys===null||!ys.has(h))){s=No(l,s),s=cy(i,s,1),i=ms(i,s,1),s=en(),i!==null&&(rs(i,1,s),un(i,s));break}}i=i.return}}function MI(s,i,l){var h=s.pingCache;h!==null&&h.delete(i),i=en(),s.pingedLanes|=s.suspendedLanes&l,xt===s&&(Mt&l)===l&&(At===4||At===3&&(Mt&130023424)===Mt&&500>Xe()-df?Ei(s,0):hf|=l),un(s,i)}function Wy(s,i){i===0&&((s.mode&1)===0?i=1:(i=ro,ro<<=1,(ro&130023424)===0&&(ro=4194304)));var l=en();s=Fr(s,i),s!==null&&(rs(s,i,l),un(s,l))}function jI(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),Wy(s,l)}function FI(s,i){var l=0;switch(s.tag){case 13:var h=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=s.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Wy(s,l)}var Ky;Ky=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||sn.current)an=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return an=!1,RI(s,i,l);an=(s.flags&131072)!==0}else an=!1,nt&&(i.flags&1048576)!==0&&Rg(i,Bu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;nc(s,i),s=i.pendingProps;var p=Io(i,zt.current);ko(i,l),p=zd(null,i,h,s,p,l);var y=$d();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,on(h)?(y=!0,ju(i)):y=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Vd(i),p.updater=ec,i.stateNode=p,p._reactInternals=i,Qd(i,h,s,l),i=Zd(null,i,h,!0,y,l)):(i.tag=0,nt&&y&&Ad(i),Zt(null,i,p,l),i=i.child),i;case 16:h=i.elementType;e:{switch(nc(s,i),s=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=BI(h),s=Gn(h,s),p){case 0:i=Yd(null,i,h,s,l);break e;case 1:i=vy(null,i,h,s,l);break e;case 11:i=py(null,i,h,s,l);break e;case 14:i=my(null,i,h,Gn(h.type,s),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Gn(h,p),Yd(s,i,h,p,l);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Gn(h,p),vy(s,i,h,p,l);case 3:e:{if(wy(i),s===null)throw Error(t(387));h=i.pendingProps,y=i.memoizedState,p=y.element,Vg(s,i),Ku(i,h,null,l);var T=i.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){p=No(Error(t(423)),i),i=Ey(s,i,h,l,p);break e}else if(h!==p){p=No(Error(t(424)),i),i=Ey(s,i,h,l,p);break e}else for(vn=cs(i.stateNode.containerInfo.firstChild),_n=i,nt=!0,Kn=null,l=Og(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ro(),h===p){i=Br(s,i,l);break e}Zt(s,i,h,l)}i=i.child}return i;case 5:return jg(i),s===null&&Pd(i),h=i.type,p=i.pendingProps,y=s!==null?s.memoizedProps:null,T=p.children,vd(h,p)?T=null:y!==null&&vd(h,y)&&(i.flags|=32),_y(s,i),Zt(s,i,T,l),i.child;case 6:return s===null&&Pd(i),null;case 13:return Ty(s,i,l);case 4:return Ld(i,i.stateNode.containerInfo),h=i.pendingProps,s===null?i.child=Co(i,null,h,l):Zt(s,i,h,l),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Gn(h,p),py(s,i,h,p,l);case 7:return Zt(s,i,i.pendingProps,l),i.child;case 8:return Zt(s,i,i.pendingProps.children,l),i.child;case 12:return Zt(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,y=i.memoizedProps,T=p.value,Ye(qu,h._currentValue),h._currentValue=T,y!==null)if(Wn(y.value,T)){if(y.children===p.children&&!sn.current){i=Br(s,i,l);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var R=y.dependencies;if(R!==null){T=y.child;for(var N=R.firstContext;N!==null;){if(N.context===h){if(y.tag===1){N=Ur(-1,l&-l),N.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var Y=q.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),q.pending=N}}y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),Od(y.return,l,i),R.lanes|=l;break}N=N.next}}else if(y.tag===10)T=y.type===i.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,R=T.alternate,R!==null&&(R.lanes|=l),Od(T,l,i),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===i){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Zt(s,i,p.children,l),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,ko(i,l),p=Nn(p),h=h(p),i.flags|=1,Zt(s,i,h,l),i.child;case 14:return h=i.type,p=Gn(h,i.pendingProps),p=Gn(h.type,p),my(s,i,h,p,l);case 15:return gy(s,i,i.type,i.pendingProps,l);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Gn(h,p),nc(s,i),i.tag=1,on(h)?(s=!0,ju(i)):s=!1,ko(i,l),ay(i,h,p),Qd(i,h,p,l),Zd(null,i,h,!0,s,l);case 19:return Sy(s,i,l);case 22:return yy(s,i,l)}throw Error(t(156,i.tag))};function Gy(s,i){return to(s,i)}function UI(s,i,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(s,i,l,h){return new UI(s,i,l,h)}function wf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function BI(s){if(typeof s=="function")return wf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===wt)return 14}return 2}function Es(s,i){var l=s.alternate;return l===null?(l=Dn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function fc(s,i,l,h,p,y){var T=2;if(h=s,typeof s=="function")wf(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case b:return Ii(l.children,p,y,i);case A:T=8,p|=8;break;case P:return s=Dn(12,l,i,p|2),s.elementType=P,s.lanes=y,s;case C:return s=Dn(13,l,i,p),s.elementType=C,s.lanes=y,s;case He:return s=Dn(19,l,i,p),s.elementType=He,s.lanes=y,s;case Be:return pc(l,p,y,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:T=10;break e;case O:T=9;break e;case F:T=11;break e;case wt:T=14;break e;case Ge:T=16,h=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=Dn(T,l,i,p),i.elementType=s,i.type=h,i.lanes=y,i}function Ii(s,i,l,h){return s=Dn(7,s,h,i),s.lanes=l,s}function pc(s,i,l,h){return s=Dn(22,s,h,i),s.elementType=Be,s.lanes=l,s.stateNode={isHidden:!1},s}function Ef(s,i,l){return s=Dn(6,s,null,i),s.lanes=l,s}function Tf(s,i,l){return i=Dn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function zI(s,i,l,h,p){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ns(0),this.expirationTimes=ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function If(s,i,l,h,p,y,T,R,N){return s=new zI(s,i,l,R,N),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Dn(3,null,null,i),s.current=y,y.stateNode=s,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(y),s}function $I(s,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:h==null?null:""+h,children:s,containerInfo:i,implementation:l}}function Qy(s){if(!s)return ds;s=s._reactInternals;e:{if(Fn(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(on(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(on(l))return Ig(s,l,i)}return i}function Jy(s,i,l,h,p,y,T,R,N){return s=If(l,h,!0,s,p,y,T,R,N),s.context=Qy(null),l=s.current,h=en(),p=vs(l),y=Ur(h,p),y.callback=i??null,ms(l,y,p),s.current.lanes=p,rs(s,p,h),un(s,h),s}function mc(s,i,l,h){var p=i.current,y=en(),T=vs(p);return l=Qy(l),i.context===null?i.context=l:i.pendingContext=l,i=Ur(y,T),i.payload={element:s},h=h===void 0?null:h,h!==null&&(i.callback=h),s=ms(p,i,T),s!==null&&(Xn(s,p,T,y),Wu(s,p,T)),T}function gc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Xy(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function Sf(s,i){Xy(s,i),(s=s.alternate)&&Xy(s,i)}function qI(){return null}var Yy=typeof reportError=="function"?reportError:function(s){console.error(s)};function Af(s){this._internalRoot=s}yc.prototype.render=Af.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));mc(s,i,null,null)},yc.prototype.unmount=Af.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;wi(function(){mc(null,s,null,null)}),i[Vr]=null}};function yc(s){this._internalRoot=s}yc.prototype.unstable_scheduleHydration=function(s){if(s){var i=yu();s={blockedOn:null,target:s,priority:i};for(var l=0;l<ar.length&&i!==0&&i<ar[l].priority;l++);ar.splice(l,0,s),l===0&&wu(s)}};function Rf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function _c(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Zy(){}function HI(s,i,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var q=gc(T);y.call(q)}}var T=Jy(i,h,s,0,null,!1,!1,"",Zy);return s._reactRootContainer=T,s[Vr]=T.current,Ka(s.nodeType===8?s.parentNode:s),wi(),T}for(;p=s.lastChild;)s.removeChild(p);if(typeof h=="function"){var R=h;h=function(){var q=gc(N);R.call(q)}}var N=If(s,0,!1,null,null,!1,!1,"",Zy);return s._reactRootContainer=N,s[Vr]=N.current,Ka(s.nodeType===8?s.parentNode:s),wi(function(){mc(i,N,l,h)}),N}function vc(s,i,l,h,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var R=p;p=function(){var N=gc(T);R.call(N)}}mc(i,T,s,p)}else T=HI(l,i,s,p,h);return gc(T)}mu=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=ts(i.pendingLanes);l!==0&&(ss(i,l|1),un(i,Xe()),(Fe&6)===0&&(Do=Xe()+500,fs()))}break;case 13:wi(function(){var h=Fr(s,1);if(h!==null){var p=en();Xn(h,s,1,p)}}),Sf(s,1)}},so=function(s){if(s.tag===13){var i=Fr(s,134217728);if(i!==null){var l=en();Xn(i,s,134217728,l)}Sf(s,134217728)}},gu=function(s){if(s.tag===13){var i=vs(s),l=Fr(s,i);if(l!==null){var h=en();Xn(l,s,i,h)}Sf(s,i)}},yu=function(){return Oe},_u=function(s,i){var l=Oe;try{return Oe=s,i()}finally{Oe=l}},Qi=function(s,i,l){switch(i){case"input":if(_a(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==s&&h.form===s.form){var p=Lu(h);if(!p)throw Error(t(90));$i(h),_a(h,p)}}}break;case"textarea":Ki(s,l);break;case"select":i=l.value,i!=null&&Cr(s,!!l.multiple,i,!1)}},ei=yf,Pa=wi;var WI={usingClientEntryPoint:!1,Events:[Ja,Eo,Lu,ir,Ca,yf]},cl={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KI={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Na(s),s===null?null:s.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||qI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{ii=wc.inject(KI),pn=wc}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI,cn.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rf(i))throw Error(t(200));return $I(s,i,null,l)},cn.createRoot=function(s,i){if(!Rf(s))throw Error(t(299));var l=!1,h="",p=Yy;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=If(s,1,!1,null,null,l,!1,h,p),s[Vr]=i.current,Ka(s.nodeType===8?s.parentNode:s),new Af(i)},cn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Na(i),s=s===null?null:s.stateNode,s},cn.flushSync=function(s){return wi(s)},cn.hydrate=function(s,i,l){if(!_c(i))throw Error(t(200));return vc(null,s,i,!0,l)},cn.hydrateRoot=function(s,i,l){if(!Rf(s))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",T=Yy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),i=Jy(i,null,s,1,l??null,p,!1,y,T),s[Vr]=i.current,Ka(s),h)for(s=0;s<h.length;s++)l=h[s],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new yc(i)},cn.render=function(s,i,l){if(!_c(i))throw Error(t(200));return vc(null,s,i,!1,l)},cn.unmountComponentAtNode=function(s){if(!_c(s))throw Error(t(40));return s._reactRootContainer?(wi(function(){vc(null,null,s,!1,function(){s._reactRootContainer=null,s[Vr]=null})}),!0):!1},cn.unstable_batchedUpdates=yf,cn.unstable_renderSubtreeIntoContainer=function(s,i,l,h){if(!_c(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return vc(s,i,l,!1,h)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var a_;function Tw(){if(a_)return kf.exports;a_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kf.exports=sS(),kf.exports}var l_;function iS(){if(l_)return Ec;l_=1;var n=Tw();return Ec.createRoot=n.createRoot,Ec.hydrateRoot=n.hydrateRoot,Ec}var oS=iS();Tw();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kl.apply(this,arguments)}var Ps;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ps||(Ps={}));const u_="popstate";function aS(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:u,hash:d}=r.location;return Jf("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:Qc(o)}return uS(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Lp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lS(){return Math.random().toString(36).substr(2,8)}function c_(n,e){return{usr:n.state,key:n.key,idx:e}}function Jf(n,e,t,r){return t===void 0&&(t=null),kl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:t,key:e&&e.key||r||lS()})}function Qc(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ra(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function uS(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,u=o.history,d=Ps.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(kl({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function w(){d=Ps.Pop;let k=_(),ee=k==null?null:k-m;m=k,f&&f({action:d,location:j.location,delta:ee})}function I(k,ee){d=Ps.Push;let se=Jf(j.location,k,ee);m=_()+1;let $=c_(se,m),re=j.createHref(se);try{u.pushState($,"",re)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(re)}a&&f&&f({action:d,location:j.location,delta:1})}function L(k,ee){d=Ps.Replace;let se=Jf(j.location,k,ee);m=_();let $=c_(se,m),re=j.createHref(se);u.replaceState($,"",re),a&&f&&f({action:d,location:j.location,delta:0})}function x(k){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof k=="string"?k:Qc(k);return se=se.replace(/ $/,"%20"),ht(ee,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,ee)}let j={get action(){return d},get location(){return n(o,u)},listen(k){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(u_,w),f=k,()=>{o.removeEventListener(u_,w),f=null}},createHref(k){return e(o,k)},createURL:x,encodeLocation(k){let ee=x(k);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:I,replace:L,go(k){return u.go(k)}};return j}var h_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(h_||(h_={}));function cS(n,e,t){return t===void 0&&(t="/"),hS(n,e,t)}function hS(n,e,t,r){let o=typeof e=="string"?ra(e):e,a=Mp(o.pathname||"/",t);if(a==null)return null;let u=Iw(n);dS(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=SS(a);d=ES(u[f],m)}return d}function Iw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(ht(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=xs([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(ht(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Iw(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:vS(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of Sw(a.path))o(a,u,f)}),e}function Sw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let u=Sw(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function dS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:wS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const fS=/^:[\w-]+$/,pS=3,mS=2,gS=1,yS=10,_S=-2,d_=n=>n==="*";function vS(n,e){let t=n.split("/"),r=t.length;return t.some(d_)&&(r+=_S),e&&(r+=mS),t.filter(o=>!d_(o)).reduce((o,a)=>o+(fS.test(a)?pS:a===""?gS:yS),r)}function wS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function ES(n,e,t){let{routesMeta:r}=n,o={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=TS({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),I=f.route;if(!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:xs([a,w.pathname]),pathnameBase:kS(xs([a,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(a=xs([a,w.pathnameBase]))}return u}function TS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=IS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((m,_,w)=>{let{paramName:I,isOptional:L}=_;if(I==="*"){let j=d[w]||"";u=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const x=d[w];return L&&!x?m[I]=void 0:m[I]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function IS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Lp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function SS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Mp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const AS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RS=n=>AS.test(n);function CS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?ra(n):n,a;if(t)if(RS(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Lp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=f_(t.substring(1),"/"):a=f_(t,e)}else a=e;return{pathname:a,search:xS(r),hash:NS(o)}}function f_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function bf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jp(n,e){let t=PS(n);return e?t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Fp(n,e,t,r){r===void 0&&(r=!1);let o;typeof n=="string"?o=ra(n):(o=kl({},n),ht(!o.pathname||!o.pathname.includes("?"),bf("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),bf("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),bf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let I=u.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}d=w>=0?e[w]:"/"}let f=CS(o,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const xs=n=>n.join("/").replace(/\/\/+/g,"/"),kS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),xS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Aw=["post","put","patch","delete"];new Set(Aw);const OS=["get",...Aw];new Set(OS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xl.apply(this,arguments)}const Up=G.createContext(null),DS=G.createContext(null),Ws=G.createContext(null),Ih=G.createContext(null),Jr=G.createContext({outlet:null,matches:[],isDataRoute:!1}),Rw=G.createContext(null);function VS(n,e){let{relative:t}=e===void 0?{}:e;sa()||ht(!1);let{basename:r,navigator:o}=G.useContext(Ws),{hash:a,pathname:u,search:d}=Pw(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:xs([r,u])),o.createHref({pathname:f,search:d,hash:a})}function sa(){return G.useContext(Ih)!=null}function Ul(){return sa()||ht(!1),G.useContext(Ih).location}function Cw(n){G.useContext(Ws).static||G.useLayoutEffect(n)}function ia(){let{isDataRoute:n}=G.useContext(Jr);return n?GS():LS()}function LS(){sa()||ht(!1);let n=G.useContext(Up),{basename:e,future:t,navigator:r}=G.useContext(Ws),{matches:o}=G.useContext(Jr),{pathname:a}=Ul(),u=JSON.stringify(jp(o,t.v7_relativeSplatPath)),d=G.useRef(!1);return Cw(()=>{d.current=!0}),G.useCallback(function(m,_){if(_===void 0&&(_={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let w=Fp(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:xs([e,w.pathname])),(_.replace?r.replace:r.push)(w,_.state,_)},[e,r,u,a,n])}function Bp(){let{matches:n}=G.useContext(Jr),e=n[n.length-1];return e?e.params:{}}function Pw(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=G.useContext(Ws),{matches:o}=G.useContext(Jr),{pathname:a}=Ul(),u=JSON.stringify(jp(o,r.v7_relativeSplatPath));return G.useMemo(()=>Fp(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function MS(n,e){return jS(n,e)}function jS(n,e,t,r){sa()||ht(!1);let{navigator:o}=G.useContext(Ws),{matches:a}=G.useContext(Jr),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Ul(),_;if(e){var w;let k=typeof e=="string"?ra(e):e;f==="/"||(w=k.pathname)!=null&&w.startsWith(f)||ht(!1),_=k}else _=m;let I=_.pathname||"/",L=I;if(f!=="/"){let k=f.replace(/^\//,"").split("/");L="/"+I.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=cS(n,{pathname:L}),j=$S(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:xs([f,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:xs([f,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,r);return e&&j?G.createElement(Ih.Provider,{value:{location:xl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ps.Pop}},j):j}function FS(){let n=KS(),e=bS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:o},t):null,null)}const US=G.createElement(FS,null);class BS extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(Jr.Provider,{value:this.props.routeContext},G.createElement(Rw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zS(n){let{routeContext:e,match:t,children:r}=n,o=G.useContext(Up);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(Jr.Provider,{value:e},r)}function $S(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=u.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);_>=0||ht(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let w=u[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=_),w.route.id){let{loaderData:I,errors:L}=t,x=w.route.loader&&I[w.route.id]===void 0&&(!L||L[w.route.id]===void 0);if(w.route.lazy||x){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,w,I)=>{let L,x=!1,j=null,k=null;t&&(L=d&&w.route.id?d[w.route.id]:void 0,j=w.route.errorElement||US,f&&(m<0&&I===0?(QS("route-fallback"),x=!0,k=null):m===I&&(x=!0,k=w.route.hydrateFallbackElement||null)));let ee=e.concat(u.slice(0,I+1)),se=()=>{let $;return L?$=j:x?$=k:w.route.Component?$=G.createElement(w.route.Component,null):w.route.element?$=w.route.element:$=_,G.createElement(zS,{match:w,routeContext:{outlet:_,matches:ee,isDataRoute:t!=null},children:$})};return t&&(w.route.ErrorBoundary||w.route.errorElement||I===0)?G.createElement(BS,{location:t.location,revalidation:t.revalidation,component:j,error:L,children:se(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):se()},null)}var kw=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(kw||{}),xw=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(xw||{});function qS(n){let e=G.useContext(Up);return e||ht(!1),e}function HS(n){let e=G.useContext(DS);return e||ht(!1),e}function WS(n){let e=G.useContext(Jr);return e||ht(!1),e}function Nw(n){let e=WS(),t=e.matches[e.matches.length-1];return t.route.id||ht(!1),t.route.id}function KS(){var n;let e=G.useContext(Rw),t=HS(),r=Nw();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function GS(){let{router:n}=qS(kw.UseNavigateStable),e=Nw(xw.UseNavigateStable),t=G.useRef(!1);return Cw(()=>{t.current=!0}),G.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,xl({fromRouteId:e},a)))},[n,e])}const p_={};function QS(n,e,t){p_[n]||(p_[n]=!0)}function JS(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Xf(n){let{to:e,replace:t,state:r,relative:o}=n;sa()||ht(!1);let{future:a,static:u}=G.useContext(Ws),{matches:d}=G.useContext(Jr),{pathname:f}=Ul(),m=ia(),_=Fp(e,jp(d,a.v7_relativeSplatPath),f,o==="path"),w=JSON.stringify(_);return G.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:o}),[m,w,o,t,r]),null}function jt(n){ht(!1)}function XS(n){let{basename:e="/",children:t=null,location:r,navigationType:o=Ps.Pop,navigator:a,static:u=!1,future:d}=n;sa()&&ht(!1);let f=e.replace(/^\/*/,"/"),m=G.useMemo(()=>({basename:f,navigator:a,static:u,future:xl({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=ra(r));let{pathname:_="/",search:w="",hash:I="",state:L=null,key:x="default"}=r,j=G.useMemo(()=>{let k=Mp(_,f);return k==null?null:{location:{pathname:k,search:w,hash:I,state:L,key:x},navigationType:o}},[f,_,w,I,L,x,o]);return j==null?null:G.createElement(Ws.Provider,{value:m},G.createElement(Ih.Provider,{children:t,value:j}))}function YS(n){let{children:e,location:t}=n;return MS(Yf(e),t)}new Promise(()=>{});function Yf(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(r,o)=>{if(!G.isValidElement(r))return;let a=[...e,o];if(r.type===G.Fragment){t.push.apply(t,Yf(r.props.children,a));return}r.type!==jt&&ht(!1),!r.props.index||!r.props.children||ht(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Yf(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zf.apply(this,arguments)}function ZS(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function eA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function tA(n,e){return n.button===0&&(!e||e==="_self")&&!eA(n)}const nA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rA="6";try{window.__reactRouterVersion=rA}catch{}const sA="startTransition",m_=tS[sA];function iA(n){let{basename:e,children:t,future:r,window:o}=n,a=G.useRef();a.current==null&&(a.current=aS({window:o,v5Compat:!0}));let u=a.current,[d,f]=G.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},_=G.useCallback(w=>{m&&m_?m_(()=>f(w)):f(w)},[f,m]);return G.useLayoutEffect(()=>u.listen(_),[u,_]),G.useEffect(()=>JS(r),[r]),G.createElement(XS,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}const oA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zp=G.forwardRef(function(e,t){let{onClick:r,relative:o,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:_,viewTransition:w}=e,I=ZS(e,nA),{basename:L}=G.useContext(Ws),x,j=!1;if(typeof m=="string"&&aA.test(m)&&(x=m,oA))try{let $=new URL(window.location.href),re=m.startsWith("//")?new URL($.protocol+m):new URL(m),me=Mp(re.pathname,L);re.origin===$.origin&&me!=null?m=me+re.search+re.hash:j=!0}catch{}let k=VS(m,{relative:o}),ee=lA(m,{replace:u,state:d,target:f,preventScrollReset:_,relative:o,viewTransition:w});function se($){r&&r($),$.defaultPrevented||ee($)}return G.createElement("a",Zf({},I,{href:x||k,onClick:j||a?r:se,ref:t,target:f}))});var g_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(g_||(g_={}));var y_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(y_||(y_={}));function lA(n,e){let{target:t,replace:r,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=ia(),m=Ul(),_=Pw(n,{relative:u});return G.useCallback(w=>{if(tA(w,t)){w.preventDefault();let I=r!==void 0?r:Qc(m)===Qc(_);f(n,{replace:I,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[m,f,_,r,o,t,n,a,u,d])}const Jc=[{value:"validation",label:"Validation"},{value:"mise_en_service",label:"Mise en service"},{value:"zero_stress",label:"Zro Stress"}],uA=()=>{};var __={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,_=a>>2,w=(a&3)<<4|d>>4;let I=(d&15)<<2|m>>6,L=m&63;f||(L=64,u||(I=64)),r.push(t[_],t[w],t[I],t[L])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new hA;const I=a<<2|d>>4;if(r.push(I),m!==64){const L=d<<4&240|m>>2;if(r.push(L),w!==64){const x=m<<6&192|w;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dA=function(n){const e=bw(n);return Ow.encodeByteArray(e,!0)},Xc=function(n){return dA(n).replace(/\./g,"")},Dw=function(n){try{return Ow.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=()=>fA().__FIREBASE_DEFAULTS__,mA=()=>{if(typeof process>"u"||typeof __>"u")return;const n=__.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Dw(n[1]);return e&&JSON.parse(e)},Sh=()=>{try{return uA()||pA()||mA()||gA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Vw=n=>{var e,t;return(t=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},yA=n=>{const e=Vw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Lw=()=>{var n;return(n=Sh())===null||n===void 0?void 0:n.config},Mw=n=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Xc(JSON.stringify(t)),Xc(JSON.stringify(u)),""].join(".")}const El={};function wA(){const n={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?n.emulator.push(e):n.prod.push(e);return n}function EA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let v_=!1;function Fw(n,e){if(typeof window>"u"||typeof document>"u"||!oa(window.location.host)||El[n]===e||El[n]||v_)return;El[n]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",a=wA().prod.length>0;function u(){const I=document.getElementById(r);I&&I.remove()}function d(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function f(I,L){I.setAttribute("width","24"),I.setAttribute("id",L),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function m(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{v_=!0,u()},I}function _(I,L){I.setAttribute("id",L),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function w(){const I=EA(r),L=t("text"),x=document.getElementById(L)||document.createElement("span"),j=t("learnmore"),k=document.getElementById(j)||document.createElement("a"),ee=t("preprendIcon"),se=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const $=I.element;d($),_(k,j);const re=m();f(se,ee),$.append(se,x,k,re),document.body.appendChild($)}a?(x.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function IA(){var n;const e=(n=Sh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CA(){const n=Jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PA(){return!IA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="FirebaseError";class Xr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NA,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?bA(a,r):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Xr(o,d,r)}}function bA(n,e){return n.replace(OA,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const OA=/\{\$([^}]+)}/g;function DA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ni(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],u=e[o];if(w_(a)&&w_(u)){if(!Ni(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function w_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function ml(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function VA(n,e){const t=new LA(n,e);return t.subscribe.bind(t)}class LA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");MA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Of),o.error===void 0&&(o.error=Of),o.complete===void 0&&(o.complete=Of);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class bi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _A;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UA(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FA(n){return n===Ri?void 0:n}function UA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ne||(Ne={}));const zA={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},$A=Ne.INFO,qA={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},HA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=qA[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=$A,this._logHandler=HA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const WA=(n,e)=>e.some(t=>n instanceof t);let E_,T_;function KA(){return E_||(E_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GA(){return T_||(T_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Uw=new WeakMap,ep=new WeakMap,Bw=new WeakMap,Df=new WeakMap,qp=new WeakMap;function QA(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ns(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Uw.set(t,n)}).catch(()=>{}),qp.set(e,n),e}function JA(n){if(ep.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});ep.set(n,e)}let tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ns(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function XA(n){tp=n(tp)}function YA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vf(this),e,...t);return Bw.set(r,e.sort?e.sort():[e]),Ns(r)}:GA().includes(n)?function(...e){return n.apply(Vf(this),e),Ns(Uw.get(this))}:function(...e){return Ns(n.apply(Vf(this),e))}}function ZA(n){return typeof n=="function"?YA(n):(n instanceof IDBTransaction&&JA(n),WA(n,KA())?new Proxy(n,tp):n)}function Ns(n){if(n instanceof IDBRequest)return QA(n);if(Df.has(n))return Df.get(n);const e=ZA(n);return e!==n&&(Df.set(n,e),qp.set(e,n)),e}const Vf=n=>qp.get(n);function eR(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ns(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Ns(u.result),f.oldVersion,f.newVersion,Ns(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const tR=["get","getKey","getAll","getAllKeys","count"],nR=["put","add","delete","clear"],Lf=new Map;function I_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lf.get(e))return Lf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=nR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||tR.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return Lf.set(e,a),a}XA(n=>({...n,get:(e,t,r)=>I_(e,t)||n.get(e,t,r),has:(e,t)=>!!I_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function sR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",S_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new $p("@firebase/app"),iR="@firebase/app-compat",oR="@firebase/analytics-compat",aR="@firebase/analytics",lR="@firebase/app-check-compat",uR="@firebase/app-check",cR="@firebase/auth",hR="@firebase/auth-compat",dR="@firebase/database",fR="@firebase/data-connect",pR="@firebase/database-compat",mR="@firebase/functions",gR="@firebase/functions-compat",yR="@firebase/installations",_R="@firebase/installations-compat",vR="@firebase/messaging",wR="@firebase/messaging-compat",ER="@firebase/performance",TR="@firebase/performance-compat",IR="@firebase/remote-config",SR="@firebase/remote-config-compat",AR="@firebase/storage",RR="@firebase/storage-compat",CR="@firebase/firestore",PR="@firebase/ai",kR="@firebase/firestore-compat",xR="firebase",NR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",bR={[np]:"fire-core",[iR]:"fire-core-compat",[aR]:"fire-analytics",[oR]:"fire-analytics-compat",[uR]:"fire-app-check",[lR]:"fire-app-check-compat",[cR]:"fire-auth",[hR]:"fire-auth-compat",[dR]:"fire-rtdb",[fR]:"fire-data-connect",[pR]:"fire-rtdb-compat",[mR]:"fire-fn",[gR]:"fire-fn-compat",[yR]:"fire-iid",[_R]:"fire-iid-compat",[vR]:"fire-fcm",[wR]:"fire-fcm-compat",[ER]:"fire-perf",[TR]:"fire-perf-compat",[IR]:"fire-rc",[SR]:"fire-rc-compat",[AR]:"fire-gcs",[RR]:"fire-gcs-compat",[CR]:"fire-fst",[kR]:"fire-fst-compat",[PR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Map,OR=new Map,sp=new Map;function A_(n,e){try{n.container.addComponent(e)}catch(t){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qo(n){const e=n.name;if(sp.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,n);for(const t of Yc.values())A_(t,n);for(const t of OR.values())A_(t,n);return!0}function Hp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new Bl("app","Firebase",DR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=NR;function zw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw bs.create("bad-app-name",{appName:String(o)});if(t||(t=Lw()),!t)throw bs.create("no-options");const a=Yc.get(o);if(a){if(Ni(t,a.options)&&Ni(r,a.config))return a;throw bs.create("duplicate-app",{appName:o})}const u=new BA(o);for(const f of sp.values())u.addComponent(f);const d=new VR(t,r,u);return Yc.set(o,d),d}function $w(n=rp){const e=Yc.get(n);if(!e&&n===rp&&Lw())return zw();if(!e)throw bs.create("no-app",{appName:n});return e}function Os(n,e,t){var r;let o=(r=bR[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(d.join(" "));return}Qo(new bi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="firebase-heartbeat-database",MR=1,Nl="firebase-heartbeat-store";let Mf=null;function qw(){return Mf||(Mf=eR(LR,MR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw bs.create("idb-open",{originalErrorMessage:n.message})})),Mf}async function jR(n){try{const t=(await qw()).transaction(Nl),r=await t.objectStore(Nl).get(Hw(n));return await t.done,r}catch(e){if(e instanceof Xr)Hr.warn(e.message);else{const t=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hr.warn(t.message)}}}async function R_(n,e){try{const r=(await qw()).transaction(Nl,"readwrite");await r.objectStore(Nl).put(e,Hw(n)),await r.done}catch(t){if(t instanceof Xr)Hr.warn(t.message);else{const r=bs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hr.warn(r.message)}}}function Hw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1024,UR=30;class BR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $R(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=C_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>UR){const u=qR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C_(),{heartbeatsToSend:r,unsentEntries:o}=zR(this._heartbeatsCache.heartbeats),a=Xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Hr.warn(t),""}}}function C_(){return new Date().toISOString().substring(0,10)}function zR(n,e=FR){const t=[];let r=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),P_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),P_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class $R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return R_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return R_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function P_(n){return Xc(JSON.stringify({version:2,heartbeats:n})).length}function qR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){Qo(new bi("platform-logger",e=>new rR(e),"PRIVATE")),Qo(new bi("heartbeat",e=>new BR(e),"PRIVATE")),Os(np,S_,n),Os(np,S_,"esm2017"),Os("fire-js","")}HR("");var WR="firebase",KR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(WR,KR,"app");function Wp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function Ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GR=Ww,Kw=new Bl("auth","Firebase",Ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new $p("@firebase/auth");function QR(n,...e){Zc.logLevel<=Ne.WARN&&Zc.warn(`Auth (${aa}): ${n}`,...e)}function Nc(n,...e){Zc.logLevel<=Ne.ERROR&&Zc.error(`Auth (${aa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(n,...e){throw Kp(n,...e)}function yr(n,...e){return Kp(n,...e)}function Gw(n,e,t){const r=Object.assign(Object.assign({},GR()),{[e]:t});return new Bl("auth","Firebase",r).create(e,{appName:n.name})}function Ds(n){return Gw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Kw.create(n,...e)}function Ie(n,e,...t){if(!n)throw Kp(e,...t)}function $r(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Nc(e),new Error(e)}function Wr(n,e){n||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JR(){return k_()==="http:"||k_()==="https:"}function k_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JR()||AA()||"connection"in navigator)?navigator.onLine:!0}function YR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=TA()||RA()}get(){return XR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e){Wr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],t1=new $l(3e4,6e4);function ji(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ks(n,e,t,r,o={}){return Jw(n,o,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=zl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return SA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&oa(n.emulatorConfig.host)&&(m.credentials="include"),Qw.fetch()(await Xw(n,n.config.apiHost,t,d),m)})}async function Jw(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZR),e);try{const o=new r1(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Tc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Tc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Tc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Gw(n,_,m);tr(n,_)}}catch(o){if(o instanceof Xr)throw o;tr(n,"network-request-failed",{message:String(o)})}}async function Ah(n,e,t,r,o={}){const a=await Ks(n,e,t,r,o);return"mfaPendingCredential"in a&&tr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Xw(n,e,t,r){const o=`${e}${t}?${r}`,a=n,u=a.config.emulator?Gp(n.config,o):`${n.config.apiScheme}://${o}`;return e1.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function n1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class r1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yr(this.auth,"network-request-failed")),t1.get())})}}function Tc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=yr(n,e,r);return o.customData._tokenResponse=t,o}function x_(n){return n!==void 0&&n.enterprise!==void 0}class s1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return n1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function i1(n,e){return Ks(n,"GET","/v2/recaptchaConfig",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(n,e){return Ks(n,"POST","/v1/accounts:delete",e)}async function eh(n,e){return Ks(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a1(n,e=!1){const t=dt(n),r=await t.getIdToken(e),o=Qp(r);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:Tl(jf(o.auth_time)),issuedAtTime:Tl(jf(o.iat)),expirationTime:Tl(jf(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function jf(n){return Number(n)*1e3}function Qp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Dw(t);return o?JSON.parse(o):(Nc("Failed to decode base64 JWT payload"),null)}catch(o){return Nc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function N_(n){const e=Qp(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xr&&l1(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function l1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tl(this.lastLoginAt),this.creationTime=Tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(n){var e;const t=n.auth,r=await n.getIdToken(),o=await bl(n,eh(t,{idToken:r}));Ie(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Yw(a.providerUserInfo):[],d=h1(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new op(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function c1(n){const e=dt(n);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h1(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Yw(n){return n.map(e=>{var{providerId:t}=e,r=Wp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(n,e){const t=await Jw(n,{},async()=>{const r=zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await Xw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&oa(n.emulatorConfig.host)&&(f.credentials="include"),Qw.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function f1(n,e){return Ks(n,"POST","/v2/accounts:revokeToken",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=N_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await d1(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,u=new $o;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class er{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=Wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new u1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new op(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return a1(this,e)}reload(){return c1(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await bl(this,o1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,u,d,f,m,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,L=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,j=(d=t.tenantId)!==null&&d!==void 0?d:void 0,k=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,ee=(m=t.createdAt)!==null&&m!==void 0?m:void 0,se=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:$,emailVerified:re,isAnonymous:me,providerData:_e,stsTokenManager:b}=t;Ie($&&b,e,"internal-error");const A=$o.fromJSON(this.name,b);Ie(typeof $=="string",e,"internal-error"),Is(w,e.name),Is(I,e.name),Ie(typeof re=="boolean",e,"internal-error"),Ie(typeof me=="boolean",e,"internal-error"),Is(L,e.name),Is(x,e.name),Is(j,e.name),Is(k,e.name),Is(ee,e.name),Is(se,e.name);const P=new er({uid:$,auth:e,email:I,emailVerified:re,displayName:w,isAnonymous:me,photoURL:x,phoneNumber:L,tenantId:j,stsTokenManager:A,createdAt:ee,lastLoginAt:se});return _e&&Array.isArray(_e)&&(P.providerData=_e.map(D=>Object.assign({},D))),k&&(P._redirectEventId=k),P}static async _fromIdTokenResponse(e,t,r=!1){const o=new $o;o.updateFromServerResponse(t);const a=new er({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await th(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Yw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new $o;d.updateFromIdToken(r);const f=new er({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new op(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;function qr(n){Wr(n instanceof Function,"Expected a class definition");let e=b_.get(n);return e?(Wr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,b_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zw.type="NONE";const O_=Zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n,e,t){return`firebase:${n}:${e}:${t}`}class qo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=bc(this.userKey,o.apiKey,a),this.fullPersistenceKey=bc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await eh(this.auth,{idToken:e}).catch(()=>{});return t?er._fromGetAccountInfoResponse(this.auth,t,e):null}return er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qo(qr(O_),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||qr(O_);const u=bc(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const _=await m._get(u);if(_){let w;if(typeof _=="string"){const I=await eh(e,{idToken:_}).catch(()=>{});if(!I)break;w=await er._fromGetAccountInfoResponse(e,I,_)}else w=er._fromJSON(e,_);m!==a&&(d=w),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new qo(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new qo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iE(e))return"Blackberry";if(oE(e))return"Webos";if(tE(e))return"Safari";if((e.includes("chrome/")||nE(e))&&!e.includes("edge/"))return"Chrome";if(sE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eE(n=Jt()){return/firefox\//i.test(n)}function tE(n=Jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nE(n=Jt()){return/crios\//i.test(n)}function rE(n=Jt()){return/iemobile/i.test(n)}function sE(n=Jt()){return/android/i.test(n)}function iE(n=Jt()){return/blackberry/i.test(n)}function oE(n=Jt()){return/webos/i.test(n)}function Jp(n=Jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function p1(n=Jt()){var e;return Jp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m1(){return CA()&&document.documentMode===10}function aE(n=Jt()){return Jp(n)||sE(n)||oE(n)||iE(n)||/windows phone/i.test(n)||rE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n,e=[]){let t;switch(n){case"Browser":t=D_(Jt());break;case"Worker":t=`${D_(Jt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${aa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(n,e={}){return Ks(n,"GET","/v2/passwordPolicy",ji(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=6;class v1{constructor(e){var t,r,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:_1,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new g1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qr(t)),this._initializationPromise=this.queue(async()=>{var r,o,a;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eh(this,{idToken:e}),r=await er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Ds(this));const t=e?dt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y1(this),t=new v1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await f1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&QR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function la(n){return dt(n)}class V_{constructor(e){this.auth=e,this.observer=null,this.addObserver=VA(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E1(n){Rh=n}function uE(n){return Rh.loadJS(n)}function T1(){return Rh.recaptchaEnterpriseScript}function I1(){return Rh.gapiScript}function S1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class A1{constructor(){this.enterprise=new R1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class R1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const C1="recaptcha-enterprise",cE="NO_RECAPTCHA";class P1{constructor(e){this.type=C1,this.auth=la(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{i1(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new s1(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{d(f)})})}function o(a,u,d){const f=window.grecaptcha;x_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(cE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new A1().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(d=>{if(!t&&x_(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=T1();f.length!==0&&(f+=d),uE(f).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function L_(n,e,t,r=!1,o=!1){const a=new P1(n);let u;if(o)u=cE;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function M_(n,e,t,r,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await L_(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await L_(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n,e){const t=Hp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ni(a,e??{}))return o;tr(o,"already-initialized")}return t.initialize({options:e})}function x1(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(qr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function N1(n,e,t){const r=la(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=hE(e),{host:u,port:d}=b1(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Ni(m,r.config.emulator)&&Ni(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,oa(u)?(jw(`${a}//${u}${f}`),Fw("Auth",!0)):O1()}function hE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b1(n){const e=hE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:j_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:j_(u)}}}function j_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function O1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function D1(n,e){return Ks(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(n,e){return Ah(n,"POST","/v1/accounts:signInWithPassword",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(n,e){return Ah(n,"POST","/v1/accounts:signInWithEmailLink",ji(n,e))}async function M1(n,e){return Ah(n,"POST","/v1/accounts:signInWithEmailLink",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Xp{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ol(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ol(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M_(e,t,"signInWithPassword",V1);case"emailLink":return L1(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M_(e,r,"signUpPassword",D1);case"emailLink":return M1(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(n,e){return Ah(n,"POST","/v1/accounts:signInWithIdp",ji(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="http://localhost";class Oi extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=Wp(t,["providerId","signInMethod"]);if(!r||!o)return null;const u=new Oi(r,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ho(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:j1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function U1(n){const e=pl(ml(n)).link,t=e?pl(ml(e)).deep_link_id:null,r=pl(ml(n)).deep_link_id;return(r?pl(ml(r)).link:null)||r||t||e||n}class Yp{constructor(e){var t,r,o,a,u,d;const f=pl(ml(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(r=f.oobCode)!==null&&r!==void 0?r:null,w=F1((o=f.mode)!==null&&o!==void 0?o:null);Ie(m&&_&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=U1(e);try{return new Yp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,t){return Ol._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Yp.parseLink(t);return Ie(r,"argument-error"),Ol._fromEmailAndCode(e,r.code,r.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends dE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends ql{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oi._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return As.credential(t,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends ql{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends ql{constructor(){super("twitter.com")}static credential(e,t){return Oi._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await er._fromIdTokenResponse(e,r,o),u=F_(r);return new Jo({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=F_(r);return new Jo({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function F_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends Xr{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new nh(e,t,r,o)}}function fE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(n,a,e,r):a})}async function B1(n,e,t=!1){const r=await bl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Jo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(n,e,t=!1){const{auth:r}=n;if(Zn(r.app))return Promise.reject(Ds(r));const o="reauthenticate";try{const a=await bl(n,fE(r,o,e,n),t);Ie(a.idToken,r,"internal-error");const u=Qp(a.idToken);Ie(u,r,"internal-error");const{sub:d}=u;return Ie(n.uid===d,r,"user-mismatch"),Jo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&tr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pE(n,e,t=!1){if(Zn(n.app))return Promise.reject(Ds(n));const r="signIn",o=await fE(n,r,e),a=await Jo._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function $1(n,e){return pE(la(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(n){const e=la(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function mE(n,e,t){return Zn(n.app)?Promise.reject(Ds(n)):$1(dt(n),ua.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&q1(n),r})}function H1(n,e,t,r){return dt(n).onIdTokenChanged(e,t,r)}function W1(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function K1(n,e,t,r){return dt(n).onAuthStateChanged(e,t,r)}function G1(n){return dt(n).signOut()}const rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,"1"),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=1e3,J1=10;class yE extends gE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);m1()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,J1):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yE.type="LOCAL";const X1=yE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E extends gE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_E.type="SESSION";const vE=_E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Ch(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await Y1(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Zp("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function eC(n){_r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function tC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function rC(){return wE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebaseLocalStorageDb",sC=1,sh="firebaseLocalStorage",TE="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ph(n,e){return n.transaction([sh],e?"readwrite":"readonly").objectStore(sh)}function iC(){const n=indexedDB.deleteDatabase(EE);return new Hl(n).toPromise()}function ap(){const n=indexedDB.open(EE,sC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sh,{keyPath:TE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sh)?e(r):(r.close(),await iC(),e(await ap()))})})}async function U_(n,e,t){const r=Ph(n,!0).put({[TE]:e,value:t});return new Hl(r).toPromise()}async function oC(n,e){const t=Ph(n,!1).get(e),r=await new Hl(t).toPromise();return r===void 0?null:r.value}function B_(n,e){const t=Ph(n,!0).delete(e);return new Hl(t).toPromise()}const aC=800,lC=3;class IE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>lC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(rC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tC(),!this.activeServiceWorker)return;this.sender=new Z1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await U_(e,rh,"1"),await B_(e,rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>U_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>oC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>B_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Ph(o,!1).getAll();return new Hl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IE.type="LOCAL";const uC=IE;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n,e){return e?qr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hC(n){return pE(n.auth,new em(n),n.bypassAuthState)}function dC(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),z1(t,new em(n),n.bypassAuthState)}async function fC(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),B1(t,new em(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hC;case"linkViaPopup":case"linkViaRedirect":return fC;case"reauthViaPopup":case"reauthViaRedirect":return dC;default:tr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new $l(2e3,1e4);class Bo extends SE{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,Bo.currentPopupAction&&Bo.currentPopupAction.cancel(),Bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pC.get())};e()}}Bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="pendingRedirect",Oc=new Map;class gC extends SE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const r=await yC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yC(n,e){const t=wC(e),r=vC(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function _C(n,e){Oc.set(n._key(),e)}function vC(n){return qr(n._redirectPersistence)}function wC(n){return bc(mC,n.config.apiKey,n.name)}async function EC(n,e,t=!1){if(Zn(n.app))return Promise.reject(Ds(n));const r=la(n),o=cC(r,e),u=await new gC(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=600*1e3;class IC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!AE(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(z_(e))}saveEventToCache(e){this.cachedEventUids.add(z_(e)),this.lastProcessedEventTime=Date.now()}}function z_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(n,e={}){return Ks(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CC=/^https?/;async function PC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await AC(n);for(const t of e)try{if(kC(t))return}catch{}tr(n,"unauthorized-domain")}function kC(n){const e=ip(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!CC.test(t))return!1;if(RC.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new $l(3e4,6e4);function $_(){const n=_r().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NC(n){return new Promise((e,t)=>{var r,o,a;function u(){$_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$_(),t(yr(n,"network-request-failed"))},timeout:xC.get()})}if(!((o=(r=_r().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=_r().gapi)===null||a===void 0)&&a.load)u();else{const d=S1("iframefcb");return _r()[d]=()=>{gapi.load?u():t(yr(n,"network-request-failed"))},uE(`${I1()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function bC(n){return Dc=Dc||NC(n),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new $l(5e3,15e3),DC="__/auth/iframe",VC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jC(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gp(e,VC):`https://${n.config.authDomain}/${DC}`,r={apiKey:e.apiKey,appName:n.name,v:aa},o=MC.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${zl(r).slice(1)}`}async function FC(n){const e=await bC(n),t=_r().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:jC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const u=yr(n,"network-request-failed"),d=_r().setTimeout(()=>{a(u)},OC.get());function f(){_r().clearTimeout(d),o(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BC=500,zC=600,$C="_blank",qC="http://localhost";class q_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HC(n,e,t,r=BC,o=zC){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},UC),{width:r.toString(),height:o.toString(),top:a,left:u}),m=Jt().toLowerCase();t&&(d=nE(m)?$C:t),eE(m)&&(e=e||qC,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[L,x])=>`${I}${L}=${x},`,"");if(p1(m)&&d!=="_self")return WC(e||"",d),new q_(null);const w=window.open(e||"",d,_);Ie(w,n,"popup-blocked");try{w.focus()}catch{}return new q_(w)}function WC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="__/auth/handler",GC="emulator/auth/handler",QC=encodeURIComponent("fac");async function H_(n,e,t,r,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:aa,eventId:o};if(e instanceof dE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",DA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))u[_]=w}if(e instanceof ql){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),m=f?`#${QC}=${encodeURIComponent(f)}`:"";return`${JC(n)}?${zl(d).slice(1)}${m}`}function JC({config:n}){return n.emulator?Gp(n,GC):`https://${n.authDomain}/${KC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class XC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vE,this._completeRedirectFn=EC,this._overrideRedirectResult=_C}async _openPopup(e,t,r,o){var a;Wr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await H_(e,t,r,ip(),o);return HC(e,u,Zp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await H_(e,t,r,ip(),o);return eC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Wr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await FC(e),r=new IC(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ff,{type:Ff},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Ff];u!==void 0&&t(!!u),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=PC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aE()||tE()||Jp()}}const YC=XC;var W_="@firebase/auth",K_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tP(n){Qo(new bi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lE(n)},m=new w1(r,o,a,f);return x1(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qo(new bi("auth-internal",e=>{const t=la(e.getProvider("auth").getImmediate());return(r=>new ZC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(W_,K_,eP(n)),Os(W_,K_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=300,rP=Mw("authIdTokenMaxAge")||nP;let G_=null;const sP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>rP)return;const o=t==null?void 0:t.token;G_!==o&&(G_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function iP(n=$w()){const e=Hp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=k1(n,{popupRedirectResolver:YC,persistence:[uC,X1,vE]}),r=Mw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=sP(a.toString());W1(t,u,()=>u(t.currentUser)),H1(t,d=>u(d))}}const o=Vw("auth");return o&&N1(t,`http://${o}`),t}function oP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}E1({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=yr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",oP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tP("Browser");var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,RE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function P(){}P.prototype=A.prototype,b.D=A.prototype,b.prototype=new P,b.prototype.constructor=b,b.C=function(D,O,F){for(var C=Array(arguments.length-2),He=2;He<arguments.length;He++)C[He-2]=arguments[He];return A.prototype[O].apply(D,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,A,P){P||(P=0);var D=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)D[O]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(O=0;16>O;++O)D[O]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=b.g[0],P=b.g[1],O=b.g[2];var F=b.g[3],C=A+(F^P&(O^F))+D[0]+3614090360&4294967295;A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+D[1]+3905402710&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+D[2]+606105819&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+D[3]+3250441966&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(F^P&(O^F))+D[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+D[5]+1200080426&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+D[6]+2821735955&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+D[7]+4249261313&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(F^P&(O^F))+D[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+D[9]+2336552879&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+D[10]+4294925233&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+D[11]+2304563134&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(F^P&(O^F))+D[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+D[13]+4254626195&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+D[14]+2792965006&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+D[15]+1236535329&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(O^F&(P^O))+D[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+D[6]+3225465664&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+D[11]+643717713&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+D[0]+3921069994&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(O^F&(P^O))+D[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+D[10]+38016083&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+D[15]+3634488961&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+D[4]+3889429448&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(O^F&(P^O))+D[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+D[14]+3275163606&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+D[3]+4107603335&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+D[8]+1163531501&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(O^F&(P^O))+D[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+D[2]+4243563512&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+D[7]+1735328473&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+D[12]+2368359562&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(P^O^F)+D[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+D[8]+2272392833&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+D[11]+1839030562&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+D[14]+4259657740&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(P^O^F)+D[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+D[4]+1272893353&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+D[7]+4139469664&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+D[10]+3200236656&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(P^O^F)+D[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+D[0]+3936430074&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+D[3]+3572445317&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+D[6]+76029189&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(P^O^F)+D[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+D[12]+3873151461&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+D[15]+530742520&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+D[2]+3299628645&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(O^(P|~F))+D[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+D[7]+1126891415&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+D[14]+2878612391&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+D[5]+4237533241&4294967295,P=O+(C<<21&4294967295|C>>>11),C=A+(O^(P|~F))+D[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+D[3]+2399980690&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+D[10]+4293915773&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+D[1]+2240044497&4294967295,P=O+(C<<21&4294967295|C>>>11),C=A+(O^(P|~F))+D[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+D[15]+4264355552&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+D[6]+2734768916&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+D[13]+1309151649&4294967295,P=O+(C<<21&4294967295|C>>>11),C=A+(O^(P|~F))+D[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+D[11]+3174756917&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+D[2]+718787259&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+D[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,b.g[2]=b.g[2]+O&4294967295,b.g[3]=b.g[3]+F&4294967295}r.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var P=A-this.blockSize,D=this.B,O=this.h,F=0;F<A;){if(O==0)for(;F<=P;)o(this,b,F),F+=this.blockSize;if(typeof b=="string"){for(;F<A;)if(D[O++]=b.charCodeAt(F++),O==this.blockSize){o(this,D),O=0;break}}else for(;F<A;)if(D[O++]=b[F++],O==this.blockSize){o(this,D),O=0;break}}this.h=O,this.o+=A},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var P=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=P&255,P/=256;for(this.u(b),b=Array(16),A=P=0;4>A;++A)for(var D=0;32>D;D+=8)b[P++]=this.g[A]>>>D&255;return b};function a(b,A){var P=d;return Object.prototype.hasOwnProperty.call(P,b)?P[b]:P[b]=A(b)}function u(b,A){this.h=A;for(var P=[],D=!0,O=b.length-1;0<=O;O--){var F=b[O]|0;D&&F==A||(P[O]=F,D=!1)}this.g=P}var d={};function f(b){return-128<=b&&128>b?a(b,function(A){return new u([A|0],0>A?-1:0)}):new u([b|0],0>b?-1:0)}function m(b){if(isNaN(b)||!isFinite(b))return w;if(0>b)return k(m(-b));for(var A=[],P=1,D=0;b>=P;D++)A[D]=b/P|0,P*=4294967296;return new u(A,0)}function _(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return k(_(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(A,8)),D=w,O=0;O<b.length;O+=8){var F=Math.min(8,b.length-O),C=parseInt(b.substring(O,O+F),A);8>F?(F=m(Math.pow(A,F)),D=D.j(F).add(m(C))):(D=D.j(P),D=D.add(m(C)))}return D}var w=f(0),I=f(1),L=f(16777216);n=u.prototype,n.m=function(){if(j(this))return-k(this).m();for(var b=0,A=1,P=0;P<this.g.length;P++){var D=this.i(P);b+=(0<=D?D:4294967296+D)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x(this))return"0";if(j(this))return"-"+k(this).toString(b);for(var A=m(Math.pow(b,6)),P=this,D="";;){var O=re(P,A).g;P=ee(P,O.j(A));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(b);if(P=O,x(P))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function x(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function j(b){return b.h==-1}n.l=function(b){return b=ee(this,b),j(b)?-1:x(b)?0:1};function k(b){for(var A=b.g.length,P=[],D=0;D<A;D++)P[D]=~b.g[D];return new u(P,~b.h).add(I)}n.abs=function(){return j(this)?k(this):this},n.add=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],D=0,O=0;O<=A;O++){var F=D+(this.i(O)&65535)+(b.i(O)&65535),C=(F>>>16)+(this.i(O)>>>16)+(b.i(O)>>>16);D=C>>>16,F&=65535,C&=65535,P[O]=C<<16|F}return new u(P,P[P.length-1]&-2147483648?-1:0)};function ee(b,A){return b.add(k(A))}n.j=function(b){if(x(this)||x(b))return w;if(j(this))return j(b)?k(this).j(k(b)):k(k(this).j(b));if(j(b))return k(this.j(k(b)));if(0>this.l(L)&&0>b.l(L))return m(this.m()*b.m());for(var A=this.g.length+b.g.length,P=[],D=0;D<2*A;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(var O=0;O<b.g.length;O++){var F=this.i(D)>>>16,C=this.i(D)&65535,He=b.i(O)>>>16,wt=b.i(O)&65535;P[2*D+2*O]+=C*wt,se(P,2*D+2*O),P[2*D+2*O+1]+=F*wt,se(P,2*D+2*O+1),P[2*D+2*O+1]+=C*He,se(P,2*D+2*O+1),P[2*D+2*O+2]+=F*He,se(P,2*D+2*O+2)}for(D=0;D<A;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=A;D<2*A;D++)P[D]=0;return new u(P,0)};function se(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function $(b,A){this.g=b,this.h=A}function re(b,A){if(x(A))throw Error("division by zero");if(x(b))return new $(w,w);if(j(b))return A=re(k(b),A),new $(k(A.g),k(A.h));if(j(A))return A=re(b,k(A)),new $(k(A.g),A.h);if(30<b.g.length){if(j(b)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var P=I,D=A;0>=D.l(b);)P=me(P),D=me(D);var O=_e(P,1),F=_e(D,1);for(D=_e(D,2),P=_e(P,2);!x(D);){var C=F.add(D);0>=C.l(b)&&(O=O.add(P),F=C),D=_e(D,1),P=_e(P,1)}return A=ee(b,O.j(A)),new $(O,A)}for(O=w;0<=b.l(A);){for(P=Math.max(1,Math.floor(b.m()/A.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=m(P),C=F.j(A);j(C)||0<C.l(b);)P-=D,F=m(P),C=F.j(A);x(F)&&(F=I),O=O.add(F),b=ee(b,C)}return new $(O,b)}n.A=function(b){return re(this,b).h},n.and=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)&b.i(D);return new u(P,this.h&b.h)},n.or=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)|b.i(D);return new u(P,this.h|b.h)},n.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],D=0;D<A;D++)P[D]=this.i(D)^b.i(D);return new u(P,this.h^b.h)};function me(b){for(var A=b.g.length+1,P=[],D=0;D<A;D++)P[D]=b.i(D)<<1|b.i(D-1)>>>31;return new u(P,b.h)}function _e(b,A){var P=A>>5;A%=32;for(var D=b.g.length-P,O=[],F=0;F<D;F++)O[F]=0<A?b.i(F+P)>>>A|b.i(F+P+1)<<32-A:b.i(F+P);return new u(O,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Vs=u}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CE,gl,PE,Vc,lp,kE,xE,NE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(c,g){if(g)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var U=c[S];if(!(U in v))break e;v=v[U]}c=c[c.length-1],S=v[c],g=g(S),g!=S&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,S=!1,U={next:function(){if(!S&&v<c.length){var W=v++;return{value:g(W,c[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function w(c,g,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function I(c,g,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,I.apply(null,arguments)}function L(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function x(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,U,W){for(var ie=Array(arguments.length-2),We=2;We<arguments.length;We++)ie[We-2]=arguments[We];return g.prototype[U].apply(S,ie)}}function j(c){const g=c.length;if(0<g){const v=Array(g);for(let S=0;S<g;S++)v[S]=c[S];return v}return[]}function k(c,g){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(f(S)){const U=c.length||0,W=S.length||0;c.length=U+W;for(let ie=0;ie<W;ie++)c[U+ie]=S[ie]}else c.push(S)}}class ee{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function se(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var me=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function _e(c,g,v){for(const S in c)g.call(v,c[S],S,c)}function b(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function A(c){const g={};for(const v in c)g[v]=c[v];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)c[v]=S[v];for(let W=0;W<P.length;W++)v=P[W],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function O(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function F(c){d.setTimeout(()=>{throw c},0)}function C(){var c=ge;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class He{constructor(){this.h=this.g=null}add(g,v){const S=wt.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var wt=new ee(()=>new Ge,c=>c.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,ne=!1,ge=new He,ae=()=>{const c=d.Promise.resolve(void 0);Be=()=>{c.then(M)}};var M=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){F(v)}var g=wt;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ne=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,g),d.removeEventListener("test",v,g)}catch{}return c})();function Pe(c,g){if(fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(me){e:{try{re(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,fe);var Ve={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Je(c,g,v,S,U){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=U,this.key=++$e,this.da=this.fa=!1}function Ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ar(c){this.src=c,this.g={},this.h=0}Ar.prototype.add=function(c,g,v,S,U){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ie=Yr(c,g,S,U);return-1<ie?(g=c[ie],v||(g.fa=!1)):(g=new Je(g,this.src,W,!!S,U),g.fa=v,c.push(g)),g};function $i(c,g){var v=g.type;if(v in c.g){var S=c.g[v],U=Array.prototype.indexOf.call(S,g,void 0),W;(W=0<=U)&&Array.prototype.splice.call(S,U,1),W&&(Ct(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Yr(c,g,v,S){for(var U=0;U<c.length;++U){var W=c[U];if(!W.da&&W.listener==g&&W.capture==!!v&&W.ha==S)return U}return-1}var Js="closure_lm_"+(1e6*Math.random()|0),qi={};function ya(c,g,v,S,U){if(Array.isArray(g)){for(var W=0;W<g.length;W++)ya(c,g[W],v,S,U);return null}return v=wa(v),c&&c[ze]?c.K(g,v,m(S)?!!S.capture:!1,U):_a(c,g,v,!1,S,U)}function _a(c,g,v,S,U,W){if(!g)throw Error("Invalid event type");var ie=m(U)?!!U.capture:!!U,We=Wi(c);if(We||(c[Js]=We=new Ar(c)),v=We.add(g,v,S,ie,W),v.proxy)return v;if(S=ou(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)Re||(U=ie),U===void 0&&(U=!1),c.addEventListener(g.toString(),S,U);else if(c.attachEvent)c.attachEvent(Cr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ou(){function c(v){return g.call(c.src,c.listener,v)}const g=va;return c}function Hi(c,g,v,S,U){if(Array.isArray(g))for(var W=0;W<g.length;W++)Hi(c,g[W],v,S,U);else S=m(S)?!!S.capture:!!S,v=wa(v),c&&c[ze]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],v=Yr(W,v,S,U),-1<v&&(Ct(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=Wi(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Yr(g,v,S,U)),(v=-1<c?g[c]:null)&&Rr(v))}function Rr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ze])$i(g.i,c);else{var v=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(v,S,c.capture):g.detachEvent?g.detachEvent(Cr(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=Wi(g))?($i(v,c),v.h==0&&(v.src=null,g[Js]=null)):Ct(c)}}}function Cr(c){return c in qi?qi[c]:qi[c]="on"+c}function va(c,g){if(c.da)c=!0;else{g=new Pe(g,this);var v=c.listener,S=c.ha||c.src;c.fa&&Rr(c),c=v.call(S,g)}return c}function Wi(c){return c=c[Js],c instanceof Ar?c:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function wa(c){return typeof c=="function"?c:(c[Ki]||(c[Ki]=function(g){return c.handleEvent(g)}),c[Ki])}function Et(){Q.call(this),this.i=new Ar(this),this.M=this,this.F=null}x(Et,Q),Et.prototype[ze]=!0,Et.prototype.removeEventListener=function(c,g,v,S){Hi(this,c,g,v,S)};function Tt(c,g){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new fe(g,c);else if(g instanceof fe)g.target=g.target||c;else{var U=g;g=new fe(S,c),D(g,U)}if(U=!0,v)for(var W=v.length-1;0<=W;W--){var ie=g.g=v[W];U=Pr(ie,S,!0,g)&&U}if(ie=g.g=c,U=Pr(ie,S,!0,g)&&U,U=Pr(ie,S,!1,g)&&U,v)for(W=0;W<v.length;W++)ie=g.g=v[W],U=Pr(ie,S,!1,g)&&U}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],S=0;S<v.length;S++)Ct(v[S]);delete c.g[g],c.h--}}this.F=null},Et.prototype.K=function(c,g,v,S){return this.i.add(String(c),g,!1,v,S)},Et.prototype.L=function(c,g,v,S){return this.i.add(String(c),g,!0,v,S)};function Pr(c,g,v,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,W=0;W<g.length;++W){var ie=g[W];if(ie&&!ie.da&&ie.capture==v){var We=ie.listener,It=ie.ha||ie.src;ie.fa&&$i(c.i,ie),U=We.call(It,S)!==!1&&U}}return U&&!S.defaultPrevented}function Ea(c,g,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Zr(c){c.g=Ea(()=>{c.g=null,c.i&&(c.i=!1,Zr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Xs extends Q{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Zr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(c){Q.call(this),this.h=c,this.g={}}x(Ys,Q);var Ta=[];function Ia(c){_e(c.g,function(g,v){this.g.hasOwnProperty(v)&&Rr(g)},c),c.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),Ia(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sa=d.JSON.stringify,Aa=d.JSON.parse,Ra=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Zs(){}Zs.prototype.h=null;function Gi(c){return c.h||(c.h=c.i())}function Qi(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sr(){fe.call(this,"d")}x(sr,fe);function Ji(){fe.call(this,"c")}x(Ji,fe);var ir={},Ca=null;function ei(){return Ca=Ca||new Et}ir.La="serverreachability";function Pa(c){fe.call(this,ir.La,c)}x(Pa,fe);function kr(c){const g=ei();Tt(g,new Pa(g))}ir.STAT_EVENT="statevent";function ka(c,g){fe.call(this,ir.STAT_EVENT,c),this.stat=g}x(ka,fe);function lt(c){const g=ei();Tt(g,new ka(g,c))}ir.Ma="timingevent";function Xi(c,g){fe.call(this,ir.Ma,c),this.size=g}x(Xi,fe);function Mn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function ti(){this.g=!0}ti.prototype.xa=function(){this.g=!1};function ni(c,g,v,S,U,W){c.info(function(){if(c.g)if(W)for(var ie="",We=W.split("&"),It=0;It<We.length;It++){var Le=We[It].split("=");if(1<Le.length){var Pt=Le[0];Le=Le[1];var pt=Pt.split("_");ie=2<=pt.length&&pt[1]=="type"?ie+(Pt+"="+Le+"&"):ie+(Pt+"=redacted&")}}else ie=null;else ie=W;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+g+`
`+v+`
`+ie})}function Yi(c,g,v,S,U,W,ie){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+g+`
`+v+`
`+W+" "+ie})}function jn(c,g,v,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ed(c,v)+(S?" "+S:"")})}function xa(c,g){c.info(function(){return"TIMEOUT: "+g})}ti.prototype.info=function(){};function ed(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ie=1;ie<U.length;ie++)U[ie]=""}}}}return Sa(v)}catch{return g}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function ri(){}x(ri,Zs),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},Fn=new ri;function Un(c,g,v,S){this.j=c,this.i=g,this.l=v,this.R=S||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lu}function lu(){this.i=null,this.g="",this.h=!1}var Na={},eo={};function to(c,g,v){c.L=1,c.v=ss(mn(g)),c.m=v,c.P=!0,ba(c,null)}function ba(c,g){c.F=Date.now(),Xe(c),c.A=mn(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),os(v.i,"t",S),c.C=0,v=c.j.J,c.h=new lu,c.g=Ru(c.j,v?g:null,!c.m),0<c.O&&(c.M=new Xs(I(c.Y,c,c.g),c.O)),g=c.U,v=c.g,S=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(Ta[0]=U.toString()),U=Ta);for(var W=0;W<U.length;W++){var ie=ya(v,U[W],S||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),kr(),ni(c.i,c.u,c.A,c.l,c.R,c.m)}Un.prototype.ca=function(c){c=c.target;const g=this.M;g&&rn(c)==3?g.j():this.Y(c)},Un.prototype.Y=function(c){try{if(c==this.g)e:{const pt=rn(this.g);var g=this.g.Ba();const Pn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||ja(this.g)))){this.J||pt!=4||g==7||(g==8||0>=Pn?kr(3):kr(2)),si(this);var v=this.g.Z();this.X=v;t:if(uu(this)){var S=ja(this.g);c="";var U=S.length,W=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),es(this);var ie="";break t}this.h.i=new d.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(W&&g==U-1)});S.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=v==200,Yi(this.i,this.u,this.A,this.l,this.R,pt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var We,It=this.g;if((We=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(We)){var Le=We;break t}}Le=null}if(v=Le)jn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,v);else{this.o=!1,this.s=3,lt(12),Rn(this),es(this);break e}}if(this.P){v=!0;let yn;for(;!this.J&&this.C<ie.length;)if(yn=td(this,ie),yn==eo){pt==4&&(this.s=4,lt(14),v=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Na){this.s=4,lt(15),jn(this.i,this.l,ie,"[Invalid Chunk]"),v=!1;break}else jn(this.i,this.l,yn,null),Oa(this,yn);if(uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||ie.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)jn(this.i,this.l,ie,"[Invalid Chunked Response]"),Rn(this),es(this);else if(0<ie.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Ua(Pt),Pt.M=!0,lt(11))}}else jn(this.i,this.l,ie,null),Oa(this,ie);pt==4&&Rn(this),this.o&&!this.J&&(pt==4?fo(this.j,this):(this.o=!1,Xe(this)))}else ao(this.g),v==400&&0<ie.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Rn(this),es(this)}}}catch{}finally{}};function uu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function td(c,g){var v=c.C,S=g.indexOf(`
`,v);return S==-1?eo:(v=Number(g.substring(v,S)),isNaN(v)?Na:(S+=1,S+v>g.length?eo:(g=g.slice(S,S+v),c.C=S+v,g)))}Un.prototype.cancel=function(){this.J=!0,Rn(this)};function Xe(c){c.S=Date.now()+c.I,cu(c,c.I)}function cu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Mn(I(c.ba,c),g)}function si(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Un.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xa(this.i,this.A),this.L!=2&&(kr(),lt(17)),Rn(this),this.s=2,es(this)):cu(this,this.S-c)};function es(c){c.j.G==0||c.J||fo(c.j,c)}function Rn(c){si(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ia(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Oa(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||Xt(v.h,c))){if(!c.K&&Xt(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ho(v),Hn(v);else break e;co(v),lt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Mn(I(v.Za,v),6e3));if(1>=du(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Dr(v,11)}else if((c.K||v.g==c)&&ho(v),!se(g))for(U=v.Da.g.parse(g),g=0;g<U.length;g++){let Le=U[g];if(v.T=Le[0],Le=Le[1],v.G==2)if(Le[0]=="c"){v.K=Le[1],v.ia=Le[2];const Pt=Le[3];Pt!=null&&(v.la=Pt,v.j.info("VER="+v.la));const pt=Le[4];pt!=null&&(v.Aa=pt,v.j.info("SVER="+v.Aa));const Pn=Le[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(S=1.5*Pn,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const yn=c.g;if(yn){const hi=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var W=S.h;W.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Da(W,W.h),W.h=null))}if(S.D){const mo=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;mo&&(S.ya=mo,Qe(S.I,S.D,mo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var ie=c;if(S.qa=Au(S,S.J?S.ia:null,S.W),ie.K){fu(S.h,ie);var We=ie,It=S.L;It&&(We.I=It),We.B&&(si(We),Xe(We)),S.g=ie}else ci(S);0<v.i.length&&ur(v)}else Le[0]!="stop"&&Le[0]!="close"||Dr(v,7);else v.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Dr(v,7):Vt(v):Le[0]!="noop"&&v.l&&v.l.ta(Le),v.v=0)}}kr(4)}catch{}}var hu=class{constructor(c,g){this.g=c,this.map=g}};function ii(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function du(c){return c.h?1:c.g?c.g.size:0}function Xt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Da(c,g){c.g?c.g.add(g):c.h=g}function fu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}ii.prototype.cancel=function(){if(this.i=pu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function pu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return j(c.i)}function no(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],v=c.length,S=0;S<v;S++)g.push(c[S]);return g}g=[],v=0;for(S in c)g[v++]=c[S];return g}function ro(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const S in c)g[v++]=S;return g}}}function ts(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=ro(c),S=no(c),U=S.length,W=0;W<U;W++)g.call(void 0,S[W],v&&v[W],c)}var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nd(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),U=null;if(0<=S){var W=c[v].substring(0,S);U=c[v].substring(S+1)}else W=c[v];g(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function xr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xr){this.h=c.h,ai(this,c.j),this.o=c.o,this.g=c.g,ns(this,c.s),this.l=c.l;var g=c.i,v=new or;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),rs(this,v),this.m=c.m}else c&&(g=String(c).match(oi))?(this.h=!1,ai(this,g[1]||"",!0),this.o=Oe(g[2]||""),this.g=Oe(g[3]||"",!0),ns(this,g[4]),this.l=Oe(g[5]||"",!0),rs(this,g[6]||"",!0),this.m=Oe(g[7]||"")):(this.h=!1,this.i=new or(null,this.h))}xr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(is(g,so,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(is(g,so,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(is(v,v.charAt(0)=="/"?yu:gu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",is(v,Va)),c.join("")};function mn(c){return new xr(c)}function ai(c,g,v){c.j=v?Oe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ns(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function rs(c,g,v){g instanceof or?(c.i=g,ar(c.i,c.h)):(v||(g=is(g,_u)),c.i=new or(g,c.h))}function Qe(c,g,v){c.i.set(g,v)}function ss(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function is(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,mu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var so=/[#\/\?@]/g,gu=/[#\?:]/g,yu=/[#\?]/g,_u=/[#\?@]/g,Va=/#/g;function or(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Dt(c){c.g||(c.g=new Map,c.h=0,c.i&&nd(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=or.prototype,n.add=function(c,g){Dt(this),this.i=null,c=Cn(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function Bn(c,g){Dt(c),g=Cn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function zn(c,g){return Dt(c),g=Cn(c,g),c.g.has(g)}n.forEach=function(c,g){Dt(this),this.g.forEach(function(v,S){v.forEach(function(U){c.call(g,U,S,this)},this)},this)},n.na=function(){Dt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let S=0;S<g.length;S++){const U=c[S];for(let W=0;W<U.length;W++)v.push(g[S])}return v},n.V=function(c){Dt(this);let g=[];if(typeof c=="string")zn(this,c)&&(g=g.concat(this.g.get(Cn(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},n.set=function(c,g){return Dt(this),this.i=null,c=Cn(this,c),zn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function os(c,g,v){Bn(c,g),0<v.length&&(c.i=null,c.g.set(Cn(c,g),j(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var S=g[v];const W=encodeURIComponent(String(S)),ie=this.V(S);for(S=0;S<ie.length;S++){var U=W;ie[S]!==""&&(U+="="+encodeURIComponent(String(ie[S]))),c.push(U)}}return this.i=c.join("&")};function Cn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function ar(c,g){g&&!c.j&&(Dt(c),c.i=null,c.g.forEach(function(v,S){var U=S.toLowerCase();S!=U&&(Bn(this,S),os(this,U,v))},c)),c.j=g}function rd(c,g){const v=new ti;if(d.Image){const S=new Image;S.onload=L(nn,v,"TestLoadImage: loaded",!0,g,S),S.onerror=L(nn,v,"TestLoadImage: error",!1,g,S),S.onabort=L(nn,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=L(nn,v,"TestLoadImage: timeout",!1,g,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function vu(c,g){const v=new ti,S=new AbortController,U=setTimeout(()=>{S.abort(),nn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(W=>{clearTimeout(U),W.ok?nn(v,"TestPingServer: ok",!0,g):nn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),nn(v,"TestPingServer: error",!1,g)})}function nn(c,g,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function sd(){this.g=new Ra}function wu(c,g,v){const S=v||"";try{ts(c,function(U,W){let ie=U;m(U)&&(ie=Sa(U)),g.push(S+W+"="+encodeURIComponent(ie))})}catch(U){throw g.push(S+"type="+encodeURIComponent("_badmap")),U}}function Nr(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Nr,Zs),Nr.prototype.g=function(){return new li(this.l,this.j)},Nr.prototype.i=(function(c){return function(){return c}})({});function li(c,g){Et.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(li,Et),n=li.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,qn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?$n(this):qn(this),this.readyState==3&&Eu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,$n(this))},n.Qa=function(c){this.g&&(this.response=c,$n(this))},n.ga=function(){this.g&&$n(this)};function $n(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function qn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function br(c){let g="";return _e(c,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function as(c,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=br(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Qe(c,g,v))}function tt(c){Et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(tt,Et);var id=/^https?$/i,La=["POST","PUT"];n=tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?Gi(this.o):Gi(Fn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){ui(this,W);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())v.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(La,g,void 0))||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of v)this.g.setRequestHeader(W,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oo(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){ui(this,W)}};function ui(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,io(c),gn(c)}function io(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),gn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ma(this):this.bb())},n.bb=function(){Ma(this)};function Ma(c){if(c.h&&typeof u<"u"&&(!c.v[1]||rn(c)!=4||c.Z()!=2)){if(c.u&&rn(c)==4)Ea(c.Ea,0,c);else if(Tt(c,"readystatechange"),rn(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=ie===0){var U=String(c.D).match(oi)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),S=!id.test(U?U.toLowerCase():"")}v=S}if(v)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var W=2<rn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",io(c)}}finally{gn(c)}}}}function gn(c,g){if(c.g){oo(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Tt(c,"ready");try{v.onreadystatechange=S}catch{}}}function oo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function rn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Aa(g)}};function ja(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ao(c){const g={};c=(c.g&&2<=rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(se(c[S]))continue;var v=O(c[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=g[U]||[];g[U]=W,W.push(v)}b(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function Fa(c){this.Aa=0,this.i=[],this.j=new ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lr("baseRetryDelayMs",5e3,c),this.cb=lr("retryDelaySeedMs",1e4,c),this.Wa=lr("forwardChannelMaxRetries",2,c),this.wa=lr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ii(c&&c.concurrentRequestLimit),this.Da=new sd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fa.prototype,n.la=8,n.G=1,n.connect=function(c,g,v,S){lt(0),this.W=c,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Au(this,null,this.W),ur(this)};function Vt(c){if(lo(c),c.G==3){var g=c.U++,v=mn(c.I);if(Qe(v,"SID",c.K),Qe(v,"RID",g),Qe(v,"TYPE","terminate"),Or(c,v),g=new Un(c,c.j,g),g.L=2,g.v=ss(mn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=g.v,v=!0),v||(g.g=Ru(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Xe(g)}Su(c)}function Hn(c){c.g&&(Ua(c),c.g.cancel(),c.g=null)}function lo(c){Hn(c),c.u&&(d.clearTimeout(c.u),c.u=null),ho(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function ur(c){if(!pn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Be||ae(),ne||(Be(),ne=!0),ge.add(g,c),c.B=0}}function od(c,g){return du(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Mn(I(c.Ga,c,g),Iu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Un(this,this.j,c);let W=this.o;if(this.S&&(W?(W=A(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ls(this,U,g),v=mn(this.I),Qe(v,"RID",c),Qe(v,"CVER",22),this.D&&Qe(v,"X-HTTP-Session-Id",this.D),Or(this,v),W&&(this.O?g="headers="+encodeURIComponent(String(br(W)))+"&"+g:this.m&&as(v,this.m,W)),Da(this.h,U),this.Ua&&Qe(v,"TYPE","init"),this.P?(Qe(v,"$req",g),Qe(v,"SID","null"),U.T=!0,to(U,v,null)):to(U,v,g),this.G=2}}else this.G==3&&(c?uo(this,c):this.i.length==0||pn(this.h)||uo(this))};function uo(c,g){var v;g?v=g.l:v=c.U++;const S=mn(c.I);Qe(S,"SID",c.K),Qe(S,"RID",v),Qe(S,"AID",c.T),Or(c,S),c.m&&c.o&&as(S,c.m,c.o),v=new Un(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ls(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Da(c.h,v),to(v,S,g)}function Or(c,g){c.H&&_e(c.H,function(v,S){Qe(g,S,v)}),c.l&&ts({},function(v,S){Qe(g,S,v)})}function ls(c,g,v){v=Math.min(c.i.length,v);var S=c.l?I(c.l.Na,c.l,c):null;e:{var U=c.i;let W=-1;for(;;){const ie=["count="+v];W==-1?0<v?(W=U[0].g,ie.push("ofs="+W)):W=0:ie.push("ofs="+W);let We=!0;for(let It=0;It<v;It++){let Le=U[It].g;const Pt=U[It].map;if(Le-=W,0>Le)W=Math.max(0,U[It].g-100),We=!1;else try{wu(Pt,ie,"req"+Le+"_")}catch{S&&S(Pt)}}if(We){S=ie.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,S}function ci(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Be||ae(),ne||(Be(),ne=!0),ge.add(g,c),c.v=0}}function co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Mn(I(c.Fa,c),Iu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Mn(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Hn(this),Tu(this))};function Ua(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Tu(c){c.g=new Un(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=mn(c.qa);Qe(g,"RID","rpc"),Qe(g,"SID",c.K),Qe(g,"AID",c.T),Qe(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(g,"TO",c.ja),Qe(g,"TYPE","xmlhttp"),Or(c,g),c.m&&c.o&&as(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ss(mn(g)),v.m=null,v.P=!0,ba(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Hn(this),co(this),lt(19))};function ho(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function fo(c,g){var v=null;if(c.g==g){ho(c),Ua(c),c.g=null;var S=2}else if(Xt(c.h,g))v=g.D,fu(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;S=ei(),Tt(S,new Xi(S,v)),ur(c)}else ci(c);else if(U=g.s,U==3||U==0&&0<g.X||!(S==1&&od(c,g)||S==2&&co(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),U){case 1:Dr(c,5);break;case 4:Dr(c,10);break;case 3:Dr(c,6);break;default:Dr(c,2)}}}function Iu(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function Dr(c,g){if(c.j.info("Error code "+g),g==2){var v=I(c.fb,c),S=c.Xa;const U=!S;S=new xr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ai(S,"https"),ss(S),U?rd(S.toString(),v):vu(S.toString(),v)}else lt(2);c.G=0,c.l&&c.l.sa(g),Su(c),lo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Su(c){if(c.G=0,c.ka=[],c.l){const g=pu(c.h);(g.length!=0||c.i.length!=0)&&(k(c.ka,g),k(c.ka,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.ra()}}function Au(c,g,v){var S=v instanceof xr?mn(v):new xr(v);if(S.g!="")g&&(S.g=g+"."+S.g),ns(S,S.s);else{var U=d.location;S=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var W=new xr(null);S&&ai(W,S),g&&(W.g=g),U&&ns(W,U),v&&(W.l=v),S=W}return v=c.D,g=c.ya,v&&g&&Qe(S,v,g),Qe(S,"VER",c.la),Or(c,S),S}function Ru(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new tt(new Nr({eb:v})):new tt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ba(){}n=Ba.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function po(){}po.prototype.g=function(c,g){return new Yt(c,g)};function Yt(c,g){Et.call(this),this.g=new Fa(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!se(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!se(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new cr(this)}x(Yt,Et),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Vt(this.g)},Yt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Sa(c),c=v);g.i.push(new hu(g.Ya++,c)),g.G==3&&ur(g)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,Yt.aa.N.call(this)};function Cu(c){sr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}x(Cu,sr);function Pu(){Ji.call(this),this.status=1}x(Pu,Ji);function cr(c){this.g=c}x(cr,Ba),cr.prototype.ua=function(){Tt(this.g,"a")},cr.prototype.ta=function(c){Tt(this.g,new Cu(c))},cr.prototype.sa=function(c){Tt(this.g,new Pu)},cr.prototype.ra=function(){Tt(this.g,"b")},po.prototype.createWebChannel=po.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,NE=function(){return new po},xE=function(){return ei()},kE=ir,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,Vc=Zi,au.COMPLETE="complete",PE=au,Qi.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",Et.prototype.listen=Et.prototype.K,gl=Qi,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,CE=tt}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const J_="@firebase/firestore",X_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new $p("@firebase/firestore");function Mo(){return Di.logLevel}function ue(n,...e){if(Di.logLevel<=Ne.DEBUG){const t=e.map(tm);Di.debug(`Firestore (${ca}): ${n}`,...t)}}function Kr(n,...e){if(Di.logLevel<=Ne.ERROR){const t=e.map(tm);Di.error(`Firestore (${ca}): ${n}`,...t)}}function Fs(n,...e){if(Di.logLevel<=Ne.WARN){const t=e.map(tm);Di.warn(`Firestore (${ca}): ${n}`,...t)}}function tm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,bE(n,r,t)}function bE(n,e,t){let r=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Kr(r),new Error(r)}function je(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||bE(e,o,r)}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kt.UNAUTHENTICATED)))}shutdown(){}}class lP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uP{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},d=f=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new OE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class cP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Y_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const r=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const o=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Y_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Y_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=fP(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function ke(n,e){return n<e?-1:n>e?1:0}function up(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return ke(r,o);{const a=DE(),u=pP(a.encode(Z_(n,t)),a.encode(Z_(e,t)));return u!==0?u:ke(r,o)}}t+=r>65535?2:1}return ke(n.length,e.length)}function Z_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function pP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function Xo(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="__name__";class gr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=gr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return ke(e.length,t.length)}static compareSegments(e,t){const r=gr.isNumericId(e),o=gr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?gr.extractNumericId(e).compare(gr.extractNumericId(t)):up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vs.fromString(e.substring(4,e.length-2))}}class Ke extends gr{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends gr{construct(e,t,r){return new Ut(e,t,r)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ev}static keyField(){return new Ut([ev])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new oe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new oe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(r+=d,o++):(a(),o++)}if(a(),u)throw new oe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ke.fromString(e))}static fromName(e){return new ye(Ke.fromString(e).popFirst(5))}static empty(){return new ye(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n,e,t){if(!t)throw new oe(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gP(n,e,t,r){if(e===!0&&r===!0)throw new oe(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tv(n){if(!ye.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nv(n){if(ye.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function kh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kh(n);throw new oe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wl(n,e){if(!LE(n))throw new oe(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new oe(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=-62135596800,sv=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sv);return new qe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rv)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:_t("string",qe._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new qe(0,0))}static max(){return new Te(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=-1;function yP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new Us(o,ye.empty(),e)}function _P(n){return new Us(n.readTime,n.key,Dl)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(Te.min(),ye.empty(),Dl)}static max(){return new Us(Te.max(),ye.empty(),Dl)}}function vP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==wP)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,r)=>{t(e)}))}static reject(e){return new J(((t,r)=>{r(e)}))}static waitFor(e){return new J(((t,r)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(f=>r(f)))})),u=!0,a===o&&t()}))}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next((o=>o?J.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,a)=>{r.push(t.call(this,o,a))})),this.waitFor(r)}static mapArray(e,t){return new J(((r,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&r(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new J(((r,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):r()};a()}))}}function TP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function da(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}xh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=-1;function Kl(n){return n==null}function ih(n){return n===0&&1/n==-1/0}function IP(n){return typeof n=="number"&&Number.isInteger(n)&&!ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="";function SP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iv(e)),e=AP(n.get(t),e);return iv(e)}function AP(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case ME:t+="";break;default:t+=a}}return t}function iv(n){return n+ME+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ft.RED,this.left=o??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ft(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ft.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rt(this.comparator);return t.data=e,t}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new Rt(Ut.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new FE("Invalid base64 string: "+a):a}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const RP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=RP.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zs(n){return typeof n=="string"?Bt.fromBase64String(n):Bt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="server_timestamp",BE="__type__",zE="__previous_value__",$E="__local_write_time__";function sm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BE])===null||t===void 0?void 0:t.stringValue)===UE}function Nh(n){const e=n.mapValue.fields[zE];return sm(e)?Nh(e):e}function Vl(n){const e=Bs(n.mapValue.fields[$E].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t,r,o,a,u,d,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const oh="(default)";class Ll{constructor(e,t){this.projectId=e,this.database=t||oh}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===oh}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__type__",PP="__max__",Ac={mapValue:{}},HE="__vector__",ah="value";function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sm(n)?4:xP(n)?9007199254740991:kP(n)?10:11:ve(28295,{value:n})}function Ir(n,e){if(n===e)return!0;const t=$s(n);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vl(n).isEqual(Vl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Bs(o.timestampValue),d=Bs(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return zs(o.bytesValue).isEqual(zs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return ct(o.geoPointValue.latitude)===ct(a.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return ct(o.integerValue)===ct(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ct(o.doubleValue),d=ct(a.doubleValue);return u===d?ih(u)===ih(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Xo(n.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(ov(u)!==ov(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Ir(u[f],d[f])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Ml(n,e){return(n.values||[]).find((t=>Ir(t,e)))!==void 0}function Yo(n,e){if(n===e)return 0;const t=$s(n),r=$s(e);if(t!==r)return ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=ct(a.integerValue||a.doubleValue),f=ct(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return lv(n.timestampValue,e.timestampValue);case 4:return lv(Vl(n),Vl(e));case 5:return up(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=zs(a),f=zs(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=ke(d[m],f[m]);if(_!==0)return _}return ke(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ke(ct(a.latitude),ct(u.latitude));return d!==0?d:ke(ct(a.longitude),ct(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return uv(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,_;const w=a.fields||{},I=u.fields||{},L=(d=w[ah])===null||d===void 0?void 0:d.arrayValue,x=(f=I[ah])===null||f===void 0?void 0:f.arrayValue,j=ke(((m=L==null?void 0:L.values)===null||m===void 0?void 0:m.length)||0,((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:uv(L,x)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Ac.mapValue&&u===Ac.mapValue)return 0;if(a===Ac.mapValue)return 1;if(u===Ac.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const I=up(f[w],_[w]);if(I!==0)return I;const L=Yo(d[f[w]],m[_[w]]);if(L!==0)return L}return ke(f.length,_.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{le:t})}}function lv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=Bs(n),r=Bs(e),o=ke(t.seconds,r.seconds);return o!==0?o:ke(t.nanos,r.nanos)}function uv(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=Yo(t[o],r[o]);if(a)return a}return ke(t.length,r.length)}function Zo(n){return cp(n)}function cp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Bs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=cp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${cp(t.fields[u])}`;return o+"}"})(n.mapValue):ve(61005,{value:n})}function Lc(n){switch($s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(n);return e?16+Lc(e):16;case 5:return 2*n.stringValue.length;case 6:return zs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,a)=>o+Lc(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return Gs(r.fields,((a,u)=>{o+=a.length+Lc(u)})),o})(n.mapValue);default:throw ve(13486,{value:n})}}function cv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hp(n){return!!n&&"integerValue"in n}function im(n){return!!n&&"arrayValue"in n}function hv(n){return!!n&&"nullValue"in n}function dv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mc(n){return!!n&&"mapValue"in n}function kP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[qE])===null||t===void 0?void 0:t.stringValue)===HE}function Il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Il(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Ut.emptyPath(),r={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=d.popLast()}u?r[d.lastSegment()]=Il(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());Mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Gs(t,((o,a)=>e[o]=a));for(const o of r)delete e[o]}clone(){return new tn(Il(this.value))}}function WE(n){const e=[];return Gs(n.fields,((t,r)=>{const o=new Ut([t]);if(Mc(r)){const a=WE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,t,r,o,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Ot(e,0,Te.min(),Te.min(),Te.min(),tn.empty(),0)}static newFoundDocument(e,t,r,o){return new Ot(e,1,t,Te.min(),r,o,0)}static newNoDocument(e,t){return new Ot(e,2,t,Te.min(),Te.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new Ot(e,3,t,Te.min(),Te.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.position=e,this.inclusive=t}}function fv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=Yo(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function pv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ir(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function NP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{}class yt extends KE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new OP(e,t,r):t==="array-contains"?new LP(e,r):t==="in"?new MP(e,r):t==="not-in"?new jP(e,r):t==="array-contains-any"?new FP(e,r):new yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DP(e,r):new VP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yo(t,this.value)):t!==null&&$s(this.value)===$s(t)&&this.matchesComparison(Yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends KE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new nr(e,t)}matches(e){return GE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function GE(n){return n.op==="and"}function QE(n){return bP(n)&&GE(n)}function bP(n){for(const e of n.filters)if(e instanceof nr)return!1;return!0}function dp(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(QE(n))return n.filters.map((e=>dp(e))).join(",");{const e=n.filters.map((t=>dp(t))).join(",");return`${n.op}(${e})`}}function JE(n,e){return n instanceof yt?(function(r,o){return o instanceof yt&&r.op===o.op&&r.field.isEqual(o.field)&&Ir(r.value,o.value)})(n,e):n instanceof nr?(function(r,o){return o instanceof nr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((a,u,d)=>a&&JE(u,o.filters[d])),!0):!1})(n,e):void ve(19439)}function XE(n){return n instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`})(n):n instanceof nr?(function(t){return t.op.toString()+" {"+t.getFilters().map(XE).join(" ,")+"}"})(n):"Filter"}class OP extends yt{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class DP extends yt{constructor(e,t){super(e,"in",t),this.keys=YE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class VP extends yt{constructor(e,t){super(e,"not-in",t),this.keys=YE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function YE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>ye.fromName(r.referenceValue)))}class LP extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return im(t)&&Ml(t.arrayValue,this.value)}}class MP extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ml(this.value.arrayValue,t)}}class jP extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ml(this.value.arrayValue,t)}}class FP extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!im(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ml(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t=null,r=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function mv(n,e=null,t=[],r=[],o=null,a=null,u=null){return new UP(n,e,t,r,o,a,u)}function om(n){const e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>dp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Kl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Zo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Zo(r))).join(",")),e.Pe=t}return e.Pe}function am(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pv(n.startAt,e.startAt)&&pv(n.endAt,e.endAt)}function fp(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t=null,r=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function BP(n,e,t,r,o,a,u,d){return new Gl(n,e,t,r,o,a,u,d)}function bh(n){return new Gl(n)}function gv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ZE(n){return n.collectionGroup!==null}function Sl(n){const e=Ae(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Rt(Ut.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new uh(a,r))})),t.has(Ut.keyField().canonicalString())||e.Te.push(new uh(Ut.keyField(),r))}return e.Te}function wr(n){const e=Ae(n);return e.Ie||(e.Ie=zP(e,Sl(n))),e.Ie}function zP(n,e){if(n.limitType==="F")return mv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new uh(o.field,a)}));const t=n.endAt?new lh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lh(n.startAt.position,n.startAt.inclusive):null;return mv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pp(n,e){const t=n.filters.concat([e]);return new Gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mp(n,e,t){return new Gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Oh(n,e){return am(wr(n),wr(e))&&n.limitType===e.limitType}function e0(n){return`${om(wr(n))}|lt:${n.limitType}`}function jo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>XE(o))).join(", ")}]`),Kl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Zo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Zo(o))).join(",")),`Target(${r})`})(wr(n))}; limitType=${n.limitType})`}function Dh(n,e){return e.isFoundDocument()&&(function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ye.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,o){for(const a of Sl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(u,d,f){const m=fv(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,Sl(r),o)||r.endAt&&!(function(u,d,f){const m=fv(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,Sl(r),o))})(n,e)}function $P(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t0(n){return(e,t)=>{let r=!1;for(const o of Sl(n)){const a=qP(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function qP(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Yo(f,m):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((t,r)=>{for(const[o,a]of r)e(o,a)}))}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new it(ye.comparator);function Gr(){return HP}const n0=new it(ye.comparator);function yl(...n){let e=n0;for(const t of n)e=e.insert(t.key,t);return e}function r0(n){let e=n0;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ci(){return Al()}function s0(){return Al()}function Al(){return new Fi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const WP=new it(ye.comparator),KP=new Rt(ye.comparator);function be(...n){let e=KP;for(const t of n)e=e.add(t);return e}const GP=new Rt(ke);function QP(){return GP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function i0(n){return{integerValue:""+n}}function JP(n,e){return IP(e)?i0(e):lm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this._=void 0}}function XP(n,e,t){return n instanceof ch?(function(o,a){const u={fields:{[BE]:{stringValue:UE},[$E]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&sm(a)&&(a=Nh(a)),a&&(u.fields[zE]=a),{mapValue:u}})(t,e):n instanceof jl?a0(n,e):n instanceof Fl?l0(n,e):(function(o,a){const u=o0(o,a),d=yv(u)+yv(o.Ee);return hp(u)&&hp(o.Ee)?i0(d):lm(o.serializer,d)})(n,e)}function YP(n,e,t){return n instanceof jl?a0(n,e):n instanceof Fl?l0(n,e):t}function o0(n,e){return n instanceof hh?(function(r){return hp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class ch extends Vh{}class jl extends Vh{constructor(e){super(),this.elements=e}}function a0(n,e){const t=u0(e);for(const r of n.elements)t.some((o=>Ir(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Fl extends Vh{constructor(e){super(),this.elements=e}}function l0(n,e){let t=u0(e);for(const r of n.elements)t=t.filter((o=>!Ir(o,r)));return{arrayValue:{values:t}}}class hh extends Vh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function yv(n){return ct(n.integerValue||n.doubleValue)}function u0(n){return im(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZP(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof jl&&o instanceof jl||r instanceof Fl&&o instanceof Fl?Xo(r.elements,o.elements,Ir):r instanceof hh&&o instanceof hh?Ir(r.Ee,o.Ee):r instanceof ch&&o instanceof ch})(n.transform,e.transform)}class ek{constructor(e,t){this.version=e,this.transformResults=t}}class Gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lh{}function c0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Mh(n.key,Gt.none()):new Ql(n.key,n.data,Gt.none());{const t=n.data,r=tn.empty();let o=new Rt(Ut.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new Qs(n.key,r,new Tn(o.toArray()),Gt.none())}}function tk(n,e,t){n instanceof Ql?(function(o,a,u){const d=o.value.clone(),f=vv(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Qs?(function(o,a,u){if(!jc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=vv(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(h0(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Rl(n,e,t,r){return n instanceof Ql?(function(a,u,d,f){if(!jc(a.precondition,u))return d;const m=a.value.clone(),_=wv(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Qs?(function(a,u,d,f){if(!jc(a.precondition,u))return d;const m=wv(a.fieldTransforms,f,u),_=u.data;return _.setAll(h0(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,u,d){return jc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function nk(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=o0(r.transform,o||null);a!=null&&(t===null&&(t=tn.empty()),t.set(r.field,a))}return t||null}function _v(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Xo(r,o,((a,u)=>ZP(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ql extends Lh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qs extends Lh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function h0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function vv(n,e,t){const r=new Map;je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);r.set(a.field,YP(u,d,t[o]))}return r}function wv(n,e,t){const r=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);r.set(o.field,XP(a,u,e))}return r}class Mh extends Lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d0 extends Lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&tk(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=s0();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=c0(u,d);f!==null&&r.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,((t,r)=>_v(t,r)))&&Xo(this.baseMutations,e.baseMutations,((t,r)=>_v(t,r)))}}class um{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){je(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return WP})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new um(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Me;function f0(n){switch(n){case K.OK:return ve(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function p0(n){if(n===void 0)return Kr("GRPC error has no .code"),K.UNKNOWN;switch(n){case gt.OK:return K.OK;case gt.CANCELLED:return K.CANCELLED;case gt.UNKNOWN:return K.UNKNOWN;case gt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case gt.INTERNAL:return K.INTERNAL;case gt.UNAVAILABLE:return K.UNAVAILABLE;case gt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case gt.NOT_FOUND:return K.NOT_FOUND;case gt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case gt.ABORTED:return K.ABORTED;case gt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case gt.DATA_LOSS:return K.DATA_LOSS;default:return ve(39323,{code:n})}}(Me=gt||(gt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Vs([4294967295,4294967295],0);function Ev(n){const e=DE().encode(n),t=new RE;return t.update(e),new Uint8Array(t.digest())}function Tv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Vs([t,r],0),new Vs([o,a],0)]}class cm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _l(`Invalid padding: ${t}`);if(r<0)throw new _l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _l(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Vs.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(Vs.fromNumber(r)));return o.compare(ok)===1&&(o=new Vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ev(e),[r,o]=Tv(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new cm(a,o,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=Ev(e),[r,o]=Tv(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jh(Te.min(),o,new it(ke),Gr(),be())}}class Jl{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jl(r,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class m0{constructor(e,t){this.targetId=e,this.De=t}}class g0{constructor(e,t,r=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Iv{constructor(){this.ve=0,this.Ce=Sv(),this.Fe=Bt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),t=be(),r=be();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ve(38017,{changeType:a})}})),new Jl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Sv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class ak{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gr(),this.je=Rc(),this.Je=Rc(),this.He=new it(ke)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const a=o.target;if(fp(a))if(r===0){const u=new ye(a.path);this.Xe(t,u,Ot.newNoDocument(u,Te.min()))}else je(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=zs(r).toUint8Array()}catch(f){if(f instanceof FE)return Fs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new cm(u,o,a)}catch(f){return Fs(f instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&fp(d.target)){const f=new ye(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,Ot.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let r=be();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new jh(e,t,this.He,this.ze,r);return this.ze=Gr(),this.je=Rc(),this.Je=Rc(),this.He=new it(ke),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Iv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Rt(ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Rt(ke),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Iv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Rc(){return new it(ye.comparator)}function Sv(){return new it(ye.comparator)}const lk={asc:"ASCENDING",desc:"DESCENDING"},uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ck={and:"AND",or:"OR"};class hk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gp(n,e){return n.useProto3Json||Kl(e)?e:{value:e}}function dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dk(n,e){return dh(n,e.toTimestamp())}function Sn(n){return je(!!n,49232),Te.fromTimestamp((function(t){const r=Bs(t);return new qe(r.seconds,r.nanos)})(n))}function hm(n,e){return yp(n,e).canonicalString()}function yp(n,e){const t=(function(o){return new Ke(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _0(n){const e=Ke.fromString(n);return je(S0(e),10190,{key:e.toString()}),e}function fh(n,e){return hm(n.databaseId,e.path)}function Cl(n,e){const t=_0(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(w0(t))}function v0(n,e){return hm(n.databaseId,e)}function fk(n){const e=_0(n);return e.length===4?Ke.emptyPath():w0(e)}function _p(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w0(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Av(n,e,t){return{name:fh(n,e),fields:t.value.mapValue.fields}}function pk(n,e){return"found"in e?(function(r,o){je(!!o.found,43571),o.found.name,o.found.updateTime;const a=Cl(r,o.found.name),u=Sn(o.found.updateTime),d=o.found.createTime?Sn(o.found.createTime):Te.min(),f=new tn({mapValue:{fields:o.found.fields}});return Ot.newFoundDocument(a,u,d,f)})(n,e):"missing"in e?(function(r,o){je(!!o.missing,3894),je(!!o.readTime,22933);const a=Cl(r,o.missing),u=Sn(o.readTime);return Ot.newNoDocument(a,u)})(n,e):ve(7234,{result:e})}function mk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ve(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(je(_===void 0||typeof _=="string",58123),Bt.fromBase64String(_||"")):(je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Bt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?K.UNKNOWN:p0(m.code);return new oe(_,m.message||"")})(u);t=new g0(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Cl(n,r.document.name),a=Sn(r.document.updateTime),u=r.document.createTime?Sn(r.document.createTime):Te.min(),d=new tn({mapValue:{fields:r.document.fields}}),f=Ot.newFoundDocument(o,a,u,d),m=r.targetIds||[],_=r.removedTargetIds||[];t=new Fc(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Cl(n,r.document),a=r.readTime?Sn(r.readTime):Te.min(),u=Ot.newNoDocument(o,a),d=r.removedTargetIds||[];t=new Fc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Cl(n,r.document),a=r.removedTargetIds||[];t=new Fc([],a,o,null)}else{if(!("filter"in e))return ve(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new ik(o,a),d=r.targetId;t=new m0(d,u)}}return t}function E0(n,e){let t;if(e instanceof Ql)t={update:Av(n,e.key,e.value)};else if(e instanceof Mh)t={delete:fh(n,e.key)};else if(e instanceof Qs)t={update:Av(n,e.key,e.data),updateMask:Sk(e.fieldMask)};else{if(!(e instanceof d0))return ve(16599,{Rt:e.type});t={verify:fh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof ch)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof jl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Fl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw ve(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:dk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ve(27497)})(n,e.precondition)),t}function gk(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Sn(o.updateTime):Sn(a);return u.isEqual(Te.min())&&(u=Sn(a)),new ek(u,o.transformResults||[])})(t,e)))):[]}function yk(n,e){return{documents:[v0(n,e.path)]}}function _k(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=v0(n,o);const a=(function(m){if(m.length!==0)return I0(nr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(I){return{field:Fo(I.field),direction:Ek(I.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=gp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function vk(n){let e=fk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){je(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const I=T0(w);return I instanceof nr&&QE(I)?I.getFilters():[I]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((I=>(function(x){return new uh(Uo(x.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(I)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let I;return I=typeof w=="object"?w.value:w,Kl(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(w){const I=!!w.before,L=w.values||[];return new lh(L,I)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const I=!w.before,L=w.values||[];return new lh(L,I)})(t.endAt)),BP(e,o,u,a,d,"F",f,m)}function wk(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function T0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uo(t.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Uo(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Uo(t.unaryFilter.field);return yt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Uo(t.unaryFilter.field);return yt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yt.create(Uo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return nr.create(t.compositeFilter.filters.map((r=>T0(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function Ek(n){return lk[n]}function Tk(n){return uk[n]}function Ik(n){return ck[n]}function Fo(n){return{fieldPath:n.canonicalString()}}function Uo(n){return Ut.fromServerFormat(n.fieldPath)}function I0(n){return n instanceof yt?(function(t){if(t.op==="=="){if(dv(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(hv(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dv(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if(hv(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:Tk(t.op),value:t.value}}})(n):n instanceof nr?(function(t){const r=t.getFilters().map((o=>I0(o)));return r.length===1?r[0]:{compositeFilter:{op:Ik(t.op),filters:r}}})(n):ve(54877,{filter:n})}function Sk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function S0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t,r,o,a=Te.min(),u=Te.min(),d=Bt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.gt=e}}function Rk(n){const e=vk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.Dn=new Pk}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Us.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class Pk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Rt(Ke.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Rt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A0=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(A0,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ea(0)}static ur(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LruGarbageCollector",kk=1048576;function Pv([n,e],[t,r]){const o=ke(n,t);return o===0?ke(e,r):o}class xk{constructor(e){this.Tr=e,this.buffer=new Rt(Pv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Nk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(Cv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){da(t)?ue(Cv,"Ignoring IndexedDB error during garbage collection: ",t):await ha(t)}await this.Rr(3e5)}))}}class bk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(xh.ue);const r=new xk(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Rv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,a,u,d,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,d=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),Mo()<=Ne.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function Ok(n,e){return new bk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.changes=new Fi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Rl(r.mutation,o,Tn.empty(),qe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,be()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=be()){const o=Ci();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((a=>{let u=yl();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ci();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,be())))}populateOverlays(e,t,r){const o=[];return r.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,o){let a=Gr();const u=Al(),d=(function(){return Al()})();return t.forEach(((f,m)=>{const _=r.get(m.key);o.has(m.key)&&(_===void 0||_.mutation instanceof Qs)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Rl(_.mutation,m,_.mutation.getFieldMask(),qe.now())):u.set(m.key,Tn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var w;return d.set(m,new Vk(_,(w=u.get(m))!==null&&w!==void 0?w:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Al();let o=new it(((u,d)=>u-d)),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||Tn.empty();_=d.applyToLocalView(m,_),r.set(f,_);const w=(o.get(d.batchId)||be()).add(f);o=o.insert(d.batchId,w)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,w=s0();_.forEach((I=>{if(!a.has(I)){const L=c0(t.get(I),r.get(I));L!==null&&w.set(I,L),a=a.add(I)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return J.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):J.resolve(Ci());let d=Dl,f=a;return u.next((m=>J.forEach(m,((_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{f=f.insert(_,I)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,be()))).next((_=>({batchId:d,changes:r0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let o=yl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=yl();return this.indexManager.getCollectionParents(e,a).next((d=>J.forEach(d,(f=>{const m=(function(w,I){return new Gl(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next((_=>{_.forEach(((w,I)=>{u=u.insert(w,I)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,Ot.newInvalidDocument(_)))}));let d=yl();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&Rl(_.mutation,m,Tn.empty(),qe.now()),Dh(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Sn(o.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:Rk(o.bundledQuery),readTime:Sn(o.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.overlays=new it(ye.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ci();return J.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&r.set(o,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,a)=>{this.wt(e,t,a)})),J.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const o=Ci(),a=t.length+1,u=new ye(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&o.set(f.getKey(),f)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new it(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=Ci(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Ci(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=o)););return J.resolve(d)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new sk(t,r));let a=this.kr.get(t);a===void 0&&(a=be(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.qr=new Rt(bt.Qr),this.$r=new Rt(bt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new bt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new bt(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new ye(new Ke([])),r=new bt(t,e),o=new bt(t,e+1),a=[];return this.$r.forEachInRange([r,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ye(new Ke([])),r=new bt(t,e),o=new bt(t,e+1);let a=be();return this.$r.forEachInRange([r,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new bt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ye.comparator(e.key,t.key)||ke(e.Hr,t.Hr)}static Ur(e,t){return ke(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Rt(bt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new rk(a,t,r,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new bt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),a=o<0?0:o;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?rm:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bt(t,0),o=new bt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rt(ke);return t.forEach((o=>{const a=new bt(o,0),u=new bt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{r=r.add(d.Hr)}))})),J.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;ye.isDocumentKey(a)||(a=a.child(""));const u=new bt(new ye(a),0);let d=new Rt(ke);return this.Yr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Hr)),!0)}),u),J.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return J.forEach(t.mutations,(o=>{const a=new bt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new bt(t,0),o=this.Yr.firstAfterOrEqual(r);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.ni=e,this.docs=(function(){return new it(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(t))}getEntries(e,t){let r=Gr();return t.forEach((o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Ot.newInvalidDocument(o))})),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=Gr();const u=t.path,d=new ye(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||vP(_P(_),r)<=0||(o.has(_.key)||Dh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,t,r,o){ve(9500)}ri(e,t){return J.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new zk(this)}getSize(e){return J.resolve(this.size)}}class zk extends Dk{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.persistence=e,this.ii=new Fi((t=>om(t)),am),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new dm,this.targetCount=0,this._i=ea.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),J.waitFor(a).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),J.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.ai={},this.overlays={},this.ui=new xh(0),this.ci=!1,this.ci=!0,this.li=new Fk,this.referenceDelegate=e(this),this.hi=new $k(this),this.indexManager=new Ck,this.remoteDocumentCache=(function(o){return new Bk(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new Ak(t),this.Ti=new Mk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Uk(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const o=new qk(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return J.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class qk extends EP{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.Ai=new dm,this.Ri=null}static Vi(e){return new fm(e)}get mi(){if(this.Ri)return this.Ri;throw ve(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,(r=>{const o=ye.fromPath(r);return this.fi(e,o).next((a=>{a||t.removeEntry(o,Te.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ph{constructor(e,t){this.persistence=e,this.gi=new Fi((r=>SP(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=Ok(this,t)}static Vi(e,t){return new ph(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return J.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((a=>a?J.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(r++,a.removeEntry(u,Te.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lc(e.data.value)),t}Sr(e,t,r){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return J.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=be(),o=be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new pm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return PA()?8:TP(Jt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Hk;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(Mo()<=Ne.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(Mo()<=Ne.DEBUG&&ue("QueryEngine","Query:",jo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(Mo()<=Ne.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(t))):J.resolve())}ps(e,t){if(gv(t))return J.resolve(null);let r=wr(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=mp(t,null,"F"),r=wr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=be(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,mp(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ys(e,t,r,o){return gv(t)||o.isEqual(Te.min())?J.resolve(null):this.gs.getDocuments(e,r).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,r,o)?J.resolve(null):(Mo()<=Ne.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jo(t)),this.vs(e,u,t,yP(o,Dl)).next((d=>d)))}))}bs(e,t){let r=new Rt(t0(e));return t.forEach(((o,a)=>{Dh(e,a)&&(r=r.add(a))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,r){return Mo()<=Ne.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",jo(t)),this.gs.getDocumentsMatchingQuery(e,t,Us.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="LocalStore",Kk=3e8;class Gk{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new it(ke),this.Ms=new Fi((a=>om(a)),am),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Qk(n,e,t,r){return new Gk(n,e,t,r)}async function C0(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=be();for(const m of o){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Jk(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const w=m.batch,I=w.keys();let L=J.resolve();return I.forEach((x=>{L=L.next((()=>_.getEntry(f,x))).next((j=>{const k=m.docVersions.get(x);je(k!==null,48541),j.version.compareTo(k)<0&&(w.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),_.addEntry(j)))}))})),L.next((()=>d.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=be();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function P0(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Xk(n,e){const t=Ae(n),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((_,w)=>{const I=o.get(w);if(!I)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,w))));let L=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?L=L.withResumeToken(Bt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):_.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(_.resumeToken,r)),o=o.insert(w,L),(function(j,k,ee){return j.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=Kk?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(I,L,_)&&d.push(t.hi.updateTargetData(a,L))}));let f=Gr(),m=be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(Yk(a,u,e.documentUpdates).next((_=>{f=_.Ls,m=_.ks}))),!r.isEqual(Te.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(_)}return J.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Fs=o,a)))}function Yk(n,e,t){let r=be(),o=be();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=Gr();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Te.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ue(mm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ls:u,ks:o}}))}function Zk(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=rm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ex(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((a=>a?(o=a,J.resolve(o)):t.hi.allocateTargetId(r).next((u=>(o=new ks(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function vp(n,e,t){const r=Ae(n),o=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!da(u))throw u;ue(mm,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function kv(n,e,t){const r=Ae(n);let o=Te.min(),a=be();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const w=Ae(f),I=w.Ms.get(_);return I!==void 0?J.resolve(w.Fs.get(I)):w.hi.getTargetData(m,_)})(r,u,wr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?o:Te.min(),t?a:be()))).next((d=>(tx(r,$P(e),d),{documents:d,qs:a})))))}function tx(n,e,t){let r=n.xs.get(e)||Te.min();t.forEach(((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.xs.set(e,r)}class xv{constructor(){this.activeTargetIds=QP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nx{constructor(){this.Fo=new xv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="ConnectivityMonitor";class bv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(Nv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(Nv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc=null;function wp(){return Cc===null?Cc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cc++,"0x"+Cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="RestConnection",sx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ix{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===oh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,a){const u=wp(),d=this.Go(e,t.toUriEncodedString());ue(Uf,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,o,a);const{host:m}=new URL(d),_=oa(m);return this.jo(e,d,f,r,_).then((w=>(ue(Uf,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Fs(Uf,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",r),w}))}Jo(e,t,r,o,a,u){return this.Wo(e,t,r,o,a)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ca})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),r&&r.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const r=sx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class ax extends ix{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,a){const u=wp();return new Promise(((d,f)=>{const m=new CE;m.setWithCredentials(!0),m.listenOnce(PE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Vc.NO_ERROR:const w=m.getResponseJson();ue(Wt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case Vc.TIMEOUT:ue(Wt,`RPC '${e}' ${u} timed out`),f(new oe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const I=m.getStatus();if(ue(Wt,`RPC '${e}' ${u} failed with status:`,I,"response text:",m.getResponseText()),I>0){let L=m.getResponseJson();Array.isArray(L)&&(L=L[0]);const x=L==null?void 0:L.error;if(x&&x.status&&x.message){const j=(function(ee){const se=ee.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(se)>=0?se:K.UNKNOWN})(x.status);f(new oe(j,x.message))}else f(new oe(K.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new oe(K.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ue(Wt,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);ue(Wt,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",_,r,15)}))}P_(e,t,r){const o=wp(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=NE(),d=xE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ue(Wt,`Creating RPC '${e}' stream ${o}: ${_}`,f);const w=u.createWebChannel(_,f);this.T_(w);let I=!1,L=!1;const x=new ox({Ho:k=>{L?ue(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(I||(ue(Wt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),ue(Wt,`RPC '${e}' stream ${o} sending:`,k),w.send(k))},Yo:()=>w.close()}),j=(k,ee,se)=>{k.listen(ee,($=>{try{se($)}catch(re){setTimeout((()=>{throw re}),0)}}))};return j(w,gl.EventType.OPEN,(()=>{L||(ue(Wt,`RPC '${e}' stream ${o} transport opened.`),x.s_())})),j(w,gl.EventType.CLOSE,(()=>{L||(L=!0,ue(Wt,`RPC '${e}' stream ${o} transport closed`),x.__(),this.I_(w))})),j(w,gl.EventType.ERROR,(k=>{L||(L=!0,Fs(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),x.__(new oe(K.UNAVAILABLE,"The operation could not be completed")))})),j(w,gl.EventType.MESSAGE,(k=>{var ee;if(!L){const se=k.data[0];je(!!se,16349);const $=se,re=($==null?void 0:$.error)||((ee=$[0])===null||ee===void 0?void 0:ee.error);if(re){ue(Wt,`RPC '${e}' stream ${o} received error:`,re);const me=re.status;let _e=(function(P){const D=gt[P];if(D!==void 0)return p0(D)})(me),b=re.message;_e===void 0&&(_e=K.INTERNAL,b="Unknown error status: "+me+" with message "+re.message),L=!0,x.__(new oe(_e,b)),w.close()}else ue(Wt,`RPC '${e}' stream ${o} received:`,se),x.a_(se)}})),j(d,kE.STAT_EVENT,(k=>{k.stat===lp.PROXY?ue(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===lp.NOPROXY&&ue(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{x.o_()}),0),x}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(n){return new hk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t,r=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="PersistentStream";class k0{constructor(e,t,r,o,a,u,d,f){this.Fi=e,this.w_=r,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gm(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new oe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ue(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ue(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lx extends k0{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=mk(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Te.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Te.min():u.readTime?Sn(u.readTime):Te.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=_p(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=fp(f)?{documents:yk(a,f)}:{query:_k(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=y0(a,u.resumeToken);const m=gp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Te.min())>0){d.readTime=dh(a,u.snapshotVersion.toTimestamp());const m=gp(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=wk(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=_p(this.serializer),t.removeTarget=e,this.k_(t)}}class ux extends k0{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=gk(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=_p(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>E0(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{}class hx extends cx{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,yp(t,r),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(K.UNKNOWN,a.toString())}))}Jo(e,t,r,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,yp(t,r),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(K.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class dx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Kr(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="RemoteStore";class fx{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Ui(this)&&(ue(Vi,"Restarting streams for network reachability change."),await(async function(f){const m=Ae(f);m.Ia.add(4),await Xl(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Uh(m)})(this))}))})),this.Aa=new dx(r,o)}}async function Uh(n){if(Ui(n))for(const e of n.da)await e(!0)}async function Xl(n){for(const e of n.da)await e(!1)}function x0(n,e){const t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),wm(t)?vm(t):fa(t).x_()&&_m(t,e))}function ym(n,e){const t=Ae(n),r=fa(t);t.Ta.delete(e),r.x_()&&N0(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ui(t)&&t.Aa.set("Unknown"))}function _m(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fa(n).H_(e)}function N0(n,e){n.Ra.$e(e),fa(n).Y_(e)}function vm(n){n.Ra=new ak({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),fa(n).start(),n.Aa.aa()}function wm(n){return Ui(n)&&!fa(n).M_()&&n.Ta.size>0}function Ui(n){return Ae(n).Ia.size===0}function b0(n){n.Ra=void 0}async function px(n){n.Aa.set("Online")}async function mx(n){n.Ta.forEach(((e,t)=>{_m(n,e)}))}async function gx(n,e){b0(n),wm(n)?(n.Aa.la(e),vm(n)):n.Aa.set("Unknown")}async function yx(n,e,t){if(n.Aa.set("Online"),e instanceof g0&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(r){ue(Vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mh(n,r)}else if(e instanceof Fc?n.Ra.Ye(e):e instanceof m0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Te.min()))try{const r=await P0(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ta.get(m);_&&a.Ta.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.Ta.get(f);if(!_)return;a.Ta.set(f,_.withResumeToken(Bt.EMPTY_BYTE_STRING,_.snapshotVersion)),N0(a,f);const w=new ks(_.target,f,m,_.sequenceNumber);_m(a,w)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ue(Vi,"Failed to raise snapshot:",r),await mh(n,r)}}async function mh(n,e,t){if(!da(e))throw e;n.Ia.add(1),await Xl(n),n.Aa.set("Offline"),t||(t=()=>P0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Vi,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Uh(n)}))}function O0(n,e){return e().catch((t=>mh(n,t,e)))}async function Bh(n){const e=Ae(n),t=qs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:rm;for(;_x(e);)try{const o=await Zk(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,vx(e,o)}catch(o){await mh(e,o)}D0(e)&&V0(e)}function _x(n){return Ui(n)&&n.Pa.length<10}function vx(n,e){n.Pa.push(e);const t=qs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function D0(n){return Ui(n)&&!qs(n).M_()&&n.Pa.length>0}function V0(n){qs(n).start()}async function wx(n){qs(n).na()}async function Ex(n){const e=qs(n);for(const t of n.Pa)e.X_(t.mutations)}async function Tx(n,e,t){const r=n.Pa.shift(),o=um.from(r,e,t);await O0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Bh(n)}async function Ix(n,e){e&&qs(n).Z_&&await(async function(r,o){if((function(u){return f0(u)&&u!==K.ABORTED})(o.code)){const a=r.Pa.shift();qs(r).N_(),await O0(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Bh(r)}})(n,e),D0(n)&&V0(n)}async function Dv(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ue(Vi,"RemoteStore received new credentials");const r=Ui(t);t.Ia.add(3),await Xl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Uh(t)}async function Sx(n,e){const t=Ae(n);e?(t.Ia.delete(2),await Uh(t)):e||(t.Ia.add(2),await Xl(t),t.Aa.set("Unknown"))}function fa(n){return n.Va||(n.Va=(function(t,r,o){const a=Ae(t);return a.ia(),new lx(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:px.bind(null,n),e_:mx.bind(null,n),n_:gx.bind(null,n),J_:yx.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),wm(n)?vm(n):n.Aa.set("Unknown")):(await n.Va.stop(),b0(n))}))),n.Va}function qs(n){return n.ma||(n.ma=(function(t,r,o){const a=Ae(t);return a.ia(),new ux(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wx.bind(null,n),n_:Ix.bind(null,n),ea:Ex.bind(null,n),ta:Tx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Bh(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(Vi,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,d=new Em(e,t,u,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tm(n,e){if(Kr("AsyncQueue",`${e}: ${n}`),da(n))return new oe(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=yl(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.fa=new it(ye.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ve(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ta{constructor(e,t,r,o,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ta(e,t,Wo.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Rx{constructor(){this.queries=Lv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=Ae(t),a=o.queries;o.queries=Lv(),a.forEach(((u,d)=>{for(const f of d.wa)f.onError(r)}))})(this,new oe(K.ABORTED,"Firestore shutting down"))}}function Lv(){return new Fi((n=>e0(n)),Oh)}async function Im(n,e){const t=Ae(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(r=2):(a=new Ax,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Tm(u,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Am(t)}async function Sm(n,e){const t=Ae(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Cx(n,e){const t=Ae(n);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(r=!0);u.ya=o}}r&&Am(t)}function Px(n,e,t){const r=Ae(n),o=r.queries.get(e);if(o)for(const a of o.wa)a.onError(t);r.queries.delete(e)}function Am(n){n.Da.forEach((e=>{e.next()}))}var Ep,Mv;(Mv=Ep||(Ep={})).Fa="default",Mv.Cache="cache";class Rm{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.key=e}}class M0{constructor(e){this.key=e}}class kx{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=t0(e),this.eu=new Wo(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Vv,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const I=o.get(_),L=Dh(this.query,w)?w:null,x=!!I&&this.mutatedKeys.has(I.key),j=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let k=!1;I&&L?I.data.isEqual(L.data)?x!==j&&(r.track({type:3,doc:L}),k=!0):this.iu(I,L)||(r.track({type:2,doc:L}),k=!0,(f&&this.Xa(L,f)>0||m&&this.Xa(L,m)<0)&&(d=!0)):!I&&L?(r.track({type:0,doc:L}),k=!0):I&&!L&&(r.track({type:1,doc:I}),k=!0,(f||m)&&(d=!0)),k&&(L?(u=u.add(L),a=j?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,w)=>(function(L,x){const j=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{At:k})}};return j(L)-j(x)})(_.type,w.type)||this.Xa(_.doc,w.doc))),this.su(r),o=o!=null&&o;const d=t&&!o?this.ou():[],f=this.Za.size===0&&this.current&&!o?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new ta(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=be(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new M0(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new L0(r))})),t}uu(e){this.Ha=e.qs,this.Za=be();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ta.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Cm="SyncEngine";class xx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Nx{constructor(e){this.key=e,this.lu=!1}}class bx{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Fi((d=>e0(d)),Oh),this.Tu=new Map,this.Iu=new Set,this.du=new it(ye.comparator),this.Eu=new Map,this.Au=new dm,this.Ru={},this.Vu=new Map,this.mu=ea.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Ox(n,e,t=!0){const r=$0(n);let o;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await j0(r,e,t,!0),o}async function Dx(n,e){const t=$0(n);await j0(t,e,!0,!1)}async function j0(n,e,t,r){const o=await ex(n.localStore,wr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await Vx(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&x0(n.remoteStore,o),d}async function Vx(n,e,t,r,o){n.gu=(w,I,L)=>(async function(j,k,ee,se){let $=k.view.nu(ee);$.Ds&&($=await kv(j.localStore,k.query,!1).then((({documents:b})=>k.view.nu(b,$))));const re=se&&se.targetChanges.get(k.targetId),me=se&&se.targetMismatches.get(k.targetId)!=null,_e=k.view.applyChanges($,j.isPrimaryClient,re,me);return Fv(j,k.targetId,_e._u),_e.snapshot})(n,w,I,L);const a=await kv(n.localStore,e,!0),u=new kx(e,a.qs),d=u.nu(a.documents),f=Jl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,f);Fv(n,t,m._u);const _=new xx(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function Lx(n,e,t){const r=Ae(n),o=r.Pu.get(e),a=r.Tu.get(o.targetId);if(a.length>1)return r.Tu.set(o.targetId,a.filter((u=>!Oh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await vp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&ym(r.remoteStore,o.targetId),Tp(r,o.targetId)})).catch(ha)):(Tp(r,o.targetId),await vp(r.localStore,o.targetId,!0))}async function Mx(n,e){const t=Ae(n),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ym(t.remoteStore,r.targetId))}async function jx(n,e,t){const r=Hx(n);try{const o=await(function(u,d){const f=Ae(u),m=qe.now(),_=d.reduce(((L,x)=>L.add(x.key)),be());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let x=Gr(),j=be();return f.Os.getEntries(L,_).next((k=>{x=k,x.forEach(((ee,se)=>{se.isValidDocument()||(j=j.add(ee))}))})).next((()=>f.localDocuments.getOverlayedDocuments(L,x))).next((k=>{w=k;const ee=[];for(const se of d){const $=nk(se,w.get(se.key).overlayedDocument);$!=null&&ee.push(new Qs(se.key,$,WE($.value.mapValue),Gt.exists(!0)))}return f.mutationQueue.addMutationBatch(L,m,ee,d)})).next((k=>{I=k;const ee=k.applyToLocalDocumentSet(w,j);return f.documentOverlayCache.saveOverlays(L,k.batchId,ee)}))})).then((()=>({batchId:I.batchId,changes:r0(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new it(ke)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m})(r,o.batchId,t),await Yl(r,o.changes),await Bh(r.remoteStore)}catch(o){const a=Tm(o,"Failed to persist write");t.reject(a)}}async function F0(n,e){const t=Ae(n);try{const r=await Xk(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?je(u.lu,14607):o.removedDocuments.size>0&&(je(u.lu,42227),u.lu=!1))})),await Yl(t,r,e)}catch(r){await ha(r)}}function jv(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const f=Ae(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,w)=>{for(const I of w.wa)I.va(d)&&(m=!0)})),m&&Am(f)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Fx(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),a=o&&o.key;if(a){let u=new it(ye.comparator);u=u.insert(a,Ot.newNoDocument(a,Te.min()));const d=be().add(a),f=new jh(Te.min(),new Map,new it(ke),u,d);await F0(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Pm(r)}else await vp(r.localStore,e,!1).then((()=>Tp(r,e,t))).catch(ha)}async function Ux(n,e){const t=Ae(n),r=e.batch.batchId;try{const o=await Jk(t.localStore,e);B0(t,r,null),U0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Yl(t,o)}catch(o){await ha(o)}}async function Bx(n,e,t){const r=Ae(n);try{const o=await(function(u,d){const f=Ae(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((w=>(je(w!==null,37113),_=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);B0(r,e,t),U0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Yl(r,o)}catch(o){await ha(o)}}function U0(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function B0(n,e,t){const r=Ae(n);let o=r.Ru[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Tp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||z0(n,r)}))}function z0(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ym(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Pm(n))}function Fv(n,e,t){for(const r of t)r instanceof L0?(n.Au.addReference(r.key,e),zx(n,r)):r instanceof M0?(ue(Cm,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||z0(n,r.key)):ve(19791,{yu:r})}function zx(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ue(Cm,"New document in limbo: "+t),n.Iu.add(r),Pm(n))}function Pm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ye(Ke.fromString(e)),r=n.mu.next();n.Eu.set(r,new Nx(t)),n.du=n.du.insert(t,r),x0(n.remoteStore,new ks(wr(bh(t.path)),r,"TargetPurposeLimboResolution",xh.ue))}}async function Yl(n,e,t){const r=Ae(n),o=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,f)=>{u.push(r.gu(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){o.push(m);const w=pm.Es(f.targetId,m);a.push(w)}})))})),await Promise.all(u),r.hu.J_(o),await(async function(f,m){const _=Ae(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>J.forEach(m,(I=>J.forEach(I.Is,(L=>_.persistence.referenceDelegate.addReference(w,I.targetId,L))).next((()=>J.forEach(I.ds,(L=>_.persistence.referenceDelegate.removeReference(w,I.targetId,L)))))))))}catch(w){if(!da(w))throw w;ue(mm,"Failed to update sequence numbers: "+w)}for(const w of m){const I=w.targetId;if(!w.fromCache){const L=_.Fs.get(I),x=L.snapshotVersion,j=L.withLastLimboFreeSnapshotVersion(x);_.Fs=_.Fs.insert(I,j)}}})(r.localStore,a))}async function $x(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ue(Cm,"User change. New user:",e.toKey());const r=await C0(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((f=>{f.reject(new oe(K.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yl(t,r.Bs)}}function qx(n,e){const t=Ae(n),r=t.Eu.get(e);if(r&&r.lu)return be().add(r.key);{let o=be();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function $0(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=F0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fx.bind(null,e),e.hu.J_=Cx.bind(null,e.eventManager),e.hu.pu=Px.bind(null,e.eventManager),e}function Hx(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ux.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bx.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Qk(this.persistence,new Wk,e.initialUser,this.serializer)}Du(e){return new R0(fm.Vi,this.serializer)}bu(e){return new nx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class Wx extends gh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){je(this.persistence.referenceDelegate instanceof ph,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nk(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new R0((r=>ph.Vi(r,t)),this.serializer)}}class Ip{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$x.bind(null,this.syncEngine),await Sx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Rx})()}createDatastore(e){const t=Fh(e.databaseInfo.databaseId),r=(function(a){return new ax(a)})(e.databaseInfo);return(function(a,u,d,f){return new hx(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,a,u,d){return new fx(r,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>jv(this.syncEngine,t,0)),(function(){return bv.C()?new bv:new rx})())}createSyncEngine(e,t){return(function(o,a,u,d,f,m,_){const w=new bx(o,a,u,d,f,m);return _&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ae(o);ue(Vi,"RemoteStore shutting down."),a.Ia.add(5),await Xl(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,a){const u=Ae(o),d={documents:a.map((w=>fh(u.serializer,w)))},f=await u.Jo("BatchGetDocuments",u.serializer.databaseId,Ke.emptyPath(),d,a.length),m=new Map;f.forEach((w=>{const I=pk(u.serializer,w);m.set(I.key.toString(),I)}));const _=[];return a.forEach((w=>{const I=m.get(w.toString());je(!!I,55234,{key:w}),_.push(I)})),_})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=ye.fromPath(r);this.mutations.push(new d0(o,this.precondition(o)))})),await(async function(r,o){const a=Ae(r),u={writes:o.map((d=>E0(a.serializer,d)))};await a.Wo("Commit",a.serializer.databaseId,Ke.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ve(50498,{Wu:e.constructor.name});t=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new oe(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?Gt.exists(!1):Gt.updateTime(t):Gt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new oe(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(t)}return Gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,r,o,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=a,this.Gu=r.maxAttempts,this.F_=new gm(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new Kx(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Hu(o)}))))})).catch((r=>{this.Hu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Kl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!f0(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="FirestoreClient";class Qx{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Kt.UNAUTHENTICATED,this.clientId=nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ue(Hs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ue(Hs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Tm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function zf(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await C0(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>{Fs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Fs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Uv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Jx(n);ue(Hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Dv(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>Dv(e.remoteStore,o))),n._onlineComponents=e}async function Jx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Hs,"Using user provided OfflineComponentProvider");try{await zf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Fs("Error using user provided cache. Falling back to memory cache: "+t),await zf(n,new gh)}}else ue(Hs,"Using default OfflineComponentProvider"),await zf(n,new Wx(void 0));return n._offlineComponents}async function xm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Hs,"Using user provided OnlineComponentProvider"),await Uv(n,n._uninitializedComponentsProvider._online)):(ue(Hs,"Using default OnlineComponentProvider"),await Uv(n,new Ip))),n._onlineComponents}function Xx(n){return xm(n).then((e=>e.syncEngine))}function Yx(n){return xm(n).then((e=>e.datastore))}async function yh(n){const e=await xm(n),t=e.eventManager;return t.onListen=Ox.bind(null,e.syncEngine),t.onUnlisten=Lx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Dx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Mx.bind(null,e.syncEngine),t}function Zx(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new km({next:I=>{_.Ou(),u.enqueueAndForget((()=>Sm(a,w)));const L=I.docs.has(d);!L&&I.fromCache?m.reject(new oe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&I.fromCache&&f&&f.source==="server"?m.reject(new oe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new Rm(bh(d.path),_,{includeMetadataChanges:!0,ka:!0});return Im(a,w)})(await yh(n),n.asyncQueue,e,t,r))),r.promise}function eN(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new km({next:I=>{_.Ou(),u.enqueueAndForget((()=>Sm(a,w))),I.fromCache&&f.source==="server"?m.reject(new oe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new Rm(d,_,{includeMetadataChanges:!0,ka:!0});return Im(a,w)})(await yh(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firestore.googleapis.com",zv=!0;class $v{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H0,this.ssl=zv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kk)throw new oe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new aP;switch(r.type){case"firstParty":return new hP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Bv.get(t);r&&(ue("ComponentProvider","Removing Datastore"),Bv.delete(t),r.terminate())})(this),Promise.resolve()}}function tN(n,e,t,r={}){var o;n=In(n,zh);const a=oa(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(jw(`https://${f}`),Fw("Firestore",!0)),u.host!==H0&&u.host!==f&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!Ni(m,d)&&(n._setSettings(m),r.mockUserToken)){let _,w;if(typeof r.mockUserToken=="string")_=r.mockUserToken,w=Kt.MOCK_USER;else{_=vA(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new oe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Kt(I)}n._authCredentials=new lP(new OE(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class at{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wl(t,at._jsonSchema))return new at(e,r||null,new ye(Ke.fromString(t.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:_t("string",at._jsonSchemaVersion),referencePath:_t("string")};class Ls extends Bi{constructor(e,t,r){super(e,t,bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new ye(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function Ko(n,e,...t){if(n=dt(n),VE("collection","path",e),n instanceof zh){const r=Ke.fromString(e,...t);return nv(r),new Ls(n,null,r)}{if(!(n instanceof at||n instanceof Ls))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return nv(r),new Ls(n.firestore,null,r)}}function Li(n,e,...t){if(n=dt(n),arguments.length===1&&(e=nm.newId()),VE("doc","path",e),n instanceof zh){const r=Ke.fromString(e,...t);return tv(r),new at(n,null,new ye(r))}{if(!(n instanceof at||n instanceof Ls))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return tv(r),new at(n.firestore,n instanceof Ls?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="AsyncQueue";class Hv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gm(this,"async_queue_retry"),this.oc=()=>{const r=Bf();r&&ue(qv,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new vr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!da(e))throw e;ue(qv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Kr("INTERNAL UNHANDLED ERROR: ",Wv(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Em.createAndSchedule(this,e,t,r,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&ve(47125,{hc:Wv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Wv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of r)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Qr extends zh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Hv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hv(e),this._firestoreClient=void 0,await e}}}function nN(n,e){const t=typeof n=="object"?n:$w(),r=typeof n=="string"?n:oh,o=Hp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=yA("firestore");a&&tN(o,...a)}return o}function Zl(n){if(n._terminated)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rN(n),n._firestoreClient}function rN(n){var e,t,r;const o=n._freezeSettings(),a=(function(d,f,m,_){return new CP(d,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,q0(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new Qx(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(Bt.fromBase64String(e))}catch(t){throw new oe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new En(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:_t("string",En._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:_t("string",Er._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Tr(e.vectorValues);throw new oe(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:_t("string",Tr._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=/^__.*__$/;class iN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ql(e,this.data,t,this.fieldTransforms)}}class W0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function K0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ec:n})}}class bm{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return _h(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(K0(this.Ec)&&sN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class oN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Fh(e)}Dc(e,t,r,o=!1){return new bm({Ec:e,methodName:t,bc:r,path:Ut.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(n){const e=n._freezeSettings(),t=Fh(n._databaseId);return new oN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function G0(n,e,t,r,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);Om("Data must be an object, but it was:",u,r);const d=X0(r,u);let f,m;if(a.merge)f=new Tn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const I=Sp(e,w,t);if(!u.contains(I))throw new oe(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Z0(_,I)||_.push(I)}f=new Tn(_),m=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=u.fieldTransforms;return new iN(new tn(d),f,m)}class qh extends Nm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qh}}function Q0(n,e,t,r){const o=n.Dc(1,e,t);Om("Data must be an object, but it was:",o,r);const a=[],u=tn.empty();Gs(r,((f,m)=>{const _=Dm(e,f,t);m=dt(m);const w=o.gc(_);if(m instanceof qh)a.push(_);else{const I=tu(m,w);I!=null&&(a.push(_),u.set(_,I))}}));const d=new Tn(a);return new W0(u,d,o.fieldTransforms)}function J0(n,e,t,r,o,a){const u=n.Dc(1,e,t),d=[Sp(e,r,t)],f=[o];if(a.length%2!=0)throw new oe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)d.push(Sp(e,a[I])),f.push(a[I+1]);const m=[],_=tn.empty();for(let I=d.length-1;I>=0;--I)if(!Z0(m,d[I])){const L=d[I];let x=f[I];x=dt(x);const j=u.gc(L);if(x instanceof qh)m.push(L);else{const k=tu(x,j);k!=null&&(m.push(L),_.set(L,k))}}const w=new Tn(m);return new W0(_,w,u.fieldTransforms)}function aN(n,e,t,r=!1){return tu(t,n.Dc(r?4:3,e))}function tu(n,e){if(Y0(n=dt(n)))return Om("Unsupported field value:",e,n),X0(n,e);if(n instanceof Nm)return(function(r,o){if(!K0(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const a=[];let u=0;for(const d of r){let f=tu(d,o.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,o){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JP(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=qe.fromDate(r);return{timestampValue:dh(o.serializer,a)}}if(r instanceof qe){const a=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dh(o.serializer,a)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof En)return{bytesValue:y0(o.serializer,r._byteString)};if(r instanceof at){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:hm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Tr)return(function(u,d){return{mapValue:{fields:{[qE]:{stringValue:HE},[ah]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return lm(d.serializer,m)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${kh(r)}`)})(n,e)}function X0(n,e){const t={};return jE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,((r,o)=>{const a=tu(o,e.Vc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function Y0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof Er||n instanceof En||n instanceof at||n instanceof Nm||n instanceof Tr)}function Om(n,e,t){if(!Y0(t)||!LE(t)){const r=kh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Sp(n,e,t){if((e=dt(e))instanceof eu)return e._internalPath;if(typeof e=="string")return Dm(n,e);throw _h("Field path arguments must be of type string or ",n,!1,void 0,t)}const lN=new RegExp("[~\\*/\\[\\]]");function Dm(n,e,t){if(e.search(lN)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _h(n,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${o}`),f+=")"),new oe(K.INVALID_ARGUMENT,d+n+f)}function Z0(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uN extends vh{data(){return super.data()}}function Vm(n,e){return typeof e=="string"?Dm(n,e):e instanceof eu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class cN extends Lm{}function hN(n,e,...t){let r=[];e instanceof Lm&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof Mm)).length,d=a.filter((f=>f instanceof Hh)).length;if(u>1||u>0&&d>0)throw new oe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class Hh extends cN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Hh(e,t,r)}_apply(e){const t=this._parse(e);return tT(e._query,t),new Bi(e.firestore,e.converter,pp(e._query,t))}_parse(e){const t=$h(e.firestore);return(function(a,u,d,f,m,_,w){let I;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new oe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Qv(w,_);const x=[];for(const j of w)x.push(Gv(f,a,j));I={arrayValue:{values:x}}}else I=Gv(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Qv(w,_),I=aN(d,u,w,_==="in"||_==="not-in");return yt.create(m,_,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dN(n,e,t){const r=e,o=Vm("where",n);return Hh._create(o,r,t)}class Mm extends Lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mm(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:nr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)tT(u,f),u=pp(u,f)})(e._query,t),new Bi(e.firestore,e.converter,pp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Gv(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new oe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZE(e)&&t.indexOf("/")!==-1)throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!ye.isDocumentKey(r))throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cv(n,new ye(r))}if(t instanceof at)return cv(n,t._key);throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(t)}.`)}function Qv(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tT(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nT{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gs(e,((o,a)=>{r[o]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[ah].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((u=>ct(u.doubleValue)));return new Tr(a)}convertGeoPoint(e){return new Er(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);je(S0(r),9688,{name:e});const o=new Ll(r.get(1),r.get(3)),a=new ye(r.popFirst(5));return o.isEqual(t)||Kr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class fN extends nT{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}class zo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ms extends vh{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ms._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ms._jsonSchema={type:_t("string",Ms._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class Uc extends Ms{data(e={}){return super.data(e)}}class ki{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new zo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Uc(this._firestore,this._userDataWriter,r.key,r,new zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const f=new Uc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new zo(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new Uc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new zo(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:pN(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ki._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(n){n=In(n,at);const e=In(n.firestore,Qr);return Zx(Zl(e),n._key).then((t=>oT(e,n,t)))}ki._jsonSchemaVersion="firestore/querySnapshot/1.0",ki._jsonSchema={type:_t("string",ki._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class Wh extends nT{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}}function sT(n){n=In(n,Bi);const e=In(n.firestore,Qr),t=Zl(e),r=new Wh(e);return eT(n._query),eN(t,n._query).then((o=>new ki(e,r,n,o)))}function gN(n,e,t,...r){n=In(n,at);const o=In(n.firestore,Qr),a=$h(o);let u;return u=typeof(e=dt(e))=="string"||e instanceof eu?J0(a,"updateDoc",n._key,e,t,r):Q0(a,"updateDoc",n._key,e),jm(o,[u.toMutation(n._key,Gt.exists(!0))])}function yN(n){return jm(In(n.firestore,Qr),[new Mh(n._key,Gt.none())])}function Jv(n,e){const t=In(n.firestore,Qr),r=Li(n),o=rT(n.converter,e);return jm(t,[G0($h(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then((()=>r))}function iT(n,...e){var t,r,o;n=dt(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Kv(e[u])||(a=e[u++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Kv(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[u+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let f,m,_;if(n instanceof at)m=In(n.firestore,Qr),_=bh(n._key.path),f={next:w=>{e[u]&&e[u](oT(m,n,w))},error:e[u+1],complete:e[u+2]};else{const w=In(n,Bi);m=In(w.firestore,Qr),_=w._query;const I=new Wh(m);f={next:L=>{e[u]&&e[u](new ki(m,I,w,L))},error:e[u+1],complete:e[u+2]},eT(n._query)}return(function(I,L,x,j){const k=new km(j),ee=new Rm(L,k,x);return I.asyncQueue.enqueueAndForget((async()=>Im(await yh(I),ee))),()=>{k.Ou(),I.asyncQueue.enqueueAndForget((async()=>Sm(await yh(I),ee)))}})(Zl(m),_,d,f)}function jm(n,e){return(function(r,o){const a=new vr;return r.asyncQueue.enqueueAndForget((async()=>jx(await Xx(r),o,a))),a.promise})(Zl(n),e)}function oT(n,e,t){const r=t.docs.get(e._key),o=new Wh(n);return new Ms(n,o,e._key,r,new zo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={maxAttempts:5};function vl(n,e){if((n=dt(n)).firestore!==e)throw new oe(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$h(e)}get(e){const t=vl(e,this._firestore),r=new fN(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ve(24041);const a=o[0];if(a.isFoundDocument())return new vh(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new vh(this._firestore,r,t._key,null,t.converter);throw ve(18433,{doc:a})}))}set(e,t,r){const o=vl(e,this._firestore),a=rT(o.converter,t,r),u=G0(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,t,r,...o){const a=vl(e,this._firestore);let u;return u=typeof(t=dt(t))=="string"||t instanceof eu?J0(this._dataReader,"Transaction.update",a._key,t,r,o):Q0(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=vl(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN extends vN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vl(e,this._firestore),r=new Wh(this._firestore);return super.get(e).then((o=>new Ms(this._firestore,r,t._key,o._document,new zo(!1,!1),t.converter)))}}function EN(n,e,t){n=In(n,Qr);const r=Object.assign(Object.assign({},_N),t);return(function(a){if(a.maxAttempts<1)throw new oe(K.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,u,d){const f=new vr;return a.asyncQueue.enqueueAndForget((async()=>{const m=await Yx(a);new Gx(a.asyncQueue,m,d,u,f).zu()})),f.promise})(Zl(n),(o=>e(new wN(n,o))),r)}(function(e,t=!0){(function(o){ca=o})(aa),Qo(new bi("firestore",((r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Qr(new uP(r.getProvider("auth-internal")),new dP(u,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new oe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(m.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Os(J_,X_,e),Os(J_,X_,"esm2017")})();const TN={apiKey:"AIzaSyBc1cYCEqFVXvB2YdxHTxhVlPqtTbfVVLM",authDomain:"solaire-frontend.firebaseapp.com",projectId:"solaire-frontend",storageBucket:"solaire-frontend.firebasestorage.app",messagingSenderId:"29459740400",appId:"1:29459740400:web:2fa88c891fece254c8f435"},aT=zw(TN),wh=iP(aT),Ln=nN(aT);async function lT(n){const e=await mN(Li(Ln,"users",n));return e.exists()?e.data():null}async function IN(n){const e=new Date().getFullYear(),t=Li(Ln,"counters",`files-${e}`),r=Ko(Ln,"files");return await EN(Ln,async a=>{const u=await a.get(t),d=u.exists()?(u.data().seq||0)+1:1;a.set(t,{seq:d},{merge:!0});const f=`DOS-${e}-${String(d).padStart(4,"0")}`;if(!Jc.map(_=>_.value).includes(n.pack))throw new Error("Pack invalide");const m=Li(r);return a.set(m,{reference:f,installerId:"INST123",pack:n.pack,statutGlobal:n.statutGlobal||n.status||"en_cours",status:n.status||"en_cours",title:n.title||n.name||"Dossier",price:n.price||null,address:n.address||"",power:n.power||null,nextAction:n.nextAction||null,nextActionDate:n.nextActionDate?qe.fromDate(new Date(n.nextActionDate)):null,createdAt:qe.now(),updatedAt:qe.now()}),{id:m.id,reference:f}})}function SN(){const n=ia(),[e,t]=G.useState(""),[r,o]=G.useState(""),[a,u]=G.useState(!1),[d,f]=G.useState(null),m=async _=>{_.preventDefault(),f(null),u(!0);try{await mE(wh,e,r),n("/client/dashboard")}catch(w){console.error("Erreur login client:",w),f((w==null?void 0:w.message)||"Connexion impossible")}finally{u(!1)}};return E.jsxs("div",{className:"card",children:[E.jsx("h2",{children:"Solaire Admin  Espace Installateur"}),E.jsxs("form",{onSubmit:m,className:"form",children:[E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Email"}),E.jsx("input",{type:"email",value:e,onChange:_=>t(_.target.value),autoComplete:"email"})]}),E.jsxs("div",{className:"field",children:[E.jsx("label",{children:"Mot de passe"}),E.jsx("input",{type:"password",value:r,onChange:_=>o(_.target.value),autoComplete:"current-password"})]}),d&&E.jsx("div",{className:"error",children:d}),E.jsx("button",{className:"btn-primary",type:"submit",disabled:a,children:a?"Connexion...":"Connexion"})]})]})}const AN="yrpmKIwuSydzH8nWMahRlWZictb2";function zi(){const[n,e]=G.useState(null),[t,r]=G.useState(null),[o,a]=G.useState(null),[u,d]=G.useState(!0);return G.useEffect(()=>{const f=K1(wh,async m=>{if(e(m),!m){r(null),a(null),d(!1);return}try{const _=await lT(m.uid);if(m.uid===AN){const w={role:"admin",installerId:"ADMIN",..._||{}};r(w),a("admin")}else _?(r(_),a(_.role||"client")):(r({role:"client"}),a("client"))}catch{r({role:"client"}),a("client")}finally{console.log("[useAuth] user=",m==null?void 0:m.uid,m==null?void 0:m.email),d(!1)}});return()=>f()},[]),{user:n,claims:t,role:o,loading:u}}function Eh(n,e){const{user:t,claims:r,role:o,loading:a}=zi(),[u,d]=G.useState(null),[f,m]=G.useState(!0),[_,w]=G.useState(null);return G.useEffect(()=>{if(a){m(!0);return}if(!t){d([]),m(!1);return}const I=Ko(Ln,n);let L=I;if(o==="client"){const j=(r==null?void 0:r.installerId)||"INST123";L=hN(I,dN("installerId","==",j))}const x=iT(L,j=>{d(j.docs.map(k=>({id:k.id,...k.data()}))),m(!1),w(null)},j=>{w(j),m(!1)});return()=>x()},[n,a,t,o,r==null?void 0:r.installerId]),{data:u,loading:f,error:_}}function RN(){const{data:n,loading:e}=Eh("files"),t=n||[];if(e)return E.jsx("div",{className:"card",children:"Chargement"});const r={total:t.length,enCours:t.filter(o=>o.statutGlobal==="en_cours").length,attente:t.filter(o=>["en_attente","incomplet"].includes(o.statutGlobal)).length,finalises:t.filter(o=>["finalise","clos"].includes(o.statutGlobal)).length};return E.jsxs("div",{className:"card",children:[E.jsx("h3",{children:"Mon tableau de bord"}),E.jsxs("div",{className:"cards",children:[E.jsxs("div",{className:"metric",children:[E.jsx("h4",{children:"Total dossiers"}),E.jsx("div",{className:"big",children:r.total})]}),E.jsxs("div",{className:"metric",children:[E.jsx("h4",{children:"En cours"}),E.jsx("div",{className:"big",children:r.enCours})]}),E.jsxs("div",{className:"metric",children:[E.jsx("h4",{children:"En attente docs"}),E.jsx("div",{className:"big",children:r.attente})]}),E.jsxs("div",{className:"metric",children:[E.jsx("h4",{children:"Finaliss"}),E.jsx("div",{className:"big",children:r.finalises})]})]}),E.jsxs("div",{className:"card",style:{marginTop:20},children:[E.jsx("h4",{style:{marginBottom:12},children:"Mes dossiers"}),e&&E.jsx("div",{children:"Chargement des dossiers"}),!e&&!t.length&&E.jsx("div",{children:"Aucun dossier pour le moment."}),!e&&t.length>0&&E.jsxs("table",{className:"table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Rfrence"}),E.jsx("th",{children:"Pack"}),E.jsx("th",{children:"Statut"})]})}),E.jsx("tbody",{children:t.map(o=>E.jsxs("tr",{children:[E.jsx("td",{children:E.jsx(zp,{to:`/client/dossiers/${o.id}`,children:o.reference||o.title||o.id})}),E.jsx("td",{children:o.pack||o.status}),E.jsx("td",{children:o.statutGlobal||o.status})]},o.id))})]})]})]})}const CN="https://solaire-api.onrender.com";function PN(){const{user:n}=zi(),[e,t]=G.useState([]),[r,o]=G.useState(!0),[a,u]=G.useState(null);return G.useEffect(()=>{let d=!0;return(async()=>{try{o(!0);const m=await fetch(`${CN}/files?limit=200`);if(!m.ok)throw new Error(`API ${m.status}`);const _=await m.json(),w=_.items||_||[],I=n!=null&&n.uid?w.filter(L=>L.clientId===n.uid):w;d&&t(I)}catch(m){d&&u(m.message||"Erreur de chargement")}finally{d&&o(!1)}})(),()=>{d=!1}},[n==null?void 0:n.uid]),r?E.jsx("div",{className:"card",children:"Chargement"}):a?E.jsxs("div",{className:"card error",children:["Erreur: ",a]}):E.jsxs("div",{className:"card",children:[E.jsx("h3",{children:"Mes dossiers"}),E.jsxs("table",{className:"table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Rf"}),E.jsx("th",{children:"Adresse"}),E.jsx("th",{children:"Pack"}),E.jsx("th",{children:"Statut"})]})}),E.jsxs("tbody",{children:[e.map(d=>{var f;return E.jsxs("tr",{children:[E.jsx("td",{children:E.jsx(zp,{to:`/client/dossiers/${d.id}`,children:d.reference||d.ref||d.id})}),E.jsx("td",{children:d.address||""}),E.jsx("td",{children:((f=Jc.find(m=>m.value===d.pack))==null?void 0:f.label)||d.pack||""}),E.jsx("td",{children:E.jsx("span",{className:`badge-status ${d.statutGlobal||d.status||"en_cours"}`,children:d.statutGlobal||d.status||"en_cours"})})]},d.id)}),e.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:4,style:{textAlign:"center"},children:"Aucun dossier pour ce compte."})})]})]})]})}const Xv="https://solaire-api.onrender.com";function kN(){const{id:n}=Bp(),[e,t]=G.useState(null),[r,o]=G.useState([]),[a,u]=G.useState(!0),[d,f]=G.useState(null);if(G.useEffect(()=>{let w=!0;return n&&(async()=>{try{u(!0);const L=await fetch(`${Xv}/files/${n}`);if(!L.ok)throw new Error(`API files/${n} ${L.status}`);const x=await L.json();w&&t(x);const j=await fetch(`${Xv}/files/${n}/events`);if(j.ok){const k=await j.json();w&&o(k)}}catch(L){w&&f(L.message||"Erreur de chargement")}finally{w&&u(!1)}})(),()=>{w=!1}},[n]),a)return E.jsx("div",{className:"card",children:"Chargement"});if(d)return E.jsxs("div",{className:"card error",children:["Erreur: ",d]});if(!e)return E.jsx("div",{className:"card",children:"Dossier introuvable"});const m=w=>w?new Date(w!=null&&w.toDate?w.toDate():w).toLocaleDateString():"",_=(w,I,L)=>E.jsxs("li",{children:[E.jsxs("strong",{children:[w," :"]})," ",I||""," ",L?`(${L})`:""]});return E.jsxs("div",{className:"grid",children:[E.jsxs("div",{className:"card",children:[E.jsx(zp,{to:"/client/dossiers",className:"small",children:" Retour aux dossiers"}),E.jsx("h3",{children:e.reference||e.ref||e.id}),E.jsx("div",{className:"small",children:e.address||""}),E.jsxs("div",{children:["Pack : ",e.pack||""]}),E.jsxs("div",{children:["Statut :"," ",E.jsx("span",{className:`badge-status ${e.statutGlobal||e.status||"en_cours"}`,children:e.statutGlobal||e.status||"en_cours"})]}),E.jsxs("div",{children:["Client final : ",e.clientFinal||""]}),E.jsxs("div",{children:["Puissance : ",e.power||""," kWc"]}),E.jsx("h4",{children:"Suivi administratif"}),E.jsxs("ul",{className:"small",children:[_("Mairie",e.mairieStatus,m(e.mairieDepositDate)),_("Consuel",e.consuelStatus,m(e.consuelVisitDate)),_("Enedis",e.enedisStatus,e.enedisPdL),_("EDF OA",e.edfStatus,e.edfContractNumber)]})]}),E.jsxs("div",{className:"card",children:[E.jsx("h4",{children:"Documents"}),E.jsxs("ul",{className:"small",children:[(e.documents||[]).map(w=>E.jsx("li",{children:E.jsx("a",{href:w.url,target:"_blank",rel:"noreferrer",children:w.name})},w.name)),(e.documents||[]).length===0&&E.jsx("li",{children:"Aucun document"})]}),E.jsx("h4",{children:"Timeline"}),E.jsxs("ul",{className:"small",children:[r.map(w=>E.jsxs("li",{children:[new Date(w.at).toLocaleString(),"  ",w.action]},w.id||w.at)),r.length===0&&E.jsx("li",{children:"Aucun vnement"})]})]})]})}const $f=({children:n})=>{const{user:e,role:t,loading:r}=zi();return r?null:!e||t!=="client"?E.jsx(Xf,{to:"/client/login",replace:!0}):n},Lo=n=>n?n.toDate?n.toDate():n.seconds?new Date(n.seconds*1e3):new Date(n):null,Yv=()=>{const n=new Date;return n.setHours(0,0,0,0),n.getTime()},xN=(n="")=>{const e=n.toLowerCase();return e==="en_cours"?"badge-status info":e==="en_attente"||e==="incomplet"?"badge-status warning":e==="finalise"||e==="clos"?"badge-status success":e==="bloque"?"badge-status warning":"badge-status"},NN=(n="")=>`badge-pack badge-pack-${n.replace(/[^a-z0-9]/gi,"_")}`;function bN(){var se;const n=ia(),{data:e,loading:t}=Eh("leads"),{data:r,loading:o}=Eh("files"),[a,u]=G.useState(""),[d,f]=G.useState(""),[m,_]=G.useState(""),w=t||o,I=e||[],L=r||[],x=G.useMemo(()=>{const $=Date.now(),re=720*60*60*1e3,me=I.map(O=>({...O,__created:Lo(O.createdAt)||new Date})).filter(O=>$-O.__created.getTime()<=re).sort((O,F)=>F.__created.getTime()-O.__created.getTime()),_e=me.filter(O=>(O.status||"").toLowerCase()==="gagne"),b=me.filter(O=>(O.status||"").toLowerCase()==="perdu"),A=L.filter(O=>(O.statutGlobal||O.status||"").toLowerCase()==="en_cours"),P=L.filter(O=>["finalise","clos"].includes((O.statutGlobal||O.status||"").toLowerCase())),D=L.filter(O=>(O.statutGlobal||O.status||"").toLowerCase()==="bloque");return{leads30:me.length,gained:_e.length,lost:b.length,recentLeads:me,filesTotal:L.length,filesActive:A.length,filesFinalised:P.length,filesBlocked:D.length}},[I,L]),j=G.useMemo(()=>{const $=Yv(),re=$+1440*60*1e3;return L.filter(me=>{const _e=Lo(me.nextActionDate);if(!_e)return!1;const b=_e.getTime();return b>=$&&b<re})},[L]),k=G.useMemo(()=>{const $=Yv();return L.filter(re=>{const me=Lo(re.nextActionDate);if(!me)return!1;const _e=(re.statutGlobal||re.status||"").toLowerCase();return["finalise","clos"].includes(_e)?!1:me.getTime()<$})},[L]),ee=G.useMemo(()=>L.filter($=>{const re=($.pack||$.status||"").toLowerCase();if(a&&re!==a)return!1;const me=($.statutGlobal||$.status||"").toLowerCase();if(d&&me!==d)return!1;if(m){const _e=m.toLowerCase();return[$.reference,$.title,$.clientFinal,$.address].filter(Boolean).some(b=>b.toLowerCase().includes(_e))}return!0}),[L,a,d,m]);return w?E.jsx("div",{className:"card",children:"Chargement du dashboard"}):E.jsxs("div",{className:"dashboard",children:[E.jsxs("div",{className:"cards",children:[E.jsxs("div",{className:"metric",children:[E.jsxs("div",{className:"metric-header",children:[E.jsx("span",{children:"Leads (30 j)"}),E.jsx("span",{style:{fontSize:18},children:""})]}),E.jsx("div",{className:"big",children:x.leads30}),E.jsxs("div",{className:"small",children:["Gagns : ",x.gained,"  Perdus : ",x.lost]})]}),E.jsxs("div",{className:"metric",children:[E.jsxs("div",{className:"metric-header",children:[E.jsx("span",{children:"Dossiers"}),E.jsx("span",{style:{fontSize:18},children:""})]}),E.jsx("div",{className:"big",children:x.filesTotal}),E.jsxs("div",{className:"small",children:["En cours : ",x.filesActive,"  Finaliss : ",x.filesFinalised]})]}),E.jsxs("div",{className:"metric",children:[E.jsxs("div",{className:"metric-header",children:[E.jsx("span",{children:"Actions du jour"}),E.jsx("span",{style:{fontSize:18},children:""})]}),E.jsx("div",{className:"big",children:j.length}),E.jsx("div",{className:"small",children:"planifies aujourdhui"})]}),E.jsxs("div",{className:"metric",children:[E.jsxs("div",{className:"metric-header",children:[E.jsx("span",{children:"En retard"}),E.jsx("span",{style:{fontSize:18},children:""})]}),E.jsx("div",{className:"big",children:k.length}),E.jsx("div",{className:"small",children:"Bloqus + relances"})]})]}),((se=x.recentLeads)==null?void 0:se.length)>0&&E.jsxs("div",{className:"card",style:{marginTop:16},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsx("h4",{children:"Leads rcents (30 j)"}),E.jsxs("div",{className:"small",children:["Total : ",x.recentLeads.length]})]}),E.jsx("div",{className:"table-wrapper",style:{maxHeight:260},children:E.jsxs("table",{className:"table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Nom / Profil"}),E.jsx("th",{children:"Email"}),E.jsx("th",{children:"Tlphone"}),E.jsx("th",{children:"Statut"}),E.jsx("th",{children:"Date"})]})}),E.jsx("tbody",{children:x.recentLeads.slice(0,20).map($=>E.jsxs("tr",{className:"clickable-row",onClick:()=>n(`/leads/${$.id}`),style:{cursor:"pointer"},children:[E.jsx("td",{children:$.name||$.fullName||$.profile||""}),E.jsx("td",{children:$.email||""}),E.jsx("td",{children:$.phone||""}),E.jsx("td",{children:E.jsx("span",{className:`badge-status ${$.status||"nouveau"}`,children:$.status||"nouveau"})}),E.jsx("td",{children:($.__created||Lo($.createdAt)||new Date).toLocaleDateString()})]},$.id))})]})})]}),E.jsxs("div",{className:"grid",style:{marginTop:24,gap:16},children:[E.jsxs("div",{className:"card",style:{flex:1},children:[E.jsx("h4",{children:"Actions du jour"}),j.length===0&&E.jsx("div",{className:"small",children:"Aucune action planifie."}),j.length>0&&E.jsx("ul",{className:"timeline",children:j.map($=>{var re;return E.jsxs("li",{children:[E.jsx("strong",{children:$.reference||$.title}),E.jsx("span",{children:$.nextAction||""}),E.jsx("small",{children:(re=Lo($.nextActionDate))==null?void 0:re.toLocaleDateString()})]},$.id)})})]}),E.jsxs("div",{className:"card",style:{flex:1},children:[E.jsx("h4",{children:"Dossiers en retard"}),k.length===0&&E.jsx("div",{className:"small",children:"Aucun dossier en retard."}),k.length>0&&E.jsx("ul",{className:"timeline",children:k.map($=>{var re;return E.jsxs("li",{children:[E.jsx("strong",{children:$.reference||$.title}),E.jsx("span",{children:$.nextAction||""}),E.jsxs("small",{children:["Prvu : ",(re=Lo($.nextActionDate))==null?void 0:re.toLocaleDateString()]})]},$.id)})})]})]}),E.jsxs("div",{className:"card",style:{marginTop:24},children:[E.jsxs("div",{className:"filters",style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[E.jsxs("select",{value:a,onChange:$=>u($.target.value),children:[E.jsx("option",{value:"",children:"Pack (tous)"}),Jc.map($=>E.jsx("option",{value:$.value,children:$.label},$.value))]}),E.jsxs("select",{value:d,onChange:$=>f($.target.value),children:[E.jsx("option",{value:"",children:"Statut (tous)"}),E.jsx("option",{value:"en_cours",children:"En cours"}),E.jsx("option",{value:"en_attente",children:"En attente"}),E.jsx("option",{value:"bloque",children:"Bloqu"}),E.jsx("option",{value:"finalise",children:"Finalis"}),E.jsx("option",{value:"clos",children:"Clos"})]}),E.jsx("input",{placeholder:"Recherche rfrence / client",value:m,onChange:$=>_($.target.value),style:{flex:1}})]}),E.jsx("div",{className:"table-wrapper",children:E.jsxs("table",{className:"table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Rfrence"}),E.jsx("th",{children:"Client"}),E.jsx("th",{children:"Pack"}),E.jsx("th",{children:"Statut"}),E.jsx("th",{children:"Prochaine action"})]})}),E.jsx("tbody",{children:ee.map($=>{var re;return E.jsxs("tr",{className:"clickable-row",onClick:()=>n(`/dossiers/${$.id}`),children:[E.jsx("td",{children:$.reference||$.title}),E.jsx("td",{children:$.clientFinal||$.address||""}),E.jsx("td",{children:E.jsx("span",{className:NN($.pack||$.status),children:((re=Jc.find(me=>me.value===($.pack||$.status)))==null?void 0:re.label)||$.pack||$.status})}),E.jsx("td",{children:E.jsx("span",{className:xN($.statutGlobal||$.status),children:$.statutGlobal||$.status})}),E.jsx("td",{children:$.nextAction||""})]},$.id)})})]})})]})]})}function ON(n,e){const{user:t,loading:r}=zi(),[o,a]=G.useState(null),[u,d]=G.useState(!0),[f,m]=G.useState(null);return G.useEffect(()=>{if(r){d(!0);return}if(!t||!e){a(null),d(!1);return}const _=Li(Ln,n,e),w=iT(_,I=>{a(I.exists()?{id:I.id,...I.data()}:null),d(!1),m(null)},I=>{m(I),d(!1)});return()=>w()},[n,e,r,t]),{data:o,loading:u,error:f}}const DN=n=>n?n.toDate?n.toDate():n.seconds?new Date(n.seconds*1e3):new Date(n):null,Si=n=>{const e=DN(n);return e?e.toLocaleDateString():""},VN=(n="")=>{const e=n.toLowerCase();return e==="en_cours"?"badge-status info":e==="en_attente"||e==="incomplet"?"badge-status warning":e==="finalise"||e==="clos"?"badge-status success":e==="bloque"?"badge-status warning":"badge-status"},LN=(n="")=>`badge-pack badge-pack-${n.replace(/[^a-z0-9]/gi,"_")}`;function MN(){var u,d;const{id:n}=Bp(),e=ia(),{data:t,loading:r}=ON("files",n||""),o=G.useMemo(()=>{const f=[];return t!=null&&t.nextAction&&f.push({label:"Next action",value:t.nextAction,date:Si(t.nextActionDate)}),t!=null&&t.notes&&f.push({label:"Notes",value:t.notes}),f},[t]);if(r)return E.jsx("div",{className:"card",children:"Chargement du dossier"});if(!t)return E.jsx("div",{className:"card",children:"Dossier introuvable"});const a=[{label:"Mairie",status:t.mairieStatus,meta:Si(t.mairieDepositDate)},{label:"Consuel",status:t.consuelStatus,meta:Si(t.consuelVisitDate)},{label:"Enedis",status:t.enedisStatus,meta:t.enedisPdL||"PDL non renseign"},{label:"EDF OA",status:t.edfStatus,meta:t.edfContractNumber||"N non renseign"}];return E.jsxs("div",{className:"dashboard",children:[E.jsxs("div",{className:"header",style:{marginBottom:24,gap:12},children:[E.jsx("button",{className:"btn-secondary",onClick:()=>e("/dashboard"),children:" Retour"}),E.jsxs("div",{children:[E.jsx("div",{className:"small",children:"Dossier"}),E.jsx("h2",{style:{margin:2},children:t.reference||t.title}),E.jsxs("div",{className:"small",children:[t.clientFinal||"","  ",t.address||"Adresse non renseigne"]})]}),E.jsxs("div",{style:{display:"flex",gap:6},children:[E.jsx("span",{className:LN(t.pack||t.status),children:t.pack||t.status||"Autre"}),E.jsx("span",{className:VN(t.statutGlobal||t.status),children:t.statutGlobal||t.status||"Statut inconnu"})]})]}),E.jsxs("div",{className:"grid",style:{gap:16},children:[E.jsxs("div",{className:"card",style:{flex:2},children:[E.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:[E.jsxs("div",{children:[E.jsx("div",{className:"mini-label",children:"Puissance"}),E.jsx("div",{className:"mini-value",children:t.power?`${t.power} kWc`:""})]}),E.jsxs("div",{children:[E.jsx("div",{className:"mini-label",children:"Installateur"}),E.jsx("div",{className:"mini-value",children:t.installerId||""})]}),E.jsxs("div",{children:[E.jsx("div",{className:"mini-label",children:"Cr le"}),E.jsx("div",{className:"mini-value",children:Si(t.createdAt)})]}),E.jsxs("div",{children:[E.jsx("div",{className:"mini-label",children:"Dernire MAJ"}),E.jsx("div",{className:"mini-value",children:Si(t.updatedAt)})]})]}),E.jsxs("div",{style:{marginTop:20},children:[E.jsx("h4",{children:"Suivi administratif"}),E.jsx("ul",{className:"admin-follow",children:a.map(f=>E.jsxs("li",{children:[E.jsxs("strong",{children:[f.label," :"]})," ",f.status||""," ",E.jsx("span",{children:f.meta})]},f.label))})]})]}),E.jsxs("div",{className:"card",style:{flex:1},children:[E.jsx("h4",{children:"Prochaine action"}),E.jsx("div",{className:"small",children:t.nextAction||"Pas daction planifie."}),t.nextActionDate&&E.jsx("div",{style:{marginTop:8},children:Si(t.nextActionDate)}),E.jsxs("div",{style:{marginTop:16},children:[E.jsx("h4",{children:"Actions complmentaires"}),o.length===0&&E.jsx("div",{className:"small",children:"Aucune donne supplmentaire."}),o.length>0&&E.jsx("ul",{className:"timeline",children:o.map(f=>E.jsxs("li",{children:[E.jsx("strong",{children:f.label}),E.jsx("span",{children:f.value}),f.date&&E.jsx("small",{children:f.date})]},f.label))})]})]})]}),E.jsxs("div",{className:"grid",style:{marginTop:24,gap:16},children:[E.jsxs("div",{className:"card",style:{flex:1},children:[E.jsx("h4",{children:"Documents"}),(u=t.documents)!=null&&u.length?E.jsx("ul",{className:"timeline",children:t.documents.map(f=>E.jsx("li",{children:E.jsxs("div",{className:"doc-card",children:[E.jsxs("div",{className:"doc-meta",children:[E.jsx("div",{className:"doc-pill",children:"PDF"}),E.jsxs("div",{className:"doc-texts",children:[E.jsx("div",{className:"doc-name",children:f.name||"Document"}),f.uploadedAt&&E.jsx("small",{children:Si(f.uploadedAt)}),f.url&&E.jsx("a",{href:f.url,target:"_blank",rel:"noreferrer",className:"doc-open",children:"Ouvrir dans un nouvel onglet "})]})]}),E.jsx("div",{className:"doc-preview-wrapper",children:f.url?E.jsx("object",{data:f.url,type:"application/pdf",className:"doc-preview","aria-label":`Aperu ${f.name||"document"}`,children:"Aperu indisponible"}):E.jsx("div",{className:"doc-preview fallback",children:"Aperu indisponible"})})]})},f.url||f.name))}):E.jsx("div",{className:"small",children:"Aucun document enregistr."})]}),E.jsxs("div",{className:"card",style:{flex:1},children:[E.jsx("h4",{children:"Historique"}),(d=t.history)!=null&&d.length?E.jsx("ul",{className:"timeline",children:t.history.map(f=>E.jsx("li",{children:f.action||""},f.at))}):E.jsx("div",{className:"small",children:"Historique non structur."})]})]})]})}function jN(){return E.jsxs("div",{className:"admin-page",children:[E.jsx("div",{className:"admin-page-header",children:E.jsxs("div",{children:[E.jsx("div",{className:"admin-page-title",children:"Planning (Admin)   venir"}),E.jsx("div",{className:"admin-page-subtitle",children:"Cette page prsentera le planning dtaill des actions."})]})}),E.jsxs("div",{className:"planning-grid",children:[E.jsxs("div",{className:"card",children:[E.jsx("h4",{children:"Colonne 1"}),E.jsx("p",{children:"Placeholder planning."})]}),E.jsxs("div",{className:"card",children:[E.jsx("h4",{children:"Colonne 2"}),E.jsx("p",{children:"Placeholder planning."})]})]})]})}function FN(){return E.jsxs("div",{className:"admin-page",children:[E.jsx("div",{className:"admin-page-header",children:E.jsxs("div",{children:[E.jsx("div",{className:"admin-page-title",children:"Mode Oprateur / Tlprospection   venir"}),E.jsx("div",{className:"admin-page-subtitle",children:"Vue simplifie pour les appels et relances."})]})}),E.jsxs("div",{className:"grid-operator",children:[E.jsxs("div",{className:"card",children:[E.jsx("h4",{children:"Leads  appeler"}),E.jsx("p",{children:"Placeholder oprateur."})]}),E.jsxs("div",{className:"card",children:[E.jsx("h4",{children:"Script dappel"}),E.jsx("p",{children:"Placeholder oprateur."})]}),E.jsxs("div",{className:"card",children:[E.jsx("h4",{children:"Notes"}),E.jsx("p",{children:"Placeholder oprateur."})]})]})]})}const UN="https://solaire-api.onrender.com",BN="saftoken-123";function Zv(n){if(!n)return"";if(n.seconds)return new Date(n.seconds*1e3).toLocaleDateString("fr-FR");const e=new Date(n);return isNaN(e.getTime())?"":e.toLocaleDateString("fr-FR")}function zN(){const{id:n}=Bp(),e=ia(),{data:t,loading:r,error:o}=Eh("leads"),a=G.useMemo(()=>(t||[]).find(w=>w.id===n),[t,n]),[u,d]=G.useState(!1),[f,m]=G.useState(null),_=async()=>{if(a){d(!0),m(null);try{const w=await fetch(`${UN}/leads/${a.id}/convert`,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Token":BN},body:JSON.stringify({})}),I=await w.json().catch(()=>({}));if(!w.ok)throw new Error(I.error||w.statusText);m(`Dossier cr : ${I.reference||I.id||"OK"}`),setTimeout(()=>e("/dashboard"),1200)}catch(w){m((w==null?void 0:w.message)||"Erreur de conversion")}finally{d(!1)}}};return r?E.jsx("div",{className:"card",children:"Chargement du lead"}):o?E.jsx("div",{className:"card error",children:"Erreur Firestore"}):a?E.jsxs("div",{className:"admin-page",children:[E.jsxs("div",{className:"admin-page-header",children:[E.jsxs("div",{children:[E.jsx("button",{className:"btn-link",onClick:()=>e(-1),children:" Retour"}),E.jsxs("h1",{className:"admin-page-title",children:["Lead : ",a.name||a.nom||"Sans nom"]}),E.jsxs("p",{className:"admin-page-subtitle",children:[a.email||"","  ",a.phone||a.tlphone||""]})]}),E.jsx("div",{className:"pill",children:a.status||"nouveau"})]}),f&&E.jsx("div",{className:"alert-info",children:f}),E.jsxs("div",{className:"grid two-cols",children:[E.jsxs("div",{className:"card",children:[E.jsx("h3",{children:"Informations"}),E.jsxs("ul",{className:"data-list",children:[E.jsxs("li",{children:[E.jsx("span",{children:"Source"}),E.jsx("strong",{children:a.source||""})]}),E.jsxs("li",{children:[E.jsx("span",{children:"Adresse"}),E.jsx("strong",{children:a.address||a.adresse||""})]}),E.jsxs("li",{children:[E.jsx("span",{children:"Cr le"}),E.jsx("strong",{children:Zv(a.createdAt)})]}),E.jsxs("li",{children:[E.jsx("span",{children:"Mis  jour"}),E.jsx("strong",{children:Zv(a.updatedAt)})]})]}),a.needs&&a.needs.length>0&&E.jsxs("div",{style:{marginTop:12},children:[E.jsx("div",{className:"small",children:"Besoins"}),E.jsx("div",{className:"tags",children:a.needs.map(w=>E.jsx("span",{className:"pill",children:w},w))})]})]}),E.jsxs("div",{className:"card",children:[E.jsx("h3",{children:"Actions"}),E.jsx("p",{className:"small",children:"Convertir ce lead en dossier."}),E.jsx("button",{className:"btn-primary",disabled:u,onClick:_,children:u?"Conversion...":"Convertir en dossier"})]})]})]}):E.jsx("div",{className:"card",children:"Lead introuvable"})}function $N(){const{user:n,claims:e,loading:t}=zi(),[r,o]=G.useState(""),[a,u]=G.useState(!1);if(t)return null;if(!n||(e==null?void 0:e.role)!=="admin")return E.jsx("div",{className:"card",children:"Accs admin requis"});const d=async()=>{u(!0),o("Seeding");let m=0,_=0,w=0;try{const I=[{name:"Alice Photon",email:"alice@test.com",phone:"0600000001",source:"landing",createdAt:qe.now()},{name:"Bob Solaire",email:"bob@test.com",phone:"0600000002",source:"partenaire",createdAt:qe.fromDate(new Date(Date.now()-1728e5))},{name:"Charlie Watt",email:"charlie@test.com",phone:"0600000003",source:"landing",createdAt:qe.fromDate(new Date(Date.now()-432e6))}];for(const ee of I)await Jv(Ko(Ln,"leads"),ee),m++;const L=[{name:"Installateur Alpha",email:"contact@alpha.com",phone:"0700000001",installerId:"INST123"},{name:"Installateur Beta",email:"contact@beta.com",phone:"0700000002",installerId:"INST123"}];for(const ee of L)await Jv(Ko(Ln,"clients"),ee),_++;const x=new Date,j=new Date(Date.now()-8*864e5),k=[{installerId:"INST123",pack:"validation",statutGlobal:"en_cours",title:"Validation Maison",clientFinal:"Famille Durand",address:"12 rue du Soleil, 75000 Paris",power:6,nextAction:"Appel client",nextActionDate:x},{installerId:"INST123",pack:"mise_en_service",statutGlobal:"en_attente",title:"Mise en service Site B",clientFinal:"SCI Lumire",address:"45 av. des nergies, Lyon",power:9,nextAction:"Relance Consuel",nextActionDate:j},{installerId:"INST123",pack:"zero_stress",statutGlobal:"finalise",title:"Zro Stress Villa C",clientFinal:"Mme Ray",address:"8 impasse Volt, Marseille",power:12,nextAction:"Facture envoye",nextActionDate:null}];for(const ee of k)await IN(ee),w++;o(`Seed termin : ${m} leads, ${_} clients, ${w} dossiers crs.`)}catch(I){o(`Erreur seed: ${I.message||I}`)}finally{u(!1)}},f=async()=>{u(!0),o("Suppression des donnes");try{const m=["leads","clients","files","counters"];for(const _ of m){const w=await sT(Ko(Ln,_));await Promise.all(w.docs.map(I=>yN(Li(Ln,_,I.id))))}o("Toutes les collections ont t vides.")}catch(m){o(`Erreur suppression: ${m.message||m}`)}finally{u(!1)}};return E.jsxs("div",{className:"card",children:[E.jsx("h3",{children:"Gnrer des donnes de dmonstration"}),E.jsx("p",{className:"small",children:"Admin uniquement. Ajoute quelques leads/clients/dossiers de test."}),E.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[E.jsx("button",{className:"btn-primary",disabled:a,onClick:d,children:a?"En cours...":"Seed de dmo"}),E.jsx("button",{className:"btn-danger",disabled:a,onClick:f,children:a?"Suppression...":"Vider les collections"})]}),r&&E.jsx("div",{style:{marginTop:10},children:r})]})}function qN(){const{user:n,claims:e,loading:t}=zi(),[r,o]=G.useState(!1),[a,u]=G.useState("");if(t)return null;if(!n||(e==null?void 0:e.role)!=="admin")return E.jsx("div",{className:"card",children:"Accs admin requis"});const d=async()=>{o(!0),u("Migration en cours...");let f=0;try{const m=await sT(Ko(Ln,"clients"));for(const _ of m.docs)await gN(Li(Ln,"clients",_.id),{installerId:"INST123"}),f+=1;u(`Migration termine : ${f} document${f>1?"s":""} mis  jour.`)}catch(m){u(`Erreur migration : ${m.message||m}`)}finally{o(!1)}};return E.jsxs("div",{className:"card",children:[E.jsx("h3",{children:"Corriger les installerId"}),E.jsx("p",{className:"small",children:`Force l'installerId sur "INST123" dans tous les clients Firestore.`}),E.jsx("button",{className:"btn-primary",disabled:r,onClick:d,children:r?"Correction en cours...":"Corriger maintenant"}),a&&E.jsx("div",{style:{marginTop:10},children:a})]})}function HN(){const[n,e]=G.useState(""),[t,r]=G.useState(""),[o,a]=G.useState(""),[u,d]=G.useState(!1),f=async m=>{m.preventDefault(),a(""),d(!0);try{const _=await mE(wh,n,t),w=await lT(_.user.uid);if((w==null?void 0:w.role)!=="admin"){a("Accs admin requis."),await G1(wh),d(!1);return}window.location.href="/dashboard"}catch(_){a(_.message)}finally{d(!1)}};return E.jsxs("div",{className:"card narrow",children:[E.jsx("h3",{children:"Connexion Admin"}),E.jsxs("form",{onSubmit:f,className:"two-cols",children:[E.jsx("input",{placeholder:"Email",value:n,onChange:m=>e(m.target.value)}),E.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:m=>r(m.target.value)}),o&&E.jsx("div",{className:"small",style:{color:"red"},children:o}),E.jsx("button",{className:"btn-primary",type:"submit",disabled:u,children:u?"Connexion...":"Se connecter"})]})]})}function uT(n,e){return function(){return n.apply(e,arguments)}}const{toString:WN}=Object.prototype,{getPrototypeOf:Fm}=Object,{iterator:Kh,toStringTag:cT}=Symbol,Gh=(n=>e=>{const t=WN.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),rr=n=>(n=n.toLowerCase(),e=>Gh(e)===n),Qh=n=>e=>typeof e===n,{isArray:pa}=Array,na=Qh("undefined");function nu(n){return n!==null&&!na(n)&&n.constructor!==null&&!na(n.constructor)&&dn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const hT=rr("ArrayBuffer");function KN(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&hT(n.buffer),e}const GN=Qh("string"),dn=Qh("function"),dT=Qh("number"),ru=n=>n!==null&&typeof n=="object",QN=n=>n===!0||n===!1,Bc=n=>{if(Gh(n)!=="object")return!1;const e=Fm(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(cT in n)&&!(Kh in n)},JN=n=>{if(!ru(n)||nu(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},XN=rr("Date"),YN=rr("File"),ZN=rr("Blob"),eb=rr("FileList"),tb=n=>ru(n)&&dn(n.pipe),nb=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||dn(n.append)&&((e=Gh(n))==="formdata"||e==="object"&&dn(n.toString)&&n.toString()==="[object FormData]"))},rb=rr("URLSearchParams"),[sb,ib,ob,ab]=["ReadableStream","Request","Response","Headers"].map(rr),lb=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function su(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),pa(n))for(r=0,o=n.length;r<o;r++)e.call(null,n[r],r,n);else{if(nu(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(r=0;r<u;r++)d=a[r],e.call(null,n[d],d,n)}}function fT(n,e){if(nu(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,o;for(;r-- >0;)if(o=t[r],e===o.toLowerCase())return o;return null}const Pi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pT=n=>!na(n)&&n!==Pi;function Ap(){const{caseless:n,skipUndefined:e}=pT(this)&&this||{},t={},r=(o,a)=>{const u=n&&fT(t,a)||a;Bc(t[u])&&Bc(o)?t[u]=Ap(t[u],o):Bc(o)?t[u]=Ap({},o):pa(o)?t[u]=o.slice():(!e||!na(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&su(arguments[o],r);return t}const ub=(n,e,t,{allOwnKeys:r}={})=>(su(e,(o,a)=>{t&&dn(o)?n[a]=uT(o,t):n[a]=o},{allOwnKeys:r}),n),cb=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),hb=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},db=(n,e,t,r)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!r||r(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Fm(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},fb=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},pb=n=>{if(!n)return null;if(pa(n))return n;let e=n.length;if(!dT(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},mb=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Fm(Uint8Array)),gb=(n,e)=>{const r=(n&&n[Kh]).call(n);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},yb=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},_b=rr("HTMLFormElement"),vb=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,o){return r.toUpperCase()+o}),ew=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),wb=rr("RegExp"),mT=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};su(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(r[a]=u||o)}),Object.defineProperties(n,r)},Eb=n=>{mT(n,(e,t)=>{if(dn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(dn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Tb=(n,e)=>{const t={},r=o=>{o.forEach(a=>{t[a]=!0})};return pa(n)?r(n):r(String(n).split(e)),t},Ib=()=>{},Sb=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Ab(n){return!!(n&&dn(n.append)&&n[cT]==="FormData"&&n[Kh])}const Rb=n=>{const e=new Array(10),t=(r,o)=>{if(ru(r)){if(e.indexOf(r)>=0)return;if(nu(r))return r;if(!("toJSON"in r)){e[o]=r;const a=pa(r)?[]:{};return su(r,(u,d)=>{const f=t(u,o+1);!na(f)&&(a[d]=f)}),e[o]=void 0,a}}return r};return t(n,0)},Cb=rr("AsyncFunction"),Pb=n=>n&&(ru(n)||dn(n))&&dn(n.then)&&dn(n.catch),gT=((n,e)=>n?setImmediate:e?((t,r)=>(Pi.addEventListener("message",({source:o,data:a})=>{o===Pi&&a===t&&r.length&&r.shift()()},!1),o=>{r.push(o),Pi.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",dn(Pi.postMessage)),kb=typeof queueMicrotask<"u"?queueMicrotask.bind(Pi):typeof process<"u"&&process.nextTick||gT,xb=n=>n!=null&&dn(n[Kh]),H={isArray:pa,isArrayBuffer:hT,isBuffer:nu,isFormData:nb,isArrayBufferView:KN,isString:GN,isNumber:dT,isBoolean:QN,isObject:ru,isPlainObject:Bc,isEmptyObject:JN,isReadableStream:sb,isRequest:ib,isResponse:ob,isHeaders:ab,isUndefined:na,isDate:XN,isFile:YN,isBlob:ZN,isRegExp:wb,isFunction:dn,isStream:tb,isURLSearchParams:rb,isTypedArray:mb,isFileList:eb,forEach:su,merge:Ap,extend:ub,trim:lb,stripBOM:cb,inherits:hb,toFlatObject:db,kindOf:Gh,kindOfTest:rr,endsWith:fb,toArray:pb,forEachEntry:gb,matchAll:yb,isHTMLForm:_b,hasOwnProperty:ew,hasOwnProp:ew,reduceDescriptors:mT,freezeMethods:Eb,toObjectSet:Tb,toCamelCase:vb,noop:Ib,toFiniteNumber:Sb,findKey:fT,global:Pi,isContextDefined:pT,isSpecCompliantForm:Ab,toJSONObject:Rb,isAsyncFn:Cb,isThenable:Pb,setImmediate:gT,asap:kb,isIterable:xb};function Ce(n,e,t,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const yT=Ce.prototype,_T={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{_T[n]={value:n}});Object.defineProperties(Ce,_T);Object.defineProperty(yT,"isAxiosError",{value:!0});Ce.from=(n,e,t,r,o,a)=>{const u=Object.create(yT);H.toFlatObject(n,u,function(_){return _!==Error.prototype},m=>m!=="isAxiosError");const d=n&&n.message?n.message:"Error",f=e==null&&n?n.code:e;return Ce.call(u,d,f,t,r,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const Nb=null;function Rp(n){return H.isPlainObject(n)||H.isArray(n)}function vT(n){return H.endsWith(n,"[]")?n.slice(0,-2):n}function tw(n,e,t){return n?n.concat(e).map(function(o,a){return o=vT(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function bb(n){return H.isArray(n)&&!n.some(Rp)}const Ob=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Jh(n,e,t){if(!H.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,k){return!H.isUndefined(k[j])});const r=t.metaTokens,o=t.visitor||_,a=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function m(x){if(x===null)return"";if(H.isDate(x))return x.toISOString();if(H.isBoolean(x))return x.toString();if(!f&&H.isBlob(x))throw new Ce("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(x)||H.isTypedArray(x)?f&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function _(x,j,k){let ee=x;if(x&&!k&&typeof x=="object"){if(H.endsWith(j,"{}"))j=r?j:j.slice(0,-2),x=JSON.stringify(x);else if(H.isArray(x)&&bb(x)||(H.isFileList(x)||H.endsWith(j,"[]"))&&(ee=H.toArray(x)))return j=vT(j),ee.forEach(function($,re){!(H.isUndefined($)||$===null)&&e.append(u===!0?tw([j],re,a):u===null?j:j+"[]",m($))}),!1}return Rp(x)?!0:(e.append(tw(k,j,a),m(x)),!1)}const w=[],I=Object.assign(Ob,{defaultVisitor:_,convertValue:m,isVisitable:Rp});function L(x,j){if(!H.isUndefined(x)){if(w.indexOf(x)!==-1)throw Error("Circular reference detected in "+j.join("."));w.push(x),H.forEach(x,function(ee,se){(!(H.isUndefined(ee)||ee===null)&&o.call(e,ee,H.isString(se)?se.trim():se,j,I))===!0&&L(ee,j?j.concat(se):[se])}),w.pop()}}if(!H.isObject(n))throw new TypeError("data must be an object");return L(n),e}function nw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Um(n,e){this._pairs=[],n&&Jh(n,this,e)}const wT=Um.prototype;wT.append=function(e,t){this._pairs.push([e,t])};wT.toString=function(e){const t=e?function(r){return e.call(this,r,nw)}:nw;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Db(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ET(n,e,t){if(!e)return n;const r=t&&t.encode||Db;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=H.isURLSearchParams(e)?e.toString():new Um(e,t).toString(r),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class rw{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(r){r!==null&&e(r)})}}const TT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vb=typeof URLSearchParams<"u"?URLSearchParams:Um,Lb=typeof FormData<"u"?FormData:null,Mb=typeof Blob<"u"?Blob:null,jb={isBrowser:!0,classes:{URLSearchParams:Vb,FormData:Lb,Blob:Mb},protocols:["http","https","file","blob","url","data"]},Bm=typeof window<"u"&&typeof document<"u",Cp=typeof navigator=="object"&&navigator||void 0,Fb=Bm&&(!Cp||["ReactNative","NativeScript","NS"].indexOf(Cp.product)<0),Ub=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bb=Bm&&window.location.href||"http://localhost",zb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bm,hasStandardBrowserEnv:Fb,hasStandardBrowserWebWorkerEnv:Ub,navigator:Cp,origin:Bb},Symbol.toStringTag,{value:"Module"})),Qt={...zb,...jb};function $b(n,e){return Jh(n,new Qt.classes.URLSearchParams,{visitor:function(t,r,o,a){return Qt.isNode&&H.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function qb(n){return H.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Hb(n){const e={},t=Object.keys(n);let r;const o=t.length;let a;for(r=0;r<o;r++)a=t[r],e[a]=n[a];return e}function IT(n){function e(t,r,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),f=a>=t.length;return u=!u&&H.isArray(o)?o.length:u,f?(H.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!d):((!o[u]||!H.isObject(o[u]))&&(o[u]=[]),e(t,r,o[u],a)&&H.isArray(o[u])&&(o[u]=Hb(o[u])),!d)}if(H.isFormData(n)&&H.isFunction(n.entries)){const t={};return H.forEachEntry(n,(r,o)=>{e(qb(r),o,t,0)}),t}return null}function Wb(n,e,t){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const iu={transitional:TT,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",o=r.indexOf("application/json")>-1,a=H.isObject(e);if(a&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(IT(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $b(e,this.formSerializer).toString();if((d=H.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Jh(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),Wb(e)):e}],transformResponse:[function(e){const t=this.transitional||iu.transitional,r=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(r&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?Ce.from(d,Ce.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qt.classes.FormData,Blob:Qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],n=>{iu.headers[n]={}});const Kb=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gb=n=>{const e={};let t,r,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!t||e[t]&&Kb[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},sw=Symbol("internals");function dl(n){return n&&String(n).trim().toLowerCase()}function zc(n){return n===!1||n==null?n:H.isArray(n)?n.map(zc):String(n)}function Qb(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const Jb=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function qf(n,e,t,r,o){if(H.isFunction(r))return r.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(r))return e.indexOf(r)!==-1;if(H.isRegExp(r))return r.test(e)}}function Xb(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Yb(n,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(o,a,u){return this[r].call(this,e,o,a,u)},configurable:!0})})}let fn=class{constructor(e){e&&this.set(e)}set(e,t,r){const o=this;function a(d,f,m){const _=dl(f);if(!_)throw new Error("header name must be a non-empty string");const w=H.findKey(o,_);(!w||o[w]===void 0||m===!0||m===void 0&&o[w]!==!1)&&(o[w||f]=zc(d))}const u=(d,f)=>H.forEach(d,(m,_)=>a(m,_,f));if(H.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(H.isString(e)&&(e=e.trim())&&!Jb(e))u(Gb(e),t);else if(H.isObject(e)&&H.isIterable(e)){let d={},f,m;for(const _ of e){if(!H.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[m=_[0]]=(f=d[m])?H.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}u(d,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=dl(e),e){const r=H.findKey(this,e);if(r){const o=this[r];if(!t)return o;if(t===!0)return Qb(o);if(H.isFunction(t))return t.call(this,o,r);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=dl(e),e){const r=H.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||qf(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let o=!1;function a(u){if(u=dl(u),u){const d=H.findKey(r,u);d&&(!t||qf(r,r[d],d,t))&&(delete r[d],o=!0)}}return H.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let r=t.length,o=!1;for(;r--;){const a=t[r];(!e||qf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,r={};return H.forEach(this,(o,a)=>{const u=H.findKey(r,a);if(u){t[u]=zc(o),delete t[a];return}const d=e?Xb(a):String(a).trim();d!==a&&delete t[a],t[d]=zc(o),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(r,o)=>{r!=null&&r!==!1&&(t[o]=e&&H.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[sw]=this[sw]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=dl(u);r[d]||(Yb(o,u),r[d]=!0)}return H.isArray(e)?e.forEach(a):a(e),this}};fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(fn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});H.freezeMethods(fn);function Hf(n,e){const t=this||iu,r=e||t,o=fn.from(r.headers);let a=r.data;return H.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function ST(n){return!!(n&&n.__CANCEL__)}function ma(n,e,t){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(ma,Ce,{__CANCEL__:!0});function AT(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Ce("Request failed with status code "+t.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Zb(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function eO(n,e){n=n||10;const t=new Array(n),r=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),_=r[a];u||(u=m),t[o]=f,r[o]=m;let w=a,I=0;for(;w!==o;)I+=t[w++],w=w%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),m-u<e)return;const L=_&&m-_;return L?Math.round(I*1e3/L):void 0}}function tO(n,e){let t=0,r=1e3/e,o,a;const u=(m,_=Date.now())=>{t=_,o=null,a&&(clearTimeout(a),a=null),n(...m)};return[(...m)=>{const _=Date.now(),w=_-t;w>=r?u(m,_):(o=m,a||(a=setTimeout(()=>{a=null,u(o)},r-w)))},()=>o&&u(o)]}const Th=(n,e,t=3)=>{let r=0;const o=eO(50,250);return tO(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,f=u-r,m=o(f),_=u<=d;r=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:f,rate:m||void 0,estimated:m&&d&&_?(d-u)/m:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(w)},t)},iw=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},ow=n=>(...e)=>H.asap(()=>n(...e)),nO=Qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Qt.origin),Qt.navigator&&/(msie|trident)/i.test(Qt.navigator.userAgent)):()=>!0,rO=Qt.hasStandardBrowserEnv?{write(n,e,t,r,o,a,u){if(typeof document>"u")return;const d=[`${n}=${encodeURIComponent(e)}`];H.isNumber(t)&&d.push(`expires=${new Date(t).toUTCString()}`),H.isString(r)&&d.push(`path=${r}`),H.isString(o)&&d.push(`domain=${o}`),a===!0&&d.push("secure"),H.isString(u)&&d.push(`SameSite=${u}`),document.cookie=d.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sO(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function iO(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function RT(n,e,t){let r=!sO(e);return n&&(r||t==!1)?iO(n,e):e}const aw=n=>n instanceof fn?{...n}:n;function Mi(n,e){e=e||{};const t={};function r(m,_,w,I){return H.isPlainObject(m)&&H.isPlainObject(_)?H.merge.call({caseless:I},m,_):H.isPlainObject(_)?H.merge({},_):H.isArray(_)?_.slice():_}function o(m,_,w,I){if(H.isUndefined(_)){if(!H.isUndefined(m))return r(void 0,m,w,I)}else return r(m,_,w,I)}function a(m,_){if(!H.isUndefined(_))return r(void 0,_)}function u(m,_){if(H.isUndefined(_)){if(!H.isUndefined(m))return r(void 0,m)}else return r(void 0,_)}function d(m,_,w){if(w in e)return r(m,_);if(w in n)return r(void 0,m)}const f={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(m,_,w)=>o(aw(m),aw(_),w,!0)};return H.forEach(Object.keys({...n,...e}),function(_){const w=f[_]||o,I=w(n[_],e[_],_);H.isUndefined(I)&&w!==d||(t[_]=I)}),t}const CT=n=>{const e=Mi({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=fn.from(u),e.url=ET(RT(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),H.isFormData(t)){if(Qt.hasStandardBrowserEnv||Qt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(H.isFunction(t.getHeaders)){const f=t.getHeaders(),m=["content-type","content-length"];Object.entries(f).forEach(([_,w])=>{m.includes(_.toLowerCase())&&u.set(_,w)})}}if(Qt.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(e)),r||r!==!1&&nO(e.url))){const f=o&&a&&rO.read(a);f&&u.set(o,f)}return e},oO=typeof XMLHttpRequest<"u",aO=oO&&function(n){return new Promise(function(t,r){const o=CT(n);let a=o.data;const u=fn.from(o.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:m}=o,_,w,I,L,x;function j(){L&&L(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function ee(){if(!k)return;const $=fn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),me={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:$,config:n,request:k};AT(function(b){t(b),j()},function(b){r(b),j()},me),k=null}"onloadend"in k?k.onloadend=ee:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(ee)},k.onabort=function(){k&&(r(new Ce("Request aborted",Ce.ECONNABORTED,n,k)),k=null)},k.onerror=function(re){const me=re&&re.message?re.message:"Network Error",_e=new Ce(me,Ce.ERR_NETWORK,n,k);_e.event=re||null,r(_e),k=null},k.ontimeout=function(){let re=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const me=o.transitional||TT;o.timeoutErrorMessage&&(re=o.timeoutErrorMessage),r(new Ce(re,me.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,k)),k=null},a===void 0&&u.setContentType(null),"setRequestHeader"in k&&H.forEach(u.toJSON(),function(re,me){k.setRequestHeader(me,re)}),H.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),d&&d!=="json"&&(k.responseType=o.responseType),m&&([I,x]=Th(m,!0),k.addEventListener("progress",I)),f&&k.upload&&([w,L]=Th(f),k.upload.addEventListener("progress",w),k.upload.addEventListener("loadend",L)),(o.cancelToken||o.signal)&&(_=$=>{k&&(r(!$||$.type?new ma(null,n,k):$),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const se=Zb(o.url);if(se&&Qt.protocols.indexOf(se)===-1){r(new Ce("Unsupported protocol "+se+":",Ce.ERR_BAD_REQUEST,n));return}k.send(a||null)})},lO=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,o;const a=function(m){if(!o){o=!0,d();const _=m instanceof Error?m:this.reason;r.abort(_ instanceof Ce?_:new ma(_ instanceof Error?_.message:_))}};let u=e&&setTimeout(()=>{u=null,a(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),n=null)};n.forEach(m=>m.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>H.asap(d),f}},uO=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,o;for(;r<t;)o=r+e,yield n.slice(r,o),r=o},cO=async function*(n,e){for await(const t of hO(n))yield*uO(t,e)},hO=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},lw=(n,e,t,r)=>{const o=cO(n,e);let a=0,u,d=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:_}=await o.next();if(m){d(),f.close();return}let w=_.byteLength;if(t){let I=a+=w;t(I)}f.enqueue(new Uint8Array(_))}catch(m){throw d(m),m}},cancel(f){return d(f),o.return()}},{highWaterMark:2})},uw=64*1024,{isFunction:Pc}=H,dO=(({Request:n,Response:e})=>({Request:n,Response:e}))(H.global),{ReadableStream:cw,TextEncoder:hw}=H.global,dw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},fO=n=>{n=H.merge.call({skipUndefined:!0},dO,n);const{fetch:e,Request:t,Response:r}=n,o=e?Pc(e):typeof fetch=="function",a=Pc(t),u=Pc(r);if(!o)return!1;const d=o&&Pc(cw),f=o&&(typeof hw=="function"?(x=>j=>x.encode(j))(new hw):async x=>new Uint8Array(await new t(x).arrayBuffer())),m=a&&d&&dw(()=>{let x=!1;const j=new t(Qt.origin,{body:new cw,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!j}),_=u&&d&&dw(()=>H.isReadableStream(new r("").body)),w={stream:_&&(x=>x.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!w[x]&&(w[x]=(j,k)=>{let ee=j&&j[x];if(ee)return ee.call(j);throw new Ce(`Response type '${x}' is not supported`,Ce.ERR_NOT_SUPPORT,k)})});const I=async x=>{if(x==null)return 0;if(H.isBlob(x))return x.size;if(H.isSpecCompliantForm(x))return(await new t(Qt.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(H.isArrayBufferView(x)||H.isArrayBuffer(x))return x.byteLength;if(H.isURLSearchParams(x)&&(x=x+""),H.isString(x))return(await f(x)).byteLength},L=async(x,j)=>{const k=H.toFiniteNumber(x.getContentLength());return k??I(j)};return async x=>{let{url:j,method:k,data:ee,signal:se,cancelToken:$,timeout:re,onDownloadProgress:me,onUploadProgress:_e,responseType:b,headers:A,withCredentials:P="same-origin",fetchOptions:D}=CT(x),O=e||fetch;b=b?(b+"").toLowerCase():"text";let F=lO([se,$&&$.toAbortSignal()],re),C=null;const He=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let wt;try{if(_e&&m&&k!=="get"&&k!=="head"&&(wt=await L(A,ee))!==0){let M=new t(j,{method:"POST",body:ee,duplex:"half"}),Q;if(H.isFormData(ee)&&(Q=M.headers.get("content-type"))&&A.setContentType(Q),M.body){const[fe,Re]=iw(wt,Th(ow(_e)));ee=lw(M.body,uw,fe,Re)}}H.isString(P)||(P=P?"include":"omit");const Ge=a&&"credentials"in t.prototype,Be={...D,signal:F,method:k.toUpperCase(),headers:A.normalize().toJSON(),body:ee,duplex:"half",credentials:Ge?P:void 0};C=a&&new t(j,Be);let ne=await(a?O(C,D):O(j,Be));const ge=_&&(b==="stream"||b==="response");if(_&&(me||ge&&He)){const M={};["status","statusText","headers"].forEach(Pe=>{M[Pe]=ne[Pe]});const Q=H.toFiniteNumber(ne.headers.get("content-length")),[fe,Re]=me&&iw(Q,Th(ow(me),!0))||[];ne=new r(lw(ne.body,uw,fe,()=>{Re&&Re(),He&&He()}),M)}b=b||"text";let ae=await w[H.findKey(w,b)||"text"](ne,x);return!ge&&He&&He(),await new Promise((M,Q)=>{AT(M,Q,{data:ae,headers:fn.from(ne.headers),status:ne.status,statusText:ne.statusText,config:x,request:C})})}catch(Ge){throw He&&He(),Ge&&Ge.name==="TypeError"&&/Load failed|fetch/i.test(Ge.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,x,C),{cause:Ge.cause||Ge}):Ce.from(Ge,Ge&&Ge.code,x,C)}}},pO=new Map,PT=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:o}=e,a=[r,o,t];let u=a.length,d=u,f,m,_=pO;for(;d--;)f=a[d],m=_.get(f),m===void 0&&_.set(f,m=d?new Map:fO(e)),_=m;return m};PT();const zm={http:Nb,xhr:aO,fetch:{get:PT}};H.forEach(zm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const fw=n=>`- ${n}`,mO=n=>H.isFunction(n)||n===null||n===!1;function gO(n,e){n=H.isArray(n)?n:[n];const{length:t}=n;let r,o;const a={};for(let u=0;u<t;u++){r=n[u];let d;if(o=r,!mO(r)&&(o=zm[(d=String(r)).toLowerCase()],o===void 0))throw new Ce(`Unknown adapter '${d}'`);if(o&&(H.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(fw).join(`
`):" "+fw(u[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o}const kT={getAdapter:gO,adapters:zm};function Wf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ma(null,n)}function pw(n){return Wf(n),n.headers=fn.from(n.headers),n.data=Hf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),kT.getAdapter(n.adapter||iu.adapter,n)(n).then(function(r){return Wf(n),r.data=Hf.call(n,n.transformResponse,r),r.headers=fn.from(r.headers),r},function(r){return ST(r)||(Wf(n),r&&r.response&&(r.response.data=Hf.call(n,n.transformResponse,r.response),r.response.headers=fn.from(r.response.headers))),Promise.reject(r)})}const xT="1.13.2",Xh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Xh[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const mw={};Xh.transitional=function(e,t,r){function o(a,u){return"[Axios v"+xT+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,d)=>{if(e===!1)throw new Ce(o(u," has been removed"+(t?" in "+t:"")),Ce.ERR_DEPRECATED);return t&&!mw[u]&&(mw[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Xh.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function yO(n,e,t){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const a=r[o],u=e[a];if(u){const d=n[a],f=d===void 0||u(d,a,n);if(f!==!0)throw new Ce("option "+a+" must be "+f,Ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ce("Unknown option "+a,Ce.ERR_BAD_OPTION)}}const $c={assertOptions:yO,validators:Xh},mr=$c.validators;let xi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new rw,response:new rw}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Mi(this.defaults,t);const{transitional:r,paramsSerializer:o,headers:a}=t;r!==void 0&&$c.assertOptions(r,{silentJSONParsing:mr.transitional(mr.boolean),forcedJSONParsing:mr.transitional(mr.boolean),clarifyTimeoutError:mr.transitional(mr.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:$c.assertOptions(o,{encode:mr.function,serialize:mr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$c.assertOptions(t,{baseUrl:mr.spelling("baseURL"),withXsrfToken:mr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&H.merge(a.common,a[t.method]);a&&H.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=fn.concat(u,a);const d=[];let f=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(t)===!1||(f=f&&j.synchronous,d.unshift(j.fulfilled,j.rejected))});const m=[];this.interceptors.response.forEach(function(j){m.push(j.fulfilled,j.rejected)});let _,w=0,I;if(!f){const x=[pw.bind(this),void 0];for(x.unshift(...d),x.push(...m),I=x.length,_=Promise.resolve(t);w<I;)_=_.then(x[w++],x[w++]);return _}I=d.length;let L=t;for(;w<I;){const x=d[w++],j=d[w++];try{L=x(L)}catch(k){j.call(this,k);break}}try{_=pw.call(this,L)}catch(x){return Promise.reject(x)}for(w=0,I=m.length;w<I;)_=_.then(m[w++],m[w++]);return _}getUri(e){e=Mi(this.defaults,e);const t=RT(e.baseURL,e.url,e.allowAbsoluteUrls);return ET(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){xi.prototype[e]=function(t,r){return this.request(Mi(r||{},{method:e,url:t,data:(r||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(r){return function(a,u,d){return this.request(Mi(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}xi.prototype[e]=t(),xi.prototype[e+"Form"]=t(!0)});let _O=class NT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{r.subscribe(d),a=d}).then(o);return u.cancel=function(){r.unsubscribe(a)},u},e(function(a,u,d){r.reason||(r.reason=new ma(a,u,d),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new NT(function(o){e=o}),cancel:e}}};function vO(n){return function(t){return n.apply(null,t)}}function wO(n){return H.isObject(n)&&n.isAxiosError===!0}const Pp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Pp).forEach(([n,e])=>{Pp[e]=n});function bT(n){const e=new xi(n),t=uT(xi.prototype.request,e);return H.extend(t,xi.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return bT(Mi(n,o))},t}const ft=bT(iu);ft.Axios=xi;ft.CanceledError=ma;ft.CancelToken=_O;ft.isCancel=ST;ft.VERSION=xT;ft.toFormData=Jh;ft.AxiosError=Ce;ft.Cancel=ft.CanceledError;ft.all=function(e){return Promise.all(e)};ft.spread=vO;ft.isAxiosError=wO;ft.mergeConfig=Mi;ft.AxiosHeaders=fn;ft.formToJSON=n=>IT(H.isHTMLForm(n)?new FormData(n):n);ft.getAdapter=kT.getAdapter;ft.HttpStatusCode=Pp;ft.default=ft;const{Axios:ID,AxiosError:SD,CanceledError:AD,isCancel:RD,CancelToken:CD,VERSION:PD,all:kD,Cancel:xD,isAxiosError:ND,spread:bD,toFormData:OD,AxiosHeaders:DD,HttpStatusCode:VD,formToJSON:LD,getAdapter:MD,mergeConfig:jD}=ft;var EO={};const TO=EO.REACT_APP_API_URL||"http://localhost:3000",Pl=ft.create({baseURL:TO,headers:{"Content-Type":"application/json"}});Pl.interceptors.request.use(n=>{const e=localStorage.getItem("firebaseToken");return e&&(n.headers.Authorization=`Bearer ${e}`),n});const IO={ping:()=>Pl.get("/health")};function SO(){const[n,e]=G.useState("..."),[t,r]=G.useState(""),[o,a]=G.useState("");return G.useEffect(()=>{IO.ping().then(u=>{var d,f;e(((d=u.data)==null?void 0:d.status)||"unknown"),r(((f=u.data)==null?void 0:f.timestamp)||"")}).catch(u=>a((u==null?void 0:u.message)||"error"))},[]),E.jsxs("div",{style:{padding:"1rem"},children:[E.jsx("h2",{children:"Health Debug"}),E.jsxs("p",{children:["Status: ",n]}),E.jsxs("p",{children:["Timestamp: ",t]}),o&&E.jsxs("p",{style:{color:"red"},children:["Error: ",o]})]})}const gw={list:n=>Pl.get("/messages",{params:{projectId:n}}),create:n=>Pl.post("/messages",n),markRead:n=>Pl.put(`/messages/${n}/read`)},Sr=Object.create(null);Sr.open="0";Sr.close="1";Sr.ping="2";Sr.pong="3";Sr.message="4";Sr.upgrade="5";Sr.noop="6";const qc=Object.create(null);Object.keys(Sr).forEach(n=>{qc[Sr[n]]=n});const kp={type:"error",data:"parser error"},OT=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",DT=typeof ArrayBuffer=="function",VT=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,$m=({type:n,data:e},t,r)=>OT&&e instanceof Blob?t?r(e):yw(e,r):DT&&(e instanceof ArrayBuffer||VT(e))?t?r(e):yw(new Blob([e]),r):r(Sr[n]+(e||"")),yw=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function _w(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Kf;function AO(n,e){if(OT&&n.data instanceof Blob)return n.data.arrayBuffer().then(_w).then(e);if(DT&&(n.data instanceof ArrayBuffer||VT(n.data)))return e(_w(n.data));$m(n,!1,t=>{Kf||(Kf=new TextEncoder),e(Kf.encode(t))})}const vw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<vw.length;n++)wl[vw.charCodeAt(n)]=n;const RO=n=>{let e=n.length*.75,t=n.length,r,o=0,a,u,d,f;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const m=new ArrayBuffer(e),_=new Uint8Array(m);for(r=0;r<t;r+=4)a=wl[n.charCodeAt(r)],u=wl[n.charCodeAt(r+1)],d=wl[n.charCodeAt(r+2)],f=wl[n.charCodeAt(r+3)],_[o++]=a<<2|u>>4,_[o++]=(u&15)<<4|d>>2,_[o++]=(d&3)<<6|f&63;return m},CO=typeof ArrayBuffer=="function",qm=(n,e)=>{if(typeof n!="string")return{type:"message",data:LT(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:PO(n.substring(1),e)}:qc[t]?n.length>1?{type:qc[t],data:n.substring(1)}:{type:qc[t]}:kp},PO=(n,e)=>{if(CO){const t=RO(n);return LT(t,e)}else return{base64:!0,data:n}},LT=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},MT="",kO=(n,e)=>{const t=n.length,r=new Array(t);let o=0;n.forEach((a,u)=>{$m(a,!1,d=>{r[u]=d,++o===t&&e(r.join(MT))})})},xO=(n,e)=>{const t=n.split(MT),r=[];for(let o=0;o<t.length;o++){const a=qm(t[o],e);if(r.push(a),a.type==="error")break}return r};function NO(){return new TransformStream({transform(n,e){AO(n,t=>{const r=t.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const a=new DataView(o.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{o=new Uint8Array(9);const a=new DataView(o.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(t)})}})}let Gf;function kc(n){return n.reduce((e,t)=>e+t.length,0)}function xc(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let o=0;o<e;o++)t[o]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function bO(n,e){Gf||(Gf=new TextDecoder);const t=[];let r=0,o=-1,a=!1;return new TransformStream({transform(u,d){for(t.push(u);;){if(r===0){if(kc(t)<1)break;const f=xc(t,1);a=(f[0]&128)===128,o=f[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(kc(t)<2)break;const f=xc(t,2);o=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),r=3}else if(r===2){if(kc(t)<8)break;const f=xc(t,8),m=new DataView(f.buffer,f.byteOffset,f.length),_=m.getUint32(0);if(_>Math.pow(2,21)-1){d.enqueue(kp);break}o=_*Math.pow(2,32)+m.getUint32(4),r=3}else{if(kc(t)<o)break;const f=xc(t,o);d.enqueue(qm(a?f:Gf.decode(f),e)),r=0}if(o===0||o>n){d.enqueue(kp);break}}}})}const jT=4;function vt(n){if(n)return OO(n)}function OO(n){for(var e in vt.prototype)n[e]=vt.prototype[e];return n}vt.prototype.on=vt.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};vt.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};vt.prototype.off=vt.prototype.removeListener=vt.prototype.removeAllListeners=vt.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,o=0;o<t.length;o++)if(r=t[o],r===e||r.fn===e){t.splice(o,1);break}return t.length===0&&delete this._callbacks["$"+n],this};vt.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,o=t.length;r<o;++r)t[r].apply(this,e)}return this};vt.prototype.emitReserved=vt.prototype.emit;vt.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};vt.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Yh=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Vn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),DO="arraybuffer";function FT(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const VO=Vn.setTimeout,LO=Vn.clearTimeout;function Zh(n,e){e.useNativeTimers?(n.setTimeoutFn=VO.bind(Vn),n.clearTimeoutFn=LO.bind(Vn)):(n.setTimeoutFn=Vn.setTimeout.bind(Vn),n.clearTimeoutFn=Vn.clearTimeout.bind(Vn))}const MO=1.33;function jO(n){return typeof n=="string"?FO(n):Math.ceil((n.byteLength||n.size)*MO)}function FO(n){let e=0,t=0;for(let r=0,o=n.length;r<o;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function UT(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function UO(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function BO(n){let e={},t=n.split("&");for(let r=0,o=t.length;r<o;r++){let a=t[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}class zO extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Hm extends vt{constructor(e){super(),this.writable=!1,Zh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new zO(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=qm(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=UO(e);return t.length?"?"+t:""}}class $O extends Hm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};xO(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,kO(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=UT()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let BT=!1;try{BT=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const qO=BT;function HO(){}class WO extends $O{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(o,a)=>{this.onError("xhr post error",o,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}let Go=class Hc extends vt{constructor(e,t,r){super(),this.createRequest=e,Zh(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=FT(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Hc.requestsCount++,Hc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=HO,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Hc.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Go.requestsCount=0;Go.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ww);else if(typeof addEventListener=="function"){const n="onpagehide"in Vn?"pagehide":"unload";addEventListener(n,ww,!1)}}function ww(){for(let n in Go.requests)Go.requests.hasOwnProperty(n)&&Go.requests[n].abort()}const KO=(function(){const n=zT({xdomain:!1});return n&&n.responseType!==null})();class GO extends WO{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=KO&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Go(zT,this.uri(),e)}}function zT(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||qO))return new XMLHttpRequest}catch{}if(!e)try{return new Vn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $T=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QO extends Hm{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=$T?{}:FT(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],o=t===e.length-1;$m(r,this.supportsBinary,a=>{try{this.doWrite(r,a)}catch{}o&&Yh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=UT()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Qf=Vn.WebSocket||Vn.MozWebSocket;class JO extends QO{createSocket(e,t,r){return $T?new Qf(e,t,r):t?new Qf(e,t):new Qf(e)}doWrite(e,t){this.ws.send(t)}}class XO extends Hm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=bO(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),o=NO();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const a=()=>{r.read().then(({done:d,value:f})=>{d||(this.onPacket(f),a())}).catch(d=>{})};a();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],o=t===e.length-1;this._writer.write(r).then(()=>{o&&Yh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const YO={websocket:JO,webtransport:XO,polling:GO},ZO=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,eD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xp(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let o=ZO.exec(n||""),a={},u=14;for(;u--;)a[eD[u]]=o[u]||"";return t!=-1&&r!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=tD(a,a.path),a.queryKey=nD(a,a.query),a}function tD(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function nD(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,a){o&&(t[o]=a)}),t}const Np=typeof addEventListener=="function"&&typeof removeEventListener=="function",Wc=[];Np&&addEventListener("offline",()=>{Wc.forEach(n=>n())},!1);class js extends vt{constructor(e,t){if(super(),this.binaryType=DO,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=xp(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=xp(t.host).host);Zh(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=BO(this.opts.query)),Np&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Wc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=jT,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&js.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",js.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(t+=jO(o)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Yh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,o){if(typeof t=="function"&&(o=t,t=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(js.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Np&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Wc.indexOf(this._offlineEventListener);r!==-1&&Wc.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}js.protocol=jT;class rD extends js{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;js.priorWebsocketSuccess=!1;const o=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",w=>{if(!r)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;js.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(_(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const I=new Error("probe error");I.transport=t.name,this.emitReserved("upgradeError",I)}}))};function a(){r||(r=!0,_(),t.close(),t=null)}const u=w=>{const I=new Error("probe error: "+w);I.transport=t.name,a(),this.emitReserved("upgradeError",I)};function d(){u("transport closed")}function f(){u("socket closed")}function m(w){t&&w.name!==t.name&&a()}const _=()=>{t.removeListener("open",o),t.removeListener("error",u),t.removeListener("close",d),this.off("close",f),this.off("upgrading",m)};t.once("open",o),t.once("error",u),t.once("close",d),this.once("close",f),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let sD=class extends rD{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>YO[o]).filter(o=>!!o)),super(e,r)}};function iD(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=xp(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+e,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}const oD=typeof ArrayBuffer=="function",aD=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,qT=Object.prototype.toString,lD=typeof Blob=="function"||typeof Blob<"u"&&qT.call(Blob)==="[object BlobConstructor]",uD=typeof File=="function"||typeof File<"u"&&qT.call(File)==="[object FileConstructor]";function Wm(n){return oD&&(n instanceof ArrayBuffer||aD(n))||lD&&n instanceof Blob||uD&&n instanceof File}function Kc(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(Kc(n[t]))return!0;return!1}if(Wm(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Kc(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Kc(n[t]))return!0;return!1}function cD(n){const e=[],t=n.data,r=n;return r.data=bp(t,e),r.attachments=e.length,{packet:r,buffers:e}}function bp(n,e){if(!n)return n;if(Wm(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=bp(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=bp(n[r],e));return t}return n}function hD(n,e){return n.data=Op(n.data,e),delete n.attachments,n}function Op(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Op(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Op(n[t],e));return n}const dD=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fD=5;var De;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class pD{constructor(e){this.replacer=e}encode(e){return(e.type===De.EVENT||e.type===De.ACK)&&Kc(e)?this.encodeAsBinary({type:e.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===De.BINARY_EVENT||e.type===De.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=cD(e),r=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(r),o}}function Ew(n){return Object.prototype.toString.call(n)==="[object Object]"}class Km extends vt{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===De.BINARY_EVENT;r||t.type===De.BINARY_ACK?(t.type=r?De.EVENT:De.ACK,this.reconstructor=new mD(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Wm(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(De[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===De.BINARY_EVENT||r.type===De.BINARY_ACK){const a=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const u=e.substring(a,t);if(u!=Number(u)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(u)}if(e.charAt(t+1)==="/"){const a=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(a,t)}else r.nsp="/";const o=e.charAt(t+1);if(o!==""&&Number(o)==o){const a=t+1;for(;++t;){const u=e.charAt(t);if(u==null||Number(u)!=u){--t;break}if(t===e.length)break}r.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(Km.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case De.CONNECT:return Ew(t);case De.DISCONNECT:return t===void 0;case De.CONNECT_ERROR:return typeof t=="string"||Ew(t);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&dD.indexOf(t[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class mD{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=hD(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Km,Encoder:pD,get PacketType(){return De},protocol:fD},Symbol.toStringTag,{value:"Module"}));function Yn(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const yD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class HT extends vt{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Yn(e,"open",this.onopen.bind(this)),Yn(e,"packet",this.onpacket.bind(this)),Yn(e,"error",this.onerror.bind(this)),Yn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,o,a;if(yD.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const u={type:De.EVENT,data:t};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const _=this.ids++,w=t.pop();this._registerAckCallback(_,w),u.id=_}const d=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,f=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!d||(f?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(e,t){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[e]=t;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===e&&this.sendBuffer.splice(d,1);t.call(this,new Error("operation has timed out"))},o),u=(...d)=>{this.io.clearTimeoutFn(a),t.apply(this,d)};u.withError=!0,this.acks[e]=u}emitWithAck(e,...t){return new Promise((r,o)=>{const a=(u,d)=>u?o(u):r(d);a.withError=!0,t.push(a),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...a)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(o)):(this._queue.shift(),t&&t(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case De.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(e);break;case De.ACK:case De.BINARY_ACK:this.onack(e);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...o){r||(r=!0,t.packet({type:De.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function ga(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}ga.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};ga.prototype.reset=function(){this.attempts=0};ga.prototype.setMin=function(n){this.ms=n};ga.prototype.setMax=function(n){this.max=n};ga.prototype.setJitter=function(n){this.jitter=n};class Dp extends vt{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Zh(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ga({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const o=t.parser||gD;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sD(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=Yn(t,"open",function(){r.onopen(),e&&e()}),a=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},u=Yn(t,"error",a);if(this._timeout!==!1){const d=this._timeout,f=this.setTimeoutFn(()=>{o(),a(new Error("timeout")),t.close()},d);this.opts.autoUnref&&f.unref(),this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(o),this.subs.push(u),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Yn(e,"ping",this.onping.bind(this)),Yn(e,"data",this.ondata.bind(this)),Yn(e,"error",this.onerror.bind(this)),Yn(e,"close",this.onclose.bind(this)),Yn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Yh(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new HT(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const fl={};function Gc(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=iD(n,e.path||"/socket.io"),r=t.source,o=t.id,a=t.path,u=fl[o]&&a in fl[o].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||u;let f;return d?f=new Dp(r,e):(fl[o]||(fl[o]=new Dp(r,e)),f=fl[o]),t.query&&!e.query&&(e.query=t.queryKey),f.socket(t.path,e)}Object.assign(Gc,{Manager:Dp,Socket:HT,io:Gc,connect:Gc});function _D(){const[n,e]=G.useState("smoke"),[t,r]=G.useState("Hello"),[o,a]=G.useState([]),[u,d]=G.useState([]);G.useEffect(()=>{const _=Gc("http://localhost:3000",{autoConnect:!0});return _.on("connect",()=>d(w=>[...w,"connected"])),_.on("message:new",w=>{d(I=>[...I,`message:new ${w.id}`]),a(I=>[w,...I])}),_.on("message:read",w=>d(I=>[...I,`message:read ${w.id}`])),()=>_.disconnect()},[]);const f=async()=>{const _=await gw.list(n);a(_.data.items||[])},m=async()=>{await gw.create({projectId:n,content:t}),await f()};return E.jsxs("div",{style:{padding:20},children:[E.jsx("h2",{children:"Debug Messages"}),E.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[E.jsx("input",{value:n,onChange:_=>e(_.target.value),placeholder:"projectId"}),E.jsx("button",{onClick:f,children:"Load"})]}),E.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[E.jsx("input",{value:t,onChange:_=>r(_.target.value),placeholder:"content"}),E.jsx("button",{onClick:m,children:"Send"})]}),E.jsxs("div",{style:{marginBottom:12},children:[E.jsx("strong",{children:"Socket log:"}),E.jsx("pre",{style:{background:"#111",color:"#0f0",padding:8},children:u.join(`
`)||""})]}),E.jsxs("div",{children:[E.jsxs("strong",{children:["Messages (",o.length,"):"]}),E.jsx("ul",{children:o.map(_=>E.jsxs("li",{children:[_.projectId,"  ",_.content,"  ",_.read?"read":"unread"]},_.id))})]})]})}function vD(){return E.jsxs(YS,{children:[E.jsx(jt,{path:"/login",element:E.jsx(HN,{})}),E.jsx(jt,{path:"/dashboard",element:E.jsx(Ai,{children:E.jsx(bN,{})})}),E.jsx(jt,{path:"/dossiers/:id",element:E.jsx(Ai,{children:E.jsx(MN,{})})}),E.jsx(jt,{path:"/planning",element:E.jsx(Ai,{children:E.jsx(jN,{})})}),E.jsx(jt,{path:"/operator",element:E.jsx(Ai,{children:E.jsx(FN,{})})}),E.jsx(jt,{path:"/leads/:id",element:E.jsx(Ai,{children:E.jsx(zN,{})})}),E.jsx(jt,{path:"/dev/seed",element:E.jsx(Ai,{children:E.jsx($N,{})})}),E.jsx(jt,{path:"/admin/fix-installer",element:E.jsx(Ai,{children:E.jsx(qN,{})})}),E.jsx(jt,{path:"/debug/health",element:E.jsx(SO,{})}),E.jsx(jt,{path:"/debug/messages",element:E.jsx(_D,{})}),E.jsx(jt,{path:"/client/login",element:E.jsx(SN,{})}),E.jsx(jt,{path:"/client/dashboard",element:E.jsx($f,{children:E.jsx(RN,{})})}),E.jsx(jt,{path:"/client/dossiers",element:E.jsx($f,{children:E.jsx(PN,{})})}),E.jsx(jt,{path:"/client/dossiers/:id",element:E.jsx($f,{children:E.jsx(kN,{})})}),E.jsx(jt,{path:"/",element:E.jsx(Xf,{to:"/dashboard",replace:!0})}),E.jsx(jt,{path:"/*",element:E.jsx(Xf,{to:"/dashboard",replace:!0})})]})}function Ai({children:n}){const{user:e,loading:t}=zi();return t||!e?E.jsx("div",{className:"page-loader",children:"Chargement de la session"}):n}oS.createRoot(document.getElementById("root")).render(E.jsx(iA,{children:E.jsx(vD,{})}));
