function S0(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function A0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nd={exports:{}},$a={},Dd={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function C0(){if(Og)return Pe;Og=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function F(L,Q,fe){this.props=L,this.context=Q,this.refs=W,this.updater=fe||O}F.prototype.isReactComponent={},F.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},F.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=F.prototype;function ie(L,Q,fe){this.props=L,this.context=Q,this.refs=W,this.updater=fe||O}var q=ie.prototype=new re;q.constructor=ie,$(q,F.prototype),q.isPureReactComponent=!0;var oe=Array.isArray,Se=Object.prototype.hasOwnProperty,Te={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function C(L,Q,fe){var Ae,Re={},De=null,je=null;if(Q!=null)for(Ae in Q.ref!==void 0&&(je=Q.ref),Q.key!==void 0&&(De=""+Q.key),Q)Se.call(Q,Ae)&&!D.hasOwnProperty(Ae)&&(Re[Ae]=Q[Ae]);var Fe=arguments.length-2;if(Fe===1)Re.children=fe;else if(1<Fe){for(var We=Array(Fe),Et=0;Et<Fe;Et++)We[Et]=arguments[Et+2];Re.children=We}if(L&&L.defaultProps)for(Ae in Fe=L.defaultProps,Fe)Re[Ae]===void 0&&(Re[Ae]=Fe[Ae]);return{$$typeof:r,type:L,key:De,ref:je,props:Re,_owner:Te.current}}function P(L,Q){return{$$typeof:r,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function x(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return Q[fe]})}var b=/\/+/g;function R(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?x(""+L.key):Q.toString(36)}function rt(L,Q,fe,Ae,Re){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var je=!1;if(L===null)je=!0;else switch(De){case"string":case"number":je=!0;break;case"object":switch(L.$$typeof){case r:case e:je=!0}}if(je)return je=L,Re=Re(je),L=Ae===""?"."+R(je,0):Ae,oe(Re)?(fe="",L!=null&&(fe=L.replace(b,"$&/")+"/"),rt(Re,Q,fe,"",function(Et){return Et})):Re!=null&&(N(Re)&&(Re=P(Re,fe+(!Re.key||je&&je.key===Re.key?"":(""+Re.key).replace(b,"$&/")+"/")+L)),Q.push(Re)),1;if(je=0,Ae=Ae===""?".":Ae+":",oe(L))for(var Fe=0;Fe<L.length;Fe++){De=L[Fe];var We=Ae+R(De,Fe);je+=rt(De,Q,fe,We,Re)}else if(We=S(L),typeof We=="function")for(L=We.call(L),Fe=0;!(De=L.next()).done;)De=De.value,We=Ae+R(De,Fe++),je+=rt(De,Q,fe,We,Re);else if(De==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return je}function Ot(L,Q,fe){if(L==null)return L;var Ae=[],Re=0;return rt(L,Ae,"","",function(De){return Q.call(fe,De,Re++)}),Ae}function Lt(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var Be={current:null},te={transition:null},me={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:te,ReactCurrentOwner:Te};function le(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:Ot,forEach:function(L,Q,fe){Ot(L,function(){Q.apply(this,arguments)},fe)},count:function(L){var Q=0;return Ot(L,function(){Q++}),Q},toArray:function(L){return Ot(L,function(Q){return Q})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Pe.Component=F,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=ie,Pe.StrictMode=i,Pe.Suspense=p,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Pe.act=le,Pe.cloneElement=function(L,Q,fe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=$({},L.props),Re=L.key,De=L.ref,je=L._owner;if(Q!=null){if(Q.ref!==void 0&&(De=Q.ref,je=Te.current),Q.key!==void 0&&(Re=""+Q.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for(We in Q)Se.call(Q,We)&&!D.hasOwnProperty(We)&&(Ae[We]=Q[We]===void 0&&Fe!==void 0?Fe[We]:Q[We])}var We=arguments.length-2;if(We===1)Ae.children=fe;else if(1<We){Fe=Array(We);for(var Et=0;Et<We;Et++)Fe[Et]=arguments[Et+2];Ae.children=Fe}return{$$typeof:r,type:L.type,key:Re,ref:De,props:Ae,_owner:je}},Pe.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Pe.createElement=C,Pe.createFactory=function(L){var Q=C.bind(null,L);return Q.type=L,Q},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(L){return{$$typeof:f,render:L}},Pe.isValidElement=N,Pe.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:Lt}},Pe.memo=function(L,Q){return{$$typeof:y,type:L,compare:Q===void 0?null:Q}},Pe.startTransition=function(L){var Q=te.transition;te.transition={};try{L()}finally{te.transition=Q}},Pe.unstable_act=le,Pe.useCallback=function(L,Q){return Be.current.useCallback(L,Q)},Pe.useContext=function(L){return Be.current.useContext(L)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(L){return Be.current.useDeferredValue(L)},Pe.useEffect=function(L,Q){return Be.current.useEffect(L,Q)},Pe.useId=function(){return Be.current.useId()},Pe.useImperativeHandle=function(L,Q,fe){return Be.current.useImperativeHandle(L,Q,fe)},Pe.useInsertionEffect=function(L,Q){return Be.current.useInsertionEffect(L,Q)},Pe.useLayoutEffect=function(L,Q){return Be.current.useLayoutEffect(L,Q)},Pe.useMemo=function(L,Q){return Be.current.useMemo(L,Q)},Pe.useReducer=function(L,Q,fe){return Be.current.useReducer(L,Q,fe)},Pe.useRef=function(L){return Be.current.useRef(L)},Pe.useState=function(L){return Be.current.useState(L)},Pe.useSyncExternalStore=function(L,Q,fe){return Be.current.useSyncExternalStore(L,Q,fe)},Pe.useTransition=function(){return Be.current.useTransition()},Pe.version="18.3.1",Pe}var Lg;function Sf(){return Lg||(Lg=1,Dd.exports=C0()),Dd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function R0(){if(bg)return $a;bg=1;var r=Sf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var _,T={},S=null,O=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(O=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(T[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)T[_]===void 0&&(T[_]=p[_]);return{$$typeof:e,type:f,key:S,ref:O,props:T,_owner:o.current}}return $a.Fragment=t,$a.jsx=h,$a.jsxs=h,$a}var Mg;function P0(){return Mg||(Mg=1,Nd.exports=R0()),Nd.exports}var w=P0(),K=Sf();const k0=A0(K),x0=S0({__proto__:null,default:k0},[K]);var Wu={},Vd={exports:{}},rn={},Od={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function N0(){return jg||(jg=1,(function(r){function e(te,me){var le=te.length;te.push(me);e:for(;0<le;){var L=le-1>>>1,Q=te[L];if(0<o(Q,me))te[L]=me,te[le]=Q,le=L;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var me=te[0],le=te.pop();if(le!==me){te[0]=le;e:for(var L=0,Q=te.length,fe=Q>>>1;L<fe;){var Ae=2*(L+1)-1,Re=te[Ae],De=Ae+1,je=te[De];if(0>o(Re,le))De<Q&&0>o(je,Re)?(te[L]=je,te[De]=le,L=De):(te[L]=Re,te[Ae]=le,L=Ae);else if(De<Q&&0>o(je,le))te[L]=je,te[De]=le,L=De;else break e}}return me}function o(te,me){var le=te.sortIndex-me.sortIndex;return le!==0?le:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var p=[],y=[],_=1,T=null,S=3,O=!1,$=!1,W=!1,F=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(te){for(var me=t(y);me!==null;){if(me.callback===null)i(y);else if(me.startTime<=te)i(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(y)}}function oe(te){if(W=!1,q(te),!$)if(t(p)!==null)$=!0,Lt(Se);else{var me=t(y);me!==null&&Be(oe,me.startTime-te)}}function Se(te,me){$=!1,W&&(W=!1,re(C),C=-1),O=!0;var le=S;try{for(q(me),T=t(p);T!==null&&(!(T.expirationTime>me)||te&&!x());){var L=T.callback;if(typeof L=="function"){T.callback=null,S=T.priorityLevel;var Q=L(T.expirationTime<=me);me=r.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(p)&&i(p),q(me)}else i(p);T=t(p)}if(T!==null)var fe=!0;else{var Ae=t(y);Ae!==null&&Be(oe,Ae.startTime-me),fe=!1}return fe}finally{T=null,S=le,O=!1}}var Te=!1,D=null,C=-1,P=5,N=-1;function x(){return!(r.unstable_now()-N<P)}function b(){if(D!==null){var te=r.unstable_now();N=te;var me=!0;try{me=D(!0,te)}finally{me?R():(Te=!1,D=null)}}else Te=!1}var R;if(typeof ie=="function")R=function(){ie(b)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,Ot=rt.port2;rt.port1.onmessage=b,R=function(){Ot.postMessage(null)}}else R=function(){F(b,0)};function Lt(te){D=te,Te||(Te=!0,R())}function Be(te,me){C=F(function(){te(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){$||O||($=!0,Lt(Se))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(te){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var le=S;S=me;try{return te()}finally{S=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var le=S;S=te;try{return me()}finally{S=le}},r.unstable_scheduleCallback=function(te,me,le){var L=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?L+le:L):le=L,te){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=le+Q,te={id:_++,callback:me,priorityLevel:te,startTime:le,expirationTime:Q,sortIndex:-1},le>L?(te.sortIndex=le,e(y,te),t(p)===null&&te===t(y)&&(W?(re(C),C=-1):W=!0,Be(oe,le-L))):(te.sortIndex=Q,e(p,te),$||O||($=!0,Lt(Se))),te},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(te){var me=S;return function(){var le=S;S=me;try{return te.apply(this,arguments)}finally{S=le}}}})(Ld)),Ld}var Fg;function D0(){return Fg||(Fg=1,Od.exports=N0()),Od.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function V0(){if(Ug)return rn;Ug=1;var r=Sf(),e=D0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},T={};function S(n){return p.call(T,n)?!0:p.call(_,n)?!1:y.test(n)?T[n]=!0:(_[n]=!0,!1)}function O(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,s,a,c){if(s===null||typeof s>"u"||O(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(n,s,a,c,d,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];F[s]=new W(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function ie(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(re,ie);F[s]=new W(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(re,ie);F[s]=new W(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(re,ie);F[s]=new W(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function q(n,s,a,c){var d=F.hasOwnProperty(s)?F[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Te=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),te=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,L;function Q(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var fe=!1;function Ae(n,s){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var c=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){c=z}n.call(s.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),g=c.stack.split(`
`),E=d.length-1,A=g.length-1;1<=E&&0<=A&&d[E]!==g[A];)A--;for(;1<=E&&0<=A;E--,A--)if(d[E]!==g[A]){if(E!==1||A!==1)do if(E--,A--,0>A||d[E]!==g[A]){var k=`
`+d[E].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=E&&0<=A);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Re(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case Te:return"Portal";case P:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case rt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case b:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ot:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case Lt:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}function je(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Et(n){var s=We(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function dr(n){n._valueTracker||(n._valueTracker=Et(n))}function Cs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=We(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bi(n,s){var a=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Rs(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Qo(n,s){s=s.checked,s!=null&&q(n,"checked",s,!1)}function Jo(n,s){Qo(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ps(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ps(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function xl(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ps(n,s,a){(s!=="number"||Fr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var fr=Array.isArray;function pr(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Yo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ks(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(fr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function xs(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Xo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mr,Zo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Ur(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ji=["Webkit","ms","Moz","O"];Object.keys(Mi).forEach(function(n){ji.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Mi[s]=Mi[n]})});function ea(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Mi.hasOwnProperty(n)&&Mi[n]?(""+s).trim():s+"px"}function ta(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=ea(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var na=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ra(n,s){if(s){if(na[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ia(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=null;function Ns(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ds=null,yn=null,Gn=null;function Vs(n){if(n=Pa(n)){if(typeof Ds!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ou(s),Ds(n.stateNode,n.type,s))}}function Kn(n){yn?Gn?Gn.push(n):Gn=[n]:yn=n}function sa(){if(yn){var n=yn,s=Gn;if(Gn=yn=null,Vs(n),s)for(n=0;n<s.length;n++)Vs(s[n])}}function Ui(n,s){return n(s)}function oa(){}var gr=!1;function aa(n,s,a){if(gr)return n(s,a);gr=!0;try{return Ui(n,s,a)}finally{gr=!1,(yn!==null||Gn!==null)&&(oa(),sa())}}function it(n,s){var a=n.stateNode;if(a===null)return null;var c=ou(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Os=!1;if(f)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){Os=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{Os=!1}function zi(n,s,a,c,d,g,E,A,k){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(Y){this.onError(Y)}}var Bi=!1,Ls=null,kn=!1,la=null,sh={onError:function(n){Bi=!0,Ls=n}};function bs(n,s,a,c,d,g,E,A,k){Bi=!1,Ls=null,zi.apply(sh,arguments)}function Nl(n,s,a,c,d,g,E,A,k){if(bs.apply(this,arguments),Bi){if(Bi){var z=Ls;Bi=!1,Ls=null}else throw Error(t(198));kn||(kn=!0,la=z)}}function xn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function $i(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Nn(n){if(xn(n)!==n)throw Error(t(188))}function Dl(n){var s=n.alternate;if(!s){if(s=xn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Nn(d),n;if(g===c)return Nn(d),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var E=!1,A=d.child;A;){if(A===a){E=!0,a=d,c=g;break}if(A===c){E=!0,c=d,a=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===a){E=!0,a=g,c=d;break}if(A===c){E=!0,c=g,a=d;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ua(n){return n=Dl(n),n!==null?Ms(n):null}function Ms(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ms(n);if(s!==null)return s;n=n.sibling}return null}var js=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,Vl=e.unstable_shouldYield,oh=e.unstable_requestPaint,He=e.unstable_now,Ol=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,zr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,ha=e.unstable_LowPriority,Ll=e.unstable_IdlePriority,Wi=null,on=null;function bl(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Wi,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:jl,da=Math.log,Ml=Math.LN2;function jl(n){return n>>>=0,n===0?32:31-(da(n)/Ml|0)|0}var Fs=64,Us=4194304;function Br(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hi(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,E=a&268435455;if(E!==0){var A=E&~d;A!==0?c=Br(A):(g&=E,g!==0&&(c=Br(g)))}else E=a&~d,E!==0?c=Br(E):g!==0&&(c=Br(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-qt(s),d=1<<a,c|=n[a],s&=~d;return c}function ah(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var E=31-qt(g),A=1<<E,k=d[E];k===-1?((A&a)===0||(A&c)!==0)&&(d[E]=ah(A,s)):k<=s&&(n.expiredLanes|=A),g&=~A}}function an(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gi(){var n=Fs;return Fs<<=1,(Fs&4194240)===0&&(Fs=64),n}function $r(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function qr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-qt(s),n[s]=a}function qe(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-qt(a),g=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function Wr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-qt(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Ne=0;function Hr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Fl,zs,Ul,zl,Bl,fa=!1,Qn=[],Rt=null,Dn=null,Vn=null,Gr=new Map,_n=new Map,Jn=[],lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $l(n,s){switch(n){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Gr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Jt(n,s,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Pa(s),s!==null&&zs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function uh(n,s,a,c,d){switch(s){case"focusin":return Rt=Jt(Rt,n,s,a,c,d),!0;case"dragenter":return Dn=Jt(Dn,n,s,a,c,d),!0;case"mouseover":return Vn=Jt(Vn,n,s,a,c,d),!0;case"pointerover":var g=d.pointerId;return Gr.set(g,Jt(Gr.get(g)||null,n,s,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,_n.set(g,Jt(_n.get(g)||null,n,s,a,c,d)),!0}return!1}function ql(n){var s=Xi(n.target);if(s!==null){var a=xn(s);if(a!==null){if(s=a.tag,s===13){if(s=$i(a),s!==null){n.blockedOn=s,Bl(n.priority,function(){Ul(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Bs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Fi=c,a.target.dispatchEvent(c),Fi=null}else return s=Pa(a),s!==null&&zs(s),n.blockedOn=a,!1;s.shift()}return!0}function Ki(n,s,a){vr(n)&&a.delete(s)}function Wl(){fa=!1,Rt!==null&&vr(Rt)&&(Rt=null),Dn!==null&&vr(Dn)&&(Dn=null),Vn!==null&&vr(Vn)&&(Vn=null),Gr.forEach(Ki),_n.forEach(Ki)}function On(n,s){n.blockedOn===s&&(n.blockedOn=null,fa||(fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wl)))}function Ln(n){function s(d){return On(d,n)}if(0<Qn.length){On(Qn[0],n);for(var a=1;a<Qn.length;a++){var c=Qn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Rt!==null&&On(Rt,n),Dn!==null&&On(Dn,n),Vn!==null&&On(Vn,n),Gr.forEach(s),_n.forEach(s),a=0;a<Jn.length;a++)c=Jn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Jn.length&&(a=Jn[0],a.blockedOn===null);)ql(a),a.blockedOn===null&&Jn.shift()}var _r=oe.ReactCurrentBatchConfig,Kr=!0;function Je(n,s,a,c){var d=Ne,g=_r.transition;_r.transition=null;try{Ne=1,pa(n,s,a,c)}finally{Ne=d,_r.transition=g}}function ch(n,s,a,c){var d=Ne,g=_r.transition;_r.transition=null;try{Ne=4,pa(n,s,a,c)}finally{Ne=d,_r.transition=g}}function pa(n,s,a,c){if(Kr){var d=Bs(n,s,a,c);if(d===null)wh(n,s,c,Qi,a),$l(n,c);else if(uh(d,n,s,a,c))c.stopPropagation();else if($l(n,c),s&4&&-1<lh.indexOf(n)){for(;d!==null;){var g=Pa(d);if(g!==null&&Fl(g),g=Bs(n,s,a,c),g===null&&wh(n,s,c,Qi,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else wh(n,s,c,null,a)}}var Qi=null;function Bs(n,s,a,c){if(Qi=null,n=Ns(c),n=Xi(n),n!==null)if(s=xn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=$i(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Qi=n,null}function ma(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ol()){case qi:return 1;case zr:return 4;case vn:case ha:return 16;case Ll:return 536870912;default:return 16}default:return 16}}var ln=null,$s=null,Yt=null;function ga(){if(Yt)return Yt;var n,s=$s,a=s.length,c,d="value"in ln?ln.value:ln.textContent,g=d.length;for(n=0;n<a&&s[n]===d[n];n++);var E=a-n;for(c=1;c<=E&&s[a-c]===d[g-c];c++);return Yt=d.slice(n,1<c?1-c:void 0)}function qs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function ya(){return!1}function Pt(n){function s(a,c,d,g,E){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Yn:ya,this.isPropagationStopped=ya,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),s}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Pt(bn),Xn=le({},bn,{view:0,detail:0}),hh=Pt(Xn),Hs,Er,Qr,Ji=le({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qr&&(Qr&&n.type==="mousemove"?(Hs=n.screenX-Qr.screenX,Er=n.screenY-Qr.screenY):Er=Hs=0,Qr=n),Hs)},movementY:function(n){return"movementY"in n?n.movementY:Er}}),Gs=Pt(Ji),va=le({},Ji,{dataTransfer:0}),Hl=Pt(va),Ks=le({},Xn,{relatedTarget:0}),Qs=Pt(Ks),Gl=le({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),wr=Pt(Gl),Kl=le({},bn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ql=Pt(Kl),Jl=le({},bn,{data:0}),_a=Pt(Jl),Js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Yl[n])?!!s[n]:!1}function Zn(){return Xl}var u=le({},Xn,{key:function(n){if(n.key){var s=Js[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(n){return n.type==="keypress"?qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Pt(u),v=le({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Pt(v),M=le({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),B=Pt(M),ee=le({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Pt(ee),gt=le({},Ji,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Pt(gt),wt=[9,13,27,32],ut=f&&"CompositionEvent"in window,En=null;f&&"documentMode"in document&&(En=document.documentMode);var un=f&&"TextEvent"in window&&!En,Yi=f&&(!ut||En&&8<En&&11>=En),Ys=" ",Pp=!1;function kp(n,s){switch(n){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xs=!1;function ww(n,s){switch(n){case"compositionend":return xp(s);case"keypress":return s.which!==32?null:(Pp=!0,Ys);case"textInput":return n=s.data,n===Ys&&Pp?null:n;default:return null}}function Tw(n,s){if(Xs)return n==="compositionend"||!ut&&kp(n,s)?(n=ga(),Yt=$s=ln=null,Xs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yi&&s.locale!=="ko"?null:s.data;default:return null}}var Iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Iw[n.type]:s==="textarea"}function Dp(n,s,a,c){Kn(c),s=ru(s,"onChange"),0<s.length&&(a=new Ws("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var Ea=null,wa=null;function Sw(n){Jp(n,0)}function Zl(n){var s=ro(n);if(Cs(s))return n}function Aw(n,s){if(n==="change")return s}var Vp=!1;if(f){var dh;if(f){var fh="oninput"in document;if(!fh){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),fh=typeof Op.oninput=="function"}dh=fh}else dh=!1;Vp=dh&&(!document.documentMode||9<document.documentMode)}function Lp(){Ea&&(Ea.detachEvent("onpropertychange",bp),wa=Ea=null)}function bp(n){if(n.propertyName==="value"&&Zl(wa)){var s=[];Dp(s,wa,n,Ns(n)),aa(Sw,s)}}function Cw(n,s,a){n==="focusin"?(Lp(),Ea=s,wa=a,Ea.attachEvent("onpropertychange",bp)):n==="focusout"&&Lp()}function Rw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zl(wa)}function Pw(n,s){if(n==="click")return Zl(s)}function kw(n,s){if(n==="input"||n==="change")return Zl(s)}function xw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:xw;function Ta(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(s,d)||!Mn(n[d],s[d]))return!1}return!0}function Mp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var a=Mp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mp(a)}}function Fp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Fp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Up(){for(var n=window,s=Fr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Fr(n.document)}return s}function ph(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Nw(n){var s=Up(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(c!==null&&ph(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=jp(a,g);var E=jp(a,c);d&&E&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Dw=f&&"documentMode"in document&&11>=document.documentMode,Zs=null,mh=null,Ia=null,gh=!1;function zp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gh||Zs==null||Zs!==Fr(c)||(c=Zs,"selectionStart"in c&&ph(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ia&&Ta(Ia,c)||(Ia=c,c=ru(mh,"onSelect"),0<c.length&&(s=new Ws("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Zs)))}function eu(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var eo={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},yh={},Bp={};f&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function tu(n){if(yh[n])return yh[n];if(!eo[n])return n;var s=eo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Bp)return yh[n]=s[a];return n}var $p=tu("animationend"),qp=tu("animationiteration"),Wp=tu("animationstart"),Hp=tu("transitionend"),Gp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(n,s){Gp.set(n,s),l(s,[n])}for(var vh=0;vh<Kp.length;vh++){var _h=Kp[vh],Vw=_h.toLowerCase(),Ow=_h[0].toUpperCase()+_h.slice(1);Jr(Vw,"on"+Ow)}Jr($p,"onAnimationEnd"),Jr(qp,"onAnimationIteration"),Jr(Wp,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(Hp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Qp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Nl(c,s,void 0,n),n.currentTarget=null}function Jp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var E=c.length-1;0<=E;E--){var A=c[E],k=A.instance,z=A.currentTarget;if(A=A.listener,k!==g&&d.isPropagationStopped())break e;Qp(d,A,z),g=k}else for(E=0;E<c.length;E++){if(A=c[E],k=A.instance,z=A.currentTarget,A=A.listener,k!==g&&d.isPropagationStopped())break e;Qp(d,A,z),g=k}}}if(kn)throw n=la,kn=!1,la=null,n}function Ke(n,s){var a=s[Rh];a===void 0&&(a=s[Rh]=new Set);var c=n+"__bubble";a.has(c)||(Yp(s,n,2,!1),a.add(c))}function Eh(n,s,a){var c=0;s&&(c|=4),Yp(a,n,c,s)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Aa(n){if(!n[nu]){n[nu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Lw.has(a)||Eh(a,!1,n),Eh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[nu]||(s[nu]=!0,Eh("selectionchange",!1,s))}}function Yp(n,s,a,c){switch(ma(s)){case 1:var d=Je;break;case 4:d=ch;break;default:d=pa}a=d.bind(null,s,a,n),d=void 0,!Os||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function wh(n,s,a,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(E===4)for(E=c.return;E!==null;){var k=E.tag;if((k===3||k===4)&&(k=E.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;E=E.return}for(;A!==null;){if(E=Xi(A),E===null)return;if(k=E.tag,k===5||k===6){c=g=E;continue e}A=A.parentNode}}c=c.return}aa(function(){var z=g,Y=Ns(a),X=[];e:{var J=Gp.get(n);if(J!==void 0){var se=Ws,ce=n;switch(n){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":se=m;break;case"focusin":ce="focus",se=Qs;break;case"focusout":ce="blur",se=Qs;break;case"beforeblur":case"afterblur":se=Qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=B;break;case $p:case qp:case Wp:se=wr;break;case Hp:se=ze;break;case"scroll":se=hh;break;case"wheel":se=Ve;break;case"copy":case"cut":case"paste":se=Ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=I}var he=(s&4)!==0,st=!he&&n==="scroll",j=he?J!==null?J+"Capture":null:J;he=[];for(var V=z,U;V!==null;){U=V;var Z=U.stateNode;if(U.tag===5&&Z!==null&&(U=Z,j!==null&&(Z=it(V,j),Z!=null&&he.push(Ca(V,Z,U)))),st)break;V=V.return}0<he.length&&(J=new se(J,ce,null,a,Y),X.push({event:J,listeners:he}))}}if((s&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",J&&a!==Fi&&(ce=a.relatedTarget||a.fromElement)&&(Xi(ce)||ce[Tr]))break e;if((se||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=z,ce=ce?Xi(ce):null,ce!==null&&(st=xn(ce),ce!==st||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=z),se!==ce)){if(he=Gs,Z="onMouseLeave",j="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(he=I,Z="onPointerLeave",j="onPointerEnter",V="pointer"),st=se==null?J:ro(se),U=ce==null?J:ro(ce),J=new he(Z,V+"leave",se,a,Y),J.target=st,J.relatedTarget=U,Z=null,Xi(Y)===z&&(he=new he(j,V+"enter",ce,a,Y),he.target=U,he.relatedTarget=st,Z=he),st=Z,se&&ce)t:{for(he=se,j=ce,V=0,U=he;U;U=to(U))V++;for(U=0,Z=j;Z;Z=to(Z))U++;for(;0<V-U;)he=to(he),V--;for(;0<U-V;)j=to(j),U--;for(;V--;){if(he===j||j!==null&&he===j.alternate)break t;he=to(he),j=to(j)}he=null}else he=null;se!==null&&Xp(X,J,se,he,!1),ce!==null&&st!==null&&Xp(X,st,ce,he,!0)}}e:{if(J=z?ro(z):window,se=J.nodeName&&J.nodeName.toLowerCase(),se==="select"||se==="input"&&J.type==="file")var de=Aw;else if(Np(J))if(Vp)de=kw;else{de=Rw;var ye=Cw}else(se=J.nodeName)&&se.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(de=Pw);if(de&&(de=de(n,z))){Dp(X,de,a,Y);break e}ye&&ye(n,J,z),n==="focusout"&&(ye=J._wrapperState)&&ye.controlled&&J.type==="number"&&Ps(J,"number",J.value)}switch(ye=z?ro(z):window,n){case"focusin":(Np(ye)||ye.contentEditable==="true")&&(Zs=ye,mh=z,Ia=null);break;case"focusout":Ia=mh=Zs=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,zp(X,a,Y);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":zp(X,a,Y)}var ve;if(ut)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Xs?kp(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Yi&&a.locale!=="ko"&&(Xs||we!=="onCompositionStart"?we==="onCompositionEnd"&&Xs&&(ve=ga()):(ln=Y,$s="value"in ln?ln.value:ln.textContent,Xs=!0)),ye=ru(z,we),0<ye.length&&(we=new _a(we,n,null,a,Y),X.push({event:we,listeners:ye}),ve?we.data=ve:(ve=xp(a),ve!==null&&(we.data=ve)))),(ve=un?ww(n,a):Tw(n,a))&&(z=ru(z,"onBeforeInput"),0<z.length&&(Y=new _a("onBeforeInput","beforeinput",null,a,Y),X.push({event:Y,listeners:z}),Y.data=ve))}Jp(X,s)})}function Ca(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ru(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=it(n,a),g!=null&&c.unshift(Ca(n,g,d)),g=it(n,s),g!=null&&c.push(Ca(n,g,d))),n=n.return}return c}function to(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Xp(n,s,a,c,d){for(var g=s._reactName,E=[];a!==null&&a!==c;){var A=a,k=A.alternate,z=A.stateNode;if(k!==null&&k===c)break;A.tag===5&&z!==null&&(A=z,d?(k=it(a,g),k!=null&&E.unshift(Ca(a,k,A))):d||(k=it(a,g),k!=null&&E.push(Ca(a,k,A)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var bw=/\r\n?/g,Mw=/\u0000|\uFFFD/g;function Zp(n){return(typeof n=="string"?n:""+n).replace(bw,`
`).replace(Mw,"")}function iu(n,s,a){if(s=Zp(s),Zp(n)!==s&&a)throw Error(t(425))}function su(){}var Th=null,Ih=null;function Sh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ah=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,em=typeof Promise=="function"?Promise:void 0,Fw=typeof queueMicrotask=="function"?queueMicrotask:typeof em<"u"?function(n){return em.resolve(null).then(n).catch(Uw)}:Ah;function Uw(n){setTimeout(function(){throw n})}function Ch(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Ln(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Ln(s)}function Yr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function tm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var no=Math.random().toString(36).slice(2),er="__reactFiber$"+no,Ra="__reactProps$"+no,Tr="__reactContainer$"+no,Rh="__reactEvents$"+no,zw="__reactListeners$"+no,Bw="__reactHandles$"+no;function Xi(n){var s=n[er];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Tr]||a[er]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=tm(n);n!==null;){if(a=n[er])return a;n=tm(n)}return s}n=a,a=n.parentNode}return null}function Pa(n){return n=n[er]||n[Tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ou(n){return n[Ra]||null}var Ph=[],io=-1;function Xr(n){return{current:n}}function Qe(n){0>io||(n.current=Ph[io],Ph[io]=null,io--)}function Ge(n,s){io++,Ph[io]=n.current,n.current=s}var Zr={},bt=Xr(Zr),Xt=Xr(!1),Zi=Zr;function so(n,s){var a=n.type.contextTypes;if(!a)return Zr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(n){return n=n.childContextTypes,n!=null}function au(){Qe(Xt),Qe(bt)}function nm(n,s,a){if(bt.current!==Zr)throw Error(t(168));Ge(bt,s),Ge(Xt,a)}function rm(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,je(n)||"Unknown",d));return le({},a,c)}function lu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zr,Zi=bt.current,Ge(bt,n),Ge(Xt,Xt.current),!0}function im(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=rm(n,s,Zi),c.__reactInternalMemoizedMergedChildContext=n,Qe(Xt),Qe(bt),Ge(bt,n)):Qe(Xt),Ge(Xt,a)}var Ir=null,uu=!1,kh=!1;function sm(n){Ir===null?Ir=[n]:Ir.push(n)}function $w(n){uu=!0,sm(n)}function ei(){if(!kh&&Ir!==null){kh=!0;var n=0,s=Ne;try{var a=Ir;for(Ne=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ir=null,uu=!1}catch(d){throw Ir!==null&&(Ir=Ir.slice(n+1)),js(qi,ei),d}finally{Ne=s,kh=!1}}return null}var oo=[],ao=0,cu=null,hu=0,wn=[],Tn=0,es=null,Sr=1,Ar="";function ts(n,s){oo[ao++]=hu,oo[ao++]=cu,cu=n,hu=s}function om(n,s,a){wn[Tn++]=Sr,wn[Tn++]=Ar,wn[Tn++]=es,es=n;var c=Sr;n=Ar;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var g=32-qt(s)+d;if(30<g){var E=d-d%5;g=(c&(1<<E)-1).toString(32),c>>=E,d-=E,Sr=1<<32-qt(s)+d|a<<d|c,Ar=g+n}else Sr=1<<g|a<<d|c,Ar=n}function xh(n){n.return!==null&&(ts(n,1),om(n,1,0))}function Nh(n){for(;n===cu;)cu=oo[--ao],oo[ao]=null,hu=oo[--ao],oo[ao]=null;for(;n===es;)es=wn[--Tn],wn[Tn]=null,Ar=wn[--Tn],wn[Tn]=null,Sr=wn[--Tn],wn[Tn]=null}var cn=null,hn=null,Ye=!1,jn=null;function am(n,s){var a=Cn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function lm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,cn=n,hn=Yr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,cn=n,hn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=es!==null?{id:Sr,overflow:Ar}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Cn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,cn=n,hn=null,!0):!1;default:return!1}}function Dh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vh(n){if(Ye){var s=hn;if(s){var a=s;if(!lm(n,s)){if(Dh(n))throw Error(t(418));s=Yr(a.nextSibling);var c=cn;s&&lm(n,s)?am(c,a):(n.flags=n.flags&-4097|2,Ye=!1,cn=n)}}else{if(Dh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ye=!1,cn=n}}}function um(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cn=n}function du(n){if(n!==cn)return!1;if(!Ye)return um(n),Ye=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Sh(n.type,n.memoizedProps)),s&&(s=hn)){if(Dh(n))throw cm(),Error(t(418));for(;s;)am(n,s),s=Yr(s.nextSibling)}if(um(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){hn=Yr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}hn=null}}else hn=cn?Yr(n.stateNode.nextSibling):null;return!0}function cm(){for(var n=hn;n;)n=Yr(n.nextSibling)}function lo(){hn=cn=null,Ye=!1}function Oh(n){jn===null?jn=[n]:jn.push(n)}var qw=oe.ReactCurrentBatchConfig;function ka(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var A=d.refs;E===null?delete A[g]:A[g]=E},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function fu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function hm(n){var s=n._init;return s(n._payload)}function dm(n){function s(j,V){if(n){var U=j.deletions;U===null?(j.deletions=[V],j.flags|=16):U.push(V)}}function a(j,V){if(!n)return null;for(;V!==null;)s(j,V),V=V.sibling;return null}function c(j,V){for(j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function d(j,V){return j=li(j,V),j.index=0,j.sibling=null,j}function g(j,V,U){return j.index=U,n?(U=j.alternate,U!==null?(U=U.index,U<V?(j.flags|=2,V):U):(j.flags|=2,V)):(j.flags|=1048576,V)}function E(j){return n&&j.alternate===null&&(j.flags|=2),j}function A(j,V,U,Z){return V===null||V.tag!==6?(V=Ad(U,j.mode,Z),V.return=j,V):(V=d(V,U),V.return=j,V)}function k(j,V,U,Z){var de=U.type;return de===D?Y(j,V,U.props.children,Z,U.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Lt&&hm(de)===V.type)?(Z=d(V,U.props),Z.ref=ka(j,V,U),Z.return=j,Z):(Z=Mu(U.type,U.key,U.props,null,j.mode,Z),Z.ref=ka(j,V,U),Z.return=j,Z)}function z(j,V,U,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=Cd(U,j.mode,Z),V.return=j,V):(V=d(V,U.children||[]),V.return=j,V)}function Y(j,V,U,Z,de){return V===null||V.tag!==7?(V=us(U,j.mode,Z,de),V.return=j,V):(V=d(V,U),V.return=j,V)}function X(j,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Ad(""+V,j.mode,U),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Se:return U=Mu(V.type,V.key,V.props,null,j.mode,U),U.ref=ka(j,null,V),U.return=j,U;case Te:return V=Cd(V,j.mode,U),V.return=j,V;case Lt:var Z=V._init;return X(j,Z(V._payload),U)}if(fr(V)||me(V))return V=us(V,j.mode,U,null),V.return=j,V;fu(j,V)}return null}function J(j,V,U,Z){var de=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return de!==null?null:A(j,V,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Se:return U.key===de?k(j,V,U,Z):null;case Te:return U.key===de?z(j,V,U,Z):null;case Lt:return de=U._init,J(j,V,de(U._payload),Z)}if(fr(U)||me(U))return de!==null?null:Y(j,V,U,Z,null);fu(j,U)}return null}function se(j,V,U,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return j=j.get(U)||null,A(V,j,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Se:return j=j.get(Z.key===null?U:Z.key)||null,k(V,j,Z,de);case Te:return j=j.get(Z.key===null?U:Z.key)||null,z(V,j,Z,de);case Lt:var ye=Z._init;return se(j,V,U,ye(Z._payload),de)}if(fr(Z)||me(Z))return j=j.get(U)||null,Y(V,j,Z,de,null);fu(V,Z)}return null}function ce(j,V,U,Z){for(var de=null,ye=null,ve=V,we=V=0,St=null;ve!==null&&we<U.length;we++){ve.index>we?(St=ve,ve=null):St=ve.sibling;var Me=J(j,ve,U[we],Z);if(Me===null){ve===null&&(ve=St);break}n&&ve&&Me.alternate===null&&s(j,ve),V=g(Me,V,we),ye===null?de=Me:ye.sibling=Me,ye=Me,ve=St}if(we===U.length)return a(j,ve),Ye&&ts(j,we),de;if(ve===null){for(;we<U.length;we++)ve=X(j,U[we],Z),ve!==null&&(V=g(ve,V,we),ye===null?de=ve:ye.sibling=ve,ye=ve);return Ye&&ts(j,we),de}for(ve=c(j,ve);we<U.length;we++)St=se(ve,j,we,U[we],Z),St!==null&&(n&&St.alternate!==null&&ve.delete(St.key===null?we:St.key),V=g(St,V,we),ye===null?de=St:ye.sibling=St,ye=St);return n&&ve.forEach(function(ui){return s(j,ui)}),Ye&&ts(j,we),de}function he(j,V,U,Z){var de=me(U);if(typeof de!="function")throw Error(t(150));if(U=de.call(U),U==null)throw Error(t(151));for(var ye=de=null,ve=V,we=V=0,St=null,Me=U.next();ve!==null&&!Me.done;we++,Me=U.next()){ve.index>we?(St=ve,ve=null):St=ve.sibling;var ui=J(j,ve,Me.value,Z);if(ui===null){ve===null&&(ve=St);break}n&&ve&&ui.alternate===null&&s(j,ve),V=g(ui,V,we),ye===null?de=ui:ye.sibling=ui,ye=ui,ve=St}if(Me.done)return a(j,ve),Ye&&ts(j,we),de;if(ve===null){for(;!Me.done;we++,Me=U.next())Me=X(j,Me.value,Z),Me!==null&&(V=g(Me,V,we),ye===null?de=Me:ye.sibling=Me,ye=Me);return Ye&&ts(j,we),de}for(ve=c(j,ve);!Me.done;we++,Me=U.next())Me=se(ve,j,we,Me.value,Z),Me!==null&&(n&&Me.alternate!==null&&ve.delete(Me.key===null?we:Me.key),V=g(Me,V,we),ye===null?de=Me:ye.sibling=Me,ye=Me);return n&&ve.forEach(function(I0){return s(j,I0)}),Ye&&ts(j,we),de}function st(j,V,U,Z){if(typeof U=="object"&&U!==null&&U.type===D&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Se:e:{for(var de=U.key,ye=V;ye!==null;){if(ye.key===de){if(de=U.type,de===D){if(ye.tag===7){a(j,ye.sibling),V=d(ye,U.props.children),V.return=j,j=V;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Lt&&hm(de)===ye.type){a(j,ye.sibling),V=d(ye,U.props),V.ref=ka(j,ye,U),V.return=j,j=V;break e}a(j,ye);break}else s(j,ye);ye=ye.sibling}U.type===D?(V=us(U.props.children,j.mode,Z,U.key),V.return=j,j=V):(Z=Mu(U.type,U.key,U.props,null,j.mode,Z),Z.ref=ka(j,V,U),Z.return=j,j=Z)}return E(j);case Te:e:{for(ye=U.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(j,V.sibling),V=d(V,U.children||[]),V.return=j,j=V;break e}else{a(j,V);break}else s(j,V);V=V.sibling}V=Cd(U,j.mode,Z),V.return=j,j=V}return E(j);case Lt:return ye=U._init,st(j,V,ye(U._payload),Z)}if(fr(U))return ce(j,V,U,Z);if(me(U))return he(j,V,U,Z);fu(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,V!==null&&V.tag===6?(a(j,V.sibling),V=d(V,U),V.return=j,j=V):(a(j,V),V=Ad(U,j.mode,Z),V.return=j,j=V),E(j)):a(j,V)}return st}var uo=dm(!0),fm=dm(!1),pu=Xr(null),mu=null,co=null,Lh=null;function bh(){Lh=co=mu=null}function Mh(n){var s=pu.current;Qe(pu),n._currentValue=s}function jh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function ho(n,s){mu=n,Lh=co=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(en=!0),n.firstContext=null)}function In(n){var s=n._currentValue;if(Lh!==n)if(n={context:n,memoizedValue:s,next:null},co===null){if(mu===null)throw Error(t(308));co=n,mu.dependencies={lanes:0,firstContext:n}}else co=co.next=n;return s}var ns=null;function Fh(n){ns===null?ns=[n]:ns.push(n)}function pm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Fh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Cr(n,c)}function Cr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ti=!1;function Uh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Rr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ni(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(be&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Cr(n,a)}return d=c.interleaved,d===null?(s.next=s,Fh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Cr(n,a)}function gu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Wr(n,a)}}function gm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function yu(n,s,a,c){var d=n.updateQueue;ti=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var k=A,z=k.next;k.next=null,E===null?g=z:E.next=z,E=k;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==E&&(A===null?Y.firstBaseUpdate=z:A.next=z,Y.lastBaseUpdate=k))}if(g!==null){var X=d.baseState;E=0,Y=z=k=null,A=g;do{var J=A.lane,se=A.eventTime;if((c&J)===J){Y!==null&&(Y=Y.next={eventTime:se,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ce=n,he=A;switch(J=s,se=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){X=ce.call(se,X,J);break e}X=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,J=typeof ce=="function"?ce.call(se,X,J):ce,J==null)break e;X=le({},X,J);break e;case 2:ti=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,J=d.effects,J===null?d.effects=[A]:J.push(A))}else se={eventTime:se,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(z=Y=se,k=X):Y=Y.next=se,E|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;J=A,A=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(Y===null&&(k=X),d.baseState=k,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);ss|=E,n.lanes=E,n.memoizedState=X}}function ym(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var xa={},tr=Xr(xa),Na=Xr(xa),Da=Xr(xa);function rs(n){if(n===xa)throw Error(t(174));return n}function zh(n,s){switch(Ge(Da,s),Ge(Na,n),Ge(tr,xa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=mt(s,n)}Qe(tr),Ge(tr,s)}function fo(){Qe(tr),Qe(Na),Qe(Da)}function vm(n){rs(Da.current);var s=rs(tr.current),a=mt(s,n.type);s!==a&&(Ge(Na,n),Ge(tr,a))}function Bh(n){Na.current===n&&(Qe(tr),Qe(Na))}var Xe=Xr(0);function vu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $h=[];function qh(){for(var n=0;n<$h.length;n++)$h[n]._workInProgressVersionPrimary=null;$h.length=0}var _u=oe.ReactCurrentDispatcher,Wh=oe.ReactCurrentBatchConfig,is=0,Ze=null,yt=null,Tt=null,Eu=!1,Va=!1,Oa=0,Ww=0;function Mt(){throw Error(t(321))}function Hh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Mn(n[a],s[a]))return!1;return!0}function Gh(n,s,a,c,d,g){if(is=g,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_u.current=n===null||n.memoizedState===null?Qw:Jw,n=a(c,d),Va){g=0;do{if(Va=!1,Oa=0,25<=g)throw Error(t(301));g+=1,Tt=yt=null,s.updateQueue=null,_u.current=Yw,n=a(c,d)}while(Va)}if(_u.current=Iu,s=yt!==null&&yt.next!==null,is=0,Tt=yt=Ze=null,Eu=!1,s)throw Error(t(300));return n}function Kh(){var n=Oa!==0;return Oa=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ze.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function Sn(){if(yt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var s=Tt===null?Ze.memoizedState:Tt.next;if(s!==null)Tt=s,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?Ze.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function La(n,s){return typeof s=="function"?s(n):s}function Qh(n){var s=Sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var A=E=null,k=null,z=g;do{var Y=z.lane;if((is&Y)===Y)k!==null&&(k=k.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var X={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};k===null?(A=k=X,E=c):k=k.next=X,Ze.lanes|=Y,ss|=Y}z=z.next}while(z!==null&&z!==g);k===null?E=c:k.next=A,Mn(c,s.memoizedState)||(en=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,Ze.lanes|=g,ss|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Jh(n){var s=Sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do g=n(g,E.action),E=E.next;while(E!==d);Mn(g,s.memoizedState)||(en=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function _m(){}function Em(n,s){var a=Ze,c=Sn(),d=s(),g=!Mn(c.memoizedState,d);if(g&&(c.memoizedState=d,en=!0),c=c.queue,Yh(Im.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,ba(9,Tm.bind(null,a,c,d,s),void 0,null),It===null)throw Error(t(349));(is&30)!==0||wm(a,s,d)}return d}function wm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Tm(n,s,a,c){s.value=a,s.getSnapshot=c,Sm(s)&&Am(n)}function Im(n,s,a){return a(function(){Sm(s)&&Am(n)})}function Sm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Mn(n,a)}catch{return!0}}function Am(n){var s=Cr(n,1);s!==null&&Bn(s,n,1,-1)}function Cm(n){var s=nr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},s.queue=n,n=n.dispatch=Kw.bind(null,Ze,n),[s.memoizedState,n]}function ba(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Rm(){return Sn().memoizedState}function wu(n,s,a,c){var d=nr();Ze.flags|=n,d.memoizedState=ba(1|s,a,void 0,c===void 0?null:c)}function Tu(n,s,a,c){var d=Sn();c=c===void 0?null:c;var g=void 0;if(yt!==null){var E=yt.memoizedState;if(g=E.destroy,c!==null&&Hh(c,E.deps)){d.memoizedState=ba(s,a,g,c);return}}Ze.flags|=n,d.memoizedState=ba(1|s,a,g,c)}function Pm(n,s){return wu(8390656,8,n,s)}function Yh(n,s){return Tu(2048,8,n,s)}function km(n,s){return Tu(4,2,n,s)}function xm(n,s){return Tu(4,4,n,s)}function Nm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Dm(n,s,a){return a=a!=null?a.concat([n]):null,Tu(4,4,Nm.bind(null,s,n),a)}function Xh(){}function Vm(n,s){var a=Sn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Hh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Om(n,s){var a=Sn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Hh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Lm(n,s,a){return(is&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Mn(a,s)||(a=Gi(),Ze.lanes|=a,ss|=a,n.baseState=!0),s)}function Hw(n,s){var a=Ne;Ne=a!==0&&4>a?a:4,n(!0);var c=Wh.transition;Wh.transition={};try{n(!1),s()}finally{Ne=a,Wh.transition=c}}function bm(){return Sn().memoizedState}function Gw(n,s,a){var c=oi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Mm(n))jm(s,a);else if(a=pm(n,s,a,c),a!==null){var d=Gt();Bn(a,n,c,d),Fm(a,s,c)}}function Kw(n,s,a){var c=oi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mm(n))jm(s,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,A=g(E,a);if(d.hasEagerState=!0,d.eagerState=A,Mn(A,E)){var k=s.interleaved;k===null?(d.next=d,Fh(s)):(d.next=k.next,k.next=d),s.interleaved=d;return}}catch{}finally{}a=pm(n,s,d,c),a!==null&&(d=Gt(),Bn(a,n,c,d),Fm(a,s,c))}}function Mm(n){var s=n.alternate;return n===Ze||s!==null&&s===Ze}function jm(n,s){Va=Eu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Fm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Wr(n,a)}}var Iu={readContext:In,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Qw={readContext:In,useCallback:function(n,s){return nr().memoizedState=[n,s===void 0?null:s],n},useContext:In,useEffect:Pm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,wu(4194308,4,Nm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return wu(4194308,4,n,s)},useInsertionEffect:function(n,s){return wu(4,2,n,s)},useMemo:function(n,s){var a=nr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=nr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Gw.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var s=nr();return n={current:n},s.memoizedState=n},useState:Cm,useDebugValue:Xh,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=Cm(!1),s=n[0];return n=Hw.bind(null,n[1]),nr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=Ze,d=nr();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),It===null)throw Error(t(349));(is&30)!==0||wm(c,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,Pm(Im.bind(null,c,g,n),[n]),c.flags|=2048,ba(9,Tm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=nr(),s=It.identifierPrefix;if(Ye){var a=Ar,c=Sr;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Oa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Ww++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Jw={readContext:In,useCallback:Vm,useContext:In,useEffect:Yh,useImperativeHandle:Dm,useInsertionEffect:km,useLayoutEffect:xm,useMemo:Om,useReducer:Qh,useRef:Rm,useState:function(){return Qh(La)},useDebugValue:Xh,useDeferredValue:function(n){var s=Sn();return Lm(s,yt.memoizedState,n)},useTransition:function(){var n=Qh(La)[0],s=Sn().memoizedState;return[n,s]},useMutableSource:_m,useSyncExternalStore:Em,useId:bm,unstable_isNewReconciler:!1},Yw={readContext:In,useCallback:Vm,useContext:In,useEffect:Yh,useImperativeHandle:Dm,useInsertionEffect:km,useLayoutEffect:xm,useMemo:Om,useReducer:Jh,useRef:Rm,useState:function(){return Jh(La)},useDebugValue:Xh,useDeferredValue:function(n){var s=Sn();return yt===null?s.memoizedState=n:Lm(s,yt.memoizedState,n)},useTransition:function(){var n=Jh(La)[0],s=Sn().memoizedState;return[n,s]},useMutableSource:_m,useSyncExternalStore:Em,useId:bm,unstable_isNewReconciler:!1};function Fn(n,s){if(n&&n.defaultProps){s=le({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Zh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:le({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Su={isMounted:function(n){return(n=n._reactInternals)?xn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Gt(),d=oi(n),g=Rr(c,d);g.payload=s,a!=null&&(g.callback=a),s=ni(n,g,d),s!==null&&(Bn(s,n,d,c),gu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Gt(),d=oi(n),g=Rr(c,d);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ni(n,g,d),s!==null&&(Bn(s,n,d,c),gu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Gt(),c=oi(n),d=Rr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ni(n,d,c),s!==null&&(Bn(s,n,c,a),gu(s,n,c))}};function Um(n,s,a,c,d,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,E):s.prototype&&s.prototype.isPureReactComponent?!Ta(a,c)||!Ta(d,g):!0}function zm(n,s,a){var c=!1,d=Zr,g=s.contextType;return typeof g=="object"&&g!==null?g=In(g):(d=Zt(s)?Zi:bt.current,c=s.contextTypes,g=(c=c!=null)?so(n,d):Zr),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Su,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),s}function Bm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Su.enqueueReplaceState(s,s.state,null)}function ed(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Uh(n);var g=s.contextType;typeof g=="object"&&g!==null?d.context=In(g):(g=Zt(s)?Zi:bt.current,d.context=so(n,g)),d.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Zh(n,s,g,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Su.enqueueReplaceState(d,d.state,null),yu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function po(n,s){try{var a="",c=s;do a+=Re(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:d,digest:null}}function td(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function nd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Xw=typeof WeakMap=="function"?WeakMap:Map;function $m(n,s,a){a=Rr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Nu||(Nu=!0,yd=c),nd(n,s)},a}function qm(n,s,a){a=Rr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){nd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){nd(n,s),typeof c!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Wm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Xw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=d0.bind(null,n,s,a),s.then(n,n))}function Hm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Gm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Rr(-1,1),s.tag=2,ni(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Zw=oe.ReactCurrentOwner,en=!1;function Ht(n,s,a,c){s.child=n===null?fm(s,null,a,c):uo(s,n.child,a,c)}function Km(n,s,a,c,d){a=a.render;var g=s.ref;return ho(s,d),c=Gh(n,s,a,c,g,d),a=Kh(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Pr(n,s,d)):(Ye&&a&&xh(s),s.flags|=1,Ht(n,s,c,d),s.child)}function Qm(n,s,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!Sd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Jm(n,s,g,c,d)):(n=Mu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&d)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ta,a(E,c)&&n.ref===s.ref)return Pr(n,s,d)}return s.flags|=1,n=li(g,c),n.ref=s.ref,n.return=s,s.child=n}function Jm(n,s,a,c,d){if(n!==null){var g=n.memoizedProps;if(Ta(g,c)&&n.ref===s.ref)if(en=!1,s.pendingProps=c=g,(n.lanes&d)!==0)(n.flags&131072)!==0&&(en=!0);else return s.lanes=n.lanes,Pr(n,s,d)}return rd(n,s,a,c,d)}function Ym(n,s,a){var c=s.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(go,dn),dn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ge(go,dn),dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ge(go,dn),dn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Ge(go,dn),dn|=c;return Ht(n,s,d,a),s.child}function Xm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function rd(n,s,a,c,d){var g=Zt(a)?Zi:bt.current;return g=so(s,g),ho(s,d),a=Gh(n,s,a,c,g,d),c=Kh(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Pr(n,s,d)):(Ye&&c&&xh(s),s.flags|=1,Ht(n,s,a,d),s.child)}function Zm(n,s,a,c,d){if(Zt(a)){var g=!0;lu(s)}else g=!1;if(ho(s,d),s.stateNode===null)Cu(n,s),zm(s,a,c),ed(s,a,c,d),c=!0;else if(n===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var k=E.context,z=a.contextType;typeof z=="object"&&z!==null?z=In(z):(z=Zt(a)?Zi:bt.current,z=so(s,z));var Y=a.getDerivedStateFromProps,X=typeof Y=="function"||typeof E.getSnapshotBeforeUpdate=="function";X||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==c||k!==z)&&Bm(s,E,c,z),ti=!1;var J=s.memoizedState;E.state=J,yu(s,c,E,d),k=s.memoizedState,A!==c||J!==k||Xt.current||ti?(typeof Y=="function"&&(Zh(s,a,Y,c),k=s.memoizedState),(A=ti||Um(s,a,A,c,J,k,z))?(X||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=k),E.props=c,E.state=k,E.context=z,c=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,mm(n,s),A=s.memoizedProps,z=s.type===s.elementType?A:Fn(s.type,A),E.props=z,X=s.pendingProps,J=E.context,k=a.contextType,typeof k=="object"&&k!==null?k=In(k):(k=Zt(a)?Zi:bt.current,k=so(s,k));var se=a.getDerivedStateFromProps;(Y=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==X||J!==k)&&Bm(s,E,c,k),ti=!1,J=s.memoizedState,E.state=J,yu(s,c,E,d);var ce=s.memoizedState;A!==X||J!==ce||Xt.current||ti?(typeof se=="function"&&(Zh(s,a,se,c),ce=s.memoizedState),(z=ti||Um(s,a,z,c,J,ce,k)||!1)?(Y||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,ce,k),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,ce,k)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ce),E.props=c,E.state=ce,E.context=k,c=z):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),c=!1)}return id(n,s,a,c,g,d)}function id(n,s,a,c,d,g){Xm(n,s);var E=(s.flags&128)!==0;if(!c&&!E)return d&&im(s,a,!1),Pr(n,s,g);c=s.stateNode,Zw.current=s;var A=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&E?(s.child=uo(s,n.child,null,g),s.child=uo(s,null,A,g)):Ht(n,s,A,g),s.memoizedState=c.state,d&&im(s,a,!0),s.child}function eg(n){var s=n.stateNode;s.pendingContext?nm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&nm(n,s.context,!1),zh(n,s.containerInfo)}function tg(n,s,a,c,d){return lo(),Oh(d),s.flags|=256,Ht(n,s,a,c),s.child}var sd={dehydrated:null,treeContext:null,retryLane:0};function od(n){return{baseLanes:n,cachePool:null,transitions:null}}function ng(n,s,a){var c=s.pendingProps,d=Xe.current,g=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ge(Xe,d&1),n===null)return Vh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=c.children,n=c.fallback,g?(c=s.mode,g=s.child,E={mode:"hidden",children:E},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=ju(E,c,0,null),n=us(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=od(a),s.memoizedState=sd,n):ad(s,E));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return e0(n,s,E,c,A,d,a);if(g){g=c.fallback,E=s.mode,d=n.child,A=d.sibling;var k={mode:"hidden",children:c.children};return(E&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=k,s.deletions=null):(c=li(d,k),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=li(A,g):(g=us(g,E,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,E=n.child.memoizedState,E=E===null?od(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=n.childLanes&~a,s.memoizedState=sd,c}return g=n.child,n=g.sibling,c=li(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function ad(n,s){return s=ju({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Au(n,s,a,c){return c!==null&&Oh(c),uo(s,n.child,null,a),n=ad(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function e0(n,s,a,c,d,g,E){if(a)return s.flags&256?(s.flags&=-257,c=td(Error(t(422))),Au(n,s,E,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,d=s.mode,c=ju({mode:"visible",children:c.children},d,0,null),g=us(g,d,E,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&uo(s,n.child,null,E),s.child.memoizedState=od(E),s.memoizedState=sd,g);if((s.mode&1)===0)return Au(n,s,E,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=td(g,c,void 0),Au(n,s,E,c)}if(A=(E&n.childLanes)!==0,en||A){if(c=It,c!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|E))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Cr(n,d),Bn(c,n,d,-1))}return Id(),c=td(Error(t(421))),Au(n,s,E,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=f0.bind(null,n),d._reactRetry=s,null):(n=g.treeContext,hn=Yr(d.nextSibling),cn=s,Ye=!0,jn=null,n!==null&&(wn[Tn++]=Sr,wn[Tn++]=Ar,wn[Tn++]=es,Sr=n.id,Ar=n.overflow,es=s),s=ad(s,c.children),s.flags|=4096,s)}function rg(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),jh(n.return,s,a)}function ld(n,s,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function ig(n,s,a){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(Ht(n,s,c.children,a),c=Xe.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rg(n,a,s);else if(n.tag===19)rg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ge(Xe,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&vu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ld(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&vu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ld(s,!0,a,null,g);break;case"together":ld(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Pr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ss|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=li(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=li(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function t0(n,s,a){switch(s.tag){case 3:eg(s),lo();break;case 5:vm(s);break;case 1:Zt(s.type)&&lu(s);break;case 4:zh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ge(pu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ge(Xe,Xe.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?ng(n,s,a):(Ge(Xe,Xe.current&1),n=Pr(n,s,a),n!==null?n.sibling:null);Ge(Xe,Xe.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return ig(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ge(Xe,Xe.current),c)break;return null;case 22:case 23:return s.lanes=0,Ym(n,s,a)}return Pr(n,s,a)}var sg,ud,og,ag;sg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ud=function(){},og=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,rs(tr.current);var g=null;switch(a){case"input":d=bi(n,d),c=bi(n,c),g=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),g=[];break;case"textarea":d=Yo(n,d),c=Yo(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=su)}ra(a,c);var E;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?g||(g=[]):(g=g||[]).push(z,null));for(z in c){var k=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&k!==A&&(k!=null||A!=null))if(z==="style")if(A){for(E in A)!A.hasOwnProperty(E)||k&&k.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in k)k.hasOwnProperty(E)&&A[E]!==k[E]&&(a||(a={}),a[E]=k[E])}else a||(g||(g=[]),g.push(z,a)),a=k;else z==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,A=A?A.__html:void 0,k!=null&&A!==k&&(g=g||[]).push(z,k)):z==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(z,""+k):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(k!=null&&z==="onScroll"&&Ke("scroll",n),g||A===k||(g=[])):(g=g||[]).push(z,k))}a&&(g=g||[]).push("style",a);var z=g;(s.updateQueue=z)&&(s.flags|=4)}},ag=function(n,s,a,c){a!==c&&(s.flags|=4)};function Ma(n,s){if(!Ye)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function jt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function n0(n,s,a){var c=s.pendingProps;switch(Nh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return Zt(s.type)&&au(),jt(s),null;case 3:return c=s.stateNode,fo(),Qe(Xt),Qe(bt),qh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(du(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jn!==null&&(Ed(jn),jn=null))),ud(n,s),jt(s),null;case 5:Bh(s);var d=rs(Da.current);if(a=s.type,n!==null&&s.stateNode!=null)og(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return jt(s),null}if(n=rs(tr.current),du(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[er]=s,c[Ra]=g,n=(s.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<Sa.length;d++)Ke(Sa[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":Rs(c,g),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ke("invalid",c);break;case"textarea":ks(c,g),Ke("invalid",c)}ra(a,g),d=null;for(var E in g)if(g.hasOwnProperty(E)){var A=g[E];E==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&iu(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&iu(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&Ke("scroll",c)}switch(a){case"input":dr(c),xl(c,g,!0);break;case"textarea":dr(c),Xo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=su)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(a,{is:c.is}):(n=E.createElement(a),a==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,a),n[er]=s,n[Ra]=c,sg(n,s,!1,!1),s.stateNode=n;e:{switch(E=ia(a,c),a){case"dialog":Ke("cancel",n),Ke("close",n),d=c;break;case"iframe":case"object":case"embed":Ke("load",n),d=c;break;case"video":case"audio":for(d=0;d<Sa.length;d++)Ke(Sa[d],n);d=c;break;case"source":Ke("error",n),d=c;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),d=c;break;case"details":Ke("toggle",n),d=c;break;case"input":Rs(n,c),d=bi(n,c),Ke("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),Ke("invalid",n);break;case"textarea":ks(n,c),d=Yo(n,c),Ke("invalid",n);break;default:d=c}ra(a,d),A=d;for(g in A)if(A.hasOwnProperty(g)){var k=A[g];g==="style"?ta(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Zo(n,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&Ur(n,k):typeof k=="number"&&Ur(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&Ke("scroll",n):k!=null&&q(n,g,k,E))}switch(a){case"input":dr(n),xl(n,c,!1);break;case"textarea":dr(n),Xo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?pr(n,!!c.multiple,g,!1):c.defaultValue!=null&&pr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=su)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jt(s),null;case 6:if(n&&s.stateNode!=null)ag(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=rs(Da.current),rs(tr.current),du(s)){if(c=s.stateNode,a=s.memoizedProps,c[er]=s,(g=c.nodeValue!==a)&&(n=cn,n!==null))switch(n.tag){case 3:iu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&iu(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[er]=s,s.stateNode=c}return jt(s),null;case 13:if(Qe(Xe),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&hn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)cm(),lo(),s.flags|=98560,g=!1;else if(g=du(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=s}else lo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),g=!1}else jn!==null&&(Ed(jn),jn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Xe.current&1)!==0?vt===0&&(vt=3):Id())),s.updateQueue!==null&&(s.flags|=4),jt(s),null);case 4:return fo(),ud(n,s),n===null&&Aa(s.stateNode.containerInfo),jt(s),null;case 10:return Mh(s.type._context),jt(s),null;case 17:return Zt(s.type)&&au(),jt(s),null;case 19:if(Qe(Xe),g=s.memoizedState,g===null)return jt(s),null;if(c=(s.flags&128)!==0,E=g.rendering,E===null)if(c)Ma(g,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(E=vu(n),E!==null){for(s.flags|=128,Ma(g,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,n=E.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ge(Xe,Xe.current&1|2),s.child}n=n.sibling}g.tail!==null&&He()>yo&&(s.flags|=128,c=!0,Ma(g,!1),s.lanes=4194304)}else{if(!c)if(n=vu(E),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ma(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ye)return jt(s),null}else 2*He()-g.renderingStartTime>yo&&a!==1073741824&&(s.flags|=128,c=!0,Ma(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=He(),s.sibling=null,a=Xe.current,Ge(Xe,c?a&1|2:a&1),s):(jt(s),null);case 22:case 23:return Td(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(dn&1073741824)!==0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function r0(n,s){switch(Nh(s),s.tag){case 1:return Zt(s.type)&&au(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return fo(),Qe(Xt),Qe(bt),qh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(Qe(Xe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));lo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Qe(Xe),null;case 4:return fo(),null;case 10:return Mh(s.type._context),null;case 22:case 23:return Td(),null;case 24:return null;default:return null}}var Ru=!1,Ft=!1,i0=typeof WeakSet=="function"?WeakSet:Set,ue=null;function mo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){tt(n,s,c)}else a.current=null}function cd(n,s,a){try{a()}catch(c){tt(n,s,c)}}var lg=!1;function s0(n,s){if(Th=Kr,n=Up(),ph(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,A=-1,k=-1,z=0,Y=0,X=n,J=null;t:for(;;){for(var se;X!==a||d!==0&&X.nodeType!==3||(A=E+d),X!==g||c!==0&&X.nodeType!==3||(k=E+c),X.nodeType===3&&(E+=X.nodeValue.length),(se=X.firstChild)!==null;)J=X,X=se;for(;;){if(X===n)break t;if(J===a&&++z===d&&(A=E),J===g&&++Y===c&&(k=E),(se=X.nextSibling)!==null)break;X=J,J=X.parentNode}X=se}a=A===-1||k===-1?null:{start:A,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ih={focusedElem:n,selectionRange:a},Kr=!1,ue=s;ue!==null;)if(s=ue,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ue=n;else for(;ue!==null;){s=ue;try{var ce=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,st=ce.memoizedState,j=s.stateNode,V=j.getSnapshotBeforeUpdate(s.elementType===s.type?he:Fn(s.type,he),st);j.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){tt(s,s.return,Z)}if(n=s.sibling,n!==null){n.return=s.return,ue=n;break}ue=s.return}return ce=lg,lg=!1,ce}function ja(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&cd(s,a,g)}d=d.next}while(d!==c)}}function Pu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function hd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function ug(n){var s=n.alternate;s!==null&&(n.alternate=null,ug(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[er],delete s[Ra],delete s[Rh],delete s[zw],delete s[Bw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cg(n){return n.tag===5||n.tag===3||n.tag===4}function hg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=su));else if(c!==4&&(n=n.child,n!==null))for(dd(n,s,a),n=n.sibling;n!==null;)dd(n,s,a),n=n.sibling}function fd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(fd(n,s,a),n=n.sibling;n!==null;)fd(n,s,a),n=n.sibling}var kt=null,Un=!1;function ri(n,s,a){for(a=a.child;a!==null;)dg(n,s,a),a=a.sibling}function dg(n,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Wi,a)}catch{}switch(a.tag){case 5:Ft||mo(a,s);case 6:var c=kt,d=Un;kt=null,ri(n,s,a),kt=c,Un=d,kt!==null&&(Un?(n=kt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):kt.removeChild(a.stateNode));break;case 18:kt!==null&&(Un?(n=kt,a=a.stateNode,n.nodeType===8?Ch(n.parentNode,a):n.nodeType===1&&Ch(n,a),Ln(n)):Ch(kt,a.stateNode));break;case 4:c=kt,d=Un,kt=a.stateNode.containerInfo,Un=!0,ri(n,s,a),kt=c,Un=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&cd(a,s,E),d=d.next}while(d!==c)}ri(n,s,a);break;case 1:if(!Ft&&(mo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){tt(a,s,A)}ri(n,s,a);break;case 21:ri(n,s,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,ri(n,s,a),Ft=c):ri(n,s,a);break;default:ri(n,s,a)}}function fg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new i0),s.forEach(function(c){var d=p0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function zn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:kt=A.stateNode,Un=!1;break e;case 3:kt=A.stateNode.containerInfo,Un=!0;break e;case 4:kt=A.stateNode.containerInfo,Un=!0;break e}A=A.return}if(kt===null)throw Error(t(160));dg(g,E,d),kt=null,Un=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(z){tt(d,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)pg(s,n),s=s.sibling}function pg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zn(s,n),rr(n),c&4){try{ja(3,n,n.return),Pu(3,n)}catch(he){tt(n,n.return,he)}try{ja(5,n,n.return)}catch(he){tt(n,n.return,he)}}break;case 1:zn(s,n),rr(n),c&512&&a!==null&&mo(a,a.return);break;case 5:if(zn(s,n),rr(n),c&512&&a!==null&&mo(a,a.return),n.flags&32){var d=n.stateNode;try{Ur(d,"")}catch(he){tt(n,n.return,he)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,E=a!==null?a.memoizedProps:g,A=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Qo(d,g),ia(A,E);var z=ia(A,g);for(E=0;E<k.length;E+=2){var Y=k[E],X=k[E+1];Y==="style"?ta(d,X):Y==="dangerouslySetInnerHTML"?Zo(d,X):Y==="children"?Ur(d,X):q(d,Y,X,z)}switch(A){case"input":Jo(d,g);break;case"textarea":xs(d,g);break;case"select":var J=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var se=g.value;se!=null?pr(d,!!g.multiple,se,!1):J!==!!g.multiple&&(g.defaultValue!=null?pr(d,!!g.multiple,g.defaultValue,!0):pr(d,!!g.multiple,g.multiple?[]:"",!1))}d[Ra]=g}catch(he){tt(n,n.return,he)}}break;case 6:if(zn(s,n),rr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(he){tt(n,n.return,he)}}break;case 3:if(zn(s,n),rr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Ln(s.containerInfo)}catch(he){tt(n,n.return,he)}break;case 4:zn(s,n),rr(n);break;case 13:zn(s,n),rr(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(gd=He())),c&4&&fg(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(z=Ft)||Y,zn(s,n),Ft=z):zn(s,n),rr(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(ue=n,Y=n.child;Y!==null;){for(X=ue=Y;ue!==null;){switch(J=ue,se=J.child,J.tag){case 0:case 11:case 14:case 15:ja(4,J,J.return);break;case 1:mo(J,J.return);var ce=J.stateNode;if(typeof ce.componentWillUnmount=="function"){c=J,a=J.return;try{s=c,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(he){tt(c,a,he)}}break;case 5:mo(J,J.return);break;case 22:if(J.memoizedState!==null){yg(X);continue}}se!==null?(se.return=J,ue=se):yg(X)}Y=Y.sibling}e:for(Y=null,X=n;;){if(X.tag===5){if(Y===null){Y=X;try{d=X.stateNode,z?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=X.stateNode,k=X.memoizedProps.style,E=k!=null&&k.hasOwnProperty("display")?k.display:null,A.style.display=ea("display",E))}catch(he){tt(n,n.return,he)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=z?"":X.memoizedProps}catch(he){tt(n,n.return,he)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:zn(s,n),rr(n),c&4&&fg(n);break;case 21:break;default:zn(s,n),rr(n)}}function rr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(cg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Ur(d,""),c.flags&=-33);var g=hg(n);fd(n,g,d);break;case 3:case 4:var E=c.stateNode.containerInfo,A=hg(n);dd(n,A,E);break;default:throw Error(t(161))}}catch(k){tt(n,n.return,k)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function o0(n,s,a){ue=n,mg(n)}function mg(n,s,a){for(var c=(n.mode&1)!==0;ue!==null;){var d=ue,g=d.child;if(d.tag===22&&c){var E=d.memoizedState!==null||Ru;if(!E){var A=d.alternate,k=A!==null&&A.memoizedState!==null||Ft;A=Ru;var z=Ft;if(Ru=E,(Ft=k)&&!z)for(ue=d;ue!==null;)E=ue,k=E.child,E.tag===22&&E.memoizedState!==null?vg(d):k!==null?(k.return=E,ue=k):vg(d);for(;g!==null;)ue=g,mg(g),g=g.sibling;ue=d,Ru=A,Ft=z}gg(n)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,ue=g):gg(n)}}function gg(n){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||Pu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Fn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&ym(s,g,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}ym(s,E,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Ln(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&hd(s)}catch(J){tt(s,s.return,J)}}if(s===n){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function yg(n){for(;ue!==null;){var s=ue;if(s===n){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function vg(n){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Pu(4,s)}catch(k){tt(s,a,k)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(k){tt(s,d,k)}}var g=s.return;try{hd(s)}catch(k){tt(s,g,k)}break;case 5:var E=s.return;try{hd(s)}catch(k){tt(s,E,k)}}}catch(k){tt(s,s.return,k)}if(s===n){ue=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ue=A;break}ue=s.return}}var a0=Math.ceil,ku=oe.ReactCurrentDispatcher,pd=oe.ReactCurrentOwner,An=oe.ReactCurrentBatchConfig,be=0,It=null,ct=null,xt=0,dn=0,go=Xr(0),vt=0,Fa=null,ss=0,xu=0,md=0,Ua=null,tn=null,gd=0,yo=1/0,kr=null,Nu=!1,yd=null,ii=null,Du=!1,si=null,Vu=0,za=0,vd=null,Ou=-1,Lu=0;function Gt(){return(be&6)!==0?He():Ou!==-1?Ou:Ou=He()}function oi(n){return(n.mode&1)===0?1:(be&2)!==0&&xt!==0?xt&-xt:qw.transition!==null?(Lu===0&&(Lu=Gi()),Lu):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:ma(n.type)),n)}function Bn(n,s,a,c){if(50<za)throw za=0,vd=null,Error(t(185));qr(n,a,c),((be&2)===0||n!==It)&&(n===It&&((be&2)===0&&(xu|=a),vt===4&&ai(n,xt)),nn(n,c),a===1&&be===0&&(s.mode&1)===0&&(yo=He()+500,uu&&ei()))}function nn(n,s){var a=n.callbackNode;yr(n,s);var c=Hi(n,n===It?xt:0);if(c===0)a!==null&&ca(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ca(a),s===1)n.tag===0?$w(Eg.bind(null,n)):sm(Eg.bind(null,n)),Fw(function(){(be&6)===0&&ei()}),a=null;else{switch(Hr(c)){case 1:a=qi;break;case 4:a=zr;break;case 16:a=vn;break;case 536870912:a=Ll;break;default:a=vn}a=Pg(a,_g.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function _g(n,s){if(Ou=-1,Lu=0,(be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(vo()&&n.callbackNode!==a)return null;var c=Hi(n,n===It?xt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=bu(n,c);else{s=c;var d=be;be|=2;var g=Tg();(It!==n||xt!==s)&&(kr=null,yo=He()+500,as(n,s));do try{c0();break}catch(A){wg(n,A)}while(!0);bh(),ku.current=g,be=d,ct!==null?s=0:(It=null,xt=0,s=vt)}if(s!==0){if(s===2&&(d=an(n),d!==0&&(c=d,s=_d(n,d))),s===1)throw a=Fa,as(n,0),ai(n,c),nn(n,He()),a;if(s===6)ai(n,c);else{if(d=n.current.alternate,(c&30)===0&&!l0(d)&&(s=bu(n,c),s===2&&(g=an(n),g!==0&&(c=g,s=_d(n,g))),s===1))throw a=Fa,as(n,0),ai(n,c),nn(n,He()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ls(n,tn,kr);break;case 3:if(ai(n,c),(c&130023424)===c&&(s=gd+500-He(),10<s)){if(Hi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Gt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ah(ls.bind(null,n,tn,kr),s);break}ls(n,tn,kr);break;case 4:if(ai(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var E=31-qt(c);g=1<<E,E=s[E],E>d&&(d=E),c&=~g}if(c=d,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*a0(c/1960))-c,10<c){n.timeoutHandle=Ah(ls.bind(null,n,tn,kr),c);break}ls(n,tn,kr);break;case 5:ls(n,tn,kr);break;default:throw Error(t(329))}}}return nn(n,He()),n.callbackNode===a?_g.bind(null,n):null}function _d(n,s){var a=Ua;return n.current.memoizedState.isDehydrated&&(as(n,s).flags|=256),n=bu(n,s),n!==2&&(s=tn,tn=a,s!==null&&Ed(s)),n}function Ed(n){tn===null?tn=n:tn.push.apply(tn,n)}function l0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Mn(g(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ai(n,s){for(s&=~md,s&=~xu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-qt(s),c=1<<a;n[a]=-1,s&=~c}}function Eg(n){if((be&6)!==0)throw Error(t(327));vo();var s=Hi(n,0);if((s&1)===0)return nn(n,He()),null;var a=bu(n,s);if(n.tag!==0&&a===2){var c=an(n);c!==0&&(s=c,a=_d(n,c))}if(a===1)throw a=Fa,as(n,0),ai(n,s),nn(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ls(n,tn,kr),nn(n,He()),null}function wd(n,s){var a=be;be|=1;try{return n(s)}finally{be=a,be===0&&(yo=He()+500,uu&&ei())}}function os(n){si!==null&&si.tag===0&&(be&6)===0&&vo();var s=be;be|=1;var a=An.transition,c=Ne;try{if(An.transition=null,Ne=1,n)return n()}finally{Ne=c,An.transition=a,be=s,(be&6)===0&&ei()}}function Td(){dn=go.current,Qe(go)}function as(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,jw(a)),ct!==null)for(a=ct.return;a!==null;){var c=a;switch(Nh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&au();break;case 3:fo(),Qe(Xt),Qe(bt),qh();break;case 5:Bh(c);break;case 4:fo();break;case 13:Qe(Xe);break;case 19:Qe(Xe);break;case 10:Mh(c.type._context);break;case 22:case 23:Td()}a=a.return}if(It=n,ct=n=li(n.current,null),xt=dn=s,vt=0,Fa=null,md=xu=ss=0,tn=Ua=null,ns!==null){for(s=0;s<ns.length;s++)if(a=ns[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var E=g.next;g.next=d,c.next=E}a.pending=c}ns=null}return n}function wg(n,s){do{var a=ct;try{if(bh(),_u.current=Iu,Eu){for(var c=Ze.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Eu=!1}if(is=0,Tt=yt=Ze=null,Va=!1,Oa=0,pd.current=null,a===null||a.return===null){vt=1,Fa=s,ct=null;break}e:{var g=n,E=a.return,A=a,k=s;if(s=xt,A.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var z=k,Y=A,X=Y.tag;if((Y.mode&1)===0&&(X===0||X===11||X===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var se=Hm(E);if(se!==null){se.flags&=-257,Gm(se,E,A,g,s),se.mode&1&&Wm(g,z,s),s=se,k=z;var ce=s.updateQueue;if(ce===null){var he=new Set;he.add(k),s.updateQueue=he}else ce.add(k);break e}else{if((s&1)===0){Wm(g,z,s),Id();break e}k=Error(t(426))}}else if(Ye&&A.mode&1){var st=Hm(E);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),Gm(st,E,A,g,s),Oh(po(k,A));break e}}g=k=po(k,A),vt!==4&&(vt=2),Ua===null?Ua=[g]:Ua.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var j=$m(g,k,s);gm(g,j);break e;case 1:A=k;var V=g.type,U=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ii===null||!ii.has(U)))){g.flags|=65536,s&=-s,g.lanes|=s;var Z=qm(g,A,s);gm(g,Z);break e}}g=g.return}while(g!==null)}Sg(a)}catch(de){s=de,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function Tg(){var n=ku.current;return ku.current=Iu,n===null?Iu:n}function Id(){(vt===0||vt===3||vt===2)&&(vt=4),It===null||(ss&268435455)===0&&(xu&268435455)===0||ai(It,xt)}function bu(n,s){var a=be;be|=2;var c=Tg();(It!==n||xt!==s)&&(kr=null,as(n,s));do try{u0();break}catch(d){wg(n,d)}while(!0);if(bh(),be=a,ku.current=c,ct!==null)throw Error(t(261));return It=null,xt=0,vt}function u0(){for(;ct!==null;)Ig(ct)}function c0(){for(;ct!==null&&!Vl();)Ig(ct)}function Ig(n){var s=Rg(n.alternate,n,dn);n.memoizedProps=n.pendingProps,s===null?Sg(n):ct=s,pd.current=null}function Sg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=n0(a,s,dn),a!==null){ct=a;return}}else{if(a=r0(a,s),a!==null){a.flags&=32767,ct=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vt=6,ct=null;return}}if(s=s.sibling,s!==null){ct=s;return}ct=s=n}while(s!==null);vt===0&&(vt=5)}function ls(n,s,a){var c=Ne,d=An.transition;try{An.transition=null,Ne=1,h0(n,s,a,c)}finally{An.transition=d,Ne=c}return null}function h0(n,s,a,c){do vo();while(si!==null);if((be&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(qe(n,g),n===It&&(ct=It=null,xt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Du||(Du=!0,Pg(vn,function(){return vo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=An.transition,An.transition=null;var E=Ne;Ne=1;var A=be;be|=4,pd.current=null,s0(n,a),pg(a,n),Nw(Ih),Kr=!!Th,Ih=Th=null,n.current=a,o0(a),oh(),be=A,Ne=E,An.transition=g}else n.current=a;if(Du&&(Du=!1,si=n,Vu=d),g=n.pendingLanes,g===0&&(ii=null),bl(a.stateNode),nn(n,He()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Nu)throw Nu=!1,n=yd,yd=null,n;return(Vu&1)!==0&&n.tag!==0&&vo(),g=n.pendingLanes,(g&1)!==0?n===vd?za++:(za=0,vd=n):za=0,ei(),null}function vo(){if(si!==null){var n=Hr(Vu),s=An.transition,a=Ne;try{if(An.transition=null,Ne=16>n?16:n,si===null)var c=!1;else{if(n=si,si=null,Vu=0,(be&6)!==0)throw Error(t(331));var d=be;for(be|=4,ue=n.current;ue!==null;){var g=ue,E=g.child;if((ue.flags&16)!==0){var A=g.deletions;if(A!==null){for(var k=0;k<A.length;k++){var z=A[k];for(ue=z;ue!==null;){var Y=ue;switch(Y.tag){case 0:case 11:case 15:ja(8,Y,g)}var X=Y.child;if(X!==null)X.return=Y,ue=X;else for(;ue!==null;){Y=ue;var J=Y.sibling,se=Y.return;if(ug(Y),Y===z){ue=null;break}if(J!==null){J.return=se,ue=J;break}ue=se}}}var ce=g.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var st=he.sibling;he.sibling=null,he=st}while(he!==null)}}ue=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,ue=E;else e:for(;ue!==null;){if(g=ue,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ja(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,ue=j;break e}ue=g.return}}var V=n.current;for(ue=V;ue!==null;){E=ue;var U=E.child;if((E.subtreeFlags&2064)!==0&&U!==null)U.return=E,ue=U;else e:for(E=V;ue!==null;){if(A=ue,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Pu(9,A)}}catch(de){tt(A,A.return,de)}if(A===E){ue=null;break e}var Z=A.sibling;if(Z!==null){Z.return=A.return,ue=Z;break e}ue=A.return}}if(be=d,ei(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Wi,n)}catch{}c=!0}return c}finally{Ne=a,An.transition=s}}return!1}function Ag(n,s,a){s=po(a,s),s=$m(n,s,1),n=ni(n,s,1),s=Gt(),n!==null&&(qr(n,1,s),nn(n,s))}function tt(n,s,a){if(n.tag===3)Ag(n,n,a);else for(;s!==null;){if(s.tag===3){Ag(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ii===null||!ii.has(c))){n=po(a,n),n=qm(s,n,1),s=ni(s,n,1),n=Gt(),s!==null&&(qr(s,1,n),nn(s,n));break}}s=s.return}}function d0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Gt(),n.pingedLanes|=n.suspendedLanes&a,It===n&&(xt&a)===a&&(vt===4||vt===3&&(xt&130023424)===xt&&500>He()-gd?as(n,0):md|=a),nn(n,s)}function Cg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Us,Us<<=1,(Us&130023424)===0&&(Us=4194304)));var a=Gt();n=Cr(n,s),n!==null&&(qr(n,s,a),nn(n,a))}function f0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Cg(n,a)}function p0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Cg(n,a)}var Rg;Rg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Xt.current)en=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return en=!1,t0(n,s,a);en=(n.flags&131072)!==0}else en=!1,Ye&&(s.flags&1048576)!==0&&om(s,hu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Cu(n,s),n=s.pendingProps;var d=so(s,bt.current);ho(s,a),d=Gh(null,s,c,n,d,a);var g=Kh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(c)?(g=!0,lu(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Uh(s),d.updater=Su,s.stateNode=d,d._reactInternals=s,ed(s,c,n,a),s=id(null,s,c,!0,g,a)):(s.tag=0,Ye&&g&&xh(s),Ht(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Cu(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=g0(c),n=Fn(c,n),d){case 0:s=rd(null,s,c,n,a);break e;case 1:s=Zm(null,s,c,n,a);break e;case 11:s=Km(null,s,c,n,a);break e;case 14:s=Qm(null,s,c,Fn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),rd(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),Zm(n,s,c,d,a);case 3:e:{if(eg(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,d=g.element,mm(n,s),yu(s,c,null,a);var E=s.memoizedState;if(c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=po(Error(t(423)),s),s=tg(n,s,c,a,d);break e}else if(c!==d){d=po(Error(t(424)),s),s=tg(n,s,c,a,d);break e}else for(hn=Yr(s.stateNode.containerInfo.firstChild),cn=s,Ye=!0,jn=null,a=fm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(lo(),c===d){s=Pr(n,s,a);break e}Ht(n,s,c,a)}s=s.child}return s;case 5:return vm(s),n===null&&Vh(s),c=s.type,d=s.pendingProps,g=n!==null?n.memoizedProps:null,E=d.children,Sh(c,d)?E=null:g!==null&&Sh(c,g)&&(s.flags|=32),Xm(n,s),Ht(n,s,E,a),s.child;case 6:return n===null&&Vh(s),null;case 13:return ng(n,s,a);case 4:return zh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=uo(s,null,c,a):Ht(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),Km(n,s,c,d,a);case 7:return Ht(n,s,s.pendingProps,a),s.child;case 8:return Ht(n,s,s.pendingProps.children,a),s.child;case 12:return Ht(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,g=s.memoizedProps,E=d.value,Ge(pu,c._currentValue),c._currentValue=E,g!==null)if(Mn(g.value,E)){if(g.children===d.children&&!Xt.current){s=Pr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){E=g.child;for(var k=A.firstContext;k!==null;){if(k.context===c){if(g.tag===1){k=Rr(-1,a&-a),k.tag=2;var z=g.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?k.next=k:(k.next=Y.next,Y.next=k),z.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),jh(g.return,a,s),A.lanes|=a;break}k=k.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),jh(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Ht(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,ho(s,a),d=In(d),c=c(d),s.flags|=1,Ht(n,s,c,a),s.child;case 14:return c=s.type,d=Fn(c,s.pendingProps),d=Fn(c.type,d),Qm(n,s,c,d,a);case 15:return Jm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Fn(c,d),Cu(n,s),s.tag=1,Zt(c)?(n=!0,lu(s)):n=!1,ho(s,a),zm(s,c,d),ed(s,c,d,a),id(null,s,c,!0,n,a);case 19:return ig(n,s,a);case 22:return Ym(n,s,a)}throw Error(t(156,s.tag))};function Pg(n,s){return js(n,s)}function m0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,s,a,c){return new m0(n,s,a,c)}function Sd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function g0(n){if(typeof n=="function")return Sd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===Ot)return 14}return 2}function li(n,s){var a=n.alternate;return a===null?(a=Cn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Mu(n,s,a,c,d,g){var E=2;if(c=n,typeof n=="function")Sd(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case D:return us(a.children,d,g,s);case C:E=8,d|=8;break;case P:return n=Cn(12,a,s,d|2),n.elementType=P,n.lanes=g,n;case R:return n=Cn(13,a,s,d),n.elementType=R,n.lanes=g,n;case rt:return n=Cn(19,a,s,d),n.elementType=rt,n.lanes=g,n;case Be:return ju(a,d,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:E=10;break e;case x:E=9;break e;case b:E=11;break e;case Ot:E=14;break e;case Lt:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Cn(E,a,s,d),s.elementType=n,s.type=c,s.lanes=g,s}function us(n,s,a,c){return n=Cn(7,n,c,s),n.lanes=a,n}function ju(n,s,a,c){return n=Cn(22,n,c,s),n.elementType=Be,n.lanes=a,n.stateNode={isHidden:!1},n}function Ad(n,s,a){return n=Cn(6,n,null,s),n.lanes=a,n}function Cd(n,s,a){return s=Cn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function y0(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rd(n,s,a,c,d,g,E,A,k){return n=new y0(n,s,a,A,k),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Cn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(g),n}function v0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function kg(n){if(!n)return Zr;n=n._reactInternals;e:{if(xn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return rm(n,a,s)}return s}function xg(n,s,a,c,d,g,E,A,k){return n=Rd(a,c,!0,n,d,g,E,A,k),n.context=kg(null),a=n.current,c=Gt(),d=oi(a),g=Rr(c,d),g.callback=s??null,ni(a,g,d),n.current.lanes=d,qr(n,d,c),nn(n,c),n}function Fu(n,s,a,c){var d=s.current,g=Gt(),E=oi(d);return a=kg(a),s.context===null?s.context=a:s.pendingContext=a,s=Rr(g,E),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ni(d,s,E),n!==null&&(Bn(n,d,E,g),gu(n,d,E)),E}function Uu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ng(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Pd(n,s){Ng(n,s),(n=n.alternate)&&Ng(n,s)}function _0(){return null}var Dg=typeof reportError=="function"?reportError:function(n){console.error(n)};function kd(n){this._internalRoot=n}zu.prototype.render=kd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Fu(n,s,null,null)},zu.prototype.unmount=kd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;os(function(){Fu(null,n,null,null)}),s[Tr]=null}};function zu(n){this._internalRoot=n}zu.prototype.unstable_scheduleHydration=function(n){if(n){var s=zl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Jn.length&&s!==0&&s<Jn[a].priority;a++);Jn.splice(a,0,n),a===0&&ql(n)}};function xd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Vg(){}function E0(n,s,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var z=Uu(E);g.call(z)}}var E=xg(s,c,n,0,null,!1,!1,"",Vg);return n._reactRootContainer=E,n[Tr]=E.current,Aa(n.nodeType===8?n.parentNode:n),os(),E}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=Uu(k);A.call(z)}}var k=Rd(n,0,!1,null,null,!1,!1,"",Vg);return n._reactRootContainer=k,n[Tr]=k.current,Aa(n.nodeType===8?n.parentNode:n),os(function(){Fu(s,k,a,c)}),k}function $u(n,s,a,c,d){var g=a._reactRootContainer;if(g){var E=g;if(typeof d=="function"){var A=d;d=function(){var k=Uu(E);A.call(k)}}Fu(s,E,n,d)}else E=E0(a,s,n,d,c);return Uu(E)}Fl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Br(s.pendingLanes);a!==0&&(Wr(s,a|1),nn(s,He()),(be&6)===0&&(yo=He()+500,ei()))}break;case 13:os(function(){var c=Cr(n,1);if(c!==null){var d=Gt();Bn(c,n,1,d)}}),Pd(n,1)}},zs=function(n){if(n.tag===13){var s=Cr(n,134217728);if(s!==null){var a=Gt();Bn(s,n,134217728,a)}Pd(n,134217728)}},Ul=function(n){if(n.tag===13){var s=oi(n),a=Cr(n,s);if(a!==null){var c=Gt();Bn(a,n,s,c)}Pd(n,s)}},zl=function(){return Ne},Bl=function(n,s){var a=Ne;try{return Ne=n,s()}finally{Ne=a}},Ds=function(n,s,a){switch(s){case"input":if(Jo(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=ou(c);if(!d)throw Error(t(90));Cs(c),Jo(c,d)}}}break;case"textarea":xs(n,a);break;case"select":s=a.value,s!=null&&pr(n,!!a.multiple,s,!1)}},Ui=wd,oa=os;var w0={usingClientEntryPoint:!1,Events:[Pa,ro,ou,Kn,sa,wd]},Ba={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T0={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ua(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||_0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{Wi=qu.inject(T0),on=qu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w0,rn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(s))throw Error(t(200));return v0(n,s,null,a)},rn.createRoot=function(n,s){if(!xd(n))throw Error(t(299));var a=!1,c="",d=Dg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Rd(n,1,!1,null,null,a,!1,c,d),n[Tr]=s.current,Aa(n.nodeType===8?n.parentNode:n),new kd(s)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ua(s),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return os(n)},rn.hydrate=function(n,s,a){if(!Bu(s))throw Error(t(200));return $u(null,n,s,!0,a)},rn.hydrateRoot=function(n,s,a){if(!xd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",E=Dg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=xg(s,null,n,1,a??null,d,!1,g,E),n[Tr]=s.current,Aa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new zu(s)},rn.render=function(n,s,a){if(!Bu(s))throw Error(t(200));return $u(null,n,s,!1,a)},rn.unmountComponentAtNode=function(n){if(!Bu(n))throw Error(t(40));return n._reactRootContainer?(os(function(){$u(null,null,n,!1,function(){n._reactRootContainer=null,n[Tr]=null})}),!0):!1},rn.unstable_batchedUpdates=wd,rn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Bu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $u(n,s,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var zg;function Ov(){if(zg)return Vd.exports;zg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vd.exports=V0(),Vd.exports}var Bg;function O0(){if(Bg)return Wu;Bg=1;var r=Ov();return Wu.createRoot=r.createRoot,Wu.hydrateRoot=r.hydrateRoot,Wu}var L0=O0();Ov();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},rl.apply(this,arguments)}var mi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(mi||(mi={}));const $g="popstate";function b0(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return Kd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:lc(o)}return j0(e,t,null,r)}function at(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Af(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M0(){return Math.random().toString(36).substr(2,8)}function qg(r,e){return{usr:r.state,key:r.key,idx:e}}function Kd(r,e,t,i){return t===void 0&&(t=null),rl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?jo(e):e,{state:t,key:e&&e.key||i||M0()})}function lc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function jo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function j0(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=mi.Pop,p=null,y=_();y==null&&(y=0,h.replaceState(rl({},h.state,{idx:y}),""));function _(){return(h.state||{idx:null}).idx}function T(){f=mi.Pop;let F=_(),re=F==null?null:F-y;y=F,p&&p({action:f,location:W.location,delta:re})}function S(F,re){f=mi.Push;let ie=Kd(W.location,F,re);y=_()+1;let q=qg(ie,y),oe=W.createHref(ie);try{h.pushState(q,"",oe)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;o.location.assign(oe)}l&&p&&p({action:f,location:W.location,delta:1})}function O(F,re){f=mi.Replace;let ie=Kd(W.location,F,re);y=_();let q=qg(ie,y),oe=W.createHref(ie);h.replaceState(q,"",oe),l&&p&&p({action:f,location:W.location,delta:0})}function $(F){let re=o.location.origin!=="null"?o.location.origin:o.location.href,ie=typeof F=="string"?F:lc(F);return ie=ie.replace(/ $/,"%20"),at(re,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,re)}let W={get action(){return f},get location(){return r(o,h)},listen(F){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener($g,T),p=F,()=>{o.removeEventListener($g,T),p=null}},createHref(F){return e(o,F)},createURL:$,encodeLocation(F){let re=$(F);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:S,replace:O,go(F){return h.go(F)}};return W}var Wg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Wg||(Wg={}));function F0(r,e,t){return t===void 0&&(t="/"),U0(r,e,t)}function U0(r,e,t,i){let o=typeof e=="string"?jo(e):e,l=Cf(o.pathname||"/",t);if(l==null)return null;let h=Lv(r);z0(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let y=Z0(l);f=J0(h[p],y)}return f}function Lv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(at(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=yi([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(at(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Lv(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:K0(y,l.index),routesMeta:_})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of bv(l.path))o(l,h,p)}),e}function bv(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=bv(i.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function z0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Q0(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const B0=/^:[\w-]+$/,$0=3,q0=2,W0=1,H0=10,G0=-2,Hg=r=>r==="*";function K0(r,e){let t=r.split("/"),i=t.length;return t.some(Hg)&&(i+=G0),e&&(i+=q0),t.filter(o=>!Hg(o)).reduce((o,l)=>o+(B0.test(l)?$0:l===""?W0:H0),i)}function Q0(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function J0(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let f=0;f<i.length;++f){let p=i[f],y=f===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Y0({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),S=p.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:yi([l,T.pathname]),pathnameBase:iT(yi([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=yi([l,T.pathnameBase]))}return h}function Y0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=X0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((y,_,T)=>{let{paramName:S,isOptional:O}=_;if(S==="*"){let W=f[T]||"";h=l.slice(0,l.length-W.length).replace(/(.)\/+$/,"$1")}const $=f[T];return O&&!$?y[S]=void 0:y[S]=($||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function X0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Af(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Z0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Af(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Cf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const eT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tT=r=>eT.test(r);function nT(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?jo(r):r,l;if(t)if(tT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Af(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Gg(t.substring(1),"/"):l=Gg(t,e)}else l=e;return{pathname:l,search:sT(i),hash:oT(o)}}function Gg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function bd(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rf(r,e){let t=rT(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Pf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=jo(r):(o=rl({},r),at(!o.pathname||!o.pathname.includes("?"),bd("?","pathname","search",o)),at(!o.pathname||!o.pathname.includes("#"),bd("#","pathname","hash",o)),at(!o.search||!o.search.includes("#"),bd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}f=T>=0?e[T]:"/"}let p=nT(o,f),y=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const yi=r=>r.join("/").replace(/\/\/+/g,"/"),iT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),sT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,oT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function aT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Mv=["post","put","patch","delete"];new Set(Mv);const lT=["get",...Mv];new Set(lT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},il.apply(this,arguments)}const kf=K.createContext(null),uT=K.createContext(null),Di=K.createContext(null),Lc=K.createContext(null),Mr=K.createContext({outlet:null,matches:[],isDataRoute:!1}),jv=K.createContext(null);function cT(r,e){let{relative:t}=e===void 0?{}:e;Fo()||at(!1);let{basename:i,navigator:o}=K.useContext(Di),{hash:l,pathname:h,search:f}=Uv(r,{relative:t}),p=h;return i!=="/"&&(p=h==="/"?i:yi([i,h])),o.createHref({pathname:p,search:f,hash:l})}function Fo(){return K.useContext(Lc)!=null}function pl(){return Fo()||at(!1),K.useContext(Lc).location}function Fv(r){K.useContext(Di).static||K.useLayoutEffect(r)}function Uo(){let{isDataRoute:r}=K.useContext(Mr);return r?IT():hT()}function hT(){Fo()||at(!1);let r=K.useContext(kf),{basename:e,future:t,navigator:i}=K.useContext(Di),{matches:o}=K.useContext(Mr),{pathname:l}=pl(),h=JSON.stringify(Rf(o,t.v7_relativeSplatPath)),f=K.useRef(!1);return Fv(()=>{f.current=!0}),K.useCallback(function(y,_){if(_===void 0&&(_={}),!f.current)return;if(typeof y=="number"){i.go(y);return}let T=Pf(y,JSON.parse(h),l,_.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:yi([e,T.pathname])),(_.replace?i.replace:i.push)(T,_.state,_)},[e,i,h,l,r])}function xf(){let{matches:r}=K.useContext(Mr),e=r[r.length-1];return e?e.params:{}}function Uv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=K.useContext(Di),{matches:o}=K.useContext(Mr),{pathname:l}=pl(),h=JSON.stringify(Rf(o,i.v7_relativeSplatPath));return K.useMemo(()=>Pf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function dT(r,e){return fT(r,e)}function fT(r,e,t,i){Fo()||at(!1);let{navigator:o}=K.useContext(Di),{matches:l}=K.useContext(Mr),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let y=pl(),_;if(e){var T;let F=typeof e=="string"?jo(e):e;p==="/"||(T=F.pathname)!=null&&T.startsWith(p)||at(!1),_=F}else _=y;let S=_.pathname||"/",O=S;if(p!=="/"){let F=p.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let $=F0(r,{pathname:O}),W=vT($&&$.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:yi([p,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?p:yi([p,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,i);return e&&W?K.createElement(Lc.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:mi.Pop}},W):W}function pT(){let r=TT(),e=aT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:o},t):null,null)}const mT=K.createElement(pT,null);class gT extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?K.createElement(Mr.Provider,{value:this.props.routeContext},K.createElement(jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yT(r){let{routeContext:e,match:t,children:i}=r,o=K.useContext(kf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Mr.Provider,{value:e},i)}function vT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let _=h.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);_>=0||at(!1),h=h.slice(0,Math.min(h.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<h.length;_++){let T=h[_];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=_),T.route.id){let{loaderData:S,errors:O}=t,$=T.route.loader&&S[T.route.id]===void 0&&(!O||O[T.route.id]===void 0);if(T.route.lazy||$){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((_,T,S)=>{let O,$=!1,W=null,F=null;t&&(O=f&&T.route.id?f[T.route.id]:void 0,W=T.route.errorElement||mT,p&&(y<0&&S===0?(ST("route-fallback"),$=!0,F=null):y===S&&($=!0,F=T.route.hydrateFallbackElement||null)));let re=e.concat(h.slice(0,S+1)),ie=()=>{let q;return O?q=W:$?q=F:T.route.Component?q=K.createElement(T.route.Component,null):T.route.element?q=T.route.element:q=_,K.createElement(yT,{match:T,routeContext:{outlet:_,matches:re,isDataRoute:t!=null},children:q})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?K.createElement(gT,{location:t.location,revalidation:t.revalidation,component:W,error:O,children:ie(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):ie()},null)}var zv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(zv||{}),Bv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Bv||{});function _T(r){let e=K.useContext(kf);return e||at(!1),e}function ET(r){let e=K.useContext(uT);return e||at(!1),e}function wT(r){let e=K.useContext(Mr);return e||at(!1),e}function $v(r){let e=wT(),t=e.matches[e.matches.length-1];return t.route.id||at(!1),t.route.id}function TT(){var r;let e=K.useContext(jv),t=ET(),i=$v();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function IT(){let{router:r}=_T(zv.UseNavigateStable),e=$v(Bv.UseNavigateStable),t=K.useRef(!1);return Fv(()=>{t.current=!0}),K.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,il({fromRouteId:e},l)))},[r,e])}const Kg={};function ST(r,e,t){Kg[r]||(Kg[r]=!0)}function AT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Qd(r){let{to:e,replace:t,state:i,relative:o}=r;Fo()||at(!1);let{future:l,static:h}=K.useContext(Di),{matches:f}=K.useContext(Mr),{pathname:p}=pl(),y=Uo(),_=Pf(e,Rf(f,l.v7_relativeSplatPath),p,o==="path"),T=JSON.stringify(_);return K.useEffect(()=>y(JSON.parse(T),{replace:t,state:i,relative:o}),[y,T,o,t,i]),null}function Kt(r){at(!1)}function CT(r){let{basename:e="/",children:t=null,location:i,navigationType:o=mi.Pop,navigator:l,static:h=!1,future:f}=r;Fo()&&at(!1);let p=e.replace(/^\/*/,"/"),y=K.useMemo(()=>({basename:p,navigator:l,static:h,future:il({v7_relativeSplatPath:!1},f)}),[p,f,l,h]);typeof i=="string"&&(i=jo(i));let{pathname:_="/",search:T="",hash:S="",state:O=null,key:$="default"}=i,W=K.useMemo(()=>{let F=Cf(_,p);return F==null?null:{location:{pathname:F,search:T,hash:S,state:O,key:$},navigationType:o}},[p,_,T,S,O,$,o]);return W==null?null:K.createElement(Di.Provider,{value:y},K.createElement(Lc.Provider,{children:t,value:W}))}function RT(r){let{children:e,location:t}=r;return dT(Jd(e),t)}new Promise(()=>{});function Jd(r,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(r,(i,o)=>{if(!K.isValidElement(i))return;let l=[...e,o];if(i.type===K.Fragment){t.push.apply(t,Jd(i.props.children,l));return}i.type!==Kt&&at(!1),!i.props.index||!i.props.children||at(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Jd(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yd(){return Yd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yd.apply(this,arguments)}function PT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function kT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function xT(r,e){return r.button===0&&(!e||e==="_self")&&!kT(r)}const NT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DT="6";try{window.__reactRouterVersion=DT}catch{}const VT="startTransition",Qg=x0[VT];function OT(r){let{basename:e,children:t,future:i,window:o}=r,l=K.useRef();l.current==null&&(l.current=b0({window:o,v5Compat:!0}));let h=l.current,[f,p]=K.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},_=K.useCallback(T=>{y&&Qg?Qg(()=>p(T)):p(T)},[p,y]);return K.useLayoutEffect(()=>h.listen(_),[h,_]),K.useEffect(()=>AT(i),[i]),K.createElement(CT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const LT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nf=K.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:p,to:y,preventScrollReset:_,viewTransition:T}=e,S=PT(e,NT),{basename:O}=K.useContext(Di),$,W=!1;if(typeof y=="string"&&bT.test(y)&&($=y,LT))try{let q=new URL(window.location.href),oe=y.startsWith("//")?new URL(q.protocol+y):new URL(y),Se=Cf(oe.pathname,O);oe.origin===q.origin&&Se!=null?y=Se+oe.search+oe.hash:W=!0}catch{}let F=cT(y,{relative:o}),re=MT(y,{replace:h,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:T});function ie(q){i&&i(q),q.defaultPrevented||re(q)}return K.createElement("a",Yd({},S,{href:$||F,onClick:W||l?i:ie,ref:t,target:p}))});var Jg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Yg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Yg||(Yg={}));function MT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,p=Uo(),y=pl(),_=Uv(r,{relative:h});return K.useCallback(T=>{if(xT(T,t)){T.preventDefault();let S=i!==void 0?i:lc(y)===lc(_);p(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,p,_,i,o,t,r,l,h,f])}const uc=[{value:"validation",label:"Validation"},{value:"mise_en_service",label:"Mise en service"},{value:"zero_stress",label:"Zro Stress"}],jT=()=>{};var Xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},FT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Wv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,O=y&63;p||(O=64,h||(S=64)),i.push(t[_],t[T],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(qv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):FT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new UT;const S=l<<2|f>>4;if(i.push(S),y!==64){const O=f<<4&240|y>>2;if(i.push(O),T!==64){const $=y<<6&192|T;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zT=function(r){const e=qv(r);return Wv.encodeByteArray(e,!0)},cc=function(r){return zT(r).replace(/\./g,"")},Hv=function(r){try{return Wv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=()=>BT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof Xg>"u")return;const r=Xg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},WT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Hv(r[1]);return e&&JSON.parse(e)},bc=()=>{try{return jT()||$T()||qT()||WT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Gv=r=>{var e,t;return(t=(e=bc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},HT=r=>{const e=Gv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Kv=()=>{var r;return(r=bc())===null||r===void 0?void 0:r.config},Qv=r=>{var e;return(e=bc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[cc(JSON.stringify(t)),cc(JSON.stringify(h)),""].join(".")}const Ja={};function QT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ja))Ja[e]?r.emulator.push(e):r.prod.push(e);return r}function JT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Zg=!1;function Yv(r,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||Ja[r]===e||Ja[r]||Zg)return;Ja[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=QT().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Zg=!0,h()},S}function _(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=JT(i),O=t("text"),$=document.getElementById(O)||document.createElement("span"),W=t("learnmore"),F=document.getElementById(W)||document.createElement("a"),re=t("preprendIcon"),ie=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const q=S.element;f(q),_(F,W);const oe=y();p(ie,re),q.append(ie,$,F,oe),document.body.appendChild(q)}l?($.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function XT(){var r;const e=(r=bc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nI(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function rI(){return!XT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iI(){try{return typeof indexedDB=="object"}catch{return!1}}function sI(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="FirebaseError";class jr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=oI,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?aI(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new jr(o,f,i)}}function aI(r,e){return r.replace(lI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const lI=/\{\$([^}]+)}/g;function uI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ms(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(ey(l)&&ey(h)){if(!ms(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function ey(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Wa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function cI(r,e){const t=new hI(r,e);return t.subscribe.bind(t)}class hI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");dI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Md),o.error===void 0&&(o.error=Md),o.complete===void 0&&(o.complete=Md);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(r){return r&&r._delegate?r._delegate:r}class gs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mI(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pI(r){return r===ds?void 0:r}function mI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ke||(ke={}));const yI={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},vI=ke.INFO,_I={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},EI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=_I[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=vI,this._logHandler=EI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const wI=(r,e)=>e.some(t=>r instanceof t);let ty,ny;function TI(){return ty||(ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function II(){return ny||(ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xv=new WeakMap,Xd=new WeakMap,Zv=new WeakMap,jd=new WeakMap,Vf=new WeakMap;function SI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(vi(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Xv.set(t,r)}).catch(()=>{}),Vf.set(e,r),e}function AI(r){if(Xd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Xd.set(r,e)}let Zd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Xd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Zv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function CI(r){Zd=r(Zd)}function RI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Fd(this),e,...t);return Zv.set(i,e.sort?e.sort():[e]),vi(i)}:II().includes(r)?function(...e){return r.apply(Fd(this),e),vi(Xv.get(this))}:function(...e){return vi(r.apply(Fd(this),e))}}function PI(r){return typeof r=="function"?RI(r):(r instanceof IDBTransaction&&AI(r),wI(r,TI())?new Proxy(r,Zd):r)}function vi(r){if(r instanceof IDBRequest)return SI(r);if(jd.has(r))return jd.get(r);const e=PI(r);return e!==r&&(jd.set(r,e),Vf.set(e,r)),e}const Fd=r=>Vf.get(r);function kI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=vi(h);return i&&h.addEventListener("upgradeneeded",p=>{i(vi(h.result),p.oldVersion,p.newVersion,vi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const xI=["get","getKey","getAll","getAllKeys","count"],NI=["put","add","delete","clear"],Ud=new Map;function ry(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=NI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||xI.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return Ud.set(e,l),l}CI(r=>({...r,get:(e,t,i)=>ry(e,t)||r.get(e,t,i),has:(e,t)=>!!ry(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function VI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ef="@firebase/app",iy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Df("@firebase/app"),OI="@firebase/app-compat",LI="@firebase/analytics-compat",bI="@firebase/analytics",MI="@firebase/app-check-compat",jI="@firebase/app-check",FI="@firebase/auth",UI="@firebase/auth-compat",zI="@firebase/database",BI="@firebase/data-connect",$I="@firebase/database-compat",qI="@firebase/functions",WI="@firebase/functions-compat",HI="@firebase/installations",GI="@firebase/installations-compat",KI="@firebase/messaging",QI="@firebase/messaging-compat",JI="@firebase/performance",YI="@firebase/performance-compat",XI="@firebase/remote-config",ZI="@firebase/remote-config-compat",eS="@firebase/storage",tS="@firebase/storage-compat",nS="@firebase/firestore",rS="@firebase/ai",iS="@firebase/firestore-compat",sS="firebase",oS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",aS={[ef]:"fire-core",[OI]:"fire-core-compat",[bI]:"fire-analytics",[LI]:"fire-analytics-compat",[jI]:"fire-app-check",[MI]:"fire-app-check-compat",[FI]:"fire-auth",[UI]:"fire-auth-compat",[zI]:"fire-rtdb",[BI]:"fire-data-connect",[$I]:"fire-rtdb-compat",[qI]:"fire-fn",[WI]:"fire-fn-compat",[HI]:"fire-iid",[GI]:"fire-iid-compat",[KI]:"fire-fcm",[QI]:"fire-fcm-compat",[JI]:"fire-perf",[YI]:"fire-perf-compat",[XI]:"fire-rc",[ZI]:"fire-rc-compat",[eS]:"fire-gcs",[tS]:"fire-gcs-compat",[nS]:"fire-fst",[iS]:"fire-fst-compat",[rS]:"fire-vertex","fire-js":"fire-js",[sS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,lS=new Map,nf=new Map;function sy(r,e){try{r.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function No(r){const e=r.name;if(nf.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;nf.set(e,r);for(const t of hc.values())sy(t,r);for(const t of lS.values())sy(t,r);return!0}function Of(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function $n(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new ml("app","Firebase",uS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=oS;function e_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:tf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw _i.create("bad-app-name",{appName:String(o)});if(t||(t=Kv()),!t)throw _i.create("no-options");const l=hc.get(o);if(l){if(ms(t,l.options)&&ms(i,l.config))return l;throw _i.create("duplicate-app",{appName:o})}const h=new gI(o);for(const p of nf.values())h.addComponent(p);const f=new cS(t,i,h);return hc.set(o,f),f}function t_(r=tf){const e=hc.get(r);if(!e&&r===tf&&Kv())return e_();if(!e)throw _i.create("no-app",{appName:r});return e}function Ei(r,e,t){var i;let o=(i=aS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(f.join(" "));return}No(new gs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="firebase-heartbeat-database",dS=1,sl="firebase-heartbeat-store";let zd=null;function n_(){return zd||(zd=kI(hS,dS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw _i.create("idb-open",{originalErrorMessage:r.message})})),zd}async function fS(r){try{const t=(await n_()).transaction(sl),i=await t.objectStore(sl).get(r_(r));return await t.done,i}catch(e){if(e instanceof jr)Dr.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(t.message)}}}async function oy(r,e){try{const i=(await n_()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,r_(r)),await i.done}catch(t){if(t instanceof jr)Dr.warn(t.message);else{const i=_i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dr.warn(i.message)}}}function r_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=1024,mS=30;class gS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ay();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>mS){const h=_S(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Dr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ay(),{heartbeatsToSend:i,unsentEntries:o}=yS(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Dr.warn(t),""}}}function ay(){return new Date().toISOString().substring(0,10)}function yS(r,e=pS){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ly(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ly(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class vS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iI()?sI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return oy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return oy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ly(r){return cc(JSON.stringify({version:2,heartbeats:r})).length}function _S(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(r){No(new gs("platform-logger",e=>new DI(e),"PRIVATE")),No(new gs("heartbeat",e=>new gS(e),"PRIVATE")),Ei(ef,iy,r),Ei(ef,iy,"esm2017"),Ei("fire-js","")}ES("");var wS="firebase",TS="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(wS,TS,"app");function Lf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function i_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IS=i_,s_=new ml("auth","Firebase",i_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Df("@firebase/auth");function SS(r,...e){dc.logLevel<=ke.WARN&&dc.warn(`Auth (${Bo}): ${r}`,...e)}function Xu(r,...e){dc.logLevel<=ke.ERROR&&dc.error(`Auth (${Bo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(r,...e){throw bf(r,...e)}function sr(r,...e){return bf(r,...e)}function o_(r,e,t){const i=Object.assign(Object.assign({},IS()),{[e]:t});return new ml("auth","Firebase",i).create(e,{appName:r.name})}function wi(r){return o_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return s_.create(r,...e)}function Ee(r,e,...t){if(!r)throw bf(e,...t)}function xr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Xu(e),new Error(e)}function Vr(r,e){r||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function AS(){return uy()==="http:"||uy()==="https:"}function uy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AS()||eI()||"connection"in navigator)?navigator.onLine:!0}function RS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vr(t>e,"Short delay should be less than long delay!"),this.isMobile=YT()||tI()}get(){return CS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(r,e){Vr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xS=new yl(3e4,6e4);function ws(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Vi(r,e,t,i,o={}){return l_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=gl(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return ZT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&zo(r.emulatorConfig.host)&&(y.credentials="include"),a_.fetch()(await u_(r,r.config.apiHost,t,f),y)})}async function l_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},PS),e);try{const o=new DS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Hu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Hu(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Hu(r,"user-disabled",h);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw o_(r,_,y);Wn(r,_)}}catch(o){if(o instanceof jr)throw o;Wn(r,"network-request-failed",{message:String(o)})}}async function Mc(r,e,t,i,o={}){const l=await Vi(r,e,t,i,o);return"mfaPendingCredential"in l&&Wn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function u_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Mf(r.config,o):`${r.config.apiScheme}://${o}`;return kS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function NS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(sr(this.auth,"network-request-failed")),xS.get())})}}function Hu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=sr(r,e,i);return o.customData._tokenResponse=t,o}function cy(r){return r!==void 0&&r.enterprise!==void 0}class VS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OS(r,e){return Vi(r,"GET","/v2/recaptchaConfig",ws(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(r,e){return Vi(r,"POST","/v1/accounts:delete",e)}async function fc(r,e){return Vi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bS(r,e=!1){const t=lt(r),i=await t.getIdToken(e),o=jf(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ya(Bd(o.auth_time)),issuedAtTime:Ya(Bd(o.iat)),expirationTime:Ya(Bd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Bd(r){return Number(r)*1e3}function jf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Hv(t);return o?JSON.parse(o):(Xu("Failed to decode base64 JWT payload"),null)}catch(o){return Xu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function hy(r){const e=jf(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof jr&&MS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function MS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ya(this.lastLoginAt),this.creationTime=Ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ol(r,fc(t,{idToken:i}));Ee(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?c_(l.providerUserInfo):[],f=US(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),_=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new sf(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,T)}async function FS(r){const e=lt(r);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function US(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function c_(r){return r.map(e=>{var{providerId:t}=e,i=Lf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e){const t=await l_(r,{},async()=>{const i=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await u_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return r.emulatorConfig&&zo(r.emulatorConfig.host)&&(p.credentials="include"),a_.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BS(r,e){return Vi(r,"POST","/v2/accounts:revokeToken",ws(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=hy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await zS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Co;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Lf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new sf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ol(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bS(this,e)}reload(){return FS(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(wi(this.auth));const e=await this.getIdToken();return await ol(this,LS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,p,y,_;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,re=(y=t.createdAt)!==null&&y!==void 0?y:void 0,ie=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:q,emailVerified:oe,isAnonymous:Se,providerData:Te,stsTokenManager:D}=t;Ee(q&&D,e,"internal-error");const C=Co.fromJSON(this.name,D);Ee(typeof q=="string",e,"internal-error"),ci(T,e.name),ci(S,e.name),Ee(typeof oe=="boolean",e,"internal-error"),Ee(typeof Se=="boolean",e,"internal-error"),ci(O,e.name),ci($,e.name),ci(W,e.name),ci(F,e.name),ci(re,e.name),ci(ie,e.name);const P=new qn({uid:q,auth:e,email:S,emailVerified:oe,displayName:T,isAnonymous:Se,photoURL:$,phoneNumber:O,tenantId:W,stsTokenManager:C,createdAt:re,lastLoginAt:ie});return Te&&Array.isArray(Te)&&(P.providerData=Te.map(N=>Object.assign({},N))),F&&(P._redirectEventId=F),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Co;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?c_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Co;f.updateFromIdToken(i);const p=new qn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new sf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new Map;function Nr(r){Vr(r instanceof Function,"Expected a class definition");let e=dy.get(r);return e?(Vr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,dy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h_.type="NONE";const fy=h_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Zu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Zu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ro(Nr(fy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Nr(fy);const h=Zu(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(h);if(_){let T;if(typeof _=="string"){const S=await fc(e,{idToken:_}).catch(()=>{});if(!S)break;T=await qn._fromGetAccountInfoResponse(e,S,_)}else T=qn._fromJSON(e,_);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ro(l,e,i):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ro(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y_(e))return"Blackberry";if(v_(e))return"Webos";if(f_(e))return"Safari";if((e.includes("chrome/")||p_(e))&&!e.includes("edge/"))return"Chrome";if(g_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function d_(r=$t()){return/firefox\//i.test(r)}function f_(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p_(r=$t()){return/crios\//i.test(r)}function m_(r=$t()){return/iemobile/i.test(r)}function g_(r=$t()){return/android/i.test(r)}function y_(r=$t()){return/blackberry/i.test(r)}function v_(r=$t()){return/webos/i.test(r)}function Ff(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function $S(r=$t()){var e;return Ff(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qS(){return nI()&&document.documentMode===10}function __(r=$t()){return Ff(r)||g_(r)||v_(r)||y_(r)||/windows phone/i.test(r)||m_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r,e=[]){let t;switch(r){case"Browser":t=py($t());break;case"Worker":t=`${py($t())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(r,e={}){return Vi(r,"GET","/v2/passwordPolicy",ws(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=6;class KS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:GS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new WS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($n(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(wi(this));const t=e?lt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HS(this),t=new KS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ml("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await BS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&SS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function $o(r){return lt(r)}class my{constructor(e){this.auth=e,this.observer=null,this.addObserver=cI(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JS(r){jc=r}function w_(r){return jc.loadJS(r)}function YS(){return jc.recaptchaEnterpriseScript}function XS(){return jc.gapiScript}function ZS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class eA{constructor(){this.enterprise=new tA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nA="recaptcha-enterprise",T_="NO_RECAPTCHA";class rA{constructor(e){this.type=nA,this.auth=$o(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{OS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new VS(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;cy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(T_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eA().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&cy(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=YS();p.length!==0&&(p+=f),w_(p).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function gy(r,e,t,i=!1,o=!1){const l=new rA(r);let h;if(o)h=T_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function yy(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await gy(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await gy(r,e,t,t==="getOobCode");return i(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(r,e){const t=Of(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ms(l,e??{}))return o;Wn(o,"already-initialized")}return t.initialize({options:e})}function sA(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Nr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function oA(r,e,t){const i=$o(r);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=I_(e),{host:h,port:f}=aA(e),p=f===null?"":`:${f}`,y={url:`${l}//${h}${p}/`},_=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(ms(y,i.config.emulator)&&ms(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,zo(h)?(Jv(`${l}//${h}${p}`),Yv("Auth",!0)):lA()}function I_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function aA(r){const e=I_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:vy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:vy(h)}}}function vy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function lA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function uA(r,e){return Vi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(r,e){return Mc(r,"POST","/v1/accounts:signInWithPassword",ws(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(r,e){return Mc(r,"POST","/v1/accounts:signInWithEmailLink",ws(r,e))}async function dA(r,e){return Mc(r,"POST","/v1/accounts:signInWithEmailLink",ws(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Uf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new al(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new al(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,t,"signInWithPassword",cA);case"emailLink":return hA(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yy(e,i,"signUpPassword",uA);case"emailLink":return dA(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(r,e){return Mc(r,"POST","/v1/accounts:signInWithIdp",ws(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="http://localhost";class ys extends Uf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Lf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new ys(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:fA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mA(r){const e=qa(Wa(r)).link,t=e?qa(Wa(e)).deep_link_id:null,i=qa(Wa(r)).deep_link_id;return(i?qa(Wa(i)).link:null)||i||t||e||r}class zf{constructor(e){var t,i,o,l,h,f;const p=qa(Wa(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,T=pA((o=p.mode)!==null&&o!==void 0?o:null);Ee(y&&_&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=mA(e);try{return new zf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return al._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=zf.parseLink(t);return Ee(i,"argument-error"),al._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends vl{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ys._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return di.credential(t,i)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends vl{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends vl{constructor(){super("twitter.com")}static credential(e,t){return ys._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return pi.credential(t,i)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await qn._fromIdTokenResponse(e,i,o),h=_y(i);return new Do({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=_y(i);return new Do({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function _y(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends jr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new mc(e,t,i,o)}}function A_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(r,l,e,i):l})}async function gA(r,e,t=!1){const i=await ol(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Do._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(r,e,t=!1){const{auth:i}=r;if($n(i.app))return Promise.reject(wi(i));const o="reauthenticate";try{const l=await ol(r,A_(i,o,e,r),t);Ee(l.idToken,i,"internal-error");const h=jf(l.idToken);Ee(h,i,"internal-error");const{sub:f}=h;return Ee(r.uid===f,i,"user-mismatch"),Do._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Wn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(r,e,t=!1){if($n(r.app))return Promise.reject(wi(r));const i="signIn",o=await A_(r,i,e),l=await Do._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function vA(r,e){return C_($o(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(r){const e=$o(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function R_(r,e,t){return $n(r.app)?Promise.reject(wi(r)):vA(lt(r),qo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_A(r),i})}function EA(r,e,t,i){return lt(r).onIdTokenChanged(e,t,i)}function wA(r,e,t){return lt(r).beforeAuthStateChanged(e,t)}function TA(r,e,t,i){return lt(r).onAuthStateChanged(e,t,i)}function IA(r){return lt(r).signOut()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1e3,AA=10;class k_ extends P_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=__(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);qS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,AA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},SA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const CA=k_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends P_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}x_.type="SESSION";const N_=x_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await RA(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=Bf("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function kA(r){or().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function xA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function DA(){return D_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="firebaseLocalStorageDb",VA=1,yc="firebaseLocalStorage",O_="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uc(r,e){return r.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function OA(){const r=indexedDB.deleteDatabase(V_);return new _l(r).toPromise()}function of(){const r=indexedDB.open(V_,VA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(yc,{keyPath:O_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await OA(),e(await of()))})})}async function Ey(r,e,t){const i=Uc(r,!0).put({[O_]:e,value:t});return new _l(i).toPromise()}async function LA(r,e){const t=Uc(r,!1).get(e),i=await new _l(t).toPromise();return i===void 0?null:i.value}function wy(r,e){const t=Uc(r,!0).delete(e);return new _l(t).toPromise()}const bA=800,MA=3;class L_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>MA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(DA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xA(),!this.activeServiceWorker)return;this.sender=new PA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await Ey(e,gc,"1"),await wy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ey(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>LA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uc(o,!1).getAll();return new _l(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L_.type="LOCAL";const jA=L_;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(r,e){return e?Nr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends Uf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UA(r){return C_(r.auth,new $f(r),r.bypassAuthState)}function zA(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),yA(t,new $f(r),r.bypassAuthState)}async function BA(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),gA(t,new $f(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UA;case"linkViaPopup":case"linkViaRedirect":return BA;case"reauthViaPopup":case"reauthViaRedirect":return zA;default:Wn(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new yl(2e3,1e4);class So extends b_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=Bf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$A.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="pendingRedirect",ec=new Map;class WA extends b_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const i=await HA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HA(r,e){const t=QA(e),i=KA(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function GA(r,e){ec.set(r._key(),e)}function KA(r){return Nr(r._redirectPersistence)}function QA(r){return Zu(qA,r.config.apiKey,r.name)}async function JA(r,e,t=!1){if($n(r.app))return Promise.reject(wi(r));const i=$o(r),o=FA(i,e),h=await new WA(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=600*1e3;class XA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!M_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ty(e))}saveEventToCache(e){this.cachedEventUids.add(Ty(e)),this.lastProcessedEventTime=Date.now()}}function Ty(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function M_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(r,e={}){return Vi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n1=/^https?/;async function r1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await e1(r);for(const t of e)try{if(i1(t))return}catch{}Wn(r,"unauthorized-domain")}function i1(r){const e=rf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!n1.test(t))return!1;if(t1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new yl(3e4,6e4);function Iy(){const r=or().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function o1(r){return new Promise((e,t)=>{var i,o,l;function h(){Iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iy(),t(sr(r,"network-request-failed"))},timeout:s1.get()})}if(!((o=(i=or().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=or().gapi)===null||l===void 0)&&l.load)h();else{const f=ZS("iframefcb");return or()[f]=()=>{gapi.load?h():t(sr(r,"network-request-failed"))},w_(`${XS()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw tc=null,e})}let tc=null;function a1(r){return tc=tc||o1(r),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new yl(5e3,15e3),u1="__/auth/iframe",c1="emulator/auth/iframe",h1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f1(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Mf(e,c1):`https://${r.config.authDomain}/${u1}`,i={apiKey:e.apiKey,appName:r.name,v:Bo},o=d1.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${gl(i).slice(1)}`}async function p1(r){const e=await a1(r),t=or().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:f1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=sr(r,"network-request-failed"),f=or().setTimeout(()=>{l(h)},l1.get());function p(){or().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g1=500,y1=600,v1="_blank",_1="http://localhost";class Sy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E1(r,e,t,i=g1,o=y1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p=Object.assign(Object.assign({},m1),{width:i.toString(),height:o.toString(),top:l,left:h}),y=$t().toLowerCase();t&&(f=p_(y)?v1:t),d_(y)&&(e=e||_1,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[O,$])=>`${S}${O}=${$},`,"");if($S(y)&&f!=="_self")return w1(e||"",f),new Sy(null);const T=window.open(e||"",f,_);Ee(T,r,"popup-blocked");try{T.focus()}catch{}return new Sy(T)}function w1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="__/auth/handler",I1="emulator/auth/handler",S1=encodeURIComponent("fac");async function Ay(r,e,t,i,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Bo,eventId:o};if(e instanceof S_){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",uI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))h[_]=T}if(e instanceof vl){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(h.scopes=_.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await r._getAppCheckToken(),y=p?`#${S1}=${encodeURIComponent(p)}`:"";return`${A1(r)}?${gl(f).slice(1)}${y}`}function A1({config:r}){return r.emulator?Mf(r,I1):`https://${r.authDomain}/${T1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class C1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N_,this._completeRedirectFn=JA,this._overrideRedirectResult=GA}async _openPopup(e,t,i,o){var l;Vr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Ay(e,t,i,rf(),o);return E1(e,h,Bf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Ay(e,t,i,rf(),o);return kA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Vr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await p1(e),i=new XA(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($d,{type:$d},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[$d];h!==void 0&&t(!!h),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return __()||f_()||Ff()}}const R1=C1;var Cy="@firebase/auth",Ry="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x1(r){No(new gs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(r)},y=new QS(i,o,l,p);return sA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),No(new gs("auth-internal",e=>{const t=$o(e.getProvider("auth").getImmediate());return(i=>new P1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(Cy,Ry,k1(r)),Ei(Cy,Ry,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=300,D1=Qv("authIdTokenMaxAge")||N1;let Py=null;const V1=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>D1)return;const o=t==null?void 0:t.token;Py!==o&&(Py=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function O1(r=t_()){const e=Of(r,"auth");if(e.isInitialized())return e.getImmediate();const t=iA(r,{popupRedirectResolver:R1,persistence:[jA,CA,N_]}),i=Qv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=V1(l.toString());wA(t,h,()=>h(t.currentUser)),EA(t,f=>h(f))}}const o=Gv("auth");return o&&oA(t,`http://${o}`),t}function L1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}JS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=sr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",L1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x1("Browser");var ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,j_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,C){function P(){}P.prototype=C.prototype,D.D=C.prototype,D.prototype=new P,D.prototype.constructor=D,D.C=function(N,x,b){for(var R=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)R[rt-2]=arguments[rt];return C.prototype[x].apply(N,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,C,P){P||(P=0);var N=Array(16);if(typeof C=="string")for(var x=0;16>x;++x)N[x]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(x=0;16>x;++x)N[x]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=D.g[0],P=D.g[1],x=D.g[2];var b=D.g[3],R=C+(b^P&(x^b))+N[0]+3614090360&4294967295;C=P+(R<<7&4294967295|R>>>25),R=b+(x^C&(P^x))+N[1]+3905402710&4294967295,b=C+(R<<12&4294967295|R>>>20),R=x+(P^b&(C^P))+N[2]+606105819&4294967295,x=b+(R<<17&4294967295|R>>>15),R=P+(C^x&(b^C))+N[3]+3250441966&4294967295,P=x+(R<<22&4294967295|R>>>10),R=C+(b^P&(x^b))+N[4]+4118548399&4294967295,C=P+(R<<7&4294967295|R>>>25),R=b+(x^C&(P^x))+N[5]+1200080426&4294967295,b=C+(R<<12&4294967295|R>>>20),R=x+(P^b&(C^P))+N[6]+2821735955&4294967295,x=b+(R<<17&4294967295|R>>>15),R=P+(C^x&(b^C))+N[7]+4249261313&4294967295,P=x+(R<<22&4294967295|R>>>10),R=C+(b^P&(x^b))+N[8]+1770035416&4294967295,C=P+(R<<7&4294967295|R>>>25),R=b+(x^C&(P^x))+N[9]+2336552879&4294967295,b=C+(R<<12&4294967295|R>>>20),R=x+(P^b&(C^P))+N[10]+4294925233&4294967295,x=b+(R<<17&4294967295|R>>>15),R=P+(C^x&(b^C))+N[11]+2304563134&4294967295,P=x+(R<<22&4294967295|R>>>10),R=C+(b^P&(x^b))+N[12]+1804603682&4294967295,C=P+(R<<7&4294967295|R>>>25),R=b+(x^C&(P^x))+N[13]+4254626195&4294967295,b=C+(R<<12&4294967295|R>>>20),R=x+(P^b&(C^P))+N[14]+2792965006&4294967295,x=b+(R<<17&4294967295|R>>>15),R=P+(C^x&(b^C))+N[15]+1236535329&4294967295,P=x+(R<<22&4294967295|R>>>10),R=C+(x^b&(P^x))+N[1]+4129170786&4294967295,C=P+(R<<5&4294967295|R>>>27),R=b+(P^x&(C^P))+N[6]+3225465664&4294967295,b=C+(R<<9&4294967295|R>>>23),R=x+(C^P&(b^C))+N[11]+643717713&4294967295,x=b+(R<<14&4294967295|R>>>18),R=P+(b^C&(x^b))+N[0]+3921069994&4294967295,P=x+(R<<20&4294967295|R>>>12),R=C+(x^b&(P^x))+N[5]+3593408605&4294967295,C=P+(R<<5&4294967295|R>>>27),R=b+(P^x&(C^P))+N[10]+38016083&4294967295,b=C+(R<<9&4294967295|R>>>23),R=x+(C^P&(b^C))+N[15]+3634488961&4294967295,x=b+(R<<14&4294967295|R>>>18),R=P+(b^C&(x^b))+N[4]+3889429448&4294967295,P=x+(R<<20&4294967295|R>>>12),R=C+(x^b&(P^x))+N[9]+568446438&4294967295,C=P+(R<<5&4294967295|R>>>27),R=b+(P^x&(C^P))+N[14]+3275163606&4294967295,b=C+(R<<9&4294967295|R>>>23),R=x+(C^P&(b^C))+N[3]+4107603335&4294967295,x=b+(R<<14&4294967295|R>>>18),R=P+(b^C&(x^b))+N[8]+1163531501&4294967295,P=x+(R<<20&4294967295|R>>>12),R=C+(x^b&(P^x))+N[13]+2850285829&4294967295,C=P+(R<<5&4294967295|R>>>27),R=b+(P^x&(C^P))+N[2]+4243563512&4294967295,b=C+(R<<9&4294967295|R>>>23),R=x+(C^P&(b^C))+N[7]+1735328473&4294967295,x=b+(R<<14&4294967295|R>>>18),R=P+(b^C&(x^b))+N[12]+2368359562&4294967295,P=x+(R<<20&4294967295|R>>>12),R=C+(P^x^b)+N[5]+4294588738&4294967295,C=P+(R<<4&4294967295|R>>>28),R=b+(C^P^x)+N[8]+2272392833&4294967295,b=C+(R<<11&4294967295|R>>>21),R=x+(b^C^P)+N[11]+1839030562&4294967295,x=b+(R<<16&4294967295|R>>>16),R=P+(x^b^C)+N[14]+4259657740&4294967295,P=x+(R<<23&4294967295|R>>>9),R=C+(P^x^b)+N[1]+2763975236&4294967295,C=P+(R<<4&4294967295|R>>>28),R=b+(C^P^x)+N[4]+1272893353&4294967295,b=C+(R<<11&4294967295|R>>>21),R=x+(b^C^P)+N[7]+4139469664&4294967295,x=b+(R<<16&4294967295|R>>>16),R=P+(x^b^C)+N[10]+3200236656&4294967295,P=x+(R<<23&4294967295|R>>>9),R=C+(P^x^b)+N[13]+681279174&4294967295,C=P+(R<<4&4294967295|R>>>28),R=b+(C^P^x)+N[0]+3936430074&4294967295,b=C+(R<<11&4294967295|R>>>21),R=x+(b^C^P)+N[3]+3572445317&4294967295,x=b+(R<<16&4294967295|R>>>16),R=P+(x^b^C)+N[6]+76029189&4294967295,P=x+(R<<23&4294967295|R>>>9),R=C+(P^x^b)+N[9]+3654602809&4294967295,C=P+(R<<4&4294967295|R>>>28),R=b+(C^P^x)+N[12]+3873151461&4294967295,b=C+(R<<11&4294967295|R>>>21),R=x+(b^C^P)+N[15]+530742520&4294967295,x=b+(R<<16&4294967295|R>>>16),R=P+(x^b^C)+N[2]+3299628645&4294967295,P=x+(R<<23&4294967295|R>>>9),R=C+(x^(P|~b))+N[0]+4096336452&4294967295,C=P+(R<<6&4294967295|R>>>26),R=b+(P^(C|~x))+N[7]+1126891415&4294967295,b=C+(R<<10&4294967295|R>>>22),R=x+(C^(b|~P))+N[14]+2878612391&4294967295,x=b+(R<<15&4294967295|R>>>17),R=P+(b^(x|~C))+N[5]+4237533241&4294967295,P=x+(R<<21&4294967295|R>>>11),R=C+(x^(P|~b))+N[12]+1700485571&4294967295,C=P+(R<<6&4294967295|R>>>26),R=b+(P^(C|~x))+N[3]+2399980690&4294967295,b=C+(R<<10&4294967295|R>>>22),R=x+(C^(b|~P))+N[10]+4293915773&4294967295,x=b+(R<<15&4294967295|R>>>17),R=P+(b^(x|~C))+N[1]+2240044497&4294967295,P=x+(R<<21&4294967295|R>>>11),R=C+(x^(P|~b))+N[8]+1873313359&4294967295,C=P+(R<<6&4294967295|R>>>26),R=b+(P^(C|~x))+N[15]+4264355552&4294967295,b=C+(R<<10&4294967295|R>>>22),R=x+(C^(b|~P))+N[6]+2734768916&4294967295,x=b+(R<<15&4294967295|R>>>17),R=P+(b^(x|~C))+N[13]+1309151649&4294967295,P=x+(R<<21&4294967295|R>>>11),R=C+(x^(P|~b))+N[4]+4149444226&4294967295,C=P+(R<<6&4294967295|R>>>26),R=b+(P^(C|~x))+N[11]+3174756917&4294967295,b=C+(R<<10&4294967295|R>>>22),R=x+(C^(b|~P))+N[2]+718787259&4294967295,x=b+(R<<15&4294967295|R>>>17),R=P+(b^(x|~C))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+b&4294967295}i.prototype.u=function(D,C){C===void 0&&(C=D.length);for(var P=C-this.blockSize,N=this.B,x=this.h,b=0;b<C;){if(x==0)for(;b<=P;)o(this,D,b),b+=this.blockSize;if(typeof D=="string"){for(;b<C;)if(N[x++]=D.charCodeAt(b++),x==this.blockSize){o(this,N),x=0;break}}else for(;b<C;)if(N[x++]=D[b++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=C},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;var P=8*this.o;for(C=D.length-8;C<D.length;++C)D[C]=P&255,P/=256;for(this.u(D),D=Array(16),C=P=0;4>C;++C)for(var N=0;32>N;N+=8)D[P++]=this.g[C]>>>N&255;return D};function l(D,C){var P=f;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=C(D)}function h(D,C){this.h=C;for(var P=[],N=!0,x=D.length-1;0<=x;x--){var b=D[x]|0;N&&b==C||(P[x]=b,N=!1)}this.g=P}var f={};function p(D){return-128<=D&&128>D?l(D,function(C){return new h([C|0],0>C?-1:0)}):new h([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return F(y(-D));for(var C=[],P=1,N=0;D>=P;N++)C[N]=D/P|0,P*=4294967296;return new h(C,0)}function _(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return F(_(D.substring(1),C));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(C,8)),N=T,x=0;x<D.length;x+=8){var b=Math.min(8,D.length-x),R=parseInt(D.substring(x,x+b),C);8>b?(b=y(Math.pow(C,b)),N=N.j(b).add(y(R))):(N=N.j(P),N=N.add(y(R)))}return N}var T=p(0),S=p(1),O=p(16777216);r=h.prototype,r.m=function(){if(W(this))return-F(this).m();for(var D=0,C=1,P=0;P<this.g.length;P++){var N=this.i(P);D+=(0<=N?N:4294967296+N)*C,C*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if($(this))return"0";if(W(this))return"-"+F(this).toString(D);for(var C=y(Math.pow(D,6)),P=this,N="";;){var x=oe(P,C).g;P=re(P,x.j(C));var b=((0<P.g.length?P.g[0]:P.h)>>>0).toString(D);if(P=x,$(P))return b+N;for(;6>b.length;)b="0"+b;N=b+N}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function $(D){if(D.h!=0)return!1;for(var C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function W(D){return D.h==-1}r.l=function(D){return D=re(this,D),W(D)?-1:$(D)?0:1};function F(D){for(var C=D.g.length,P=[],N=0;N<C;N++)P[N]=~D.g[N];return new h(P,~D.h).add(S)}r.abs=function(){return W(this)?F(this):this},r.add=function(D){for(var C=Math.max(this.g.length,D.g.length),P=[],N=0,x=0;x<=C;x++){var b=N+(this.i(x)&65535)+(D.i(x)&65535),R=(b>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);N=R>>>16,b&=65535,R&=65535,P[x]=R<<16|b}return new h(P,P[P.length-1]&-2147483648?-1:0)};function re(D,C){return D.add(F(C))}r.j=function(D){if($(this)||$(D))return T;if(W(this))return W(D)?F(this).j(F(D)):F(F(this).j(D));if(W(D))return F(this.j(F(D)));if(0>this.l(O)&&0>D.l(O))return y(this.m()*D.m());for(var C=this.g.length+D.g.length,P=[],N=0;N<2*C;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<D.g.length;x++){var b=this.i(N)>>>16,R=this.i(N)&65535,rt=D.i(x)>>>16,Ot=D.i(x)&65535;P[2*N+2*x]+=R*Ot,ie(P,2*N+2*x),P[2*N+2*x+1]+=b*Ot,ie(P,2*N+2*x+1),P[2*N+2*x+1]+=R*rt,ie(P,2*N+2*x+1),P[2*N+2*x+2]+=b*rt,ie(P,2*N+2*x+2)}for(N=0;N<C;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=C;N<2*C;N++)P[N]=0;return new h(P,0)};function ie(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function q(D,C){this.g=D,this.h=C}function oe(D,C){if($(C))throw Error("division by zero");if($(D))return new q(T,T);if(W(D))return C=oe(F(D),C),new q(F(C.g),F(C.h));if(W(C))return C=oe(D,F(C)),new q(F(C.g),C.h);if(30<D.g.length){if(W(D)||W(C))throw Error("slowDivide_ only works with positive integers.");for(var P=S,N=C;0>=N.l(D);)P=Se(P),N=Se(N);var x=Te(P,1),b=Te(N,1);for(N=Te(N,2),P=Te(P,2);!$(N);){var R=b.add(N);0>=R.l(D)&&(x=x.add(P),b=R),N=Te(N,1),P=Te(P,1)}return C=re(D,x.j(C)),new q(x,C)}for(x=T;0<=D.l(C);){for(P=Math.max(1,Math.floor(D.m()/C.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),b=y(P),R=b.j(C);W(R)||0<R.l(D);)P-=N,b=y(P),R=b.j(C);$(b)&&(b=S),x=x.add(b),D=re(D,R)}return new q(x,D)}r.A=function(D){return oe(this,D).h},r.and=function(D){for(var C=Math.max(this.g.length,D.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)&D.i(N);return new h(P,this.h&D.h)},r.or=function(D){for(var C=Math.max(this.g.length,D.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)|D.i(N);return new h(P,this.h|D.h)},r.xor=function(D){for(var C=Math.max(this.g.length,D.g.length),P=[],N=0;N<C;N++)P[N]=this.i(N)^D.i(N);return new h(P,this.h^D.h)};function Se(D){for(var C=D.g.length+1,P=[],N=0;N<C;N++)P[N]=D.i(N)<<1|D.i(N-1)>>>31;return new h(P,D.h)}function Te(D,C){var P=C>>5;C%=32;for(var N=D.g.length-P,x=[],b=0;b<N;b++)x[b]=0<C?D.i(b+P)>>>C|D.i(b+P+1)<<32-C:D.i(b+P);return new h(x,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,j_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,Ti=h}).apply(typeof ky<"u"?ky:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F_,Ha,U_,nc,af,z_,B_,$_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in v))break e;v=v[M]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,M={next:function(){if(!I&&v<u.length){var B=v++;return{value:m(B,u[B]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function T(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,S.apply(null,arguments)}function O(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function $(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,M,B){for(var ee=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ee[ze-2]=arguments[ze];return m.prototype[M].apply(I,ee)}}function W(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function F(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const M=u.length||0,B=I.length||0;u.length=M+B;for(let ee=0;ee<B;ee++)u[M+ee]=I[ee]}else u.push(I)}}class re{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ie(u){return/^[\s\xa0]*$/.test(u)}function q(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var Se=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function Te(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function D(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function C(u){const m={};for(const v in u)m[v]=u[v];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(v in I)u[v]=I[v];for(let B=0;B<P.length;B++)v=P[B],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function x(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function b(u){f.setTimeout(()=>{throw u},0)}function R(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class rt{constructor(){this.h=this.g=null}add(m,v){const I=Ot.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Ot=new re(()=>new Lt,u=>u.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,te=!1,me=new rt,le=()=>{const u=f.Promise.resolve(void 0);Be=()=>{u.then(L)}};var L=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){b(v)}var m=Ot;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}te=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u})();function Re(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Se){e:{try{oe(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Re.aa.h.call(this)}}$(Re,fe);var De={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function We(u,m,v,I,M){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=M,this.key=++Fe,this.da=this.fa=!1}function Et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dr(u){this.src=u,this.g={},this.h=0}dr.prototype.add=function(u,m,v,I,M){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var ee=Fr(u,m,I,M);return-1<ee?(m=u[ee],v||(m.fa=!1)):(m=new We(m,this.src,B,!!I,M),m.fa=v,u.push(m)),m};function Cs(u,m){var v=m.type;if(v in u.g){var I=u.g[v],M=Array.prototype.indexOf.call(I,m,void 0),B;(B=0<=M)&&Array.prototype.splice.call(I,M,1),B&&(Et(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Fr(u,m,v,I){for(var M=0;M<u.length;++M){var B=u[M];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==I)return M}return-1}var bi="closure_lm_"+(1e6*Math.random()|0),Rs={};function Qo(u,m,v,I,M){if(Array.isArray(m)){for(var B=0;B<m.length;B++)Qo(u,m[B],v,I,M);return null}return v=Xo(v),u&&u[je]?u.K(m,v,y(I)?!!I.capture:!1,M):Jo(u,m,v,!1,I,M)}function Jo(u,m,v,I,M,B){if(!m)throw Error("Invalid event type");var ee=y(M)?!!M.capture:!!M,ze=ks(u);if(ze||(u[bi]=ze=new dr(u)),v=ze.add(m,v,I,ee,B),v.proxy)return v;if(I=xl(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Ae||(M=ee),M===void 0&&(M=!1),u.addEventListener(m.toString(),I,M);else if(u.attachEvent)u.attachEvent(pr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xl(){function u(v){return m.call(u.src,u.listener,v)}const m=Yo;return u}function Ps(u,m,v,I,M){if(Array.isArray(m))for(var B=0;B<m.length;B++)Ps(u,m[B],v,I,M);else I=y(I)?!!I.capture:!!I,v=Xo(v),u&&u[je]?(u=u.i,m=String(m).toString(),m in u.g&&(B=u.g[m],v=Fr(B,v,I,M),-1<v&&(Et(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete u.g[m],u.h--)))):u&&(u=ks(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Fr(m,v,I,M)),(v=-1<u?m[u]:null)&&fr(v))}function fr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[je])Cs(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(pr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=ks(m))?(Cs(v,u),v.h==0&&(v.src=null,m[bi]=null)):Et(u)}}}function pr(u){return u in Rs?Rs[u]:Rs[u]="on"+u}function Yo(u,m){if(u.da)u=!0;else{m=new Re(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&fr(u),u=v.call(I,m)}return u}function ks(u){return u=u[bi],u instanceof dr?u:null}var xs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xo(u){return typeof u=="function"?u:(u[xs]||(u[xs]=function(m){return u.handleEvent(m)}),u[xs])}function pt(){Q.call(this),this.i=new dr(this),this.M=this,this.F=null}$(pt,Q),pt.prototype[je]=!0,pt.prototype.removeEventListener=function(u,m,v,I){Ps(this,u,m,v,I)};function mt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var M=m;m=new fe(I,u),N(m,M)}if(M=!0,v)for(var B=v.length-1;0<=B;B--){var ee=m.g=v[B];M=mr(ee,I,!0,m)&&M}if(ee=m.g=u,M=mr(ee,I,!0,m)&&M,M=mr(ee,I,!1,m)&&M,v)for(B=0;B<v.length;B++)ee=m.g=v[B],M=mr(ee,I,!1,m)&&M}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)Et(v[I]);delete u.g[m],u.h--}}this.F=null},pt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},pt.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function mr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,B=0;B<m.length;++B){var ee=m[B];if(ee&&!ee.da&&ee.capture==v){var ze=ee.listener,gt=ee.ha||ee.src;ee.fa&&Cs(u.i,ee),M=ze.call(gt,I)!==!1&&M}}return M&&!I.defaultPrevented}function Zo(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function Ur(u){u.g=Zo(()=>{u.g=null,u.i&&(u.i=!1,Ur(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Mi extends Q{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ur(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(u){Q.call(this),this.h=u,this.g={}}$(ji,Q);var ea=[];function ta(u){Te(u.g,function(m,v){this.g.hasOwnProperty(v)&&fr(m)},u),u.g={}}ji.prototype.N=function(){ji.aa.N.call(this),ta(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var na=f.JSON.stringify,ra=f.JSON.parse,ia=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Fi(){}Fi.prototype.h=null;function Ns(u){return u.h||(u.h=u.i())}function Ds(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){fe.call(this,"d")}$(Gn,fe);function Vs(){fe.call(this,"c")}$(Vs,fe);var Kn={},sa=null;function Ui(){return sa=sa||new pt}Kn.La="serverreachability";function oa(u){fe.call(this,Kn.La,u)}$(oa,fe);function gr(u){const m=Ui();mt(m,new oa(m))}Kn.STAT_EVENT="statevent";function aa(u,m){fe.call(this,Kn.STAT_EVENT,u),this.stat=m}$(aa,fe);function it(u){const m=Ui();mt(m,new aa(m,u))}Kn.Ma="timingevent";function Os(u,m){fe.call(this,Kn.Ma,u),this.size=m}$(Os,fe);function Pn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function Bi(u,m,v,I,M,B){u.info(function(){if(u.g)if(B)for(var ee="",ze=B.split("&"),gt=0;gt<ze.length;gt++){var Ve=ze[gt].split("=");if(1<Ve.length){var wt=Ve[0];Ve=Ve[1];var ut=wt.split("_");ee=2<=ut.length&&ut[1]=="type"?ee+(wt+"="+Ve+"&"):ee+(wt+"=redacted&")}}else ee=null;else ee=B;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+m+`
`+v+`
`+ee})}function Ls(u,m,v,I,M,B,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+m+`
`+v+`
`+B+" "+ee})}function kn(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+sh(u,v)+(I?" "+I:"")})}function la(u,m){u.info(function(){return"TIMEOUT: "+m})}zi.prototype.info=function(){};function sh(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ee=1;ee<M.length;ee++)M[ee]=""}}}}return na(v)}catch{return m}}var bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function $i(){}$($i,Fi),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},xn=new $i;function Nn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dl}function Dl(){this.i=null,this.g="",this.h=!1}var ua={},Ms={};function js(u,m,v){u.L=1,u.v=Wr(an(m)),u.m=v,u.P=!0,ca(u,null)}function ca(u,m){u.F=Date.now(),He(u),u.A=an(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Gr(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Dl,u.g=Jl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Mi(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(ea[0]=M.toString()),M=ea);for(var B=0;B<M.length;B++){var ee=Qo(v,M[B],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),gr(),Bi(u.i,u.u,u.A,u.l,u.R,u.m)}Nn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Yt(u)==3?m.j():this.Y(u)},Nn.prototype.Y=function(u){try{if(u==this.g)e:{const ut=Yt(this.g);var m=this.g.Ba();const En=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||ga(this.g)))){this.J||ut!=4||m==7||(m==8||0>=En?gr(3):gr(2)),qi(this);var v=this.g.Z();this.X=v;t:if(Vl(this)){var I=ga(this.g);u="";var M=I.length,B=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),zr(this);var ee="";break t}this.h.i=new f.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(B&&m==M-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,Ls(this.i,this.u,this.A,this.l,this.R,ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,gt=this.g;if((ze=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(ze)){var Ve=ze;break t}}Ve=null}if(v=Ve)kn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ha(this,v);else{this.o=!1,this.s=3,it(12),vn(this),zr(this);break e}}if(this.P){v=!0;let un;for(;!this.J&&this.C<ee.length;)if(un=oh(this,ee),un==Ms){ut==4&&(this.s=4,it(14),v=!1),kn(this.i,this.l,null,"[Incomplete Response]");break}else if(un==ua){this.s=4,it(15),kn(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else kn(this.i,this.l,un,null),ha(this,un);if(Vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||ee.length!=0||this.h.h||(this.s=1,it(16),v=!1),this.o=this.o&&v,!v)kn(this.i,this.l,ee,"[Invalid Chunked Response]"),vn(this),zr(this);else if(0<ee.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),va(wt),wt.M=!0,it(11))}}else kn(this.i,this.l,ee,null),ha(this,ee);ut==4&&vn(this),this.o&&!this.J&&(ut==4?Qs(this.j,this):(this.o=!1,He(this)))}else qs(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),vn(this),zr(this)}}}catch{}finally{}};function Vl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function oh(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Ms:(v=Number(m.substring(v,I)),isNaN(v)?ua:(I+=1,I+v>m.length?Ms:(m=m.slice(I,I+v),u.C=I+v,m)))}Nn.prototype.cancel=function(){this.J=!0,vn(this)};function He(u){u.S=Date.now()+u.I,Ol(u,u.I)}function Ol(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pn(S(u.ba,u),m)}function qi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Nn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(la(this.i,this.A),this.L!=2&&(gr(),it(17)),vn(this),this.s=2,zr(this)):Ol(this,this.S-u)};function zr(u){u.j.G==0||u.J||Qs(u.j,u)}function vn(u){qi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ta(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ha(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||qt(v.h,u))){if(!u.K&&qt(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ks(v),bn(v);else break e;Gs(v),it(18)}}else v.za=M[1],0<v.za-v.T&&37500>M[2]&&v.F&&v.v==0&&!v.C&&(v.C=Pn(S(v.Za,v),6e3));if(1>=bl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else wr(v,11)}else if((u.K||v.g==u)&&Ks(v),!ie(m))for(M=v.Da.g.parse(m),m=0;m<M.length;m++){let Ve=M[m];if(v.T=Ve[0],Ve=Ve[1],v.G==2)if(Ve[0]=="c"){v.K=Ve[1],v.ia=Ve[2];const wt=Ve[3];wt!=null&&(v.la=wt,v.j.info("VER="+v.la));const ut=Ve[4];ut!=null&&(v.Aa=ut,v.j.info("SVER="+v.Aa));const En=Ve[5];En!=null&&typeof En=="number"&&0<En&&(I=1.5*En,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const un=u.g;if(un){const Yi=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var B=I.h;B.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(da(B,B.h),B.h=null))}if(I.D){const Ys=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(I.ya=Ys,qe(I.I,I.D,Ys))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ee=u;if(I.qa=Ql(I,I.J?I.ia:null,I.W),ee.K){Ml(I.h,ee);var ze=ee,gt=I.L;gt&&(ze.I=gt),ze.B&&(qi(ze),He(ze)),I.g=ee}else Ji(I);0<v.i.length&&Xn(v)}else Ve[0]!="stop"&&Ve[0]!="close"||wr(v,7);else v.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?wr(v,7):Pt(v):Ve[0]!="noop"&&v.l&&v.l.ta(Ve),v.v=0)}}gr(4)}catch{}}var Ll=class{constructor(u,m){this.g=u,this.map=m}};function Wi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bl(u){return u.h?1:u.g?u.g.size:0}function qt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function da(u,m){u.g?u.g.add(m):u.h=m}function Ml(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Wi.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return W(u.i)}function Fs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Us(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Br(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Us(u),I=Fs(u),M=I.length,B=0;B<M;B++)m.call(void 0,I[B],v&&v[B],u)}var Hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ah(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),M=null;if(0<=I){var B=u[v].substring(0,I);M=u[v].substring(I+1)}else B=u[v];m(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function yr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yr){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,$r(this,u.s),this.l=u.l;var m=u.i,v=new Qn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),qr(this,v),this.m=u.m}else u&&(m=String(u).match(Hi))?(this.h=!1,Gi(this,m[1]||"",!0),this.o=Ne(m[2]||""),this.g=Ne(m[3]||"",!0),$r(this,m[4]),this.l=Ne(m[5]||"",!0),qr(this,m[6]||"",!0),this.m=Ne(m[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}yr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Hr(m,zs,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Hr(m,zs,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Hr(v,v.charAt(0)=="/"?zl:Ul,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Hr(v,fa)),u.join("")};function an(u){return new yr(u)}function Gi(u,m,v){u.j=v?Ne(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function $r(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function qr(u,m,v){m instanceof Qn?(u.i=m,Jn(u.i,u.h)):(v||(m=Hr(m,Bl)),u.i=new Qn(m,u.h))}function qe(u,m,v){u.i.set(m,v)}function Wr(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ne(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Fl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zs=/[#\/\?@]/g,Ul=/[#\?:]/g,zl=/[#\?]/g,Bl=/[#\?@]/g,fa=/#/g;function Qn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rt(u){u.g||(u.g=new Map,u.h=0,u.i&&ah(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Qn.prototype,r.add=function(u,m){Rt(this),this.i=null,u=_n(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Dn(u,m){Rt(u),m=_n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Vn(u,m){return Rt(u),m=_n(u,m),u.g.has(m)}r.forEach=function(u,m){Rt(this),this.g.forEach(function(v,I){v.forEach(function(M){u.call(m,M,I,this)},this)},this)},r.na=function(){Rt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const M=u[I];for(let B=0;B<M.length;B++)v.push(m[I])}return v},r.V=function(u){Rt(this);let m=[];if(typeof u=="string")Vn(this,u)&&(m=m.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return Rt(this),this.i=null,u=_n(this,u),Vn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Gr(u,m,v){Dn(u,m),0<v.length&&(u.i=null,u.g.set(_n(u,m),W(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const B=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var M=B;ee[I]!==""&&(M+="="+encodeURIComponent(String(ee[I]))),u.push(M)}}return this.i=u.join("&")};function _n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Jn(u,m){m&&!u.j&&(Rt(u),u.i=null,u.g.forEach(function(v,I){var M=I.toLowerCase();I!=M&&(Dn(this,I),Gr(this,M,v))},u)),u.j=m}function lh(u,m){const v=new zi;if(f.Image){const I=new Image;I.onload=O(Jt,v,"TestLoadImage: loaded",!0,m,I),I.onerror=O(Jt,v,"TestLoadImage: error",!1,m,I),I.onabort=O(Jt,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=O(Jt,v,"TestLoadImage: timeout",!1,m,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function $l(u,m){const v=new zi,I=new AbortController,M=setTimeout(()=>{I.abort(),Jt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(B=>{clearTimeout(M),B.ok?Jt(v,"TestPingServer: ok",!0,m):Jt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Jt(v,"TestPingServer: error",!1,m)})}function Jt(u,m,v,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(v)}catch{}}function uh(){this.g=new ia}function ql(u,m,v){const I=v||"";try{Br(u,function(M,B){let ee=M;y(M)&&(ee=na(M)),m.push(I+B+"="+encodeURIComponent(ee))})}catch(M){throw m.push(I+"type="+encodeURIComponent("_badmap")),M}}function vr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(vr,Fi),vr.prototype.g=function(){return new Ki(this.l,this.j)},vr.prototype.i=(function(u){return function(){return u}})({});function Ki(u,m){pt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Ki,pt),r=Ki.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Ln(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?On(this):Ln(this),this.readyState==3&&Wl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,On(this))},r.Qa=function(u){this.g&&(this.response=u,On(this))},r.ga=function(){this.g&&On(this)};function On(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ln(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function _r(u){let m="";return Te(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Kr(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=_r(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):qe(u,m,v))}function Je(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Je,pt);var ch=/^https?$/i,pa=["POST","PUT"];r=Je.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?Ns(this.o):Ns(xn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Qi(this,B);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)v.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const B of I.keys())v.set(B,I.get(B));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(pa,m,void 0))||I||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of v)this.g.setRequestHeader(B,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Qi(this,B)}};function Qi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Bs(u),ln(u)}function Bs(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),ln(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),Je.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ma(this):this.bb())},r.bb=function(){ma(this)};function ma(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)Zo(u.Ea,0,u);else if(mt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ee===0){var M=String(u.D).match(Hi)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),I=!ch.test(M?M.toLowerCase():"")}v=I}if(v)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var B=2<Yt(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Bs(u)}}finally{ln(u)}}}}function ln(u,m){if(u.g){$s(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||mt(u,"ready");try{v.onreadystatechange=I}catch{}}}function $s(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ra(m)}};function ga(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(u){const m={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(ie(u[I]))continue;var v=x(u[I]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=m[M]||[];m[M]=B,B.push(v)}D(m,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ya(u){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,u),this.cb=Yn("retryDelaySeedMs",1e4,u),this.Wa=Yn("forwardChannelMaxRetries",2,u),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Wi(u&&u.concurrentRequestLimit),this.Da=new uh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ya.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,I){it(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Ql(this,null,this.W),Xn(this)};function Pt(u){if(Ws(u),u.G==3){var m=u.U++,v=an(u.I);if(qe(v,"SID",u.K),qe(v,"RID",m),qe(v,"TYPE","terminate"),Er(u,v),m=new Nn(u,u.j,m),m.L=2,m.v=Wr(an(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.v,v=!0),v||(m.g=Jl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}Kl(u)}function bn(u){u.g&&(va(u),u.g.cancel(),u.g=null)}function Ws(u){bn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Ks(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Xn(u){if(!on(u.h)&&!u.s){u.s=!0;var m=u.Ga;Be||le(),te||(Be(),te=!0),me.add(m,u),u.B=0}}function hh(u,m){return bl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pn(S(u.Ga,u,m),Gl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Nn(this,this.j,u);let B=this.o;if(this.S&&(B?(B=C(B),N(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Qr(this,M,m),v=an(this.I),qe(v,"RID",u),qe(v,"CVER",22),this.D&&qe(v,"X-HTTP-Session-Id",this.D),Er(this,v),B&&(this.O?m="headers="+encodeURIComponent(String(_r(B)))+"&"+m:this.m&&Kr(v,this.m,B)),da(this.h,M),this.Ua&&qe(v,"TYPE","init"),this.P?(qe(v,"$req",m),qe(v,"SID","null"),M.T=!0,js(M,v,null)):js(M,v,m),this.G=2}}else this.G==3&&(u?Hs(this,u):this.i.length==0||on(this.h)||Hs(this))};function Hs(u,m){var v;m?v=m.l:v=u.U++;const I=an(u.I);qe(I,"SID",u.K),qe(I,"RID",v),qe(I,"AID",u.T),Er(u,I),u.m&&u.o&&Kr(I,u.m,u.o),v=new Nn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Qr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),da(u.h,v),js(v,I,m)}function Er(u,m){u.H&&Te(u.H,function(v,I){qe(m,I,v)}),u.l&&Br({},function(v,I){qe(m,I,v)})}function Qr(u,m,v){v=Math.min(u.i.length,v);var I=u.l?S(u.l.Na,u.l,u):null;e:{var M=u.i;let B=-1;for(;;){const ee=["count="+v];B==-1?0<v?(B=M[0].g,ee.push("ofs="+B)):B=0:ee.push("ofs="+B);let ze=!0;for(let gt=0;gt<v;gt++){let Ve=M[gt].g;const wt=M[gt].map;if(Ve-=B,0>Ve)B=Math.max(0,M[gt].g-100),ze=!1;else try{ql(wt,ee,"req"+Ve+"_")}catch{I&&I(wt)}}if(ze){I=ee.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Ji(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Be||le(),te||(Be(),te=!0),me.add(m,u),u.v=0}}function Gs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pn(S(u.Fa,u),Gl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),bn(this),Hl(this))};function va(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Hl(u){u.g=new Nn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=an(u.qa);qe(m,"RID","rpc"),qe(m,"SID",u.K),qe(m,"AID",u.T),qe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(m,"TO",u.ja),qe(m,"TYPE","xmlhttp"),Er(u,m),u.m&&u.o&&Kr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Wr(an(m)),v.m=null,v.P=!0,ca(v,u)}r.Za=function(){this.C!=null&&(this.C=null,bn(this),Gs(this),it(19))};function Ks(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Qs(u,m){var v=null;if(u.g==m){Ks(u),va(u),u.g=null;var I=2}else if(qt(u.h,m))v=m.D,Ml(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;I=Ui(),mt(I,new Os(I,v)),Xn(u)}else Ji(u);else if(M=m.s,M==3||M==0&&0<m.X||!(I==1&&hh(u,m)||I==2&&Gs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),M){case 1:wr(u,5);break;case 4:wr(u,10);break;case 3:wr(u,6);break;default:wr(u,2)}}}function Gl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function wr(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),I=u.Xa;const M=!I;I=new yr(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Gi(I,"https"),Wr(I),M?lh(I.toString(),v):$l(I.toString(),v)}else it(2);u.G=0,u.l&&u.l.sa(m),Kl(u),Ws(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Kl(u){if(u.G=0,u.ka=[],u.l){const m=jl(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ka,m),F(u.ka,u.i),u.h.i.length=0,W(u.i),u.i.length=0),u.l.ra()}}function Ql(u,m,v){var I=v instanceof yr?an(v):new yr(v);if(I.g!="")m&&(I.g=m+"."+I.g),$r(I,I.s);else{var M=f.location;I=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var B=new yr(null);I&&Gi(B,I),m&&(B.g=m),M&&$r(B,M),v&&(B.l=v),I=B}return v=u.D,m=u.ya,v&&m&&qe(I,v,m),qe(I,"VER",u.la),Er(u,I),I}function Jl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Je(new vr({eb:v})):new Je(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _a(){}r=_a.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Js(){}Js.prototype.g=function(u,m){return new Wt(u,m)};function Wt(u,m){pt.call(this),this.g=new ya(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ie(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ie(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Zn(this)}$(Wt,pt),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Pt(this.g)},Wt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=na(u),u=v);m.i.push(new Ll(m.Ya++,u)),m.G==3&&Xn(m)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Pt(this.g),delete this.g,Wt.aa.N.call(this)};function Yl(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}$(Yl,Gn);function Xl(){Vs.call(this),this.status=1}$(Xl,Vs);function Zn(u){this.g=u}$(Zn,_a),Zn.prototype.ua=function(){mt(this.g,"a")},Zn.prototype.ta=function(u){mt(this.g,new Yl(u))},Zn.prototype.sa=function(u){mt(this.g,new Xl)},Zn.prototype.ra=function(){mt(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,$_=function(){return new Js},B_=function(){return Ui()},z_=Kn,af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,nc=bs,Nl.COMPLETE="complete",U_=Nl,Ds.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ha=Ds,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,F_=Je}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore",Ny="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Df("@firebase/firestore");function Eo(){return vs.logLevel}function ae(r,...e){if(vs.logLevel<=ke.DEBUG){const t=e.map(qf);vs.debug(`Firestore (${Wo}): ${r}`,...t)}}function Or(r,...e){if(vs.logLevel<=ke.ERROR){const t=e.map(qf);vs.error(`Firestore (${Wo}): ${r}`,...t)}}function Ai(r,...e){if(vs.logLevel<=ke.WARN){const t=e.map(qf);vs.warn(`Firestore (${Wo}): ${r}`,...t)}}function qf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,q_(r,i,t)}function q_(r,e,t){let i=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Or(i),new Error(i)}function Le(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||q_(e,o,i)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class M1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Le(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ar,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ar)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Le(typeof i.accessToken=="string",31837,{l:i}),new W_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class F1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new F1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Le(this.o===void 0,3512);const i=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Dy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Le(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Dy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=B1(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ce(r,e){return r<e?-1:r>e?1:0}function lf(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ce(i,o);{const l=H_(),h=$1(l.encode(Vy(r,t)),l.encode(Vy(e,t)));return h!==0?h:Ce(i,o)}}t+=i>65535?2:1}return Ce(r.length,e.length)}function Vy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function $1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Ce(r[t],e[t]);return Ce(r.length,e.length)}function Vo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="__name__";class ir{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ir.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ce(e.length,t.length)}static compareSegments(e,t){const i=ir.isNumericId(e),o=ir.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ir.extractNumericId(e).compare(ir.extractNumericId(t)):lf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}}class $e extends ir{construct(e,t,i){return new $e(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new $e(t)}static emptyPath(){return new $e([])}}const q1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends ir{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return q1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oy}static keyField(){return new Dt([Oy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ne(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ne(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ne(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe($e.fromString(e))}static fromName(e){return new pe($e.fromString(e).popFirst(5))}static empty(){return new pe($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(r,e,t){if(!t)throw new ne(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function W1(r,e,t,i){if(e===!0&&i===!0)throw new ne(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ly(r){if(!pe.isDocumentKey(r))throw new ne(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function by(r){if(pe.isDocumentKey(r))throw new ne(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function K_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge(12329,{type:typeof r})}function mn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zc(r);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(r,e){const t={typeString:r};return e&&(t.value=e),t}function El(r,e){if(!K_(r))throw new ne(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ne(H.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=-62135596800,jy=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jy);return new Ue(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<My)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jy}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-My;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:ft("string",Ue._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new Ue(0,0))}static max(){return new _e(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=-1;function H1(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=_e.fromTimestamp(i===1e9?new Ue(t+1,0):new Ue(t,i));return new Ci(o,pe.empty(),e)}function G1(r){return new Ci(r.readTime,r.key,ll)}class Ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ci(_e.min(),pe.empty(),ll)}static max(){return new Ci(_e.max(),pe.empty(),ll)}}function K1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:Ce(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==Q1)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{h[y]=_,++f,f===l&&i(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new G(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function Y1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Bc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf=-1;function wl(r){return r==null}function vc(r){return r===0&&1/r==-1/0}function X1(r){return typeof r=="number"&&Number.isInteger(r)&&!vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="";function Z1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Fy(e)),e=eC(r.get(t),e);return Fy(e)}function eC(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Q_:t+="";break;default:t+=l}}return t}function Fy(r){return r+Q_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Oi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function J_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Nt.RED,this.left=o??Nt.EMPTY,this.right=l??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Nt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new pn([])}unionWith(e){let t=new _t(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Y_("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const tC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(r){if(Le(!!r,39018),typeof r=="string"){let e=0;const t=tC.exec(r);if(Le(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(r.seconds),nanos:ot(r.nanos)}}function ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Pi(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="server_timestamp",Z_="__type__",eE="__previous_value__",tE="__local_write_time__";function Gf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Z_])===null||t===void 0?void 0:t.stringValue)===X_}function $c(r){const e=r.mapValue.fields[eE];return Gf(e)?$c(e):e}function ul(r){const e=Ri(r.mapValue.fields[tE].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,i,o,l,h,f,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const _c="(default)";class cl{constructor(e,t){this.projectId=e,this.database=t||_c}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===_c}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="__type__",rC="__max__",Qu={mapValue:{}},rE="__vector__",Ec="value";function ki(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Gf(r)?4:sC(r)?9007199254740991:iC(r)?10:11:ge(28295,{value:r})}function hr(r,e){if(r===e)return!0;const t=ki(r);if(t!==ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ul(r).isEqual(ul(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ri(o.timestampValue),f=Ri(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Pi(o.bytesValue).isEqual(Pi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ot(o.geoPointValue.latitude)===ot(l.geoPointValue.latitude)&&ot(o.geoPointValue.longitude)===ot(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ot(o.integerValue)===ot(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ot(o.doubleValue),f=ot(l.doubleValue);return h===f?vc(h)===vc(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Uy(h)!==Uy(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!hr(h[p],f[p])))return!1;return!0})(r,e);default:return ge(52216,{left:r})}}function hl(r,e){return(r.values||[]).find((t=>hr(t,e)))!==void 0}function Oo(r,e){if(r===e)return 0;const t=ki(r),i=ki(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ot(l.integerValue||l.doubleValue),p=ot(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return By(r.timestampValue,e.timestampValue);case 4:return By(ul(r),ul(e));case 5:return lf(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Pi(l),p=Pi(h);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const _=Ce(f[y],p[y]);if(_!==0)return _}return Ce(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Ce(ot(l.latitude),ot(h.latitude));return f!==0?f:Ce(ot(l.longitude),ot(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return $y(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,p,y,_;const T=l.fields||{},S=h.fields||{},O=(f=T[Ec])===null||f===void 0?void 0:f.arrayValue,$=(p=S[Ec])===null||p===void 0?void 0:p.arrayValue,W=Ce(((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0,((_=$==null?void 0:$.values)===null||_===void 0?void 0:_.length)||0);return W!==0?W:$y(O,$)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Qu.mapValue&&h===Qu.mapValue)return 0;if(l===Qu.mapValue)return 1;if(h===Qu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const S=lf(p[T],_[T]);if(S!==0)return S;const O=Oo(f[p[T]],y[_[T]]);if(O!==0)return O}return Ce(p.length,_.length)})(r.mapValue,e.mapValue);default:throw ge(23264,{le:t})}}function By(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ce(r,e);const t=Ri(r),i=Ri(e),o=Ce(t.seconds,i.seconds);return o!==0?o:Ce(t.nanos,i.nanos)}function $y(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Oo(t[o],i[o]);if(l)return l}return Ce(t.length,i.length)}function Lo(r){return uf(r)}function uf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ri(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Pi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return pe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=uf(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${uf(t.fields[h])}`;return o+"}"})(r.mapValue):ge(61005,{value:r})}function rc(r){switch(ki(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$c(r);return e?16+rc(e):16;case 5:return 2*r.stringValue.length;case 6:return Pi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+rc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Oi(i.fields,((l,h)=>{o+=l.length+rc(h)})),o})(r.mapValue);default:throw ge(13486,{value:r})}}function qy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function cf(r){return!!r&&"integerValue"in r}function Kf(r){return!!r&&"arrayValue"in r}function Wy(r){return!!r&&"nullValue"in r}function Hy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ic(r){return!!r&&"mapValue"in r}function iC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[nE])===null||t===void 0?void 0:t.stringValue)===rE}function Xa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Oi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Xa(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function sC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===rC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ic(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Xa(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ic(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ic(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Oi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Qt(Xa(this.value))}}function iE(r){const e=[];return Oi(r.fields,((t,i)=>{const o=new Dt([t]);if(ic(i)){const l=iE(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ct(e,0,_e.min(),_e.min(),_e.min(),Qt.empty(),0)}static newFoundDocument(e,t,i,o){return new Ct(e,1,t,_e.min(),i,o,0)}static newNoDocument(e,t){return new Ct(e,2,t,_e.min(),_e.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new Ct(e,3,t,_e.min(),_e.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.position=e,this.inclusive=t}}function Gy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=pe.comparator(pe.fromName(h.referenceValue),t.key):i=Oo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ky(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!hr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function oC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class dt extends sE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lC(e,t,i):t==="array-contains"?new hC(e,i):t==="in"?new dC(e,i):t==="not-in"?new fC(e,i):t==="array-contains-any"?new pC(e,i):new dt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new uC(e,i):new cC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&ki(this.value)===ki(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends sE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Hn(e,t)}matches(e){return oE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function oE(r){return r.op==="and"}function aE(r){return aC(r)&&oE(r)}function aC(r){for(const e of r.filters)if(e instanceof Hn)return!1;return!0}function hf(r){if(r instanceof dt)return r.field.canonicalString()+r.op.toString()+Lo(r.value);if(aE(r))return r.filters.map((e=>hf(e))).join(",");{const e=r.filters.map((t=>hf(t))).join(",");return`${r.op}(${e})`}}function lE(r,e){return r instanceof dt?(function(i,o){return o instanceof dt&&i.op===o.op&&i.field.isEqual(o.field)&&hr(i.value,o.value)})(r,e):r instanceof Hn?(function(i,o){return o instanceof Hn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&lE(h,o.filters[f])),!0):!1})(r,e):void ge(19439)}function uE(r){return r instanceof dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`})(r):r instanceof Hn?(function(t){return t.op.toString()+" {"+t.getFilters().map(uE).join(" ,")+"}"})(r):"Filter"}class lC extends dt{constructor(e,t,i){super(e,t,i),this.key=pe.fromName(i.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class uC extends dt{constructor(e,t){super(e,"in",t),this.keys=cE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cC extends dt{constructor(e,t){super(e,"not-in",t),this.keys=cE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function cE(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>pe.fromName(i.referenceValue)))}class hC extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&hl(t.arrayValue,this.value)}}class dC extends dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}}class fC extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hl(this.value.arrayValue,t)}}class pC extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>hl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function Qy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new mC(r,e,t,i,o,l,h)}function Qf(r){const e=Ie(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>hf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Lo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Lo(i))).join(",")),e.Pe=t}return e.Pe}function Jf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!oC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!lE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ky(r.startAt,e.startAt)&&Ky(r.endAt,e.endAt)}function df(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function gC(r,e,t,i,o,l,h,f){return new Tl(r,e,t,i,o,l,h,f)}function qc(r){return new Tl(r)}function Jy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function hE(r){return r.collectionGroup!==null}function Za(r){const e=Ie(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new _t(Dt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Tc(l,i))})),t.has(Dt.keyField().canonicalString())||e.Te.push(new Tc(Dt.keyField(),i))}return e.Te}function lr(r){const e=Ie(r);return e.Ie||(e.Ie=yC(e,Za(r))),e.Ie}function yC(r,e){if(r.limitType==="F")return Qy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)}));const t=r.endAt?new wc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new wc(r.startAt.position,r.startAt.inclusive):null;return Qy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function ff(r,e){const t=r.filters.concat([e]);return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function pf(r,e,t){return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wc(r,e){return Jf(lr(r),lr(e))&&r.limitType===e.limitType}function dE(r){return`${Qf(lr(r))}|lt:${r.limitType}`}function wo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>uE(o))).join(", ")}]`),wl(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Lo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Lo(o))).join(",")),`Target(${i})`})(lr(r))}; limitType=${r.limitType})`}function Hc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):pe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Za(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,p){const y=Gy(h,f,p);return h.inclusive?y<=0:y<0})(i.startAt,Za(i),o)||i.endAt&&!(function(h,f,p){const y=Gy(h,f,p);return h.inclusive?y>=0:y>0})(i.endAt,Za(i),o))})(r,e)}function vC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fE(r){return(e,t)=>{let i=!1;for(const o of Za(r)){const l=_C(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function _C(r,e,t){const i=r.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Oo(p,y):ge(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ge(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return J_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new et(pe.comparator);function Lr(){return EC}const pE=new et(pe.comparator);function Ga(...r){let e=pE;for(const t of r)e=e.insert(t.key,t);return e}function mE(r){let e=pE;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fs(){return el()}function gE(){return el()}function el(){return new Ts((r=>r.toString()),((r,e)=>r.isEqual(e)))}const wC=new et(pe.comparator),TC=new _t(pe.comparator);function xe(...r){let e=TC;for(const t of r)e=e.add(t);return e}const IC=new _t(Ce);function SC(){return IC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function yE(r){return{integerValue:""+r}}function AC(r,e){return X1(e)?yE(e):Yf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function CC(r,e,t){return r instanceof Ic?(function(o,l){const h={fields:{[Z_]:{stringValue:X_},[tE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Gf(l)&&(l=$c(l)),l&&(h.fields[eE]=l),{mapValue:h}})(t,e):r instanceof dl?_E(r,e):r instanceof fl?EE(r,e):(function(o,l){const h=vE(o,l),f=Yy(h)+Yy(o.Ee);return cf(h)&&cf(o.Ee)?yE(f):Yf(o.serializer,f)})(r,e)}function RC(r,e,t){return r instanceof dl?_E(r,e):r instanceof fl?EE(r,e):t}function vE(r,e){return r instanceof Sc?(function(i){return cf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Ic extends Gc{}class dl extends Gc{constructor(e){super(),this.elements=e}}function _E(r,e){const t=wE(e);for(const i of r.elements)t.some((o=>hr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class fl extends Gc{constructor(e){super(),this.elements=e}}function EE(r,e){let t=wE(e);for(const i of r.elements)t=t.filter((o=>!hr(o,i)));return{arrayValue:{values:t}}}class Sc extends Gc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Yy(r){return ot(r.integerValue||r.doubleValue)}function wE(r){return Kf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function PC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof dl&&o instanceof dl||i instanceof fl&&o instanceof fl?Vo(i.elements,o.elements,hr):i instanceof Sc&&o instanceof Sc?hr(i.Ee,o.Ee):i instanceof Ic&&o instanceof Ic})(r.transform,e.transform)}class kC{constructor(e,t){this.version=e,this.transformResults=t}}class Bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Kc{}function TE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qc(r.key,Bt.none()):new Il(r.key,r.data,Bt.none());{const t=r.data,i=Qt.empty();let o=new _t(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Li(r.key,i,new pn(o.toArray()),Bt.none())}}function xC(r,e,t){r instanceof Il?(function(o,l,h){const f=o.value.clone(),p=Zy(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Li?(function(o,l,h){if(!sc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Zy(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(IE(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function tl(r,e,t,i){return r instanceof Il?(function(l,h,f,p){if(!sc(l.precondition,h))return f;const y=l.value.clone(),_=ev(l.fieldTransforms,p,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof Li?(function(l,h,f,p){if(!sc(l.precondition,h))return f;const y=ev(l.fieldTransforms,p,h),_=h.data;return _.setAll(IE(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,h,f){return sc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function NC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=vE(i.transform,o||null);l!=null&&(t===null&&(t=Qt.empty()),t.set(i.field,l))}return t||null}function Xy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Vo(i,o,((l,h)=>PC(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Il extends Kc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Li extends Kc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function IE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Zy(r,e,t){const i=new Map;Le(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,RC(h,f,t[o]))}return i}function ev(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,CC(l,h,e))}return i}class Qc extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SE extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&xC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=gE();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=TE(h,f);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(_e.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xe())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,i)=>Xy(t,i)))&&Vo(this.baseMutations,e.baseMutations,((t,i)=>Xy(t,i)))}}class Xf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Le(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return wC})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Xf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Oe;function AE(r){switch(r){case H.OK:return ge(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ge(15467,{code:r})}}function CE(r){if(r===void 0)return Or("GRPC error has no .code"),H.UNKNOWN;switch(r){case ht.OK:return H.OK;case ht.CANCELLED:return H.CANCELLED;case ht.UNKNOWN:return H.UNKNOWN;case ht.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case ht.INTERNAL:return H.INTERNAL;case ht.UNAVAILABLE:return H.UNAVAILABLE;case ht.UNAUTHENTICATED:return H.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case ht.NOT_FOUND:return H.NOT_FOUND;case ht.ALREADY_EXISTS:return H.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return H.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case ht.ABORTED:return H.ABORTED;case ht.OUT_OF_RANGE:return H.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return H.UNIMPLEMENTED;case ht.DATA_LOSS:return H.DATA_LOSS;default:return ge(39323,{code:r})}}(Oe=ht||(ht={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Ti([4294967295,4294967295],0);function tv(r){const e=H_().encode(r),t=new j_;return t.update(e),new Uint8Array(t.digest())}function nv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ti([t,i],0),new Ti([o,l],0)]}class Zf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(i<0)throw new Ka(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ti.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ti.fromNumber(i)));return o.compare(LC)===1&&(o=new Ti([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=tv(e),[i,o]=nv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Zf(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.fe===0)return;const t=tv(e),[i,o]=nv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Jc(_e.min(),o,new et(Ce),Lr(),xe())}}class Sl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Sl(i,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class RE{constructor(e,t){this.targetId=e,this.De=t}}class PE{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class rv{constructor(){this.ve=0,this.Ce=iv(),this.Fe=Vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=xe(),t=xe(),i=xe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ge(38017,{changeType:l})}})),new Sl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=iv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bC{constructor(e){this.We=e,this.Ge=new Map,this.ze=Lr(),this.je=Ju(),this.Je=Ju(),this.He=new et(Ce)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(df(l))if(i===0){const h=new pe(l.path);this.Xe(t,h,Ct.newNoDocument(h,_e.min()))}else Le(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),p=f?this.ut(f,e,h):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Pi(i).toUint8Array()}catch(p){if(p instanceof Y_)return Ai("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Zf(h,o,l)}catch(p){return Ai(p instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const f=this.st(h);if(f){if(l.current&&df(f.target)){const p=new pe(f.target.path);this.Tt(p).has(h)||this.It(h,p)||this.Xe(h,p,Ct.newNoDocument(p,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=xe();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new Jc(e,t,this.He,this.ze,i);return this.ze=Lr(),this.je=Ju(),this.Je=Ju(),this.He=new et(Ce),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new rv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _t(Ce),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _t(Ce),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new rv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ju(){return new et(pe.comparator)}function iv(){return new et(pe.comparator)}const MC={asc:"ASCENDING",desc:"DESCENDING"},jC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FC={and:"AND",or:"OR"};class UC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mf(r,e){return r.useProto3Json||wl(e)?e:{value:e}}function Ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zC(r,e){return Ac(r,e.toTimestamp())}function gn(r){return Le(!!r,49232),_e.fromTimestamp((function(t){const i=Ri(t);return new Ue(i.seconds,i.nanos)})(r))}function ep(r,e){return gf(r,e).canonicalString()}function gf(r,e){const t=(function(o){return new $e(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function xE(r){const e=$e.fromString(r);return Le(bE(e),10190,{key:e.toString()}),e}function Cc(r,e){return ep(r.databaseId,e.path)}function nl(r,e){const t=xE(e);if(t.get(1)!==r.databaseId.projectId)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(DE(t))}function NE(r,e){return ep(r.databaseId,e)}function BC(r){const e=xE(r);return e.length===4?$e.emptyPath():DE(e)}function yf(r){return new $e(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function DE(r){return Le(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function sv(r,e,t){return{name:Cc(r,e),fields:t.value.mapValue.fields}}function $C(r,e){return"found"in e?(function(i,o){Le(!!o.found,43571),o.found.name,o.found.updateTime;const l=nl(i,o.found.name),h=gn(o.found.updateTime),f=o.found.createTime?gn(o.found.createTime):_e.min(),p=new Qt({mapValue:{fields:o.found.fields}});return Ct.newFoundDocument(l,h,f,p)})(r,e):"missing"in e?(function(i,o){Le(!!o.missing,3894),Le(!!o.readTime,22933);const l=nl(i,o.missing),h=gn(o.readTime);return Ct.newNoDocument(l,h)})(r,e):ge(7234,{result:e})}function qC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ge(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(Le(_===void 0||typeof _=="string",58123),Vt.fromBase64String(_||"")):(Le(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Vt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const _=y.code===void 0?H.UNKNOWN:CE(y.code);return new ne(_,y.message||"")})(h);t=new PE(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=nl(r,i.document.name),l=gn(i.document.updateTime),h=i.document.createTime?gn(i.document.createTime):_e.min(),f=new Qt({mapValue:{fields:i.document.fields}}),p=Ct.newFoundDocument(o,l,h,f),y=i.targetIds||[],_=i.removedTargetIds||[];t=new oc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=nl(r,i.document),l=i.readTime?gn(i.readTime):_e.min(),h=Ct.newNoDocument(o,l),f=i.removedTargetIds||[];t=new oc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=nl(r,i.document),l=i.removedTargetIds||[];t=new oc([],l,o,null)}else{if(!("filter"in e))return ge(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new OC(o,l),f=i.targetId;t=new RE(f,h)}}return t}function VE(r,e){let t;if(e instanceof Il)t={update:sv(r,e.key,e.value)};else if(e instanceof Qc)t={delete:Cc(r,e.key)};else if(e instanceof Li)t={update:sv(r,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof SE))return ge(16599,{Rt:e.type});t={verify:Cc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof Ic)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof dl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof fl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Sc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw ge(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:zC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(r,e.precondition)),t}function WC(r,e){return r&&r.length>0?(Le(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?gn(o.updateTime):gn(l);return h.isEqual(_e.min())&&(h=gn(l)),new kC(h,o.transformResults||[])})(t,e)))):[]}function HC(r,e){return{documents:[NE(r,e.path)]}}function GC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=NE(r,o);const l=(function(y){if(y.length!==0)return LE(Hn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((_=>(function(S){return{field:To(S.field),direction:JC(S.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=mf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function KC(r){let e=BC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Le(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=OE(T);return S instanceof Hn&&aE(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((S=>(function($){return new Tc(Io($.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,wl(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,O=T.values||[];return new wc(O,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const S=!T.before,O=T.values||[];return new wc(O,S)})(t.endAt)),gC(e,o,h,l,f,"F",p,y)}function QC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Io(t.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return dt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return dt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(r):r.fieldFilter!==void 0?(function(t){return dt.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Hn.create(t.compositeFilter.filters.map((i=>OE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(r):ge(30097,{filter:r})}function JC(r){return MC[r]}function YC(r){return jC[r]}function XC(r){return FC[r]}function To(r){return{fieldPath:r.canonicalString()}}function Io(r){return Dt.fromServerFormat(r.fieldPath)}function LE(r){return r instanceof dt?(function(t){if(t.op==="=="){if(Hy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(Wy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(Wy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:YC(t.op),value:t.value}}})(r):r instanceof Hn?(function(t){const i=t.getFilters().map((o=>LE(o)));return i.length===1?i[0]:{compositeFilter:{op:XC(t.op),filters:i}}})(r):ge(54877,{filter:r})}function ZC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,i,o,l=_e.min(),h=_e.min(),f=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.gt=e}}function tR(r){const e=KC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.Dn=new rR}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ci.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class rR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new _t($e.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new _t($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ME=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(ME,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new bo(0)}static ur(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="LruGarbageCollector",iR=1048576;function lv([r,e],[t,i]){const o=Ce(r,t);return o===0?Ce(e,i):o}class sR{constructor(e){this.Tr=e,this.buffer=new _t(lv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();lv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ae(av,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?ae(av,"Ignoring IndexedDB error during garbage collection: ",t):await Ho(t)}await this.Rr(3e5)}))}}class aR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Bc.ue);const i=new sR(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(ov)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ov):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),Eo()<=ke.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function lR(r,e){return new aR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.changes=new Ts((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&tl(i.mutation,o,pn.empty(),Ue.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,xe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=xe()){const o=fs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ga();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=fs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,xe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Lr();const h=el(),f=(function(){return el()})();return t.forEach(((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Li)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),tl(_.mutation,y,_.mutation.getFieldMask(),Ue.now())):h.set(y.key,pn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>h.set(y,_))),t.forEach(((y,_)=>{var T;return f.set(y,new cR(_,(T=h.get(y))!==null&&T!==void 0?T:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=el();let o=new et(((h,f)=>h-f)),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||pn.empty();_=f.applyToLocalView(y,_),i.set(p,_);const T=(o.get(f.batchId)||xe()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,_=p.value,T=gE();_.forEach((S=>{if(!l.has(S)){const O=TE(t.get(S),i.get(S));O!==null&&T.set(S,O),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return G.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(fs());let f=ll,p=l;return h.next((y=>G.forEach(y,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?G.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,xe()))).next((_=>({batchId:f,changes:mE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((i=>{let o=Ga();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ga();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(p=>{const y=(function(T,S){return new Tl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,Ct.newInvalidDocument(_)))}));let f=Ga();return h.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&tl(_.mutation,y,pn.empty(),Ue.now()),Hc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:gn(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:tR(o.bundledQuery),readTime:gn(o.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.overlays=new et(pe.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fs();return G.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=fs(),l=t.length+1,h=new pe(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new et(((y,_)=>y-_));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=fs(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=fs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return G.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new VC(t,i));let l=this.kr.get(t);l===void 0&&(l=xe(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.qr=new _t(At.Qr),this.$r=new _t(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new At(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new At(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new pe(new $e([])),i=new At(t,e),o=new At(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new pe(new $e([])),i=new At(t,e),o=new At(t,e+1);let l=xe();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new At(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Ce(e.Hr,t.Hr)}static Ur(e,t){return Ce(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _t(At.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new DC(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new At(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Hf:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new At(t,0),o=new At(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _t(Ce);return t.forEach((o=>{const l=new At(o,0),h=new At(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(f=>{i=i.add(f.Hr)}))})),G.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;pe.isDocumentKey(l)||(l=l.child(""));const h=new At(new pe(l),0);let f=new _t(Ce);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Hr)),!0)}),h),G.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Le(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return G.forEach(t.mutations,(o=>{const l=new At(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new At(t,0),o=this.Yr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.ni=e,this.docs=(function(){return new et(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let i=Lr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ct.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Lr();const h=t.path,f=new pe(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||K1(G1(_),i)<=0||(o.has(_.key)||Hc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ge(9500)}ri(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new yR(this)}getSize(e){return G.resolve(this.size)}}class yR extends uR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.persistence=e,this.ii=new Ts((t=>Qf(t)),Jf),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.si=0,this.oi=new tp,this.targetCount=0,this._i=bo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new bo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),G.waitFor(l).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t){this.ai={},this.overlays={},this.ui=new Bc(0),this.ci=!1,this.ci=!0,this.li=new pR,this.referenceDelegate=e(this),this.hi=new vR(this),this.indexManager=new nR,this.remoteDocumentCache=(function(o){return new gR(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new eR(t),this.Ti=new dR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new mR(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const o=new _R(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return G.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class _R extends J1{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Ai=new tp,this.Ri=null}static Vi(e){return new np(e)}get mi(){if(this.Ri)return this.Ri;throw ge(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(i=>{const o=pe.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,_e.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Rc{constructor(e,t){this.persistence=e,this.gi=new Ts((i=>Z1(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=lR(this,t)}static Vi(e,t){return new Rc(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return G.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?G.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((f=>{f||(i++,l.removeEntry(h,_e.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rc(e.data.value)),t}Sr(e,t,i){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new rp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return rI()?8:Y1($t())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new ER;return this.ws(e,t,h).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Eo()<=ke.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Eo()<=ke.DEBUG&&ae("QueryEngine","Query:",wo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Eo()<=ke.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):G.resolve())}ps(e,t){if(Jy(t))return G.resolve(null);let i=lr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=pf(t,null,"F"),i=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=xe(...l);return this.gs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,f);return this.Ds(t,y,h,p.readTime)?this.ps(e,pf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return Jy(t)||o.isEqual(_e.min())?G.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?G.resolve(null):(Eo()<=ke.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wo(t)),this.vs(e,h,t,H1(o,ll)).next((f=>f)))}))}bs(e,t){let i=new _t(fE(e));return t.forEach(((o,l)=>{Hc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Eo()<=ke.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",wo(t)),this.gs.getDocumentsMatchingQuery(e,t,Ci.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="LocalStore",TR=3e8;class IR{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new et(Ce),this.Ms=new Ts((l=>Qf(l)),Jf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function SR(r,e,t,i){return new IR(r,e,t,i)}async function FE(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let p=xe();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function AR(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,_){const T=y.batch,S=T.keys();let O=G.resolve();return S.forEach(($=>{O=O.next((()=>_.getEntry(p,$))).next((W=>{const F=y.docVersions.get($);Le(F!==null,48541),W.version.compareTo(F)<0&&(T.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),_.addEntry(W)))}))})),O.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=xe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function UE(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function CR(r,e){const t=Ie(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((_,T)=>{const S=o.get(T);if(!S)return;f.push(t.hi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,T))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Vt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,i)),o=o.insert(T,O),(function(W,F,re){return W.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=TR?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(S,O,_)&&f.push(t.hi.updateTargetData(l,O))}));let p=Lr(),y=xe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(RR(l,h,e.documentUpdates).next((_=>{p=_.Ls,y=_.ks}))),!i.isEqual(_e.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(_)}return G.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function RR(r,e,t){let i=xe(),o=xe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Lr();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(_e.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):ae(ip,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{Ls:h,ks:o}}))}function PR(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Hf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function kR(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,G.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new gi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function vf(r,e,t){const i=Ie(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Go(h))throw h;ae(ip,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function uv(r,e,t){const i=Ie(r);let o=_e.min(),l=xe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,_){const T=Ie(p),S=T.Ms.get(_);return S!==void 0?G.resolve(T.Fs.get(S)):T.hi.getTargetData(y,_)})(i,h,lr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:_e.min(),t?l:xe()))).next((f=>(xR(i,vC(e),f),{documents:f,qs:l})))))}function xR(r,e,t){let i=r.xs.get(e)||_e.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class cv{constructor(){this.activeTargetIds=SC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NR{constructor(){this.Fo=new cv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new cv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="ConnectivityMonitor";class dv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ae(hv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ae(hv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function _f(){return Yu===null?Yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="RestConnection",VR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===_c?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=_f(),f=this.Go(e,t.toUriEncodedString());ae(qd,`Sending RPC '${e}' ${h}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(f),_=zo(y);return this.jo(e,f,p,i,_).then((T=>(ae(qd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Ai(qd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=VR[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class bR extends OR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=_f();return new Promise(((f,p)=>{const y=new F_;y.setWithCredentials(!0),y.listenOnce(U_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case nc.NO_ERROR:const T=y.getResponseJson();ae(Ut,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case nc.TIMEOUT:ae(Ut,`RPC '${e}' ${h} timed out`),p(new ne(H.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const S=y.getStatus();if(ae(Ut,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const $=O==null?void 0:O.error;if($&&$.status&&$.message){const W=(function(re){const ie=re.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ie)>=0?ie:H.UNKNOWN})($.status);p(new ne(W,$.message))}else p(new ne(H.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ne(H.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{ae(Ut,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);ae(Ut,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=_f(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=$_(),f=B_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ae(Ut,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=h.createWebChannel(_,p);this.T_(T);let S=!1,O=!1;const $=new LR({Ho:F=>{O?ae(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(ae(Ut,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ae(Ut,`RPC '${e}' stream ${o} sending:`,F),T.send(F))},Yo:()=>T.close()}),W=(F,re,ie)=>{F.listen(re,(q=>{try{ie(q)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return W(T,Ha.EventType.OPEN,(()=>{O||(ae(Ut,`RPC '${e}' stream ${o} transport opened.`),$.s_())})),W(T,Ha.EventType.CLOSE,(()=>{O||(O=!0,ae(Ut,`RPC '${e}' stream ${o} transport closed`),$.__(),this.I_(T))})),W(T,Ha.EventType.ERROR,(F=>{O||(O=!0,Ai(Ut,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),$.__(new ne(H.UNAVAILABLE,"The operation could not be completed")))})),W(T,Ha.EventType.MESSAGE,(F=>{var re;if(!O){const ie=F.data[0];Le(!!ie,16349);const q=ie,oe=(q==null?void 0:q.error)||((re=q[0])===null||re===void 0?void 0:re.error);if(oe){ae(Ut,`RPC '${e}' stream ${o} received error:`,oe);const Se=oe.status;let Te=(function(P){const N=ht[P];if(N!==void 0)return CE(N)})(Se),D=oe.message;Te===void 0&&(Te=H.INTERNAL,D="Unknown error status: "+Se+" with message "+oe.message),O=!0,$.__(new ne(Te,D)),T.close()}else ae(Ut,`RPC '${e}' stream ${o} received:`,ie),$.a_(ie)}})),W(f,z_.STAT_EVENT,(F=>{F.stat===af.PROXY?ae(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===af.NOPROXY&&ae(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.o_()}),0),$}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){return new UC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="PersistentStream";class zE{constructor(e,t,i,o,l,h,f,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sp(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ne(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ae(fv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ae(fv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MR extends zE{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=qC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return _e.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?_e.min():h.readTime?gn(h.readTime):_e.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=yf(this.serializer),t.addTarget=(function(l,h){let f;const p=h.target;if(f=df(p)?{documents:HC(l,p)}:{query:GC(l,p).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=kE(l,h.resumeToken);const y=mf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(_e.min())>0){f.readTime=Ac(l,h.snapshotVersion.toTimestamp());const y=mf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=QC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=yf(this.serializer),t.removeTarget=e,this.k_(t)}}class jR extends zE{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=WC(e.writeResults,e.commitTime),i=gn(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=yf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>VE(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{}class UR extends FR{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,gf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(H.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Jo(e,gf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ne(H.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class zR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Or(t),this._a=!1):ae("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="RemoteStore";class BR{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{Is(this)&&(ae(_s,"Restarting streams for network reachability change."),await(async function(p){const y=Ie(p);y.Ia.add(4),await Al(y),y.Aa.set("Unknown"),y.Ia.delete(4),await Xc(y)})(this))}))})),this.Aa=new zR(i,o)}}async function Xc(r){if(Is(r))for(const e of r.da)await e(!0)}async function Al(r){for(const e of r.da)await e(!1)}function BE(r,e){const t=Ie(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),up(t)?lp(t):Ko(t).x_()&&ap(t,e))}function op(r,e){const t=Ie(r),i=Ko(t);t.Ta.delete(e),i.x_()&&$E(t,e),t.Ta.size===0&&(i.x_()?i.B_():Is(t)&&t.Aa.set("Unknown"))}function ap(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(r).H_(e)}function $E(r,e){r.Ra.$e(e),Ko(r).Y_(e)}function lp(r){r.Ra=new bC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Ko(r).start(),r.Aa.aa()}function up(r){return Is(r)&&!Ko(r).M_()&&r.Ta.size>0}function Is(r){return Ie(r).Ia.size===0}function qE(r){r.Ra=void 0}async function $R(r){r.Aa.set("Online")}async function qR(r){r.Ta.forEach(((e,t)=>{ap(r,e)}))}async function WR(r,e){qE(r),up(r)?(r.Aa.la(e),lp(r)):r.Aa.set("Unknown")}async function HR(r,e,t){if(r.Aa.set("Online"),e instanceof PE&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))})(r,e)}catch(i){ae(_s,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pc(r,i)}else if(e instanceof oc?r.Ra.Ye(e):e instanceof RE?r.Ra.it(e):r.Ra.et(e),!t.isEqual(_e.min()))try{const i=await UE(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(y);_&&l.Ta.set(y,_.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,y)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(Vt.EMPTY_BYTE_STRING,_.snapshotVersion)),$E(l,p);const T=new gi(_.target,p,y,_.sequenceNumber);ap(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ae(_s,"Failed to raise snapshot:",i),await Pc(r,i)}}async function Pc(r,e,t){if(!Go(e))throw e;r.Ia.add(1),await Al(r),r.Aa.set("Offline"),t||(t=()=>UE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ae(_s,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Xc(r)}))}function WE(r,e){return e().catch((t=>Pc(r,t,e)))}async function Zc(r){const e=Ie(r),t=xi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hf;for(;GR(e);)try{const o=await PR(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,KR(e,o)}catch(o){await Pc(e,o)}HE(e)&&GE(e)}function GR(r){return Is(r)&&r.Pa.length<10}function KR(r,e){r.Pa.push(e);const t=xi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function HE(r){return Is(r)&&!xi(r).M_()&&r.Pa.length>0}function GE(r){xi(r).start()}async function QR(r){xi(r).na()}async function JR(r){const e=xi(r);for(const t of r.Pa)e.X_(t.mutations)}async function YR(r,e,t){const i=r.Pa.shift(),o=Xf.from(i,e,t);await WE(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Zc(r)}async function XR(r,e){e&&xi(r).Z_&&await(async function(i,o){if((function(h){return AE(h)&&h!==H.ABORTED})(o.code)){const l=i.Pa.shift();xi(i).N_(),await WE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Zc(i)}})(r,e),HE(r)&&GE(r)}async function pv(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),ae(_s,"RemoteStore received new credentials");const i=Is(t);t.Ia.add(3),await Al(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Xc(t)}async function ZR(r,e){const t=Ie(r);e?(t.Ia.delete(2),await Xc(t)):e||(t.Ia.add(2),await Al(t),t.Aa.set("Unknown"))}function Ko(r){return r.Va||(r.Va=(function(t,i,o){const l=Ie(t);return l.ia(),new MR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:$R.bind(null,r),e_:qR.bind(null,r),n_:WR.bind(null,r),J_:HR.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),up(r)?lp(r):r.Aa.set("Unknown")):(await r.Va.stop(),qE(r))}))),r.Va}function xi(r){return r.ma||(r.ma=(function(t,i,o){const l=Ie(t);return l.ia(),new jR(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:QR.bind(null,r),n_:XR.bind(null,r),ea:JR.bind(null,r),ta:YR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Zc(r)):(await r.ma.stop(),r.Pa.length>0&&(ae(_s,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new cp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(r,e){if(Or("AsyncQueue",`${e}: ${r}`),Go(r))return new ne(H.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||pe.comparator(t.key,i.key):(t,i)=>pe.comparator(t.key,i.key),this.keyedMap=Ga(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.fa=new et(pe.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ge(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Mo{constructor(e,t,i,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Mo(e,t,ko.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class tP{constructor(){this.queries=gv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ie(t),l=o.queries;o.queries=gv(),l.forEach(((h,f)=>{for(const p of f.wa)p.onError(i)}))})(this,new ne(H.ABORTED,"Firestore shutting down"))}}function gv(){return new Ts((r=>dE(r)),Wc)}async function dp(r,e){const t=Ie(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new eP,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=hp(h,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&pp(t)}async function fp(r,e){const t=Ie(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function nP(r,e){const t=Ie(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&pp(t)}function rP(r,e,t){const i=Ie(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function pp(r){r.Da.forEach((e=>{e.next()}))}var Ef,yv;(yv=Ef||(Ef={})).Fa="default",yv.Cache="cache";class mp{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.key=e}}class QE{constructor(e){this.key=e}}class iP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=xe(),this.mutatedKeys=xe(),this.Xa=fE(e),this.eu=new ko(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new mv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const S=o.get(_),O=Hc(this.query,T)?T:null,$=!!S&&this.mutatedKeys.has(S.key),W=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let F=!1;S&&O?S.data.isEqual(O.data)?$!==W&&(i.track({type:3,doc:O}),F=!0):this.iu(S,O)||(i.track({type:2,doc:O}),F=!0,(p&&this.Xa(O,p)>0||y&&this.Xa(O,y)<0)&&(f=!0)):!S&&O?(i.track({type:0,doc:O}),F=!0):S&&!O&&(i.track({type:1,doc:S}),F=!0,(p||y)&&(f=!0)),F&&(O?(h=h.add(O),l=W?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((_,T)=>(function(O,$){const W=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{At:F})}};return W(O)-W($)})(_.type,T.type)||this.Xa(_.doc,T.doc))),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,h.length!==0||y?{snapshot:new Mo(this.query,e.eu,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=xe(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new QE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new KE(i))})),t}uu(e){this.Ha=e.qs,this.Za=xe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Mo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const gp="SyncEngine";class sP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class oP{constructor(e){this.key=e,this.lu=!1}}class aP{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Ts((f=>dE(f)),Wc),this.Tu=new Map,this.Iu=new Set,this.du=new et(pe.comparator),this.Eu=new Map,this.Au=new tp,this.Ru={},this.Vu=new Map,this.mu=bo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function lP(r,e,t=!0){const i=tw(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await JE(i,e,t,!0),o}async function uP(r,e){const t=tw(r);await JE(t,e,!0,!1)}async function JE(r,e,t,i){const o=await kR(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await cP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&BE(r.remoteStore,o),f}async function cP(r,e,t,i,o){r.gu=(T,S,O)=>(async function(W,F,re,ie){let q=F.view.nu(re);q.Ds&&(q=await uv(W.localStore,F.query,!1).then((({documents:D})=>F.view.nu(D,q))));const oe=ie&&ie.targetChanges.get(F.targetId),Se=ie&&ie.targetMismatches.get(F.targetId)!=null,Te=F.view.applyChanges(q,W.isPrimaryClient,oe,Se);return _v(W,F.targetId,Te._u),Te.snapshot})(r,T,S,O);const l=await uv(r.localStore,e,!0),h=new iP(e,l.qs),f=h.nu(l.documents),p=Sl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,p);_v(r,t,y._u);const _=new sP(e,t,h);return r.Pu.set(e,_),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),y.snapshot}async function hP(r,e,t){const i=Ie(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!Wc(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await vf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&op(i.remoteStore,o.targetId),wf(i,o.targetId)})).catch(Ho)):(wf(i,o.targetId),await vf(i.localStore,o.targetId,!0))}async function dP(r,e){const t=Ie(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),op(t.remoteStore,i.targetId))}async function fP(r,e,t){const i=EP(r);try{const o=await(function(h,f){const p=Ie(h),y=Ue.now(),_=f.reduce(((O,$)=>O.add($.key)),xe());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let $=Lr(),W=xe();return p.Os.getEntries(O,_).next((F=>{$=F,$.forEach(((re,ie)=>{ie.isValidDocument()||(W=W.add(re))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,$))).next((F=>{T=F;const re=[];for(const ie of f){const q=NC(ie,T.get(ie.key).overlayedDocument);q!=null&&re.push(new Li(ie.key,q,iE(q.value.mapValue),Bt.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,re,f)})).next((F=>{S=F;const re=F.applyToLocalDocumentSet(T,W);return p.documentOverlayCache.saveOverlays(O,F.batchId,re)}))})).then((()=>({batchId:S.batchId,changes:mE(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let y=h.Ru[h.currentUser.toKey()];y||(y=new et(Ce)),y=y.insert(f,p),h.Ru[h.currentUser.toKey()]=y})(i,o.batchId,t),await Cl(i,o.changes),await Zc(i.remoteStore)}catch(o){const l=hp(o,"Failed to persist write");t.reject(l)}}async function YE(r,e){const t=Ie(r);try{const i=await CR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(Le(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Le(h.lu,14607):o.removedDocuments.size>0&&(Le(h.lu,42227),h.lu=!1))})),await Cl(t,i,e)}catch(i){await Ho(i)}}function vv(r,e,t){const i=Ie(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=Ie(h);p.onlineState=f;let y=!1;p.queries.forEach(((_,T)=>{for(const S of T.wa)S.va(f)&&(y=!0)})),y&&pp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pP(r,e,t){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new et(pe.comparator);h=h.insert(l,Ct.newNoDocument(l,_e.min()));const f=xe().add(l),p=new Jc(_e.min(),new Map,new et(Ce),h,f);await YE(i,p),i.du=i.du.remove(l),i.Eu.delete(e),yp(i)}else await vf(i.localStore,e,!1).then((()=>wf(i,e,t))).catch(Ho)}async function mP(r,e){const t=Ie(r),i=e.batch.batchId;try{const o=await AR(t.localStore,e);ZE(t,i,null),XE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cl(t,o)}catch(o){await Ho(o)}}async function gP(r,e,t){const i=Ie(r);try{const o=await(function(h,f){const p=Ie(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(Le(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);ZE(i,e,t),XE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cl(i,o)}catch(o){await Ho(o)}}function XE(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function ZE(r,e,t){const i=Ie(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function wf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||ew(r,i)}))}function ew(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(op(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),yp(r))}function _v(r,e,t){for(const i of t)i instanceof KE?(r.Au.addReference(i.key,e),yP(r,i)):i instanceof QE?(ae(gp,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||ew(r,i.key)):ge(19791,{yu:i})}function yP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(ae(gp,"New document in limbo: "+t),r.Iu.add(i),yp(r))}function yp(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new pe($e.fromString(e)),i=r.mu.next();r.Eu.set(i,new oP(t)),r.du=r.du.insert(t,i),BE(r.remoteStore,new gi(lr(qc(t.path)),i,"TargetPurposeLimboResolution",Bc.ue))}}async function Cl(r,e,t){const i=Ie(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,p)=>{h.push(i.gu(p,e,t).then((y=>{var _;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=rp.Es(p.targetId,y);l.push(T)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(p,y){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>G.forEach(y,(S=>G.forEach(S.Is,(O=>_.persistence.referenceDelegate.addReference(T,S.targetId,O))).next((()=>G.forEach(S.ds,(O=>_.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))))))}catch(T){if(!Go(T))throw T;ae(ip,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const O=_.Fs.get(S),$=O.snapshotVersion,W=O.withLastLimboFreeSnapshotVersion($);_.Fs=_.Fs.insert(S,W)}}})(i.localStore,l))}async function vP(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){ae(gp,"User change. New user:",e.toKey());const i=await FE(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((f=>{f.forEach((p=>{p.reject(new ne(H.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cl(t,i.Bs)}}function _P(r,e){const t=Ie(r),i=t.Eu.get(e);if(i&&i.lu)return xe().add(i.key);{let o=xe();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function tw(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=YE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_P.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pP.bind(null,e),e.hu.J_=nP.bind(null,e.eventManager),e.hu.pu=rP.bind(null,e.eventManager),e}function EP(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gP.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return SR(this.persistence,new wR,e.initialUser,this.serializer)}Du(e){return new jE(np.Vi,this.serializer)}bu(e){return new NR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class wP extends kc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Le(this.persistence.referenceDelegate instanceof Rc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oR(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new jE((i=>Rc.Vi(i,t)),this.serializer)}}class Tf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vP.bind(null,this.syncEngine),await ZR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tP})()}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),i=(function(l){return new bR(l)})(e.databaseInfo);return(function(l,h,f,p){return new UR(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new BR(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>vv(this.syncEngine,t,0)),(function(){return dv.C()?new dv:new DR})())}createSyncEngine(e,t){return(function(o,l,h,f,p,y,_){const T=new aP(o,l,h,f,p,y);return _&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ie(o);ae(_s,"RemoteStore shutting down."),l.Ia.add(5),await Al(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Tf.provider={build:()=>new Tf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ne(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,l){const h=Ie(o),f={documents:l.map((T=>Cc(h.serializer,T)))},p=await h.Jo("BatchGetDocuments",h.serializer.databaseId,$e.emptyPath(),f,l.length),y=new Map;p.forEach((T=>{const S=$C(h.serializer,T);y.set(S.key.toString(),S)}));const _=[];return l.forEach((T=>{const S=y.get(T.toString());Le(!!S,55234,{key:T}),_.push(S)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=pe.fromPath(i);this.mutations.push(new SE(o,this.precondition(o)))})),await(async function(i,o){const l=Ie(i),h={writes:o.map((f=>VE(l.serializer,f)))};await l.Wo("Commit",l.serializer.databaseId,$e.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge(50498,{Wu:e.constructor.name});t=_e.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ne(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_e.min())?Bt.exists(!1):Bt.updateTime(t):Bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_e.min()))throw new ne(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bt.updateTime(t)}return Bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,i,o,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=l,this.Gu=i.maxAttempts,this.F_=new sp(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new TP(this.datastore),t=this.Ju(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Hu(o)}))))})).catch((i=>{this.Hu(i)}))}))}Ju(e){try{const t=this.updateFunction(e);return!wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!AE(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class SP{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ae(Ni,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ae(Ni,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Hd(r,e){r.asyncQueue.verifyOperationInProgress(),ae(Ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await FE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ai("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{ae("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ai("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function Ev(r,e){r.asyncQueue.verifyOperationInProgress();const t=await AP(r);ae(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>pv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>pv(e.remoteStore,o))),r._onlineComponents=e}async function AP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae(Ni,"Using user provided OfflineComponentProvider");try{await Hd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ai("Error using user provided cache. Falling back to memory cache: "+t),await Hd(r,new kc)}}else ae(Ni,"Using default OfflineComponentProvider"),await Hd(r,new wP(void 0));return r._offlineComponents}async function _p(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae(Ni,"Using user provided OnlineComponentProvider"),await Ev(r,r._uninitializedComponentsProvider._online)):(ae(Ni,"Using default OnlineComponentProvider"),await Ev(r,new Tf))),r._onlineComponents}function CP(r){return _p(r).then((e=>e.syncEngine))}function RP(r){return _p(r).then((e=>e.datastore))}async function xc(r){const e=await _p(r),t=e.eventManager;return t.onListen=lP.bind(null,e.syncEngine),t.onUnlisten=hP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dP.bind(null,e.syncEngine),t}function PP(r,e,t={}){const i=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const _=new vp({next:S=>{_.Ou(),h.enqueueAndForget((()=>fp(l,T)));const O=S.docs.has(f);!O&&S.fromCache?y.reject(new ne(H.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&p&&p.source==="server"?y.reject(new ne(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new mp(qc(f.path),_,{includeMetadataChanges:!0,ka:!0});return dp(l,T)})(await xc(r),r.asyncQueue,e,t,i))),i.promise}function kP(r,e,t={}){const i=new ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const _=new vp({next:S=>{_.Ou(),h.enqueueAndForget((()=>fp(l,T))),S.fromCache&&p.source==="server"?y.reject(new ne(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new mp(f,_,{includeMetadataChanges:!0,ka:!0});return dp(l,T)})(await xc(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firestore.googleapis.com",Tv=!0;class Iv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rw,this.ssl=Tv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Tv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ME;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iR)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new b1;switch(i.type){case"firstParty":return new U1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=wv.get(t);i&&(ae("ComponentProvider","Removing Datastore"),wv.delete(t),i.terminate())})(this),Promise.resolve()}}function xP(r,e,t,i={}){var o;r=mn(r,eh);const l=zo(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Jv(`https://${p}`),Yv("Firestore",!0)),h.host!==rw&&h.host!==p&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:p,ssl:l,emulatorOptions:i});if(!ms(y,f)&&(r._setSettings(y),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=zt.MOCK_USER;else{_=KT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new zt(S)}r._authCredentials=new M1(new W_(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class nt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nt(this.firestore,e,this._key)}toJSON(){return{type:nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(El(t,nt._jsonSchema))return new nt(e,i||null,new pe($e.fromString(t.referencePath)))}}nt._jsonSchemaVersion="firestore/documentReference/1.0",nt._jsonSchema={type:ft("string",nt._jsonSchemaVersion),referencePath:ft("string")};class Ii extends Ss{constructor(e,t,i){super(e,t,qc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new pe(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function xo(r,e,...t){if(r=lt(r),G_("collection","path",e),r instanceof eh){const i=$e.fromString(e,...t);return by(i),new Ii(r,null,i)}{if(!(r instanceof nt||r instanceof Ii))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child($e.fromString(e,...t));return by(i),new Ii(r.firestore,null,i)}}function Es(r,e,...t){if(r=lt(r),arguments.length===1&&(e=Wf.newId()),G_("doc","path",e),r instanceof eh){const i=$e.fromString(e,...t);return Ly(i),new nt(r,null,new pe(i))}{if(!(r instanceof nt||r instanceof Ii))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child($e.fromString(e,...t));return Ly(i),new nt(r.firestore,r instanceof Ii?r.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="AsyncQueue";class Av{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sp(this,"async_queue_retry"),this.oc=()=>{const i=Wd();i&&ae(Sv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Wd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Wd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ar;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Go(e))throw e;ae(Sv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Or("INTERNAL UNHANDLED ERROR: ",Cv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=cp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&ge(47125,{hc:Cv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Cv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class br extends eh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Av,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function NP(r,e){const t=typeof r=="object"?r:t_(),i=typeof r=="string"?r:_c,o=Of(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=HT("firestore");l&&xP(o,...l)}return o}function Rl(r){if(r._terminated)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||DP(r),r._firestoreClient}function DP(r){var e,t,i;const o=r._freezeSettings(),l=(function(f,p,y,_){return new nC(f,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,nw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new SP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(Vt.fromBase64String(e))}catch(t){throw new ne(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:ft("string",fn._jsonSchemaVersion),bytes:ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ur._jsonSchemaVersion}}static fromJSON(e){if(El(e,ur._jsonSchema))return new ur(e.latitude,e.longitude)}}ur._jsonSchemaVersion="firestore/geoPoint/1.0",ur._jsonSchema={type:ft("string",ur._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new cr(e.vectorValues);throw new ne(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:ft("string",cr._jsonSchemaVersion),vectorValues:ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=/^__.*__$/;class OP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Li(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class iw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Li(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ec:r})}}class wp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new wp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Nc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(sw(this.Ec)&&VP.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class LP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Yc(e)}Dc(e,t,i,o=!1){return new wp({Ec:e,methodName:t,bc:i,path:Dt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function th(r){const e=r._freezeSettings(),t=Yc(r._databaseId);return new LP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ow(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);Tp("Data must be an object, but it was:",h,i);const f=uw(i,h);let p,y;if(l.merge)p=new pn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=If(e,T,t);if(!h.contains(S))throw new ne(H.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);hw(_,S)||_.push(S)}p=new pn(_),y=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=h.fieldTransforms;return new OP(new Qt(f),p,y)}class nh extends Ep{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}function aw(r,e,t,i){const o=r.Dc(1,e,t);Tp("Data must be an object, but it was:",o,i);const l=[],h=Qt.empty();Oi(i,((p,y)=>{const _=Ip(e,p,t);y=lt(y);const T=o.gc(_);if(y instanceof nh)l.push(_);else{const S=kl(y,T);S!=null&&(l.push(_),h.set(_,S))}}));const f=new pn(l);return new iw(h,f,o.fieldTransforms)}function lw(r,e,t,i,o,l){const h=r.Dc(1,e,t),f=[If(e,i,t)],p=[o];if(l.length%2!=0)throw new ne(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(If(e,l[S])),p.push(l[S+1]);const y=[],_=Qt.empty();for(let S=f.length-1;S>=0;--S)if(!hw(y,f[S])){const O=f[S];let $=p[S];$=lt($);const W=h.gc(O);if($ instanceof nh)y.push(O);else{const F=kl($,W);F!=null&&(y.push(O),_.set(O,F))}}const T=new pn(y);return new iw(_,T,h.fieldTransforms)}function bP(r,e,t,i=!1){return kl(t,r.Dc(i?4:3,e))}function kl(r,e){if(cw(r=lt(r)))return Tp("Unsupported field value:",e,r),uw(r,e);if(r instanceof Ep)return(function(i,o){if(!sw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let p=kl(f,o.yc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ue.fromDate(i);return{timestampValue:Ac(o.serializer,l)}}if(i instanceof Ue){const l=new Ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ac(o.serializer,l)}}if(i instanceof ur)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fn)return{bytesValue:kE(o.serializer,i._byteString)};if(i instanceof nt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ep(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof cr)return(function(h,f){return{mapValue:{fields:{[nE]:{stringValue:rE},[Ec]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.wc("VectorValues must only contain numeric values.");return Yf(f.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${zc(i)}`)})(r,e)}function uw(r,e){const t={};return J_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(r,((i,o)=>{const l=kl(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function cw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ue||r instanceof ur||r instanceof fn||r instanceof nt||r instanceof Ep||r instanceof cr)}function Tp(r,e,t){if(!cw(t)||!K_(t)){const i=zc(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function If(r,e,t){if((e=lt(e))instanceof Pl)return e._internalPath;if(typeof e=="string")return Ip(r,e);throw Nc("Field path arguments must be of type string or ",r,!1,void 0,t)}const MP=new RegExp("[~\\*/\\[\\]]");function Ip(r,e,t){if(e.search(MP)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Nc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new ne(H.INVALID_ARGUMENT,f+r+p)}function hw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jP extends Dc{data(){return super.data()}}function Sp(r,e){return typeof e=="string"?Ip(r,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ne(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class FP extends Ap{}function UP(r,e,...t){let i=[];e instanceof Ap&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((p=>p instanceof Cp)).length,f=l.filter((p=>p instanceof rh)).length;if(h>1||h>0&&f>0)throw new ne(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class rh extends FP{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new rh(e,t,i)}_apply(e){const t=this._parse(e);return fw(e._query,t),new Ss(e.firestore,e.converter,ff(e._query,t))}_parse(e){const t=th(e.firestore);return(function(l,h,f,p,y,_,T){let S;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){kv(T,_);const $=[];for(const W of T)$.push(Pv(p,l,W));S={arrayValue:{values:$}}}else S=Pv(p,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||kv(T,_),S=bP(f,h,T,_==="in"||_==="not-in");return dt.create(y,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zP(r,e,t){const i=e,o=Sp("where",r);return rh._create(o,i,t)}class Cp extends Ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)fw(h,p),h=ff(h,p)})(e._query,t),new Ss(e.firestore,e.converter,ff(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Pv(r,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new ne(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(e)&&t.indexOf("/")!==-1)throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child($e.fromString(t));if(!pe.isDocumentKey(i))throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qy(r,new pe(i))}if(t instanceof nt)return qy(r,t._key);throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zc(t)}.`)}function kv(r,e){if(!Array.isArray(r)||r.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fw(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pw{convertValue(e,t="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Oi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Ec].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ot(h.doubleValue)));return new cr(l)}convertGeoPoint(e){return new ur(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$c(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const t=Ri(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=$e.fromString(e);Le(bE(i),9688,{name:e});const o=new cl(i.get(1),i.get(3)),l=new pe(i.popFirst(5));return o.isEqual(t)||Or(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class BP extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}}class Ao{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Si extends Dc{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Sp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Si._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Si._jsonSchemaVersion="firestore/documentSnapshot/1.0",Si._jsonSchema={type:ft("string",Si._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};class ac extends Si{data(e={}){return super.data(e)}}class ps{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ao(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ac(this._firestore,this._userDataWriter,i.key,i,new Ao(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new ac(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ao(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new ac(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ao(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),_=h.indexOf(f.doc.key)),{type:$P(f.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ps._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $P(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(r){r=mn(r,nt);const e=mn(r.firestore,br);return PP(Rl(e),r._key).then((t=>vw(e,r,t)))}ps._jsonSchemaVersion="firestore/querySnapshot/1.0",ps._jsonSchema={type:ft("string",ps._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};class ih extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}}function gw(r){r=mn(r,Ss);const e=mn(r.firestore,br),t=Rl(e),i=new ih(e);return dw(r._query),kP(t,r._query).then((o=>new ps(e,i,r,o)))}function WP(r,e,t,...i){r=mn(r,nt);const o=mn(r.firestore,br),l=th(o);let h;return h=typeof(e=lt(e))=="string"||e instanceof Pl?lw(l,"updateDoc",r._key,e,t,i):aw(l,"updateDoc",r._key,e),Rp(o,[h.toMutation(r._key,Bt.exists(!0))])}function HP(r){return Rp(mn(r.firestore,br),[new Qc(r._key,Bt.none())])}function xv(r,e){const t=mn(r.firestore,br),i=Es(r),o=mw(r.converter,e);return Rp(t,[ow(th(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Bt.exists(!1))]).then((()=>i))}function yw(r,...e){var t,i,o;r=lt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Rv(e[h])||(l=e[h++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Rv(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,_;if(r instanceof nt)y=mn(r.firestore,br),_=qc(r._key.path),p={next:T=>{e[h]&&e[h](vw(y,r,T))},error:e[h+1],complete:e[h+2]};else{const T=mn(r,Ss);y=mn(T.firestore,br),_=T._query;const S=new ih(y);p={next:O=>{e[h]&&e[h](new ps(y,S,T,O))},error:e[h+1],complete:e[h+2]},dw(r._query)}return(function(S,O,$,W){const F=new vp(W),re=new mp(O,F,$);return S.asyncQueue.enqueueAndForget((async()=>dp(await xc(S),re))),()=>{F.Ou(),S.asyncQueue.enqueueAndForget((async()=>fp(await xc(S),re)))}})(Rl(y),_,f,p)}function Rp(r,e){return(function(i,o){const l=new ar;return i.asyncQueue.enqueueAndForget((async()=>fP(await CP(i),o,l))),l.promise})(Rl(r),e)}function vw(r,e,t){const i=t.docs.get(e._key),o=new ih(r);return new Si(r,o,e._key,i,new Ao(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={maxAttempts:5};function Qa(r,e){if((r=lt(r)).firestore!==e)throw new ne(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=th(e)}get(e){const t=Qa(e,this._firestore),i=new BP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ge(24041);const l=o[0];if(l.isFoundDocument())return new Dc(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Dc(this._firestore,i,t._key,null,t.converter);throw ge(18433,{doc:l})}))}set(e,t,i){const o=Qa(e,this._firestore),l=mw(o.converter,t,i),h=ow(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,i);return this._transaction.set(o._key,h),this}update(e,t,i,...o){const l=Qa(e,this._firestore);let h;return h=typeof(t=lt(t))=="string"||t instanceof Pl?lw(this._dataReader,"Transaction.update",l._key,t,i,o):aw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Qa(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP extends KP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qa(e,this._firestore),i=new ih(this._firestore);return super.get(e).then((o=>new Si(this._firestore,i,t._key,o._document,new Ao(!1,!1),t.converter)))}}function JP(r,e,t){r=mn(r,br);const i=Object.assign(Object.assign({},GP),t);return(function(l){if(l.maxAttempts<1)throw new ne(H.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,h,f){const p=new ar;return l.asyncQueue.enqueueAndForget((async()=>{const y=await RP(l);new IP(l.asyncQueue,y,f,h,p).zu()})),p.promise})(Rl(r),(o=>e(new QP(r,o))),i)}(function(e,t=!0){(function(o){Wo=o})(Bo),No(new gs("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new br(new j1(i.getProvider("auth-internal")),new z1(h,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(y.options.projectId,_)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ei(xy,Ny,e),Ei(xy,Ny,"esm2017")})();const YP={apiKey:"AIzaSyBc1cYCEqFVXvB2YdxHTxhVlPqtTbfVVLM",authDomain:"solaire-frontend.firebaseapp.com",projectId:"solaire-frontend",storageBucket:"solaire-frontend.firebasestorage.app",messagingSenderId:"29459740400",appId:"1:29459740400:web:2fa88c891fece254c8f435"},_w=e_(YP),Vc=O1(_w),Rn=NP(_w);async function Ew(r){const e=await qP(Es(Rn,"users",r));return e.exists()?e.data():null}async function XP(r){const e=new Date().getFullYear(),t=Es(Rn,"counters",`files-${e}`),i=xo(Rn,"files");return await JP(Rn,async l=>{const h=await l.get(t),f=h.exists()?(h.data().seq||0)+1:1;l.set(t,{seq:f},{merge:!0});const p=`DOS-${e}-${String(f).padStart(4,"0")}`;if(!uc.map(_=>_.value).includes(r.pack))throw new Error("Pack invalide");const y=Es(i);return l.set(y,{reference:p,installerId:"INST123",pack:r.pack,statutGlobal:r.statutGlobal||r.status||"en_cours",status:r.status||"en_cours",title:r.title||r.name||"Dossier",price:r.price||null,address:r.address||"",power:r.power||null,nextAction:r.nextAction||null,nextActionDate:r.nextActionDate?Ue.fromDate(new Date(r.nextActionDate)):null,createdAt:Ue.now(),updatedAt:Ue.now()}),{id:y.id,reference:p}})}function ZP(){const r=Uo(),[e,t]=K.useState(""),[i,o]=K.useState(""),[l,h]=K.useState(!1),[f,p]=K.useState(null),y=async _=>{_.preventDefault(),p(null),h(!0);try{await R_(Vc,e,i),r("/client/dashboard")}catch(T){console.error("Erreur login client:",T),p((T==null?void 0:T.message)||"Connexion impossible")}finally{h(!1)}};return w.jsxs("div",{className:"card",children:[w.jsx("h2",{children:"Solaire Admin  Espace Installateur"}),w.jsxs("form",{onSubmit:y,className:"form",children:[w.jsxs("div",{className:"field",children:[w.jsx("label",{children:"Email"}),w.jsx("input",{type:"email",value:e,onChange:_=>t(_.target.value),autoComplete:"email"})]}),w.jsxs("div",{className:"field",children:[w.jsx("label",{children:"Mot de passe"}),w.jsx("input",{type:"password",value:i,onChange:_=>o(_.target.value),autoComplete:"current-password"})]}),f&&w.jsx("div",{className:"error",children:f}),w.jsx("button",{className:"btn-primary",type:"submit",disabled:l,children:l?"Connexion...":"Connexion"})]})]})}const ek="yrpmKIwuSydzH8nWMahRlWZictb2";function As(){const[r,e]=K.useState(null),[t,i]=K.useState(null),[o,l]=K.useState(null),[h,f]=K.useState(!0);return K.useEffect(()=>{const p=TA(Vc,async y=>{if(e(y),!y){i(null),l(null),f(!1);return}try{const _=await Ew(y.uid);if(y.uid===ek){const T={role:"admin",installerId:"ADMIN",..._||{}};i(T),l("admin")}else _?(i(_),l(_.role||"client")):(i({role:"client"}),l("client"))}catch{i({role:"client"}),l("client")}finally{console.log("[useAuth] user=",y==null?void 0:y.uid,y==null?void 0:y.email),f(!1)}});return()=>p()},[]),{user:r,claims:t,role:o,loading:h}}function Oc(r,e){const{user:t,claims:i,role:o,loading:l}=As(),[h,f]=K.useState(null),[p,y]=K.useState(!0),[_,T]=K.useState(null);return K.useEffect(()=>{if(l){y(!0);return}if(!t){f([]),y(!1);return}const S=xo(Rn,r);let O=S;if(o==="client"){const W=(i==null?void 0:i.installerId)||"INST123";O=UP(S,zP("installerId","==",W))}const $=yw(O,W=>{f(W.docs.map(F=>({id:F.id,...F.data()}))),y(!1),T(null)},W=>{T(W),y(!1)});return()=>$()},[r,l,t,o,i==null?void 0:i.installerId]),{data:h,loading:p,error:_}}function tk(){const{data:r,loading:e}=Oc("files"),t=r||[];if(e)return w.jsx("div",{className:"card",children:"Chargement"});const i={total:t.length,enCours:t.filter(o=>o.statutGlobal==="en_cours").length,attente:t.filter(o=>["en_attente","incomplet"].includes(o.statutGlobal)).length,finalises:t.filter(o=>["finalise","clos"].includes(o.statutGlobal)).length};return w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Mon tableau de bord"}),w.jsxs("div",{className:"cards",children:[w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"Total dossiers"}),w.jsx("div",{className:"big",children:i.total})]}),w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"En cours"}),w.jsx("div",{className:"big",children:i.enCours})]}),w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"En attente docs"}),w.jsx("div",{className:"big",children:i.attente})]}),w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"Finaliss"}),w.jsx("div",{className:"big",children:i.finalises})]})]}),w.jsxs("div",{className:"card",style:{marginTop:20},children:[w.jsx("h4",{style:{marginBottom:12},children:"Mes dossiers"}),e&&w.jsx("div",{children:"Chargement des dossiers"}),!e&&!t.length&&w.jsx("div",{children:"Aucun dossier pour le moment."}),!e&&t.length>0&&w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rfrence"}),w.jsx("th",{children:"Pack"}),w.jsx("th",{children:"Statut"})]})}),w.jsx("tbody",{children:t.map(o=>w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(Nf,{to:`/client/dossiers/${o.id}`,children:o.reference||o.title||o.id})}),w.jsx("td",{children:o.pack||o.status}),w.jsx("td",{children:o.statutGlobal||o.status})]},o.id))})]})]})]})}const nk="https://solaire-api.onrender.com";function rk(){const{user:r}=As(),[e,t]=K.useState([]),[i,o]=K.useState(!0),[l,h]=K.useState(null);return K.useEffect(()=>{let f=!0;return(async()=>{try{o(!0);const y=await fetch(`${nk}/files?limit=200`);if(!y.ok)throw new Error(`API ${y.status}`);const _=await y.json(),T=_.items||_||[],S=r!=null&&r.uid?T.filter(O=>O.clientId===r.uid):T;f&&t(S)}catch(y){f&&h(y.message||"Erreur de chargement")}finally{f&&o(!1)}})(),()=>{f=!1}},[r==null?void 0:r.uid]),i?w.jsx("div",{className:"card",children:"Chargement"}):l?w.jsxs("div",{className:"card error",children:["Erreur: ",l]}):w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Mes dossiers"}),w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rf"}),w.jsx("th",{children:"Adresse"}),w.jsx("th",{children:"Pack"}),w.jsx("th",{children:"Statut"})]})}),w.jsxs("tbody",{children:[e.map(f=>{var p;return w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(Nf,{to:`/client/dossiers/${f.id}`,children:f.reference||f.ref||f.id})}),w.jsx("td",{children:f.address||""}),w.jsx("td",{children:((p=uc.find(y=>y.value===f.pack))==null?void 0:p.label)||f.pack||""}),w.jsx("td",{children:w.jsx("span",{className:`badge-status ${f.statutGlobal||f.status||"en_cours"}`,children:f.statutGlobal||f.status||"en_cours"})})]},f.id)}),e.length===0&&w.jsx("tr",{children:w.jsx("td",{colSpan:4,style:{textAlign:"center"},children:"Aucun dossier pour ce compte."})})]})]})]})}const Nv="https://solaire-api.onrender.com";function ik(){const{id:r}=xf(),[e,t]=K.useState(null),[i,o]=K.useState([]),[l,h]=K.useState(!0),[f,p]=K.useState(null);if(K.useEffect(()=>{let T=!0;return r&&(async()=>{try{h(!0);const O=await fetch(`${Nv}/files/${r}`);if(!O.ok)throw new Error(`API files/${r} ${O.status}`);const $=await O.json();T&&t($);const W=await fetch(`${Nv}/files/${r}/events`);if(W.ok){const F=await W.json();T&&o(F)}}catch(O){T&&p(O.message||"Erreur de chargement")}finally{T&&h(!1)}})(),()=>{T=!1}},[r]),l)return w.jsx("div",{className:"card",children:"Chargement"});if(f)return w.jsxs("div",{className:"card error",children:["Erreur: ",f]});if(!e)return w.jsx("div",{className:"card",children:"Dossier introuvable"});const y=T=>T?new Date(T!=null&&T.toDate?T.toDate():T).toLocaleDateString():"",_=(T,S,O)=>w.jsxs("li",{children:[w.jsxs("strong",{children:[T," :"]})," ",S||""," ",O?`(${O})`:""]});return w.jsxs("div",{className:"grid",children:[w.jsxs("div",{className:"card",children:[w.jsx(Nf,{to:"/client/dossiers",className:"small",children:" Retour aux dossiers"}),w.jsx("h3",{children:e.reference||e.ref||e.id}),w.jsx("div",{className:"small",children:e.address||""}),w.jsxs("div",{children:["Pack : ",e.pack||""]}),w.jsxs("div",{children:["Statut :"," ",w.jsx("span",{className:`badge-status ${e.statutGlobal||e.status||"en_cours"}`,children:e.statutGlobal||e.status||"en_cours"})]}),w.jsxs("div",{children:["Client final : ",e.clientFinal||""]}),w.jsxs("div",{children:["Puissance : ",e.power||""," kWc"]}),w.jsx("h4",{children:"Suivi administratif"}),w.jsxs("ul",{className:"small",children:[_("Mairie",e.mairieStatus,y(e.mairieDepositDate)),_("Consuel",e.consuelStatus,y(e.consuelVisitDate)),_("Enedis",e.enedisStatus,e.enedisPdL),_("EDF OA",e.edfStatus,e.edfContractNumber)]})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Documents"}),w.jsxs("ul",{className:"small",children:[(e.documents||[]).map(T=>w.jsx("li",{children:w.jsx("a",{href:T.url,target:"_blank",rel:"noreferrer",children:T.name})},T.name)),(e.documents||[]).length===0&&w.jsx("li",{children:"Aucun document"})]}),w.jsx("h4",{children:"Timeline"}),w.jsxs("ul",{className:"small",children:[i.map(T=>w.jsxs("li",{children:[new Date(T.at).toLocaleString(),"  ",T.action]},T.id||T.at)),i.length===0&&w.jsx("li",{children:"Aucun vnement"})]})]})]})}const Gd=({children:r})=>{const{user:e,role:t,loading:i}=As();return i?null:!e||t!=="client"?w.jsx(Qd,{to:"/client/login",replace:!0}):r},_o=r=>r?r.toDate?r.toDate():r.seconds?new Date(r.seconds*1e3):new Date(r):null,Dv=()=>{const r=new Date;return r.setHours(0,0,0,0),r.getTime()},sk=(r="")=>{const e=r.toLowerCase();return e==="en_cours"?"badge-status info":e==="en_attente"||e==="incomplet"?"badge-status warning":e==="finalise"||e==="clos"?"badge-status success":e==="bloque"?"badge-status warning":"badge-status"},ok=(r="")=>`badge-pack badge-pack-${r.replace(/[^a-z0-9]/gi,"_")}`;function ak(){var ie;const r=Uo(),{data:e,loading:t}=Oc("leads"),{data:i,loading:o}=Oc("files"),[l,h]=K.useState(""),[f,p]=K.useState(""),[y,_]=K.useState(""),T=t||o,S=e||[],O=i||[],$=K.useMemo(()=>{const q=Date.now(),oe=720*60*60*1e3,Se=S.map(x=>({...x,__created:_o(x.createdAt)||new Date})).filter(x=>q-x.__created.getTime()<=oe).sort((x,b)=>b.__created.getTime()-x.__created.getTime()),Te=Se.filter(x=>(x.status||"").toLowerCase()==="gagne"),D=Se.filter(x=>(x.status||"").toLowerCase()==="perdu"),C=O.filter(x=>(x.statutGlobal||x.status||"").toLowerCase()==="en_cours"),P=O.filter(x=>["finalise","clos"].includes((x.statutGlobal||x.status||"").toLowerCase())),N=O.filter(x=>(x.statutGlobal||x.status||"").toLowerCase()==="bloque");return{leads30:Se.length,gained:Te.length,lost:D.length,recentLeads:Se,filesTotal:O.length,filesActive:C.length,filesFinalised:P.length,filesBlocked:N.length}},[S,O]),W=K.useMemo(()=>{const q=Dv(),oe=q+1440*60*1e3;return O.filter(Se=>{const Te=_o(Se.nextActionDate);if(!Te)return!1;const D=Te.getTime();return D>=q&&D<oe})},[O]),F=K.useMemo(()=>{const q=Dv();return O.filter(oe=>{const Se=_o(oe.nextActionDate);if(!Se)return!1;const Te=(oe.statutGlobal||oe.status||"").toLowerCase();return["finalise","clos"].includes(Te)?!1:Se.getTime()<q})},[O]),re=K.useMemo(()=>O.filter(q=>{const oe=(q.pack||q.status||"").toLowerCase();if(l&&oe!==l)return!1;const Se=(q.statutGlobal||q.status||"").toLowerCase();if(f&&Se!==f)return!1;if(y){const Te=y.toLowerCase();return[q.reference,q.title,q.clientFinal,q.address].filter(Boolean).some(D=>D.toLowerCase().includes(Te))}return!0}),[O,l,f,y]);return T?w.jsx("div",{className:"card",children:"Chargement du dashboard"}):w.jsxs("div",{className:"dashboard",children:[w.jsxs("div",{className:"cards",children:[w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"Leads (30 j)"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:$.leads30}),w.jsxs("div",{className:"small",children:["Gagns : ",$.gained,"  Perdus : ",$.lost]})]}),w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"Dossiers"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:$.filesTotal}),w.jsxs("div",{className:"small",children:["En cours : ",$.filesActive,"  Finaliss : ",$.filesFinalised]})]}),w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"Actions du jour"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:W.length}),w.jsx("div",{className:"small",children:"planifies aujourdhui"})]}),w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"En retard"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:F.length}),w.jsx("div",{className:"small",children:"Bloqus + relances"})]})]}),((ie=$.recentLeads)==null?void 0:ie.length)>0&&w.jsxs("div",{className:"card",style:{marginTop:16},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsx("h4",{children:"Leads rcents (30 j)"}),w.jsxs("div",{className:"small",children:["Total : ",$.recentLeads.length]})]}),w.jsx("div",{className:"table-wrapper",style:{maxHeight:260},children:w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Nom / Profil"}),w.jsx("th",{children:"Email"}),w.jsx("th",{children:"Tlphone"}),w.jsx("th",{children:"Statut"}),w.jsx("th",{children:"Date"})]})}),w.jsx("tbody",{children:$.recentLeads.slice(0,20).map(q=>w.jsxs("tr",{className:"clickable-row",onClick:()=>r(`/leads/${q.id}`),style:{cursor:"pointer"},children:[w.jsx("td",{children:q.name||q.fullName||q.profile||""}),w.jsx("td",{children:q.email||""}),w.jsx("td",{children:q.phone||""}),w.jsx("td",{children:w.jsx("span",{className:`badge-status ${q.status||"nouveau"}`,children:q.status||"nouveau"})}),w.jsx("td",{children:(q.__created||_o(q.createdAt)||new Date).toLocaleDateString()})]},q.id))})]})})]}),w.jsxs("div",{className:"grid",style:{marginTop:24,gap:16},children:[w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Actions du jour"}),W.length===0&&w.jsx("div",{className:"small",children:"Aucune action planifie."}),W.length>0&&w.jsx("ul",{className:"timeline",children:W.map(q=>{var oe;return w.jsxs("li",{children:[w.jsx("strong",{children:q.reference||q.title}),w.jsx("span",{children:q.nextAction||""}),w.jsx("small",{children:(oe=_o(q.nextActionDate))==null?void 0:oe.toLocaleDateString()})]},q.id)})})]}),w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Dossiers en retard"}),F.length===0&&w.jsx("div",{className:"small",children:"Aucun dossier en retard."}),F.length>0&&w.jsx("ul",{className:"timeline",children:F.map(q=>{var oe;return w.jsxs("li",{children:[w.jsx("strong",{children:q.reference||q.title}),w.jsx("span",{children:q.nextAction||""}),w.jsxs("small",{children:["Prvu : ",(oe=_o(q.nextActionDate))==null?void 0:oe.toLocaleDateString()]})]},q.id)})})]})]}),w.jsxs("div",{className:"card",style:{marginTop:24},children:[w.jsxs("div",{className:"filters",style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[w.jsxs("select",{value:l,onChange:q=>h(q.target.value),children:[w.jsx("option",{value:"",children:"Pack (tous)"}),uc.map(q=>w.jsx("option",{value:q.value,children:q.label},q.value))]}),w.jsxs("select",{value:f,onChange:q=>p(q.target.value),children:[w.jsx("option",{value:"",children:"Statut (tous)"}),w.jsx("option",{value:"en_cours",children:"En cours"}),w.jsx("option",{value:"en_attente",children:"En attente"}),w.jsx("option",{value:"bloque",children:"Bloqu"}),w.jsx("option",{value:"finalise",children:"Finalis"}),w.jsx("option",{value:"clos",children:"Clos"})]}),w.jsx("input",{placeholder:"Recherche rfrence / client",value:y,onChange:q=>_(q.target.value),style:{flex:1}})]}),w.jsx("div",{className:"table-wrapper",children:w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rfrence"}),w.jsx("th",{children:"Client"}),w.jsx("th",{children:"Pack"}),w.jsx("th",{children:"Statut"}),w.jsx("th",{children:"Prochaine action"})]})}),w.jsx("tbody",{children:re.map(q=>{var oe;return w.jsxs("tr",{className:"clickable-row",onClick:()=>r(`/dossiers/${q.id}`),children:[w.jsx("td",{children:q.reference||q.title}),w.jsx("td",{children:q.clientFinal||q.address||""}),w.jsx("td",{children:w.jsx("span",{className:ok(q.pack||q.status),children:((oe=uc.find(Se=>Se.value===(q.pack||q.status)))==null?void 0:oe.label)||q.pack||q.status})}),w.jsx("td",{children:w.jsx("span",{className:sk(q.statutGlobal||q.status),children:q.statutGlobal||q.status})}),w.jsx("td",{children:q.nextAction||""})]},q.id)})})]})})]})]})}function lk(r,e){const{user:t,loading:i}=As(),[o,l]=K.useState(null),[h,f]=K.useState(!0),[p,y]=K.useState(null);return K.useEffect(()=>{if(i){f(!0);return}if(!t||!e){l(null),f(!1);return}const _=Es(Rn,r,e),T=yw(_,S=>{l(S.exists()?{id:S.id,...S.data()}:null),f(!1),y(null)},S=>{y(S),f(!1)});return()=>T()},[r,e,i,t]),{data:o,loading:h,error:p}}const uk=r=>r?r.toDate?r.toDate():r.seconds?new Date(r.seconds*1e3):new Date(r):null,cs=r=>{const e=uk(r);return e?e.toLocaleDateString():""},ck=(r="")=>{const e=r.toLowerCase();return e==="en_cours"?"badge-status info":e==="en_attente"||e==="incomplet"?"badge-status warning":e==="finalise"||e==="clos"?"badge-status success":e==="bloque"?"badge-status warning":"badge-status"},hk=(r="")=>`badge-pack badge-pack-${r.replace(/[^a-z0-9]/gi,"_")}`;function dk(){var h,f;const{id:r}=xf(),e=Uo(),{data:t,loading:i}=lk("files",r||""),o=K.useMemo(()=>{const p=[];return t!=null&&t.nextAction&&p.push({label:"Next action",value:t.nextAction,date:cs(t.nextActionDate)}),t!=null&&t.notes&&p.push({label:"Notes",value:t.notes}),p},[t]);if(i)return w.jsx("div",{className:"card",children:"Chargement du dossier"});if(!t)return w.jsx("div",{className:"card",children:"Dossier introuvable"});const l=[{label:"Mairie",status:t.mairieStatus,meta:cs(t.mairieDepositDate)},{label:"Consuel",status:t.consuelStatus,meta:cs(t.consuelVisitDate)},{label:"Enedis",status:t.enedisStatus,meta:t.enedisPdL||"PDL non renseign"},{label:"EDF OA",status:t.edfStatus,meta:t.edfContractNumber||"N non renseign"}];return w.jsxs("div",{className:"dashboard",children:[w.jsxs("div",{className:"header",style:{marginBottom:24,gap:12},children:[w.jsx("button",{className:"btn-secondary",onClick:()=>e("/dashboard"),children:" Retour"}),w.jsxs("div",{children:[w.jsx("div",{className:"small",children:"Dossier"}),w.jsx("h2",{style:{margin:2},children:t.reference||t.title}),w.jsxs("div",{className:"small",children:[t.clientFinal||"","  ",t.address||"Adresse non renseigne"]})]}),w.jsxs("div",{style:{display:"flex",gap:6},children:[w.jsx("span",{className:hk(t.pack||t.status),children:t.pack||t.status||"Autre"}),w.jsx("span",{className:ck(t.statutGlobal||t.status),children:t.statutGlobal||t.status||"Statut inconnu"})]})]}),w.jsxs("div",{className:"grid",style:{gap:16},children:[w.jsxs("div",{className:"card",style:{flex:2},children:[w.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:[w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Puissance"}),w.jsx("div",{className:"mini-value",children:t.power?`${t.power} kWc`:""})]}),w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Installateur"}),w.jsx("div",{className:"mini-value",children:t.installerId||""})]}),w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Cr le"}),w.jsx("div",{className:"mini-value",children:cs(t.createdAt)})]}),w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Dernire MAJ"}),w.jsx("div",{className:"mini-value",children:cs(t.updatedAt)})]})]}),w.jsxs("div",{style:{marginTop:20},children:[w.jsx("h4",{children:"Suivi administratif"}),w.jsx("ul",{className:"admin-follow",children:l.map(p=>w.jsxs("li",{children:[w.jsxs("strong",{children:[p.label," :"]})," ",p.status||""," ",w.jsx("span",{children:p.meta})]},p.label))})]})]}),w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Prochaine action"}),w.jsx("div",{className:"small",children:t.nextAction||"Pas daction planifie."}),t.nextActionDate&&w.jsx("div",{style:{marginTop:8},children:cs(t.nextActionDate)}),w.jsxs("div",{style:{marginTop:16},children:[w.jsx("h4",{children:"Actions complmentaires"}),o.length===0&&w.jsx("div",{className:"small",children:"Aucune donne supplmentaire."}),o.length>0&&w.jsx("ul",{className:"timeline",children:o.map(p=>w.jsxs("li",{children:[w.jsx("strong",{children:p.label}),w.jsx("span",{children:p.value}),p.date&&w.jsx("small",{children:p.date})]},p.label))})]})]})]}),w.jsxs("div",{className:"grid",style:{marginTop:24,gap:16},children:[w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Documents"}),(h=t.documents)!=null&&h.length?w.jsx("ul",{className:"timeline",children:t.documents.map(p=>w.jsx("li",{children:w.jsxs("div",{className:"doc-card",children:[w.jsxs("div",{className:"doc-meta",children:[w.jsx("div",{className:"doc-pill",children:"PDF"}),w.jsxs("div",{className:"doc-texts",children:[w.jsx("div",{className:"doc-name",children:p.name||"Document"}),p.uploadedAt&&w.jsx("small",{children:cs(p.uploadedAt)}),p.url&&w.jsx("a",{href:p.url,target:"_blank",rel:"noreferrer",className:"doc-open",children:"Ouvrir dans un nouvel onglet "})]})]}),w.jsx("div",{className:"doc-preview-wrapper",children:p.url?w.jsx("object",{data:p.url,type:"application/pdf",className:"doc-preview","aria-label":`Aperu ${p.name||"document"}`,children:"Aperu indisponible"}):w.jsx("div",{className:"doc-preview fallback",children:"Aperu indisponible"})})]})},p.url||p.name))}):w.jsx("div",{className:"small",children:"Aucun document enregistr."})]}),w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Historique"}),(f=t.history)!=null&&f.length?w.jsx("ul",{className:"timeline",children:t.history.map(p=>w.jsx("li",{children:p.action||""},p.at))}):w.jsx("div",{className:"small",children:"Historique non structur."})]})]})]})}function fk(){return w.jsxs("div",{className:"admin-page",children:[w.jsx("div",{className:"admin-page-header",children:w.jsxs("div",{children:[w.jsx("div",{className:"admin-page-title",children:"Planning (Admin)   venir"}),w.jsx("div",{className:"admin-page-subtitle",children:"Cette page prsentera le planning dtaill des actions."})]})}),w.jsxs("div",{className:"planning-grid",children:[w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Colonne 1"}),w.jsx("p",{children:"Placeholder planning."})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Colonne 2"}),w.jsx("p",{children:"Placeholder planning."})]})]})]})}function pk(){return w.jsxs("div",{className:"admin-page",children:[w.jsx("div",{className:"admin-page-header",children:w.jsxs("div",{children:[w.jsx("div",{className:"admin-page-title",children:"Mode Oprateur / Tlprospection   venir"}),w.jsx("div",{className:"admin-page-subtitle",children:"Vue simplifie pour les appels et relances."})]})}),w.jsxs("div",{className:"grid-operator",children:[w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Leads  appeler"}),w.jsx("p",{children:"Placeholder oprateur."})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Script dappel"}),w.jsx("p",{children:"Placeholder oprateur."})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Notes"}),w.jsx("p",{children:"Placeholder oprateur."})]})]})]})}const mk="https://solaire-api.onrender.com",gk="saftoken-123";function Vv(r){if(!r)return"";if(r.seconds)return new Date(r.seconds*1e3).toLocaleDateString("fr-FR");const e=new Date(r);return isNaN(e.getTime())?"":e.toLocaleDateString("fr-FR")}function yk(){const{id:r}=xf(),e=Uo(),{data:t,loading:i,error:o}=Oc("leads"),l=K.useMemo(()=>(t||[]).find(T=>T.id===r),[t,r]),[h,f]=K.useState(!1),[p,y]=K.useState(null),_=async()=>{if(l){f(!0),y(null);try{const T=await fetch(`${mk}/leads/${l.id}/convert`,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Token":gk},body:JSON.stringify({})}),S=await T.json().catch(()=>({}));if(!T.ok)throw new Error(S.error||T.statusText);y(`Dossier cr : ${S.reference||S.id||"OK"}`),setTimeout(()=>e("/dashboard"),1200)}catch(T){y((T==null?void 0:T.message)||"Erreur de conversion")}finally{f(!1)}}};return i?w.jsx("div",{className:"card",children:"Chargement du lead"}):o?w.jsx("div",{className:"card error",children:"Erreur Firestore"}):l?w.jsxs("div",{className:"admin-page",children:[w.jsxs("div",{className:"admin-page-header",children:[w.jsxs("div",{children:[w.jsx("button",{className:"btn-link",onClick:()=>e(-1),children:" Retour"}),w.jsxs("h1",{className:"admin-page-title",children:["Lead : ",l.name||l.nom||"Sans nom"]}),w.jsxs("p",{className:"admin-page-subtitle",children:[l.email||"","  ",l.phone||l.tlphone||""]})]}),w.jsx("div",{className:"pill",children:l.status||"nouveau"})]}),p&&w.jsx("div",{className:"alert-info",children:p}),w.jsxs("div",{className:"grid two-cols",children:[w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Informations"}),w.jsxs("ul",{className:"data-list",children:[w.jsxs("li",{children:[w.jsx("span",{children:"Source"}),w.jsx("strong",{children:l.source||""})]}),w.jsxs("li",{children:[w.jsx("span",{children:"Adresse"}),w.jsx("strong",{children:l.address||l.adresse||""})]}),w.jsxs("li",{children:[w.jsx("span",{children:"Cr le"}),w.jsx("strong",{children:Vv(l.createdAt)})]}),w.jsxs("li",{children:[w.jsx("span",{children:"Mis  jour"}),w.jsx("strong",{children:Vv(l.updatedAt)})]})]}),l.needs&&l.needs.length>0&&w.jsxs("div",{style:{marginTop:12},children:[w.jsx("div",{className:"small",children:"Besoins"}),w.jsx("div",{className:"tags",children:l.needs.map(T=>w.jsx("span",{className:"pill",children:T},T))})]})]}),w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Actions"}),w.jsx("p",{className:"small",children:"Convertir ce lead en dossier."}),w.jsx("button",{className:"btn-primary",disabled:h,onClick:_,children:h?"Conversion...":"Convertir en dossier"})]})]})]}):w.jsx("div",{className:"card",children:"Lead introuvable"})}function vk(){const{user:r,claims:e,loading:t}=As(),[i,o]=K.useState(""),[l,h]=K.useState(!1);if(t)return null;if(!r||(e==null?void 0:e.role)!=="admin")return w.jsx("div",{className:"card",children:"Accs admin requis"});const f=async()=>{h(!0),o("Seeding");let y=0,_=0,T=0;try{const S=[{name:"Alice Photon",email:"alice@test.com",phone:"0600000001",source:"landing",createdAt:Ue.now()},{name:"Bob Solaire",email:"bob@test.com",phone:"0600000002",source:"partenaire",createdAt:Ue.fromDate(new Date(Date.now()-1728e5))},{name:"Charlie Watt",email:"charlie@test.com",phone:"0600000003",source:"landing",createdAt:Ue.fromDate(new Date(Date.now()-432e6))}];for(const re of S)await xv(xo(Rn,"leads"),re),y++;const O=[{name:"Installateur Alpha",email:"contact@alpha.com",phone:"0700000001",installerId:"INST123"},{name:"Installateur Beta",email:"contact@beta.com",phone:"0700000002",installerId:"INST123"}];for(const re of O)await xv(xo(Rn,"clients"),re),_++;const $=new Date,W=new Date(Date.now()-8*864e5),F=[{installerId:"INST123",pack:"validation",statutGlobal:"en_cours",title:"Validation Maison",clientFinal:"Famille Durand",address:"12 rue du Soleil, 75000 Paris",power:6,nextAction:"Appel client",nextActionDate:$},{installerId:"INST123",pack:"mise_en_service",statutGlobal:"en_attente",title:"Mise en service Site B",clientFinal:"SCI Lumire",address:"45 av. des nergies, Lyon",power:9,nextAction:"Relance Consuel",nextActionDate:W},{installerId:"INST123",pack:"zero_stress",statutGlobal:"finalise",title:"Zro Stress Villa C",clientFinal:"Mme Ray",address:"8 impasse Volt, Marseille",power:12,nextAction:"Facture envoye",nextActionDate:null}];for(const re of F)await XP(re),T++;o(`Seed termin : ${y} leads, ${_} clients, ${T} dossiers crs.`)}catch(S){o(`Erreur seed: ${S.message||S}`)}finally{h(!1)}},p=async()=>{h(!0),o("Suppression des donnes");try{const y=["leads","clients","files","counters"];for(const _ of y){const T=await gw(xo(Rn,_));await Promise.all(T.docs.map(S=>HP(Es(Rn,_,S.id))))}o("Toutes les collections ont t vides.")}catch(y){o(`Erreur suppression: ${y.message||y}`)}finally{h(!1)}};return w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Gnrer des donnes de dmonstration"}),w.jsx("p",{className:"small",children:"Admin uniquement. Ajoute quelques leads/clients/dossiers de test."}),w.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[w.jsx("button",{className:"btn-primary",disabled:l,onClick:f,children:l?"En cours...":"Seed de dmo"}),w.jsx("button",{className:"btn-danger",disabled:l,onClick:p,children:l?"Suppression...":"Vider les collections"})]}),i&&w.jsx("div",{style:{marginTop:10},children:i})]})}function _k(){const{user:r,claims:e,loading:t}=As(),[i,o]=K.useState(!1),[l,h]=K.useState("");if(t)return null;if(!r||(e==null?void 0:e.role)!=="admin")return w.jsx("div",{className:"card",children:"Accs admin requis"});const f=async()=>{o(!0),h("Migration en cours...");let p=0;try{const y=await gw(xo(Rn,"clients"));for(const _ of y.docs)await WP(Es(Rn,"clients",_.id),{installerId:"INST123"}),p+=1;h(`Migration termine : ${p} document${p>1?"s":""} mis  jour.`)}catch(y){h(`Erreur migration : ${y.message||y}`)}finally{o(!1)}};return w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Corriger les installerId"}),w.jsx("p",{className:"small",children:`Force l'installerId sur "INST123" dans tous les clients Firestore.`}),w.jsx("button",{className:"btn-primary",disabled:i,onClick:f,children:i?"Correction en cours...":"Corriger maintenant"}),l&&w.jsx("div",{style:{marginTop:10},children:l})]})}function Ek(){const[r,e]=K.useState(""),[t,i]=K.useState(""),[o,l]=K.useState(""),[h,f]=K.useState(!1),p=async y=>{y.preventDefault(),l(""),f(!0);try{const _=await R_(Vc,r,t),T=await Ew(_.user.uid);if((T==null?void 0:T.role)!=="admin"){l("Accs admin requis."),await IA(Vc),f(!1);return}window.location.href="/dashboard"}catch(_){l(_.message)}finally{f(!1)}};return w.jsxs("div",{className:"card narrow",children:[w.jsx("h3",{children:"Connexion Admin"}),w.jsxs("form",{onSubmit:p,className:"two-cols",children:[w.jsx("input",{placeholder:"Email",value:r,onChange:y=>e(y.target.value)}),w.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:y=>i(y.target.value)}),o&&w.jsx("div",{className:"small",style:{color:"red"},children:o}),w.jsx("button",{className:"btn-primary",type:"submit",disabled:h,children:h?"Connexion...":"Se connecter"})]})]})}function wk(){return w.jsxs(RT,{children:[w.jsx(Kt,{path:"/login",element:w.jsx(Ek,{})}),w.jsx(Kt,{path:"/dashboard",element:w.jsx(hs,{children:w.jsx(ak,{})})}),w.jsx(Kt,{path:"/dossiers/:id",element:w.jsx(hs,{children:w.jsx(dk,{})})}),w.jsx(Kt,{path:"/planning",element:w.jsx(hs,{children:w.jsx(fk,{})})}),w.jsx(Kt,{path:"/operator",element:w.jsx(hs,{children:w.jsx(pk,{})})}),w.jsx(Kt,{path:"/leads/:id",element:w.jsx(hs,{children:w.jsx(yk,{})})}),w.jsx(Kt,{path:"/dev/seed",element:w.jsx(hs,{children:w.jsx(vk,{})})}),w.jsx(Kt,{path:"/admin/fix-installer",element:w.jsx(hs,{children:w.jsx(_k,{})})}),w.jsx(Kt,{path:"/client/login",element:w.jsx(ZP,{})}),w.jsx(Kt,{path:"/client/dashboard",element:w.jsx(Gd,{children:w.jsx(tk,{})})}),w.jsx(Kt,{path:"/client/dossiers",element:w.jsx(Gd,{children:w.jsx(rk,{})})}),w.jsx(Kt,{path:"/client/dossiers/:id",element:w.jsx(Gd,{children:w.jsx(ik,{})})}),w.jsx(Kt,{path:"/",element:w.jsx(Qd,{to:"/dashboard",replace:!0})}),w.jsx(Kt,{path:"/*",element:w.jsx(Qd,{to:"/dashboard",replace:!0})})]})}function hs({children:r}){const{user:e,loading:t}=As();return t||!e?w.jsx("div",{className:"page-loader",children:"Chargement de la session"}):r}L0.createRoot(document.getElementById("root")).render(w.jsx(OT,{children:w.jsx(wk,{})}));
