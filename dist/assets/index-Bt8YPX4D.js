function XT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function YT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var af={exports:{}},rl={},lf={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function ZT(){if(Ey)return xe;Ey=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,j={};function k(M,K,fe){this.props=M,this.context=K,this.refs=j,this.updater=fe||L}k.prototype.isReactComponent={},k.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ee(){}ee.prototype=k.prototype;function ie(M,K,fe){this.props=M,this.context=K,this.refs=j,this.updater=fe||L}var $=ie.prototype=new ee;$.constructor=ie,x($,k.prototype),$.isPureReactComponent=!0;var re=Array.isArray,me=Object.prototype.hasOwnProperty,_e={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function A(M,K,fe){var Re,Pe={},be=null,Be=null;if(K!=null)for(Re in K.ref!==void 0&&(Be=K.ref),K.key!==void 0&&(be=""+K.key),K)me.call(K,Re)&&!D.hasOwnProperty(Re)&&(Pe[Re]=K[Re]);var ze=arguments.length-2;if(ze===1)Pe.children=fe;else if(1<ze){for(var Qe=Array(ze),At=0;At<ze;At++)Qe[At]=arguments[At+2];Pe.children=Qe}if(M&&M.defaultProps)for(Re in ze=M.defaultProps,ze)Pe[Re]===void 0&&(Pe[Re]=ze[Re]);return{$$typeof:n,type:M,key:be,ref:Be,props:Pe,_owner:_e.current}}function P(M,K){return{$$typeof:n,type:M.type,key:K,ref:M.ref,props:M.props,_owner:M._owner}}function b(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return K[fe]})}var F=/\/+/g;function C(M,K){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):K.toString(36)}function qe(M,K,fe,Re,Pe){var be=typeof M;(be==="undefined"||be==="boolean")&&(M=null);var Be=!1;if(M===null)Be=!0;else switch(be){case"string":case"number":Be=!0;break;case"object":switch(M.$$typeof){case n:case e:Be=!0}}if(Be)return Be=M,Pe=Pe(Be),M=Re===""?"."+C(Be,0):Re,re(Pe)?(fe="",M!=null&&(fe=M.replace(F,"$&/")+"/"),qe(Pe,K,fe,"",function(At){return At})):Pe!=null&&(b(Pe)&&(Pe=P(Pe,fe+(!Pe.key||Be&&Be.key===Pe.key?"":(""+Pe.key).replace(F,"$&/")+"/")+M)),K.push(Pe)),1;if(Be=0,Re=Re===""?".":Re+":",re(M))for(var ze=0;ze<M.length;ze++){be=M[ze];var Qe=Re+C(be,ze);Be+=qe(be,K,fe,Qe,Pe)}else if(Qe=S(M),typeof Qe=="function")for(M=Qe.call(M),ze=0;!(be=M.next()).done;)be=be.value,Qe=Re+C(be,ze++),Be+=qe(be,K,fe,Qe,Pe);else if(be==="object")throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Be}function _t(M,K,fe){if(M==null)return M;var Re=[],Pe=0;return qe(M,Re,"","",function(be){return K.call(fe,be,Pe++)}),Re}function Ge(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var Ue={current:null},ne={transition:null},ge={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ne,ReactCurrentOwner:_e};function ae(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:_t,forEach:function(M,K,fe){_t(M,function(){K.apply(this,arguments)},fe)},count:function(M){var K=0;return _t(M,function(){K++}),K},toArray:function(M){return _t(M,function(K){return K})||[]},only:function(M){if(!b(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},xe.Component=k,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=ie,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,xe.act=ae,xe.cloneElement=function(M,K,fe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Re=x({},M.props),Pe=M.key,be=M.ref,Be=M._owner;if(K!=null){if(K.ref!==void 0&&(be=K.ref,Be=_e.current),K.key!==void 0&&(Pe=""+K.key),M.type&&M.type.defaultProps)var ze=M.type.defaultProps;for(Qe in K)me.call(K,Qe)&&!D.hasOwnProperty(Qe)&&(Re[Qe]=K[Qe]===void 0&&ze!==void 0?ze[Qe]:K[Qe])}var Qe=arguments.length-2;if(Qe===1)Re.children=fe;else if(1<Qe){ze=Array(Qe);for(var At=0;At<Qe;At++)ze[At]=arguments[At+2];Re.children=ze}return{$$typeof:n,type:M.type,key:Pe,ref:be,props:Re,_owner:Be}},xe.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},xe.createElement=A,xe.createFactory=function(M){var K=A.bind(null,M);return K.type=M,K},xe.createRef=function(){return{current:null}},xe.forwardRef=function(M){return{$$typeof:d,render:M}},xe.isValidElement=b,xe.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Ge}},xe.memo=function(M,K){return{$$typeof:g,type:M,compare:K===void 0?null:K}},xe.startTransition=function(M){var K=ne.transition;ne.transition={};try{M()}finally{ne.transition=K}},xe.unstable_act=ae,xe.useCallback=function(M,K){return Ue.current.useCallback(M,K)},xe.useContext=function(M){return Ue.current.useContext(M)},xe.useDebugValue=function(){},xe.useDeferredValue=function(M){return Ue.current.useDeferredValue(M)},xe.useEffect=function(M,K){return Ue.current.useEffect(M,K)},xe.useId=function(){return Ue.current.useId()},xe.useImperativeHandle=function(M,K,fe){return Ue.current.useImperativeHandle(M,K,fe)},xe.useInsertionEffect=function(M,K){return Ue.current.useInsertionEffect(M,K)},xe.useLayoutEffect=function(M,K){return Ue.current.useLayoutEffect(M,K)},xe.useMemo=function(M,K){return Ue.current.useMemo(M,K)},xe.useReducer=function(M,K,fe){return Ue.current.useReducer(M,K,fe)},xe.useRef=function(M){return Ue.current.useRef(M)},xe.useState=function(M){return Ue.current.useState(M)},xe.useSyncExternalStore=function(M,K,fe){return Ue.current.useSyncExternalStore(M,K,fe)},xe.useTransition=function(){return Ue.current.useTransition()},xe.version="18.3.1",xe}var wy;function op(){return wy||(wy=1,lf.exports=ZT()),lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function eI(){if(Ty)return rl;Ty=1;var n=op(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,g){var _,E={},S=null,L=null;g!==void 0&&(S=""+g),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(L=p.ref);for(_ in p)i.call(p,_)&&!a.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:S,ref:L,props:E,_owner:o.current}}return rl.Fragment=t,rl.jsx=u,rl.jsxs=u,rl}var Iy;function tI(){return Iy||(Iy=1,af.exports=eI()),af.exports}var w=tI(),Q=op();const nI=YT(Q),rI=XT({__proto__:null,default:nI},[Q]);var cc={},uf={exports:{}},ln={},cf={exports:{}},hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function iI(){return Sy||(Sy=1,(function(n){function e(ne,ge){var ae=ne.length;ne.push(ge);e:for(;0<ae;){var M=ae-1>>>1,K=ne[M];if(0<o(K,ge))ne[M]=ge,ne[ae]=K,ae=M;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var ge=ne[0],ae=ne.pop();if(ae!==ge){ne[0]=ae;e:for(var M=0,K=ne.length,fe=K>>>1;M<fe;){var Re=2*(M+1)-1,Pe=ne[Re],be=Re+1,Be=ne[be];if(0>o(Pe,ae))be<K&&0>o(Be,Pe)?(ne[M]=Be,ne[be]=ae,M=be):(ne[M]=Pe,ne[Re]=ae,M=Re);else if(be<K&&0>o(Be,ae))ne[M]=Be,ne[be]=ae,M=be;else break e}}return ge}function o(ne,ge){var ae=ne.sortIndex-ge.sortIndex;return ae!==0?ae:ne.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],g=[],_=1,E=null,S=3,L=!1,x=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ne){for(var ge=t(g);ge!==null;){if(ge.callback===null)i(g);else if(ge.startTime<=ne)i(g),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(g)}}function re(ne){if(j=!1,$(ne),!x)if(t(p)!==null)x=!0,Ge(me);else{var ge=t(g);ge!==null&&Ue(re,ge.startTime-ne)}}function me(ne,ge){x=!1,j&&(j=!1,ee(A),A=-1),L=!0;var ae=S;try{for($(ge),E=t(p);E!==null&&(!(E.expirationTime>ge)||ne&&!O());){var M=E.callback;if(typeof M=="function"){E.callback=null,S=E.priorityLevel;var K=M(E.expirationTime<=ge);ge=n.unstable_now(),typeof K=="function"?E.callback=K:E===t(p)&&i(p),$(ge)}else i(p);E=t(p)}if(E!==null)var fe=!0;else{var Re=t(g);Re!==null&&Ue(re,Re.startTime-ge),fe=!1}return fe}finally{E=null,S=ae,L=!1}}var _e=!1,D=null,A=-1,P=5,b=-1;function O(){return!(n.unstable_now()-b<P)}function F(){if(D!==null){var ne=n.unstable_now();b=ne;var ge=!0;try{ge=D(!0,ne)}finally{ge?C():(_e=!1,D=null)}}else _e=!1}var C;if(typeof ie=="function")C=function(){ie(F)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,_t=qe.port2;qe.port1.onmessage=F,C=function(){_t.postMessage(null)}}else C=function(){k(F,0)};function Ge(ne){D=ne,_e||(_e=!0,C())}function Ue(ne,ge){A=k(function(){ne(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){x||L||(x=!0,Ge(me))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ne){switch(S){case 1:case 2:case 3:var ge=3;break;default:ge=S}var ae=S;S=ge;try{return ne()}finally{S=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,ge){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=S;S=ne;try{return ge()}finally{S=ae}},n.unstable_scheduleCallback=function(ne,ge,ae){var M=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?M+ae:M):ae=M,ne){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ae+K,ne={id:_++,callback:ge,priorityLevel:ne,startTime:ae,expirationTime:K,sortIndex:-1},ae>M?(ne.sortIndex=ae,e(g,ne),t(p)===null&&ne===t(g)&&(j?(ee(A),A=-1):j=!0,Ue(re,ae-M))):(ne.sortIndex=K,e(p,ne),x||L||(x=!0,Ge(me))),ne},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ne){var ge=S;return function(){var ae=S;S=ge;try{return ne.apply(this,arguments)}finally{S=ae}}}})(hf)),hf}var Ay;function sI(){return Ay||(Ay=1,cf.exports=iI()),cf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function oI(){if(Ry)return ln;Ry=1;var n=op(),e=sI();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function S(r){return p.call(E,r)?!0:p.call(_,r)?!1:g.test(r)?E[r]=!0:(_[r]=!0,!1)}function L(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,s,l,h){if(s===null||typeof s>"u"||L(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(r,s,l,h,f,y,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=T}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new j(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];k[s]=new j(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new j(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new j(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new j(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new j(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new j(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new j(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new j(r,5,!1,r.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function ie(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(ee,ie);k[s]=new j(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(ee,ie);k[s]=new j(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(ee,ie);k[s]=new j(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new j(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new j(r,1,!1,r.toLowerCase(),null,!0,!0)});function $(r,s,l,h){var f=k.hasOwnProperty(s)?k[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,l,f,h)&&(l=null),h||f===null?S(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),_e=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),_t=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ge(r){return r===null||typeof r!="object"?null:(r=ne&&r[ne]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,M;function K(r){if(M===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+r}var fe=!1;function Re(r,s){if(!r||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var h=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){h=q}r.call(s.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),y=h.stack.split(`
`),T=f.length-1,R=y.length-1;1<=T&&0<=R&&f[T]!==y[R];)R--;for(;1<=T&&0<=R;T--,R--)if(f[T]!==y[R]){if(T!==1||R!==1)do if(T--,R--,0>R||f[T]!==y[R]){var N=`
`+f[T].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=T&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?K(r):""}function Pe(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Re(r.type,!1),r;case 11:return r=Re(r.type.render,!1),r;case 1:return r=Re(r.type,!0),r;default:return""}}function be(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case _e:return"Portal";case P:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case qe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case _t:return s=r.displayName||null,s!==null?s:be(r.type)||"Memo";case Ge:s=r._payload,r=r._init;try{return be(r(s))}catch{}}return null}function Be(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ze(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function At(r){var s=Qe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Er(r){r._valueTracker||(r._valueTracker=At(r))}function Ms(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Qe(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function Gr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function qi(r,s){var l=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function js(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=ze(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ua(r,s){s=s.checked,s!=null&&$(r,"checked",s,!1)}function ca(r,s){ua(r,s);var l=ze(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Fs(r,s.type,l):s.hasOwnProperty("defaultValue")&&Fs(r,s.type,ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ql(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Fs(r,s,l){(s!=="number"||Gr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var wr=Array.isArray;function Tr(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+ze(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ha(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Us(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(wr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:ze(l)}}function Bs(r,s){var l=ze(s.value),h=ze(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function da(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function vt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?vt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ir,fa=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ir.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Kr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wi=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(r){Wi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Hi[s]=Hi[r]})});function pa(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Hi.hasOwnProperty(r)&&Hi[r]?(""+s).trim():s+"px"}function ma(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=pa(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var ga=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ya(r,s){if(s){if(ga[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function _a(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gi=null;function zs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var $s=null,In=null,er=null;function qs(r){if(r=za(r)){if(typeof $s!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Au(s),$s(r.stateNode,r.type,s))}}function tr(r){In?er?er.push(r):er=[r]:In=r}function va(){if(In){var r=In,s=er;if(er=In=null,qs(r),s)for(r=0;r<s.length;r++)qs(s[r])}}function Ki(r,s){return r(s)}function Ea(){}var Sr=!1;function wa(r,s,l){if(Sr)return r(s,l);Sr=!0;try{return Ki(r,s,l)}finally{Sr=!1,(In!==null||er!==null)&&(Ea(),va())}}function at(r,s){var l=r.stateNode;if(l===null)return null;var h=Au(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Hs=!1;if(d)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Hs=!1}function Qi(r,s,l,h,f,y,T,R,N){var q=Array.prototype.slice.call(arguments,3);try{s.apply(l,q)}catch(Y){this.onError(Y)}}var Ji=!1,Ws=null,Vn=!1,Ta=null,bh={onError:function(r){Ji=!0,Ws=r}};function Gs(r,s,l,h,f,y,T,R,N){Ji=!1,Ws=null,Qi.apply(bh,arguments)}function Jl(r,s,l,h,f,y,T,R,N){if(Gs.apply(this,arguments),Ji){if(Ji){var q=Ws;Ji=!1,Ws=null}else throw Error(t(198));Vn||(Vn=!0,Ta=q)}}function Ln(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Xi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Mn(r){if(Ln(r)!==r)throw Error(t(188))}function Xl(r){var s=r.alternate;if(!s){if(s=Ln(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return Mn(f),r;if(y===h)return Mn(f),s;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=y;else{for(var T=!1,R=f.child;R;){if(R===l){T=!0,l=f,h=y;break}if(R===h){T=!0,h=f,l=y;break}R=R.sibling}if(!T){for(R=y.child;R;){if(R===l){T=!0,l=y,h=f;break}if(R===h){T=!0,h=y,l=f;break}R=R.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function Ia(r){return r=Xl(r),r!==null?Ks(r):null}function Ks(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Ks(r);if(s!==null)return s;r=r.sibling}return null}var Qs=e.unstable_scheduleCallback,Sa=e.unstable_cancelCallback,Yl=e.unstable_shouldYield,Vh=e.unstable_requestPaint,Je=e.unstable_now,Zl=e.unstable_getCurrentPriorityLevel,Yi=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,Sn=e.unstable_NormalPriority,Aa=e.unstable_LowPriority,eu=e.unstable_IdlePriority,Zi=null,dn=null;function tu(r){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Zi,r,void 0,(r.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:ru,Ra=Math.log,nu=Math.LN2;function ru(r){return r>>>=0,r===0?32:31-(Ra(r)/nu|0)|0}var Js=64,Xs=4194304;function Jr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function es(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,y=r.pingedLanes,T=l&268435455;if(T!==0){var R=T&~f;R!==0?h=Jr(R):(y&=T,y!==0&&(h=Jr(y)))}else T=l&~f,T!==0?h=Jr(T):y!==0&&(h=Jr(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Qt(s),f=1<<l,h|=r[l],s&=~f;return h}function Lh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ar(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,y=r.pendingLanes;0<y;){var T=31-Qt(y),R=1<<T,N=f[T];N===-1?((R&l)===0||(R&h)!==0)&&(f[T]=Lh(R,s)):N<=s&&(r.expiredLanes|=R),y&=~R}}function fn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ts(){var r=Js;return Js<<=1,(Js&4194240)===0&&(Js=64),r}function Xr(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Yr(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Qt(s),r[s]=l}function Ke(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Qt(l),y=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~y}}function Zr(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Qt(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Oe=0;function ei(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var iu,Ys,su,ou,au,Ca=!1,nr=[],Dt=null,jn=null,Fn=null,ti=new Map,An=new Map,rr=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(r,s){switch(r){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":ti.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":An.delete(s.pointerId)}}function en(r,s,l,h,f,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[f]},s!==null&&(s=za(s),s!==null&&Ys(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function jh(r,s,l,h,f){switch(s){case"focusin":return Dt=en(Dt,r,s,l,h,f),!0;case"dragenter":return jn=en(jn,r,s,l,h,f),!0;case"mouseover":return Fn=en(Fn,r,s,l,h,f),!0;case"pointerover":var y=f.pointerId;return ti.set(y,en(ti.get(y)||null,r,s,l,h,f)),!0;case"gotpointercapture":return y=f.pointerId,An.set(y,en(An.get(y)||null,r,s,l,h,f)),!0}return!1}function uu(r){var s=os(r.target);if(s!==null){var l=Ln(s);if(l!==null){if(s=l.tag,s===13){if(s=Xi(l),s!==null){r.blockedOn=s,au(r.priority,function(){su(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Zs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Gi=h,l.target.dispatchEvent(h),Gi=null}else return s=za(l),s!==null&&Ys(s),r.blockedOn=l,!1;s.shift()}return!0}function ns(r,s,l){Rr(r)&&l.delete(s)}function cu(){Ca=!1,Dt!==null&&Rr(Dt)&&(Dt=null),jn!==null&&Rr(jn)&&(jn=null),Fn!==null&&Rr(Fn)&&(Fn=null),ti.forEach(ns),An.forEach(ns)}function Un(r,s){r.blockedOn===s&&(r.blockedOn=null,Ca||(Ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cu)))}function Bn(r){function s(f){return Un(f,r)}if(0<nr.length){Un(nr[0],r);for(var l=1;l<nr.length;l++){var h=nr[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Dt!==null&&Un(Dt,r),jn!==null&&Un(jn,r),Fn!==null&&Un(Fn,r),ti.forEach(s),An.forEach(s),l=0;l<rr.length;l++)h=rr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<rr.length&&(l=rr[0],l.blockedOn===null);)uu(l),l.blockedOn===null&&rr.shift()}var Cr=re.ReactCurrentBatchConfig,ni=!0;function et(r,s,l,h){var f=Oe,y=Cr.transition;Cr.transition=null;try{Oe=1,Pa(r,s,l,h)}finally{Oe=f,Cr.transition=y}}function Fh(r,s,l,h){var f=Oe,y=Cr.transition;Cr.transition=null;try{Oe=4,Pa(r,s,l,h)}finally{Oe=f,Cr.transition=y}}function Pa(r,s,l,h){if(ni){var f=Zs(r,s,l,h);if(f===null)Jh(r,s,h,rs,l),lu(r,h);else if(jh(f,r,s,l,h))h.stopPropagation();else if(lu(r,h),s&4&&-1<Mh.indexOf(r)){for(;f!==null;){var y=za(f);if(y!==null&&iu(y),y=Zs(r,s,l,h),y===null&&Jh(r,s,h,rs,l),y===f)break;f=y}f!==null&&h.stopPropagation()}else Jh(r,s,h,null,l)}}var rs=null;function Zs(r,s,l,h){if(rs=null,r=zs(h),r=os(r),r!==null)if(s=Ln(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Xi(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return rs=r,null}function ka(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zl()){case Yi:return 1;case Qr:return 4;case Sn:case Aa:return 16;case eu:return 536870912;default:return 16}default:return 16}}var pn=null,eo=null,tn=null;function xa(){if(tn)return tn;var r,s=eo,l=s.length,h,f="value"in pn?pn.value:pn.textContent,y=f.length;for(r=0;r<l&&s[r]===f[r];r++);var T=l-r;for(h=1;h<=T&&s[l-h]===f[y-h];h++);return tn=f.slice(r,1<h?1-h:void 0)}function to(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ir(){return!0}function Na(){return!1}function Ot(r){function s(l,h,f,y,T){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(l=r[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ir:Na,this.isPropagationStopped=Na,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),s}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Ot(zn),sr=ae({},zn,{view:0,detail:0}),Uh=Ot(sr),ro,Pr,ri,is=ae({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(ro=r.screenX-ri.screenX,Pr=r.screenY-ri.screenY):Pr=ro=0,ri=r),ro)},movementY:function(r){return"movementY"in r?r.movementY:Pr}}),io=Ot(is),Da=ae({},is,{dataTransfer:0}),hu=Ot(Da),so=ae({},sr,{relatedTarget:0}),oo=Ot(so),du=ae({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),kr=Ot(du),fu=ae({},zn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),pu=Ot(fu),mu=ae({},zn,{data:0}),Oa=Ot(mu),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=gu[r])?!!s[r]:!1}function or(){return yu}var c=ae({},sr,{key:function(r){if(r.key){var s=ao[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=to(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(r){return r.type==="keypress"?to(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?to(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Ot(c),v=ae({},is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ot(v),U=ae({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),W=Ot(U),se=ae({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Ot(se),wt=ae({},is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Ot(wt),Rt=[9,13,27,32],ft=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var mn=d&&"TextEvent"in window&&!Rn,ss=d&&(!ft||Rn&&8<Rn&&11>=Rn),lo=" ",pm=!1;function mm(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var uo=!1;function K0(r,s){switch(r){case"compositionend":return gm(s);case"keypress":return s.which!==32?null:(pm=!0,lo);case"textInput":return r=s.data,r===lo&&pm?null:r;default:return null}}function Q0(r,s){if(uo)return r==="compositionend"||!ft&&mm(r,s)?(r=xa(),tn=eo=pn=null,uo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ss&&s.locale!=="ko"?null:s.data;default:return null}}var J0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!J0[r.type]:s==="textarea"}function _m(r,s,l,h){tr(h),s=Tu(s,"onChange"),0<s.length&&(l=new no("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var ba=null,Va=null;function X0(r){Lm(r,0)}function _u(r){var s=mo(r);if(Ms(s))return r}function Y0(r,s){if(r==="change")return s}var vm=!1;if(d){var Bh;if(d){var zh="oninput"in document;if(!zh){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),zh=typeof Em.oninput=="function"}Bh=zh}else Bh=!1;vm=Bh&&(!document.documentMode||9<document.documentMode)}function wm(){ba&&(ba.detachEvent("onpropertychange",Tm),Va=ba=null)}function Tm(r){if(r.propertyName==="value"&&_u(Va)){var s=[];_m(s,Va,r,zs(r)),wa(X0,s)}}function Z0(r,s,l){r==="focusin"?(wm(),ba=s,Va=l,ba.attachEvent("onpropertychange",Tm)):r==="focusout"&&wm()}function eT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return _u(Va)}function tT(r,s){if(r==="click")return _u(s)}function nT(r,s){if(r==="input"||r==="change")return _u(s)}function rT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var $n=typeof Object.is=="function"?Object.is:rT;function La(r,s){if($n(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!$n(r[f],s[f]))return!1}return!0}function Im(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Sm(r,s){var l=Im(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Im(l)}}function Am(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Am(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Rm(){for(var r=window,s=Gr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Gr(r.document)}return s}function $h(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function iT(r){var s=Rm(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Am(l.ownerDocument.documentElement,l)){if(h!==null&&$h(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,y=Math.min(h.start,f);h=h.end===void 0?y:Math.min(h.end,f),!r.extend&&y>h&&(f=h,h=y,y=f),f=Sm(l,y);var T=Sm(l,h);f&&T&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),y>h?(r.addRange(s),r.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var sT=d&&"documentMode"in document&&11>=document.documentMode,co=null,qh=null,Ma=null,Hh=!1;function Cm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hh||co==null||co!==Gr(h)||(h=co,"selectionStart"in h&&$h(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ma&&La(Ma,h)||(Ma=h,h=Tu(qh,"onSelect"),0<h.length&&(s=new no("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=co)))}function vu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ho={animationend:vu("Animation","AnimationEnd"),animationiteration:vu("Animation","AnimationIteration"),animationstart:vu("Animation","AnimationStart"),transitionend:vu("Transition","TransitionEnd")},Wh={},Pm={};d&&(Pm=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Eu(r){if(Wh[r])return Wh[r];if(!ho[r])return r;var s=ho[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Pm)return Wh[r]=s[l];return r}var km=Eu("animationend"),xm=Eu("animationiteration"),Nm=Eu("animationstart"),Dm=Eu("transitionend"),Om=new Map,bm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(r,s){Om.set(r,s),a(s,[r])}for(var Gh=0;Gh<bm.length;Gh++){var Kh=bm[Gh],oT=Kh.toLowerCase(),aT=Kh[0].toUpperCase()+Kh.slice(1);ii(oT,"on"+aT)}ii(km,"onAnimationEnd"),ii(xm,"onAnimationIteration"),ii(Nm,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Dm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function Vm(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Jl(h,s,void 0,r),r.currentTarget=null}function Lm(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var T=h.length-1;0<=T;T--){var R=h[T],N=R.instance,q=R.currentTarget;if(R=R.listener,N!==y&&f.isPropagationStopped())break e;Vm(f,R,q),y=N}else for(T=0;T<h.length;T++){if(R=h[T],N=R.instance,q=R.currentTarget,R=R.listener,N!==y&&f.isPropagationStopped())break e;Vm(f,R,q),y=N}}}if(Vn)throw r=Ta,Vn=!1,Ta=null,r}function Ye(r,s){var l=s[nd];l===void 0&&(l=s[nd]=new Set);var h=r+"__bubble";l.has(h)||(Mm(s,r,2,!1),l.add(h))}function Qh(r,s,l){var h=0;s&&(h|=4),Mm(l,r,h,s)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Fa(r){if(!r[wu]){r[wu]=!0,i.forEach(function(l){l!=="selectionchange"&&(lT.has(l)||Qh(l,!1,r),Qh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[wu]||(s[wu]=!0,Qh("selectionchange",!1,s))}}function Mm(r,s,l,h){switch(ka(s)){case 1:var f=et;break;case 4:f=Fh;break;default:f=Pa}l=f.bind(null,s,l,r),f=void 0,!Hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Jh(r,s,l,h,f){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var R=h.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(T===4)for(T=h.return;T!==null;){var N=T.tag;if((N===3||N===4)&&(N=T.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;T=T.return}for(;R!==null;){if(T=os(R),T===null)return;if(N=T.tag,N===5||N===6){h=y=T;continue e}R=R.parentNode}}h=h.return}wa(function(){var q=y,Y=zs(l),Z=[];e:{var X=Om.get(r);if(X!==void 0){var le=no,he=r;switch(r){case"keypress":if(to(l)===0)break e;case"keydown":case"keyup":le=m;break;case"focusin":he="focus",le=oo;break;case"focusout":he="blur",le=oo;break;case"beforeblur":case"afterblur":le=oo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=W;break;case km:case xm:case Nm:le=kr;break;case Dm:le=He;break;case"scroll":le=Uh;break;case"wheel":le=Ve;break;case"copy":case"cut":case"paste":le=pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=I}var de=(s&4)!==0,lt=!de&&r==="scroll",B=de?X!==null?X+"Capture":null:X;de=[];for(var V=q,z;V!==null;){z=V;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,B!==null&&(te=at(V,B),te!=null&&de.push(Ua(V,te,z)))),lt)break;V=V.return}0<de.length&&(X=new le(X,he,null,l,Y),Z.push({event:X,listeners:de}))}}if((s&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",X&&l!==Gi&&(he=l.relatedTarget||l.fromElement)&&(os(he)||he[xr]))break e;if((le||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,le?(he=l.relatedTarget||l.toElement,le=q,he=he?os(he):null,he!==null&&(lt=Ln(he),he!==lt||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=q),le!==he)){if(de=io,te="onMouseLeave",B="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(de=I,te="onPointerLeave",B="onPointerEnter",V="pointer"),lt=le==null?X:mo(le),z=he==null?X:mo(he),X=new de(te,V+"leave",le,l,Y),X.target=lt,X.relatedTarget=z,te=null,os(Y)===q&&(de=new de(B,V+"enter",he,l,Y),de.target=z,de.relatedTarget=lt,te=de),lt=te,le&&he)t:{for(de=le,B=he,V=0,z=de;z;z=fo(z))V++;for(z=0,te=B;te;te=fo(te))z++;for(;0<V-z;)de=fo(de),V--;for(;0<z-V;)B=fo(B),z--;for(;V--;){if(de===B||B!==null&&de===B.alternate)break t;de=fo(de),B=fo(B)}de=null}else de=null;le!==null&&jm(Z,X,le,de,!1),he!==null&&lt!==null&&jm(Z,lt,he,de,!0)}}e:{if(X=q?mo(q):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=Y0;else if(ym(X))if(vm)pe=nT;else{pe=eT;var Ee=Z0}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=tT);if(pe&&(pe=pe(r,q))){_m(Z,pe,l,Y);break e}Ee&&Ee(r,X,q),r==="focusout"&&(Ee=X._wrapperState)&&Ee.controlled&&X.type==="number"&&Fs(X,"number",X.value)}switch(Ee=q?mo(q):window,r){case"focusin":(ym(Ee)||Ee.contentEditable==="true")&&(co=Ee,qh=q,Ma=null);break;case"focusout":Ma=qh=co=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Cm(Z,l,Y);break;case"selectionchange":if(sT)break;case"keydown":case"keyup":Cm(Z,l,Y)}var we;if(ft)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else uo?mm(r,l)&&(Se="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(ss&&l.locale!=="ko"&&(uo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&uo&&(we=xa()):(pn=Y,eo="value"in pn?pn.value:pn.textContent,uo=!0)),Ee=Tu(q,Se),0<Ee.length&&(Se=new Oa(Se,r,null,l,Y),Z.push({event:Se,listeners:Ee}),we?Se.data=we:(we=gm(l),we!==null&&(Se.data=we)))),(we=mn?K0(r,l):Q0(r,l))&&(q=Tu(q,"onBeforeInput"),0<q.length&&(Y=new Oa("onBeforeInput","beforeinput",null,l,Y),Z.push({event:Y,listeners:q}),Y.data=we))}Lm(Z,s)})}function Ua(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Tu(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=at(r,l),y!=null&&h.unshift(Ua(r,y,f)),y=at(r,s),y!=null&&h.push(Ua(r,y,f))),r=r.return}return h}function fo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function jm(r,s,l,h,f){for(var y=s._reactName,T=[];l!==null&&l!==h;){var R=l,N=R.alternate,q=R.stateNode;if(N!==null&&N===h)break;R.tag===5&&q!==null&&(R=q,f?(N=at(l,y),N!=null&&T.unshift(Ua(l,N,R))):f||(N=at(l,y),N!=null&&T.push(Ua(l,N,R)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var uT=/\r\n?/g,cT=/\u0000|\uFFFD/g;function Fm(r){return(typeof r=="string"?r:""+r).replace(uT,`
`).replace(cT,"")}function Iu(r,s,l){if(s=Fm(s),Fm(r)!==s&&l)throw Error(t(425))}function Su(){}var Xh=null,Yh=null;function Zh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ed=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,dT=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(r){return Um.resolve(null).then(r).catch(fT)}:ed;function fT(r){setTimeout(function(){throw r})}function td(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Bn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Bn(s)}function si(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Bm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var po=Math.random().toString(36).slice(2),ar="__reactFiber$"+po,Ba="__reactProps$"+po,xr="__reactContainer$"+po,nd="__reactEvents$"+po,pT="__reactListeners$"+po,mT="__reactHandles$"+po;function os(r){var s=r[ar];if(s)return s;for(var l=r.parentNode;l;){if(s=l[xr]||l[ar]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Bm(r);r!==null;){if(l=r[ar])return l;r=Bm(r)}return s}r=l,l=r.parentNode}return null}function za(r){return r=r[ar]||r[xr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function mo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Au(r){return r[Ba]||null}var rd=[],go=-1;function oi(r){return{current:r}}function Ze(r){0>go||(r.current=rd[go],rd[go]=null,go--)}function Xe(r,s){go++,rd[go]=r.current,r.current=s}var ai={},Ft=oi(ai),nn=oi(!1),as=ai;function yo(r,s){var l=r.type.contextTypes;if(!l)return ai;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in l)f[y]=s[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function rn(r){return r=r.childContextTypes,r!=null}function Ru(){Ze(nn),Ze(Ft)}function zm(r,s,l){if(Ft.current!==ai)throw Error(t(168));Xe(Ft,s),Xe(nn,l)}function $m(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Be(r)||"Unknown",f));return ae({},l,h)}function Cu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ai,as=Ft.current,Xe(Ft,r),Xe(nn,nn.current),!0}function qm(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=$m(r,s,as),h.__reactInternalMemoizedMergedChildContext=r,Ze(nn),Ze(Ft),Xe(Ft,r)):Ze(nn),Xe(nn,l)}var Nr=null,Pu=!1,id=!1;function Hm(r){Nr===null?Nr=[r]:Nr.push(r)}function gT(r){Pu=!0,Hm(r)}function li(){if(!id&&Nr!==null){id=!0;var r=0,s=Oe;try{var l=Nr;for(Oe=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Nr=null,Pu=!1}catch(f){throw Nr!==null&&(Nr=Nr.slice(r+1)),Qs(Yi,li),f}finally{Oe=s,id=!1}}return null}var _o=[],vo=0,ku=null,xu=0,Cn=[],Pn=0,ls=null,Dr=1,Or="";function us(r,s){_o[vo++]=xu,_o[vo++]=ku,ku=r,xu=s}function Wm(r,s,l){Cn[Pn++]=Dr,Cn[Pn++]=Or,Cn[Pn++]=ls,ls=r;var h=Dr;r=Or;var f=32-Qt(h)-1;h&=~(1<<f),l+=1;var y=32-Qt(s)+f;if(30<y){var T=f-f%5;y=(h&(1<<T)-1).toString(32),h>>=T,f-=T,Dr=1<<32-Qt(s)+f|l<<f|h,Or=y+r}else Dr=1<<y|l<<f|h,Or=r}function sd(r){r.return!==null&&(us(r,1),Wm(r,1,0))}function od(r){for(;r===ku;)ku=_o[--vo],_o[vo]=null,xu=_o[--vo],_o[vo]=null;for(;r===ls;)ls=Cn[--Pn],Cn[Pn]=null,Or=Cn[--Pn],Cn[Pn]=null,Dr=Cn[--Pn],Cn[Pn]=null}var gn=null,yn=null,tt=!1,qn=null;function Gm(r,s){var l=Dn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function Km(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,gn=r,yn=si(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,gn=r,yn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=ls!==null?{id:Dr,overflow:Or}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Dn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,gn=r,yn=null,!0):!1;default:return!1}}function ad(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ld(r){if(tt){var s=yn;if(s){var l=s;if(!Km(r,s)){if(ad(r))throw Error(t(418));s=si(l.nextSibling);var h=gn;s&&Km(r,s)?Gm(h,l):(r.flags=r.flags&-4097|2,tt=!1,gn=r)}}else{if(ad(r))throw Error(t(418));r.flags=r.flags&-4097|2,tt=!1,gn=r}}}function Qm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gn=r}function Nu(r){if(r!==gn)return!1;if(!tt)return Qm(r),tt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Zh(r.type,r.memoizedProps)),s&&(s=yn)){if(ad(r))throw Jm(),Error(t(418));for(;s;)Gm(r,s),s=si(s.nextSibling)}if(Qm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){yn=si(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}yn=null}}else yn=gn?si(r.stateNode.nextSibling):null;return!0}function Jm(){for(var r=yn;r;)r=si(r.nextSibling)}function Eo(){yn=gn=null,tt=!1}function ud(r){qn===null?qn=[r]:qn.push(r)}var yT=re.ReactCurrentBatchConfig;function $a(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(T){var R=f.refs;T===null?delete R[y]:R[y]=T},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Du(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Xm(r){var s=r._init;return s(r._payload)}function Ym(r){function s(B,V){if(r){var z=B.deletions;z===null?(B.deletions=[V],B.flags|=16):z.push(V)}}function l(B,V){if(!r)return null;for(;V!==null;)s(B,V),V=V.sibling;return null}function h(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function f(B,V){return B=gi(B,V),B.index=0,B.sibling=null,B}function y(B,V,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<V?(B.flags|=2,V):z):(B.flags|=2,V)):(B.flags|=1048576,V)}function T(B){return r&&B.alternate===null&&(B.flags|=2),B}function R(B,V,z,te){return V===null||V.tag!==6?(V=ef(z,B.mode,te),V.return=B,V):(V=f(V,z),V.return=B,V)}function N(B,V,z,te){var pe=z.type;return pe===D?Y(B,V,z.props.children,te,z.key):V!==null&&(V.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Ge&&Xm(pe)===V.type)?(te=f(V,z.props),te.ref=$a(B,V,z),te.return=B,te):(te=nc(z.type,z.key,z.props,null,B.mode,te),te.ref=$a(B,V,z),te.return=B,te)}function q(B,V,z,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=tf(z,B.mode,te),V.return=B,V):(V=f(V,z.children||[]),V.return=B,V)}function Y(B,V,z,te,pe){return V===null||V.tag!==7?(V=ys(z,B.mode,te,pe),V.return=B,V):(V=f(V,z),V.return=B,V)}function Z(B,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=ef(""+V,B.mode,z),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case me:return z=nc(V.type,V.key,V.props,null,B.mode,z),z.ref=$a(B,null,V),z.return=B,z;case _e:return V=tf(V,B.mode,z),V.return=B,V;case Ge:var te=V._init;return Z(B,te(V._payload),z)}if(wr(V)||ge(V))return V=ys(V,B.mode,z,null),V.return=B,V;Du(B,V)}return null}function X(B,V,z,te){var pe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:R(B,V,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case me:return z.key===pe?N(B,V,z,te):null;case _e:return z.key===pe?q(B,V,z,te):null;case Ge:return pe=z._init,X(B,V,pe(z._payload),te)}if(wr(z)||ge(z))return pe!==null?null:Y(B,V,z,te,null);Du(B,z)}return null}function le(B,V,z,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return B=B.get(z)||null,R(V,B,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case me:return B=B.get(te.key===null?z:te.key)||null,N(V,B,te,pe);case _e:return B=B.get(te.key===null?z:te.key)||null,q(V,B,te,pe);case Ge:var Ee=te._init;return le(B,V,z,Ee(te._payload),pe)}if(wr(te)||ge(te))return B=B.get(z)||null,Y(V,B,te,pe,null);Du(V,te)}return null}function he(B,V,z,te){for(var pe=null,Ee=null,we=V,Se=V=0,kt=null;we!==null&&Se<z.length;Se++){we.index>Se?(kt=we,we=null):kt=we.sibling;var Fe=X(B,we,z[Se],te);if(Fe===null){we===null&&(we=kt);break}r&&we&&Fe.alternate===null&&s(B,we),V=y(Fe,V,Se),Ee===null?pe=Fe:Ee.sibling=Fe,Ee=Fe,we=kt}if(Se===z.length)return l(B,we),tt&&us(B,Se),pe;if(we===null){for(;Se<z.length;Se++)we=Z(B,z[Se],te),we!==null&&(V=y(we,V,Se),Ee===null?pe=we:Ee.sibling=we,Ee=we);return tt&&us(B,Se),pe}for(we=h(B,we);Se<z.length;Se++)kt=le(we,B,Se,z[Se],te),kt!==null&&(r&&kt.alternate!==null&&we.delete(kt.key===null?Se:kt.key),V=y(kt,V,Se),Ee===null?pe=kt:Ee.sibling=kt,Ee=kt);return r&&we.forEach(function(yi){return s(B,yi)}),tt&&us(B,Se),pe}function de(B,V,z,te){var pe=ge(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var Ee=pe=null,we=V,Se=V=0,kt=null,Fe=z.next();we!==null&&!Fe.done;Se++,Fe=z.next()){we.index>Se?(kt=we,we=null):kt=we.sibling;var yi=X(B,we,Fe.value,te);if(yi===null){we===null&&(we=kt);break}r&&we&&yi.alternate===null&&s(B,we),V=y(yi,V,Se),Ee===null?pe=yi:Ee.sibling=yi,Ee=yi,we=kt}if(Fe.done)return l(B,we),tt&&us(B,Se),pe;if(we===null){for(;!Fe.done;Se++,Fe=z.next())Fe=Z(B,Fe.value,te),Fe!==null&&(V=y(Fe,V,Se),Ee===null?pe=Fe:Ee.sibling=Fe,Ee=Fe);return tt&&us(B,Se),pe}for(we=h(B,we);!Fe.done;Se++,Fe=z.next())Fe=le(we,B,Se,Fe.value,te),Fe!==null&&(r&&Fe.alternate!==null&&we.delete(Fe.key===null?Se:Fe.key),V=y(Fe,V,Se),Ee===null?pe=Fe:Ee.sibling=Fe,Ee=Fe);return r&&we.forEach(function(JT){return s(B,JT)}),tt&&us(B,Se),pe}function lt(B,V,z,te){if(typeof z=="object"&&z!==null&&z.type===D&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case me:e:{for(var pe=z.key,Ee=V;Ee!==null;){if(Ee.key===pe){if(pe=z.type,pe===D){if(Ee.tag===7){l(B,Ee.sibling),V=f(Ee,z.props.children),V.return=B,B=V;break e}}else if(Ee.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Ge&&Xm(pe)===Ee.type){l(B,Ee.sibling),V=f(Ee,z.props),V.ref=$a(B,Ee,z),V.return=B,B=V;break e}l(B,Ee);break}else s(B,Ee);Ee=Ee.sibling}z.type===D?(V=ys(z.props.children,B.mode,te,z.key),V.return=B,B=V):(te=nc(z.type,z.key,z.props,null,B.mode,te),te.ref=$a(B,V,z),te.return=B,B=te)}return T(B);case _e:e:{for(Ee=z.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){l(B,V.sibling),V=f(V,z.children||[]),V.return=B,B=V;break e}else{l(B,V);break}else s(B,V);V=V.sibling}V=tf(z,B.mode,te),V.return=B,B=V}return T(B);case Ge:return Ee=z._init,lt(B,V,Ee(z._payload),te)}if(wr(z))return he(B,V,z,te);if(ge(z))return de(B,V,z,te);Du(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(l(B,V.sibling),V=f(V,z),V.return=B,B=V):(l(B,V),V=ef(z,B.mode,te),V.return=B,B=V),T(B)):l(B,V)}return lt}var wo=Ym(!0),Zm=Ym(!1),Ou=oi(null),bu=null,To=null,cd=null;function hd(){cd=To=bu=null}function dd(r){var s=Ou.current;Ze(Ou),r._currentValue=s}function fd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Io(r,s){bu=r,cd=To=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(sn=!0),r.firstContext=null)}function kn(r){var s=r._currentValue;if(cd!==r)if(r={context:r,memoizedValue:s,next:null},To===null){if(bu===null)throw Error(t(308));To=r,bu.dependencies={lanes:0,firstContext:r}}else To=To.next=r;return s}var cs=null;function pd(r){cs===null?cs=[r]:cs.push(r)}function eg(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,pd(s)):(l.next=f.next,f.next=l),s.interleaved=l,br(r,h)}function br(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var ui=!1;function md(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Vr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ci(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,br(r,l)}return f=h.interleaved,f===null?(s.next=s,pd(h)):(s.next=f.next,f.next=s),h.interleaved=s,br(r,l)}function Vu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Zr(r,l)}}function ng(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?f=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?f=y=s:y=y.next=s}else f=y=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Lu(r,s,l,h){var f=r.updateQueue;ui=!1;var y=f.firstBaseUpdate,T=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var N=R,q=N.next;N.next=null,T===null?y=q:T.next=q,T=N;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,R=Y.lastBaseUpdate,R!==T&&(R===null?Y.firstBaseUpdate=q:R.next=q,Y.lastBaseUpdate=N))}if(y!==null){var Z=f.baseState;T=0,Y=q=N=null,R=y;do{var X=R.lane,le=R.eventTime;if((h&X)===X){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var he=r,de=R;switch(X=s,le=l,de.tag){case 1:if(he=de.payload,typeof he=="function"){Z=he.call(le,Z,X);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,X=typeof he=="function"?he.call(le,Z,X):he,X==null)break e;Z=ae({},Z,X);break e;case 2:ui=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,X=f.effects,X===null?f.effects=[R]:X.push(R))}else le={eventTime:le,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Y===null?(q=Y=le,N=Z):Y=Y.next=le,T|=X;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;X=R,R=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);if(Y===null&&(N=Z),f.baseState=N,f.firstBaseUpdate=q,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do T|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);fs|=T,r.lanes=T,r.memoizedState=Z}}function rg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var qa={},lr=oi(qa),Ha=oi(qa),Wa=oi(qa);function hs(r){if(r===qa)throw Error(t(174));return r}function gd(r,s){switch(Xe(Wa,s),Xe(Ha,r),Xe(lr,qa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Et(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=Et(s,r)}Ze(lr),Xe(lr,s)}function So(){Ze(lr),Ze(Ha),Ze(Wa)}function ig(r){hs(Wa.current);var s=hs(lr.current),l=Et(s,r.type);s!==l&&(Xe(Ha,r),Xe(lr,l))}function yd(r){Ha.current===r&&(Ze(lr),Ze(Ha))}var nt=oi(0);function Mu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _d=[];function vd(){for(var r=0;r<_d.length;r++)_d[r]._workInProgressVersionPrimary=null;_d.length=0}var ju=re.ReactCurrentDispatcher,Ed=re.ReactCurrentBatchConfig,ds=0,rt=null,Tt=null,Ct=null,Fu=!1,Ga=!1,Ka=0,_T=0;function Ut(){throw Error(t(321))}function wd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!$n(r[l],s[l]))return!1;return!0}function Td(r,s,l,h,f,y){if(ds=y,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ju.current=r===null||r.memoizedState===null?TT:IT,r=l(h,f),Ga){y=0;do{if(Ga=!1,Ka=0,25<=y)throw Error(t(301));y+=1,Ct=Tt=null,s.updateQueue=null,ju.current=ST,r=l(h,f)}while(Ga)}if(ju.current=zu,s=Tt!==null&&Tt.next!==null,ds=0,Ct=Tt=rt=null,Fu=!1,s)throw Error(t(300));return r}function Id(){var r=Ka!==0;return Ka=0,r}function ur(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?rt.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function xn(){if(Tt===null){var r=rt.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var s=Ct===null?rt.memoizedState:Ct.next;if(s!==null)Ct=s,Tt=r;else{if(r===null)throw Error(t(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?rt.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Qa(r,s){return typeof s=="function"?s(r):s}function Sd(r){var s=xn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Tt,f=h.baseQueue,y=l.pending;if(y!==null){if(f!==null){var T=f.next;f.next=y.next,y.next=T}h.baseQueue=f=y,l.pending=null}if(f!==null){y=f.next,h=h.baseState;var R=T=null,N=null,q=y;do{var Y=q.lane;if((ds&Y)===Y)N!==null&&(N=N.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var Z={lane:Y,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};N===null?(R=N=Z,T=h):N=N.next=Z,rt.lanes|=Y,fs|=Y}q=q.next}while(q!==null&&q!==y);N===null?T=h:N.next=R,$n(h,s.memoizedState)||(sn=!0),s.memoizedState=h,s.baseState=T,s.baseQueue=N,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do y=f.lane,rt.lanes|=y,fs|=y,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Ad(r){var s=xn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,y=s.memoizedState;if(f!==null){l.pending=null;var T=f=f.next;do y=r(y,T.action),T=T.next;while(T!==f);$n(y,s.memoizedState)||(sn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function sg(){}function og(r,s){var l=rt,h=xn(),f=s(),y=!$n(h.memoizedState,f);if(y&&(h.memoizedState=f,sn=!0),h=h.queue,Rd(ug.bind(null,l,h,r),[r]),h.getSnapshot!==s||y||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ja(9,lg.bind(null,l,h,f,s),void 0,null),Pt===null)throw Error(t(349));(ds&30)!==0||ag(l,s,f)}return f}function ag(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function lg(r,s,l,h){s.value=l,s.getSnapshot=h,cg(s)&&hg(r)}function ug(r,s,l){return l(function(){cg(s)&&hg(r)})}function cg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!$n(r,l)}catch{return!0}}function hg(r){var s=br(r,1);s!==null&&Kn(s,r,1,-1)}function dg(r){var s=ur();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:r},s.queue=r,r=r.dispatch=wT.bind(null,rt,r),[s.memoizedState,r]}function Ja(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function fg(){return xn().memoizedState}function Uu(r,s,l,h){var f=ur();rt.flags|=r,f.memoizedState=Ja(1|s,l,void 0,h===void 0?null:h)}function Bu(r,s,l,h){var f=xn();h=h===void 0?null:h;var y=void 0;if(Tt!==null){var T=Tt.memoizedState;if(y=T.destroy,h!==null&&wd(h,T.deps)){f.memoizedState=Ja(s,l,y,h);return}}rt.flags|=r,f.memoizedState=Ja(1|s,l,y,h)}function pg(r,s){return Uu(8390656,8,r,s)}function Rd(r,s){return Bu(2048,8,r,s)}function mg(r,s){return Bu(4,2,r,s)}function gg(r,s){return Bu(4,4,r,s)}function yg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function _g(r,s,l){return l=l!=null?l.concat([r]):null,Bu(4,4,yg.bind(null,s,r),l)}function Cd(){}function vg(r,s){var l=xn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&wd(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Eg(r,s){var l=xn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&wd(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function wg(r,s,l){return(ds&21)===0?(r.baseState&&(r.baseState=!1,sn=!0),r.memoizedState=l):($n(l,s)||(l=ts(),rt.lanes|=l,fs|=l,r.baseState=!0),s)}function vT(r,s){var l=Oe;Oe=l!==0&&4>l?l:4,r(!0);var h=Ed.transition;Ed.transition={};try{r(!1),s()}finally{Oe=l,Ed.transition=h}}function Tg(){return xn().memoizedState}function ET(r,s,l){var h=pi(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Ig(r))Sg(s,l);else if(l=eg(r,s,l,h),l!==null){var f=Yt();Kn(l,r,h,f),Ag(l,s,h)}}function wT(r,s,l){var h=pi(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ig(r))Sg(s,f);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,R=y(T,l);if(f.hasEagerState=!0,f.eagerState=R,$n(R,T)){var N=s.interleaved;N===null?(f.next=f,pd(s)):(f.next=N.next,N.next=f),s.interleaved=f;return}}catch{}finally{}l=eg(r,s,f,h),l!==null&&(f=Yt(),Kn(l,r,h,f),Ag(l,s,h))}}function Ig(r){var s=r.alternate;return r===rt||s!==null&&s===rt}function Sg(r,s){Ga=Fu=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Ag(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Zr(r,l)}}var zu={readContext:kn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},TT={readContext:kn,useCallback:function(r,s){return ur().memoizedState=[r,s===void 0?null:s],r},useContext:kn,useEffect:pg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Uu(4194308,4,yg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Uu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Uu(4,2,r,s)},useMemo:function(r,s){var l=ur();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=ur();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=ET.bind(null,rt,r),[h.memoizedState,r]},useRef:function(r){var s=ur();return r={current:r},s.memoizedState=r},useState:dg,useDebugValue:Cd,useDeferredValue:function(r){return ur().memoizedState=r},useTransition:function(){var r=dg(!1),s=r[0];return r=vT.bind(null,r[1]),ur().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=rt,f=ur();if(tt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Pt===null)throw Error(t(349));(ds&30)!==0||ag(h,s,l)}f.memoizedState=l;var y={value:l,getSnapshot:s};return f.queue=y,pg(ug.bind(null,h,y,r),[r]),h.flags|=2048,Ja(9,lg.bind(null,h,y,l,s),void 0,null),l},useId:function(){var r=ur(),s=Pt.identifierPrefix;if(tt){var l=Or,h=Dr;l=(h&~(1<<32-Qt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Ka++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=_T++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},IT={readContext:kn,useCallback:vg,useContext:kn,useEffect:Rd,useImperativeHandle:_g,useInsertionEffect:mg,useLayoutEffect:gg,useMemo:Eg,useReducer:Sd,useRef:fg,useState:function(){return Sd(Qa)},useDebugValue:Cd,useDeferredValue:function(r){var s=xn();return wg(s,Tt.memoizedState,r)},useTransition:function(){var r=Sd(Qa)[0],s=xn().memoizedState;return[r,s]},useMutableSource:sg,useSyncExternalStore:og,useId:Tg,unstable_isNewReconciler:!1},ST={readContext:kn,useCallback:vg,useContext:kn,useEffect:Rd,useImperativeHandle:_g,useInsertionEffect:mg,useLayoutEffect:gg,useMemo:Eg,useReducer:Ad,useRef:fg,useState:function(){return Ad(Qa)},useDebugValue:Cd,useDeferredValue:function(r){var s=xn();return Tt===null?s.memoizedState=r:wg(s,Tt.memoizedState,r)},useTransition:function(){var r=Ad(Qa)[0],s=xn().memoizedState;return[r,s]},useMutableSource:sg,useSyncExternalStore:og,useId:Tg,unstable_isNewReconciler:!1};function Hn(r,s){if(r&&r.defaultProps){s=ae({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Pd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:ae({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var $u={isMounted:function(r){return(r=r._reactInternals)?Ln(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=pi(r),y=Vr(h,f);y.payload=s,l!=null&&(y.callback=l),s=ci(r,y,f),s!==null&&(Kn(s,r,f,h),Vu(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=Yt(),f=pi(r),y=Vr(h,f);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=ci(r,y,f),s!==null&&(Kn(s,r,f,h),Vu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Yt(),h=pi(r),f=Vr(l,h);f.tag=2,s!=null&&(f.callback=s),s=ci(r,f,h),s!==null&&(Kn(s,r,h,l),Vu(s,r,h))}};function Rg(r,s,l,h,f,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,T):s.prototype&&s.prototype.isPureReactComponent?!La(l,h)||!La(f,y):!0}function Cg(r,s,l){var h=!1,f=ai,y=s.contextType;return typeof y=="object"&&y!==null?y=kn(y):(f=rn(s)?as:Ft.current,h=s.contextTypes,y=(h=h!=null)?yo(r,f):ai),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$u,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=y),s}function Pg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&$u.enqueueReplaceState(s,s.state,null)}function kd(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},md(r);var y=s.contextType;typeof y=="object"&&y!==null?f.context=kn(y):(y=rn(s)?as:Ft.current,f.context=yo(r,y)),f.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Pd(r,s,y,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&$u.enqueueReplaceState(f,f.state,null),Lu(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Ao(r,s){try{var l="",h=s;do l+=Pe(h),h=h.return;while(h);var f=l}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:f,digest:null}}function xd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Nd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var AT=typeof WeakMap=="function"?WeakMap:Map;function kg(r,s,l){l=Vr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Ju||(Ju=!0,Wd=h),Nd(r,s)},l}function xg(r,s,l){l=Vr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Nd(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Nd(r,s),typeof h!="function"&&(di===null?di=new Set([this]):di.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function Ng(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new AT;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=FT.bind(null,r,s,l),s.then(r,r))}function Dg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Og(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Vr(-1,1),s.tag=2,ci(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var RT=re.ReactCurrentOwner,sn=!1;function Xt(r,s,l,h){s.child=r===null?Zm(s,null,l,h):wo(s,r.child,l,h)}function bg(r,s,l,h,f){l=l.render;var y=s.ref;return Io(s,f),h=Td(r,s,l,h,y,f),l=Id(),r!==null&&!sn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(tt&&l&&sd(s),s.flags|=1,Xt(r,s,h,f),s.child)}function Vg(r,s,l,h,f){if(r===null){var y=l.type;return typeof y=="function"&&!Zd(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Lg(r,s,y,h,f)):(r=nc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&f)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:La,l(T,h)&&r.ref===s.ref)return Lr(r,s,f)}return s.flags|=1,r=gi(y,h),r.ref=s.ref,r.return=s,s.child=r}function Lg(r,s,l,h,f){if(r!==null){var y=r.memoizedProps;if(La(y,h)&&r.ref===s.ref)if(sn=!1,s.pendingProps=h=y,(r.lanes&f)!==0)(r.flags&131072)!==0&&(sn=!0);else return s.lanes=r.lanes,Lr(r,s,f)}return Dd(r,s,l,h,f)}function Mg(r,s,l){var h=s.pendingProps,f=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Co,_n),_n|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Xe(Co,_n),_n|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Xe(Co,_n),_n|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Xe(Co,_n),_n|=h;return Xt(r,s,f,l),s.child}function jg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Dd(r,s,l,h,f){var y=rn(l)?as:Ft.current;return y=yo(s,y),Io(s,f),l=Td(r,s,l,h,y,f),h=Id(),r!==null&&!sn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(tt&&h&&sd(s),s.flags|=1,Xt(r,s,l,f),s.child)}function Fg(r,s,l,h,f){if(rn(l)){var y=!0;Cu(s)}else y=!1;if(Io(s,f),s.stateNode===null)Hu(r,s),Cg(s,l,h),kd(s,l,h,f),h=!0;else if(r===null){var T=s.stateNode,R=s.memoizedProps;T.props=R;var N=T.context,q=l.contextType;typeof q=="object"&&q!==null?q=kn(q):(q=rn(l)?as:Ft.current,q=yo(s,q));var Y=l.getDerivedStateFromProps,Z=typeof Y=="function"||typeof T.getSnapshotBeforeUpdate=="function";Z||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==h||N!==q)&&Pg(s,T,h,q),ui=!1;var X=s.memoizedState;T.state=X,Lu(s,h,T,f),N=s.memoizedState,R!==h||X!==N||nn.current||ui?(typeof Y=="function"&&(Pd(s,l,Y,h),N=s.memoizedState),(R=ui||Rg(s,l,R,h,X,N,q))?(Z||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=N),T.props=h,T.state=N,T.context=q,h=R):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{T=s.stateNode,tg(r,s),R=s.memoizedProps,q=s.type===s.elementType?R:Hn(s.type,R),T.props=q,Z=s.pendingProps,X=T.context,N=l.contextType,typeof N=="object"&&N!==null?N=kn(N):(N=rn(l)?as:Ft.current,N=yo(s,N));var le=l.getDerivedStateFromProps;(Y=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==Z||X!==N)&&Pg(s,T,h,N),ui=!1,X=s.memoizedState,T.state=X,Lu(s,h,T,f);var he=s.memoizedState;R!==Z||X!==he||nn.current||ui?(typeof le=="function"&&(Pd(s,l,le,h),he=s.memoizedState),(q=ui||Rg(s,l,q,h,X,he,N)||!1)?(Y||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,he,N),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,he,N)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=he),T.props=h,T.state=he,T.context=N,h=q):(typeof T.componentDidUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),h=!1)}return Od(r,s,l,h,y,f)}function Od(r,s,l,h,f,y){jg(r,s);var T=(s.flags&128)!==0;if(!h&&!T)return f&&qm(s,l,!1),Lr(r,s,y);h=s.stateNode,RT.current=s;var R=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&T?(s.child=wo(s,r.child,null,y),s.child=wo(s,null,R,y)):Xt(r,s,R,y),s.memoizedState=h.state,f&&qm(s,l,!0),s.child}function Ug(r){var s=r.stateNode;s.pendingContext?zm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&zm(r,s.context,!1),gd(r,s.containerInfo)}function Bg(r,s,l,h,f){return Eo(),ud(f),s.flags|=256,Xt(r,s,l,h),s.child}var bd={dehydrated:null,treeContext:null,retryLane:0};function Vd(r){return{baseLanes:r,cachePool:null,transitions:null}}function zg(r,s,l){var h=s.pendingProps,f=nt.current,y=!1,T=(s.flags&128)!==0,R;if((R=T)||(R=r!==null&&r.memoizedState===null?!1:(f&2)!==0),R?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Xe(nt,f&1),r===null)return ld(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=h.children,r=h.fallback,y?(h=s.mode,y=s.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=rc(T,h,0,null),r=ys(r,h,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Vd(l),s.memoizedState=bd,r):Ld(s,T));if(f=r.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return CT(r,s,T,h,R,f,l);if(y){y=h.fallback,T=s.mode,f=r.child,R=f.sibling;var N={mode:"hidden",children:h.children};return(T&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=N,s.deletions=null):(h=gi(f,N),h.subtreeFlags=f.subtreeFlags&14680064),R!==null?y=gi(R,y):(y=ys(y,T,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,T=r.child.memoizedState,T=T===null?Vd(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=r.childLanes&~l,s.memoizedState=bd,h}return y=r.child,r=y.sibling,h=gi(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Ld(r,s){return s=rc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function qu(r,s,l,h){return h!==null&&ud(h),wo(s,r.child,null,l),r=Ld(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function CT(r,s,l,h,f,y,T){if(l)return s.flags&256?(s.flags&=-257,h=xd(Error(t(422))),qu(r,s,T,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=h.fallback,f=s.mode,h=rc({mode:"visible",children:h.children},f,0,null),y=ys(y,f,T,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&wo(s,r.child,null,T),s.child.memoizedState=Vd(T),s.memoizedState=bd,y);if((s.mode&1)===0)return qu(r,s,T,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(t(419)),h=xd(y,h,void 0),qu(r,s,T,h)}if(R=(T&r.childLanes)!==0,sn||R){if(h=Pt,h!==null){switch(T&-T){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|T))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,br(r,f),Kn(h,r,f,-1))}return Yd(),h=xd(Error(t(421))),qu(r,s,T,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=UT.bind(null,r),f._reactRetry=s,null):(r=y.treeContext,yn=si(f.nextSibling),gn=s,tt=!0,qn=null,r!==null&&(Cn[Pn++]=Dr,Cn[Pn++]=Or,Cn[Pn++]=ls,Dr=r.id,Or=r.overflow,ls=s),s=Ld(s,h.children),s.flags|=4096,s)}function $g(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),fd(r.return,s,l)}function Md(r,s,l,h,f){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=f)}function qg(r,s,l){var h=s.pendingProps,f=h.revealOrder,y=h.tail;if(Xt(r,s,h.children,l),h=nt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$g(r,l,s);else if(r.tag===19)$g(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Xe(nt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Mu(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Md(s,!1,f,l,y);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Mu(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Md(s,!0,l,null,y);break;case"together":Md(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hu(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Lr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),fs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=gi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=gi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function PT(r,s,l){switch(s.tag){case 3:Ug(s),Eo();break;case 5:ig(s);break;case 1:rn(s.type)&&Cu(s);break;case 4:gd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Xe(Ou,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Xe(nt,nt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?zg(r,s,l):(Xe(nt,nt.current&1),r=Lr(r,s,l),r!==null?r.sibling:null);Xe(nt,nt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return qg(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(nt,nt.current),h)break;return null;case 22:case 23:return s.lanes=0,Mg(r,s,l)}return Lr(r,s,l)}var Hg,jd,Wg,Gg;Hg=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jd=function(){},Wg=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,hs(lr.current);var y=null;switch(l){case"input":f=qi(r,f),h=qi(r,h),y=[];break;case"select":f=ae({},f,{value:void 0}),h=ae({},h,{value:void 0}),y=[];break;case"textarea":f=ha(r,f),h=ha(r,h),y=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Su)}ya(l,h);var T;l=null;for(q in f)if(!h.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var R=f[q];for(T in R)R.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in h){var N=h[q];if(R=f!=null?f[q]:void 0,h.hasOwnProperty(q)&&N!==R&&(N!=null||R!=null))if(q==="style")if(R){for(T in R)!R.hasOwnProperty(T)||N&&N.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in N)N.hasOwnProperty(T)&&R[T]!==N[T]&&(l||(l={}),l[T]=N[T])}else l||(y||(y=[]),y.push(q,l)),l=N;else q==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(y=y||[]).push(q,N)):q==="children"?typeof N!="string"&&typeof N!="number"||(y=y||[]).push(q,""+N):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(N!=null&&q==="onScroll"&&Ye("scroll",r),y||R===N||(y=[])):(y=y||[]).push(q,N))}l&&(y=y||[]).push("style",l);var q=y;(s.updateQueue=q)&&(s.flags|=4)}},Gg=function(r,s,l,h){l!==h&&(s.flags|=4)};function Xa(r,s){if(!tt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Bt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function kT(r,s,l){var h=s.pendingProps;switch(od(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(s),null;case 1:return rn(s.type)&&Ru(),Bt(s),null;case 3:return h=s.stateNode,So(),Ze(nn),Ze(Ft),vd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Nu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qn!==null&&(Qd(qn),qn=null))),jd(r,s),Bt(s),null;case 5:yd(s);var f=hs(Wa.current);if(l=s.type,r!==null&&s.stateNode!=null)Wg(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Bt(s),null}if(r=hs(lr.current),Nu(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[ar]=s,h[Ba]=y,r=(s.mode&1)!==0,l){case"dialog":Ye("cancel",h),Ye("close",h);break;case"iframe":case"object":case"embed":Ye("load",h);break;case"video":case"audio":for(f=0;f<ja.length;f++)Ye(ja[f],h);break;case"source":Ye("error",h);break;case"img":case"image":case"link":Ye("error",h),Ye("load",h);break;case"details":Ye("toggle",h);break;case"input":js(h,y),Ye("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Ye("invalid",h);break;case"textarea":Us(h,y),Ye("invalid",h)}ya(l,y),f=null;for(var T in y)if(y.hasOwnProperty(T)){var R=y[T];T==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&Iu(h.textContent,R,r),f=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&Iu(h.textContent,R,r),f=["children",""+R]):o.hasOwnProperty(T)&&R!=null&&T==="onScroll"&&Ye("scroll",h)}switch(l){case"input":Er(h),Ql(h,y,!0);break;case"textarea":Er(h),da(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Su)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{T=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=vt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=T.createElement(l,{is:h.is}):(r=T.createElement(l),l==="select"&&(T=r,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):r=T.createElementNS(r,l),r[ar]=s,r[Ba]=h,Hg(r,s,!1,!1),s.stateNode=r;e:{switch(T=_a(l,h),l){case"dialog":Ye("cancel",r),Ye("close",r),f=h;break;case"iframe":case"object":case"embed":Ye("load",r),f=h;break;case"video":case"audio":for(f=0;f<ja.length;f++)Ye(ja[f],r);f=h;break;case"source":Ye("error",r),f=h;break;case"img":case"image":case"link":Ye("error",r),Ye("load",r),f=h;break;case"details":Ye("toggle",r),f=h;break;case"input":js(r,h),f=qi(r,h),Ye("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=ae({},h,{value:void 0}),Ye("invalid",r);break;case"textarea":Us(r,h),f=ha(r,h),Ye("invalid",r);break;default:f=h}ya(l,f),R=f;for(y in R)if(R.hasOwnProperty(y)){var N=R[y];y==="style"?ma(r,N):y==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&fa(r,N)):y==="children"?typeof N=="string"?(l!=="textarea"||N!=="")&&Kr(r,N):typeof N=="number"&&Kr(r,""+N):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?N!=null&&y==="onScroll"&&Ye("scroll",r):N!=null&&$(r,y,N,T))}switch(l){case"input":Er(r),Ql(r,h,!1);break;case"textarea":Er(r),da(r);break;case"option":h.value!=null&&r.setAttribute("value",""+ze(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?Tr(r,!!h.multiple,y,!1):h.defaultValue!=null&&Tr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Su)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Bt(s),null;case 6:if(r&&s.stateNode!=null)Gg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=hs(Wa.current),hs(lr.current),Nu(s)){if(h=s.stateNode,l=s.memoizedProps,h[ar]=s,(y=h.nodeValue!==l)&&(r=gn,r!==null))switch(r.tag){case 3:Iu(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Iu(h.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[ar]=s,s.stateNode=h}return Bt(s),null;case 13:if(Ze(nt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(tt&&yn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Jm(),Eo(),s.flags|=98560,y=!1;else if(y=Nu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[ar]=s}else Eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Bt(s),y=!1}else qn!==null&&(Qd(qn),qn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(nt.current&1)!==0?It===0&&(It=3):Yd())),s.updateQueue!==null&&(s.flags|=4),Bt(s),null);case 4:return So(),jd(r,s),r===null&&Fa(s.stateNode.containerInfo),Bt(s),null;case 10:return dd(s.type._context),Bt(s),null;case 17:return rn(s.type)&&Ru(),Bt(s),null;case 19:if(Ze(nt),y=s.memoizedState,y===null)return Bt(s),null;if(h=(s.flags&128)!==0,T=y.rendering,T===null)if(h)Xa(y,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(T=Mu(r),T!==null){for(s.flags|=128,Xa(y,!1),h=T.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,r=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,r=T.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Xe(nt,nt.current&1|2),s.child}r=r.sibling}y.tail!==null&&Je()>Po&&(s.flags|=128,h=!0,Xa(y,!1),s.lanes=4194304)}else{if(!h)if(r=Mu(T),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Xa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!tt)return Bt(s),null}else 2*Je()-y.renderingStartTime>Po&&l!==1073741824&&(s.flags|=128,h=!0,Xa(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(l=y.last,l!==null?l.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Je(),s.sibling=null,l=nt.current,Xe(nt,h?l&1|2:l&1),s):(Bt(s),null);case 22:case 23:return Xd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(_n&1073741824)!==0&&(Bt(s),s.subtreeFlags&6&&(s.flags|=8192)):Bt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function xT(r,s){switch(od(s),s.tag){case 1:return rn(s.type)&&Ru(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return So(),Ze(nn),Ze(Ft),vd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return yd(s),null;case 13:if(Ze(nt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Eo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(nt),null;case 4:return So(),null;case 10:return dd(s.type._context),null;case 22:case 23:return Xd(),null;case 24:return null;default:return null}}var Wu=!1,zt=!1,NT=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ro(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){st(r,s,h)}else l.current=null}function Fd(r,s,l){try{l()}catch(h){st(r,s,h)}}var Kg=!1;function DT(r,s){if(Xh=ni,r=Rm(),$h(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,R=-1,N=-1,q=0,Y=0,Z=r,X=null;t:for(;;){for(var le;Z!==l||f!==0&&Z.nodeType!==3||(R=T+f),Z!==y||h!==0&&Z.nodeType!==3||(N=T+h),Z.nodeType===3&&(T+=Z.nodeValue.length),(le=Z.firstChild)!==null;)X=Z,Z=le;for(;;){if(Z===r)break t;if(X===l&&++q===f&&(R=T),X===y&&++Y===h&&(N=T),(le=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=le}l=R===-1||N===-1?null:{start:R,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Yh={focusedElem:r,selectionRange:l},ni=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,lt=he.memoizedState,B=s.stateNode,V=B.getSnapshotBeforeUpdate(s.elementType===s.type?de:Hn(s.type,de),lt);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){st(s,s.return,te)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return he=Kg,Kg=!1,he}function Ya(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var y=f.destroy;f.destroy=void 0,y!==void 0&&Fd(s,l,y)}f=f.next}while(f!==h)}}function Gu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function Ud(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function Qg(r){var s=r.alternate;s!==null&&(r.alternate=null,Qg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ar],delete s[Ba],delete s[nd],delete s[pT],delete s[mT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Jg(r){return r.tag===5||r.tag===3||r.tag===4}function Xg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Bd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Su));else if(h!==4&&(r=r.child,r!==null))for(Bd(r,s,l),r=r.sibling;r!==null;)Bd(r,s,l),r=r.sibling}function zd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(zd(r,s,l),r=r.sibling;r!==null;)zd(r,s,l),r=r.sibling}var bt=null,Wn=!1;function hi(r,s,l){for(l=l.child;l!==null;)Yg(r,s,l),l=l.sibling}function Yg(r,s,l){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Zi,l)}catch{}switch(l.tag){case 5:zt||Ro(l,s);case 6:var h=bt,f=Wn;bt=null,hi(r,s,l),bt=h,Wn=f,bt!==null&&(Wn?(r=bt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):bt.removeChild(l.stateNode));break;case 18:bt!==null&&(Wn?(r=bt,l=l.stateNode,r.nodeType===8?td(r.parentNode,l):r.nodeType===1&&td(r,l),Bn(r)):td(bt,l.stateNode));break;case 4:h=bt,f=Wn,bt=l.stateNode.containerInfo,Wn=!0,hi(r,s,l),bt=h,Wn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var y=f,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Fd(l,s,T),f=f.next}while(f!==h)}hi(r,s,l);break;case 1:if(!zt&&(Ro(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(R){st(l,s,R)}hi(r,s,l);break;case 21:hi(r,s,l);break;case 22:l.mode&1?(zt=(h=zt)||l.memoizedState!==null,hi(r,s,l),zt=h):hi(r,s,l);break;default:hi(r,s,l)}}function Zg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new NT),s.forEach(function(h){var f=BT.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Gn(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var y=r,T=s,R=T;e:for(;R!==null;){switch(R.tag){case 5:bt=R.stateNode,Wn=!1;break e;case 3:bt=R.stateNode.containerInfo,Wn=!0;break e;case 4:bt=R.stateNode.containerInfo,Wn=!0;break e}R=R.return}if(bt===null)throw Error(t(160));Yg(y,T,f),bt=null,Wn=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(q){st(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ey(s,r),s=s.sibling}function ey(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Gn(s,r),cr(r),h&4){try{Ya(3,r,r.return),Gu(3,r)}catch(de){st(r,r.return,de)}try{Ya(5,r,r.return)}catch(de){st(r,r.return,de)}}break;case 1:Gn(s,r),cr(r),h&512&&l!==null&&Ro(l,l.return);break;case 5:if(Gn(s,r),cr(r),h&512&&l!==null&&Ro(l,l.return),r.flags&32){var f=r.stateNode;try{Kr(f,"")}catch(de){st(r,r.return,de)}}if(h&4&&(f=r.stateNode,f!=null)){var y=r.memoizedProps,T=l!==null?l.memoizedProps:y,R=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&ua(f,y),_a(R,T);var q=_a(R,y);for(T=0;T<N.length;T+=2){var Y=N[T],Z=N[T+1];Y==="style"?ma(f,Z):Y==="dangerouslySetInnerHTML"?fa(f,Z):Y==="children"?Kr(f,Z):$(f,Y,Z,q)}switch(R){case"input":ca(f,y);break;case"textarea":Bs(f,y);break;case"select":var X=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?Tr(f,!!y.multiple,le,!1):X!==!!y.multiple&&(y.defaultValue!=null?Tr(f,!!y.multiple,y.defaultValue,!0):Tr(f,!!y.multiple,y.multiple?[]:"",!1))}f[Ba]=y}catch(de){st(r,r.return,de)}}break;case 6:if(Gn(s,r),cr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,y=r.memoizedProps;try{f.nodeValue=y}catch(de){st(r,r.return,de)}}break;case 3:if(Gn(s,r),cr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Bn(s.containerInfo)}catch(de){st(r,r.return,de)}break;case 4:Gn(s,r),cr(r);break;case 13:Gn(s,r),cr(r),f=r.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(Hd=Je())),h&4&&Zg(r);break;case 22:if(Y=l!==null&&l.memoizedState!==null,r.mode&1?(zt=(q=zt)||Y,Gn(s,r),zt=q):Gn(s,r),cr(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!Y&&(r.mode&1)!==0)for(ce=r,Y=r.child;Y!==null;){for(Z=ce=Y;ce!==null;){switch(X=ce,le=X.child,X.tag){case 0:case 11:case 14:case 15:Ya(4,X,X.return);break;case 1:Ro(X,X.return);var he=X.stateNode;if(typeof he.componentWillUnmount=="function"){h=X,l=X.return;try{s=h,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(de){st(h,l,de)}}break;case 5:Ro(X,X.return);break;case 22:if(X.memoizedState!==null){ry(Z);continue}}le!==null?(le.return=X,ce=le):ry(Z)}Y=Y.sibling}e:for(Y=null,Z=r;;){if(Z.tag===5){if(Y===null){Y=Z;try{f=Z.stateNode,q?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=Z.stateNode,N=Z.memoizedProps.style,T=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=pa("display",T))}catch(de){st(r,r.return,de)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=q?"":Z.memoizedProps}catch(de){st(r,r.return,de)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Gn(s,r),cr(r),h&4&&Zg(r);break;case 21:break;default:Gn(s,r),cr(r)}}function cr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Jg(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Kr(f,""),h.flags&=-33);var y=Xg(r);zd(r,y,f);break;case 3:case 4:var T=h.stateNode.containerInfo,R=Xg(r);Bd(r,R,T);break;default:throw Error(t(161))}}catch(N){st(r,r.return,N)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function OT(r,s,l){ce=r,ty(r)}function ty(r,s,l){for(var h=(r.mode&1)!==0;ce!==null;){var f=ce,y=f.child;if(f.tag===22&&h){var T=f.memoizedState!==null||Wu;if(!T){var R=f.alternate,N=R!==null&&R.memoizedState!==null||zt;R=Wu;var q=zt;if(Wu=T,(zt=N)&&!q)for(ce=f;ce!==null;)T=ce,N=T.child,T.tag===22&&T.memoizedState!==null?iy(f):N!==null?(N.return=T,ce=N):iy(f);for(;y!==null;)ce=y,ty(y),y=y.sibling;ce=f,Wu=R,zt=q}ny(r)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,ce=y):ny(r)}}function ny(r){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||Gu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!zt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Hn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&rg(s,y,h);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}rg(s,T,l)}break;case 5:var R=s.stateNode;if(l===null&&s.flags&4){l=R;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&l.focus();break;case"img":N.src&&(l.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var Y=q.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&Bn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&Ud(s)}catch(X){st(s,s.return,X)}}if(s===r){ce=null;break}if(l=s.sibling,l!==null){l.return=s.return,ce=l;break}ce=s.return}}function ry(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ce=l;break}ce=s.return}}function iy(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Gu(4,s)}catch(N){st(s,l,N)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(N){st(s,f,N)}}var y=s.return;try{Ud(s)}catch(N){st(s,y,N)}break;case 5:var T=s.return;try{Ud(s)}catch(N){st(s,T,N)}}}catch(N){st(s,s.return,N)}if(s===r){ce=null;break}var R=s.sibling;if(R!==null){R.return=s.return,ce=R;break}ce=s.return}}var bT=Math.ceil,Ku=re.ReactCurrentDispatcher,$d=re.ReactCurrentOwner,Nn=re.ReactCurrentBatchConfig,je=0,Pt=null,pt=null,Vt=0,_n=0,Co=oi(0),It=0,Za=null,fs=0,Qu=0,qd=0,el=null,on=null,Hd=0,Po=1/0,Mr=null,Ju=!1,Wd=null,di=null,Xu=!1,fi=null,Yu=0,tl=0,Gd=null,Zu=-1,ec=0;function Yt(){return(je&6)!==0?Je():Zu!==-1?Zu:Zu=Je()}function pi(r){return(r.mode&1)===0?1:(je&2)!==0&&Vt!==0?Vt&-Vt:yT.transition!==null?(ec===0&&(ec=ts()),ec):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:ka(r.type)),r)}function Kn(r,s,l,h){if(50<tl)throw tl=0,Gd=null,Error(t(185));Yr(r,l,h),((je&2)===0||r!==Pt)&&(r===Pt&&((je&2)===0&&(Qu|=l),It===4&&mi(r,Vt)),an(r,h),l===1&&je===0&&(s.mode&1)===0&&(Po=Je()+500,Pu&&li()))}function an(r,s){var l=r.callbackNode;Ar(r,s);var h=es(r,r===Pt?Vt:0);if(h===0)l!==null&&Sa(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&Sa(l),s===1)r.tag===0?gT(oy.bind(null,r)):Hm(oy.bind(null,r)),dT(function(){(je&6)===0&&li()}),l=null;else{switch(ei(h)){case 1:l=Yi;break;case 4:l=Qr;break;case 16:l=Sn;break;case 536870912:l=eu;break;default:l=Sn}l=py(l,sy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function sy(r,s){if(Zu=-1,ec=0,(je&6)!==0)throw Error(t(327));var l=r.callbackNode;if(ko()&&r.callbackNode!==l)return null;var h=es(r,r===Pt?Vt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=tc(r,h);else{s=h;var f=je;je|=2;var y=ly();(Pt!==r||Vt!==s)&&(Mr=null,Po=Je()+500,ms(r,s));do try{MT();break}catch(R){ay(r,R)}while(!0);hd(),Ku.current=y,je=f,pt!==null?s=0:(Pt=null,Vt=0,s=It)}if(s!==0){if(s===2&&(f=fn(r),f!==0&&(h=f,s=Kd(r,f))),s===1)throw l=Za,ms(r,0),mi(r,h),an(r,Je()),l;if(s===6)mi(r,h);else{if(f=r.current.alternate,(h&30)===0&&!VT(f)&&(s=tc(r,h),s===2&&(y=fn(r),y!==0&&(h=y,s=Kd(r,y))),s===1))throw l=Za,ms(r,0),mi(r,h),an(r,Je()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:gs(r,on,Mr);break;case 3:if(mi(r,h),(h&130023424)===h&&(s=Hd+500-Je(),10<s)){if(es(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Yt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=ed(gs.bind(null,r,on,Mr),s);break}gs(r,on,Mr);break;case 4:if(mi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var T=31-Qt(h);y=1<<T,T=s[T],T>f&&(f=T),h&=~y}if(h=f,h=Je()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*bT(h/1960))-h,10<h){r.timeoutHandle=ed(gs.bind(null,r,on,Mr),h);break}gs(r,on,Mr);break;case 5:gs(r,on,Mr);break;default:throw Error(t(329))}}}return an(r,Je()),r.callbackNode===l?sy.bind(null,r):null}function Kd(r,s){var l=el;return r.current.memoizedState.isDehydrated&&(ms(r,s).flags|=256),r=tc(r,s),r!==2&&(s=on,on=l,s!==null&&Qd(s)),r}function Qd(r){on===null?on=r:on.push.apply(on,r)}function VT(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],y=f.getSnapshot;f=f.value;try{if(!$n(y(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function mi(r,s){for(s&=~qd,s&=~Qu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Qt(s),h=1<<l;r[l]=-1,s&=~h}}function oy(r){if((je&6)!==0)throw Error(t(327));ko();var s=es(r,0);if((s&1)===0)return an(r,Je()),null;var l=tc(r,s);if(r.tag!==0&&l===2){var h=fn(r);h!==0&&(s=h,l=Kd(r,h))}if(l===1)throw l=Za,ms(r,0),mi(r,s),an(r,Je()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,gs(r,on,Mr),an(r,Je()),null}function Jd(r,s){var l=je;je|=1;try{return r(s)}finally{je=l,je===0&&(Po=Je()+500,Pu&&li())}}function ps(r){fi!==null&&fi.tag===0&&(je&6)===0&&ko();var s=je;je|=1;var l=Nn.transition,h=Oe;try{if(Nn.transition=null,Oe=1,r)return r()}finally{Oe=h,Nn.transition=l,je=s,(je&6)===0&&li()}}function Xd(){_n=Co.current,Ze(Co)}function ms(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,hT(l)),pt!==null)for(l=pt.return;l!==null;){var h=l;switch(od(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ru();break;case 3:So(),Ze(nn),Ze(Ft),vd();break;case 5:yd(h);break;case 4:So();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:dd(h.type._context);break;case 22:case 23:Xd()}l=l.return}if(Pt=r,pt=r=gi(r.current,null),Vt=_n=s,It=0,Za=null,qd=Qu=fs=0,on=el=null,cs!==null){for(s=0;s<cs.length;s++)if(l=cs[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=f,h.next=T}l.pending=h}cs=null}return r}function ay(r,s){do{var l=pt;try{if(hd(),ju.current=zu,Fu){for(var h=rt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Fu=!1}if(ds=0,Ct=Tt=rt=null,Ga=!1,Ka=0,$d.current=null,l===null||l.return===null){It=1,Za=s,pt=null;break}e:{var y=r,T=l.return,R=l,N=s;if(s=Vt,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var q=N,Y=R,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=Dg(T);if(le!==null){le.flags&=-257,Og(le,T,R,y,s),le.mode&1&&Ng(y,q,s),s=le,N=q;var he=s.updateQueue;if(he===null){var de=new Set;de.add(N),s.updateQueue=de}else he.add(N);break e}else{if((s&1)===0){Ng(y,q,s),Yd();break e}N=Error(t(426))}}else if(tt&&R.mode&1){var lt=Dg(T);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Og(lt,T,R,y,s),ud(Ao(N,R));break e}}y=N=Ao(N,R),It!==4&&(It=2),el===null?el=[y]:el.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var B=kg(y,N,s);ng(y,B);break e;case 1:R=N;var V=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(di===null||!di.has(z)))){y.flags|=65536,s&=-s,y.lanes|=s;var te=xg(y,R,s);ng(y,te);break e}}y=y.return}while(y!==null)}cy(l)}catch(pe){s=pe,pt===l&&l!==null&&(pt=l=l.return);continue}break}while(!0)}function ly(){var r=Ku.current;return Ku.current=zu,r===null?zu:r}function Yd(){(It===0||It===3||It===2)&&(It=4),Pt===null||(fs&268435455)===0&&(Qu&268435455)===0||mi(Pt,Vt)}function tc(r,s){var l=je;je|=2;var h=ly();(Pt!==r||Vt!==s)&&(Mr=null,ms(r,s));do try{LT();break}catch(f){ay(r,f)}while(!0);if(hd(),je=l,Ku.current=h,pt!==null)throw Error(t(261));return Pt=null,Vt=0,It}function LT(){for(;pt!==null;)uy(pt)}function MT(){for(;pt!==null&&!Yl();)uy(pt)}function uy(r){var s=fy(r.alternate,r,_n);r.memoizedProps=r.pendingProps,s===null?cy(r):pt=s,$d.current=null}function cy(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=kT(l,s,_n),l!==null){pt=l;return}}else{if(l=xT(l,s),l!==null){l.flags&=32767,pt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{It=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=r}while(s!==null);It===0&&(It=5)}function gs(r,s,l){var h=Oe,f=Nn.transition;try{Nn.transition=null,Oe=1,jT(r,s,l,h)}finally{Nn.transition=f,Oe=h}return null}function jT(r,s,l,h){do ko();while(fi!==null);if((je&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ke(r,y),r===Pt&&(pt=Pt=null,Vt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xu||(Xu=!0,py(Sn,function(){return ko(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Nn.transition,Nn.transition=null;var T=Oe;Oe=1;var R=je;je|=4,$d.current=null,DT(r,l),ey(l,r),iT(Yh),ni=!!Xh,Yh=Xh=null,r.current=l,OT(l),Vh(),je=R,Oe=T,Nn.transition=y}else r.current=l;if(Xu&&(Xu=!1,fi=r,Yu=f),y=r.pendingLanes,y===0&&(di=null),tu(l.stateNode),an(r,Je()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Ju)throw Ju=!1,r=Wd,Wd=null,r;return(Yu&1)!==0&&r.tag!==0&&ko(),y=r.pendingLanes,(y&1)!==0?r===Gd?tl++:(tl=0,Gd=r):tl=0,li(),null}function ko(){if(fi!==null){var r=ei(Yu),s=Nn.transition,l=Oe;try{if(Nn.transition=null,Oe=16>r?16:r,fi===null)var h=!1;else{if(r=fi,fi=null,Yu=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,ce=r.current;ce!==null;){var y=ce,T=y.child;if((ce.flags&16)!==0){var R=y.deletions;if(R!==null){for(var N=0;N<R.length;N++){var q=R[N];for(ce=q;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:Ya(8,Y,y)}var Z=Y.child;if(Z!==null)Z.return=Y,ce=Z;else for(;ce!==null;){Y=ce;var X=Y.sibling,le=Y.return;if(Qg(Y),Y===q){ce=null;break}if(X!==null){X.return=le,ce=X;break}ce=le}}}var he=y.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var lt=de.sibling;de.sibling=null,de=lt}while(de!==null)}}ce=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,ce=T;else e:for(;ce!==null;){if(y=ce,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ya(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,ce=B;break e}ce=y.return}}var V=r.current;for(ce=V;ce!==null;){T=ce;var z=T.child;if((T.subtreeFlags&2064)!==0&&z!==null)z.return=T,ce=z;else e:for(T=V;ce!==null;){if(R=ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Gu(9,R)}}catch(pe){st(R,R.return,pe)}if(R===T){ce=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,ce=te;break e}ce=R.return}}if(je=f,li(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Zi,r)}catch{}h=!0}return h}finally{Oe=l,Nn.transition=s}}return!1}function hy(r,s,l){s=Ao(l,s),s=kg(r,s,1),r=ci(r,s,1),s=Yt(),r!==null&&(Yr(r,1,s),an(r,s))}function st(r,s,l){if(r.tag===3)hy(r,r,l);else for(;s!==null;){if(s.tag===3){hy(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(di===null||!di.has(h))){r=Ao(l,r),r=xg(s,r,1),s=ci(s,r,1),r=Yt(),s!==null&&(Yr(s,1,r),an(s,r));break}}s=s.return}}function FT(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=Yt(),r.pingedLanes|=r.suspendedLanes&l,Pt===r&&(Vt&l)===l&&(It===4||It===3&&(Vt&130023424)===Vt&&500>Je()-Hd?ms(r,0):qd|=l),an(r,s)}function dy(r,s){s===0&&((r.mode&1)===0?s=1:(s=Xs,Xs<<=1,(Xs&130023424)===0&&(Xs=4194304)));var l=Yt();r=br(r,s),r!==null&&(Yr(r,s,l),an(r,l))}function UT(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),dy(r,l)}function BT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),dy(r,l)}var fy;fy=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||nn.current)sn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return sn=!1,PT(r,s,l);sn=(r.flags&131072)!==0}else sn=!1,tt&&(s.flags&1048576)!==0&&Wm(s,xu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Hu(r,s),r=s.pendingProps;var f=yo(s,Ft.current);Io(s,l),f=Td(null,s,h,r,f,l);var y=Id();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rn(h)?(y=!0,Cu(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,md(s),f.updater=$u,s.stateNode=f,f._reactInternals=s,kd(s,h,r,l),s=Od(null,s,h,!0,y,l)):(s.tag=0,tt&&y&&sd(s),Xt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Hu(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=$T(h),r=Hn(h,r),f){case 0:s=Dd(null,s,h,r,l);break e;case 1:s=Fg(null,s,h,r,l);break e;case 11:s=bg(null,s,h,r,l);break e;case 14:s=Vg(null,s,h,Hn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Hn(h,f),Dd(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Hn(h,f),Fg(r,s,h,f,l);case 3:e:{if(Ug(s),r===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,f=y.element,tg(r,s),Lu(s,h,null,l);var T=s.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=Ao(Error(t(423)),s),s=Bg(r,s,h,l,f);break e}else if(h!==f){f=Ao(Error(t(424)),s),s=Bg(r,s,h,l,f);break e}else for(yn=si(s.stateNode.containerInfo.firstChild),gn=s,tt=!0,qn=null,l=Zm(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Eo(),h===f){s=Lr(r,s,l);break e}Xt(r,s,h,l)}s=s.child}return s;case 5:return ig(s),r===null&&ld(s),h=s.type,f=s.pendingProps,y=r!==null?r.memoizedProps:null,T=f.children,Zh(h,f)?T=null:y!==null&&Zh(h,y)&&(s.flags|=32),jg(r,s),Xt(r,s,T,l),s.child;case 6:return r===null&&ld(s),null;case 13:return zg(r,s,l);case 4:return gd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=wo(s,null,h,l):Xt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Hn(h,f),bg(r,s,h,f,l);case 7:return Xt(r,s,s.pendingProps,l),s.child;case 8:return Xt(r,s,s.pendingProps.children,l),s.child;case 12:return Xt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,y=s.memoizedProps,T=f.value,Xe(Ou,h._currentValue),h._currentValue=T,y!==null)if($n(y.value,T)){if(y.children===f.children&&!nn.current){s=Lr(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var R=y.dependencies;if(R!==null){T=y.child;for(var N=R.firstContext;N!==null;){if(N.context===h){if(y.tag===1){N=Vr(-1,l&-l),N.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var Y=q.pending;Y===null?N.next=N:(N.next=Y.next,Y.next=N),q.pending=N}}y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),fd(y.return,l,s),R.lanes|=l;break}N=N.next}}else if(y.tag===10)T=y.type===s.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,R=T.alternate,R!==null&&(R.lanes|=l),fd(T,l,s),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Xt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Io(s,l),f=kn(f),h=h(f),s.flags|=1,Xt(r,s,h,l),s.child;case 14:return h=s.type,f=Hn(h,s.pendingProps),f=Hn(h.type,f),Vg(r,s,h,f,l);case 15:return Lg(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Hn(h,f),Hu(r,s),s.tag=1,rn(h)?(r=!0,Cu(s)):r=!1,Io(s,l),Cg(s,h,f),kd(s,h,f,l),Od(null,s,h,!0,r,l);case 19:return qg(r,s,l);case 22:return Mg(r,s,l)}throw Error(t(156,s.tag))};function py(r,s){return Qs(r,s)}function zT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(r,s,l,h){return new zT(r,s,l,h)}function Zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $T(r){if(typeof r=="function")return Zd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===_t)return 14}return 2}function gi(r,s){var l=r.alternate;return l===null?(l=Dn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function nc(r,s,l,h,f,y){var T=2;if(h=r,typeof r=="function")Zd(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case D:return ys(l.children,f,y,s);case A:T=8,f|=8;break;case P:return r=Dn(12,l,s,f|2),r.elementType=P,r.lanes=y,r;case C:return r=Dn(13,l,s,f),r.elementType=C,r.lanes=y,r;case qe:return r=Dn(19,l,s,f),r.elementType=qe,r.lanes=y,r;case Ue:return rc(l,f,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:T=10;break e;case O:T=9;break e;case F:T=11;break e;case _t:T=14;break e;case Ge:T=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Dn(T,l,s,f),s.elementType=r,s.type=h,s.lanes=y,s}function ys(r,s,l,h){return r=Dn(7,r,h,s),r.lanes=l,r}function rc(r,s,l,h){return r=Dn(22,r,h,s),r.elementType=Ue,r.lanes=l,r.stateNode={isHidden:!1},r}function ef(r,s,l){return r=Dn(6,r,null,s),r.lanes=l,r}function tf(r,s,l){return s=Dn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function qT(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xr(0),this.expirationTimes=Xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function nf(r,s,l,h,f,y,T,R,N){return r=new qT(r,s,l,R,N),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Dn(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},md(y),r}function HT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function my(r){if(!r)return ai;r=r._reactInternals;e:{if(Ln(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(rn(l))return $m(r,l,s)}return s}function gy(r,s,l,h,f,y,T,R,N){return r=nf(l,h,!0,r,f,y,T,R,N),r.context=my(null),l=r.current,h=Yt(),f=pi(l),y=Vr(h,f),y.callback=s??null,ci(l,y,f),r.current.lanes=f,Yr(r,f,h),an(r,h),r}function ic(r,s,l,h){var f=s.current,y=Yt(),T=pi(f);return l=my(l),s.context===null?s.context=l:s.pendingContext=l,s=Vr(y,T),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=ci(f,s,T),r!==null&&(Kn(r,f,T,y),Vu(r,f,T)),T}function sc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function yy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function rf(r,s){yy(r,s),(r=r.alternate)&&yy(r,s)}function WT(){return null}var _y=typeof reportError=="function"?reportError:function(r){console.error(r)};function sf(r){this._internalRoot=r}oc.prototype.render=sf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));ic(r,s,null,null)},oc.prototype.unmount=sf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ps(function(){ic(null,r,null,null)}),s[xr]=null}};function oc(r){this._internalRoot=r}oc.prototype.unstable_scheduleHydration=function(r){if(r){var s=ou();r={blockedOn:null,target:r,priority:s};for(var l=0;l<rr.length&&s!==0&&s<rr[l].priority;l++);rr.splice(l,0,r),l===0&&uu(r)}};function of(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ac(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function vy(){}function GT(r,s,l,h,f){if(f){if(typeof h=="function"){var y=h;h=function(){var q=sc(T);y.call(q)}}var T=gy(s,h,r,0,null,!1,!1,"",vy);return r._reactRootContainer=T,r[xr]=T.current,Fa(r.nodeType===8?r.parentNode:r),ps(),T}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var R=h;h=function(){var q=sc(N);R.call(q)}}var N=nf(r,0,!1,null,null,!1,!1,"",vy);return r._reactRootContainer=N,r[xr]=N.current,Fa(r.nodeType===8?r.parentNode:r),ps(function(){ic(s,N,l,h)}),N}function lc(r,s,l,h,f){var y=l._reactRootContainer;if(y){var T=y;if(typeof f=="function"){var R=f;f=function(){var N=sc(T);R.call(N)}}ic(s,T,r,f)}else T=GT(l,s,r,f,h);return sc(T)}iu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=Jr(s.pendingLanes);l!==0&&(Zr(s,l|1),an(s,Je()),(je&6)===0&&(Po=Je()+500,li()))}break;case 13:ps(function(){var h=br(r,1);if(h!==null){var f=Yt();Kn(h,r,1,f)}}),rf(r,1)}},Ys=function(r){if(r.tag===13){var s=br(r,134217728);if(s!==null){var l=Yt();Kn(s,r,134217728,l)}rf(r,134217728)}},su=function(r){if(r.tag===13){var s=pi(r),l=br(r,s);if(l!==null){var h=Yt();Kn(l,r,s,h)}rf(r,s)}},ou=function(){return Oe},au=function(r,s){var l=Oe;try{return Oe=r,s()}finally{Oe=l}},$s=function(r,s,l){switch(s){case"input":if(ca(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Au(h);if(!f)throw Error(t(90));Ms(h),ca(h,f)}}}break;case"textarea":Bs(r,l);break;case"select":s=l.value,s!=null&&Tr(r,!!l.multiple,s,!1)}},Ki=Jd,Ea=ps;var KT={usingClientEntryPoint:!1,Events:[za,mo,Au,tr,va,Jd]},nl={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QT={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ia(r),r===null?null:r.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{Zi=uc.inject(QT),dn=uc}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KT,ln.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(s))throw Error(t(200));return HT(r,s,null,l)},ln.createRoot=function(r,s){if(!of(r))throw Error(t(299));var l=!1,h="",f=_y;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=nf(r,1,!1,null,null,l,!1,h,f),r[xr]=s.current,Fa(r.nodeType===8?r.parentNode:r),new sf(s)},ln.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Ia(s),r=r===null?null:r.stateNode,r},ln.flushSync=function(r){return ps(r)},ln.hydrate=function(r,s,l){if(!ac(s))throw Error(t(200));return lc(null,r,s,!0,l)},ln.hydrateRoot=function(r,s,l){if(!of(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,y="",T=_y;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=gy(s,null,r,1,l??null,f,!1,y,T),r[xr]=s.current,Fa(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new oc(s)},ln.render=function(r,s,l){if(!ac(s))throw Error(t(200));return lc(null,r,s,!1,l)},ln.unmountComponentAtNode=function(r){if(!ac(r))throw Error(t(40));return r._reactRootContainer?(ps(function(){lc(null,null,r,!1,function(){r._reactRootContainer=null,r[xr]=null})}),!0):!1},ln.unstable_batchedUpdates=Jd,ln.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!ac(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return lc(r,s,l,!1,h)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var Cy;function Lv(){if(Cy)return uf.exports;Cy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uf.exports=oI(),uf.exports}var Py;function aI(){if(Py)return cc;Py=1;var n=Lv();return cc.createRoot=n.createRoot,cc.hydrateRoot=n.hydrateRoot,cc}var lI=aI();Lv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_l.apply(this,arguments)}var Ii;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ii||(Ii={}));const ky="popstate";function uI(n){n===void 0&&(n={});function e(i,o){let{pathname:a,search:u,hash:d}=i.location;return Cf("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Nc(o)}return hI(e,t,null,n)}function ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ap(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cI(){return Math.random().toString(36).substr(2,8)}function xy(n,e){return{usr:n.state,key:n.key,idx:e}}function Cf(n,e,t,i){return t===void 0&&(t=null),_l({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Jo(e):e,{state:t,key:e&&e.key||i||cI()})}function Nc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function hI(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=Ii.Pop,p=null,g=_();g==null&&(g=0,u.replaceState(_l({},u.state,{idx:g}),""));function _(){return(u.state||{idx:null}).idx}function E(){d=Ii.Pop;let k=_(),ee=k==null?null:k-g;g=k,p&&p({action:d,location:j.location,delta:ee})}function S(k,ee){d=Ii.Push;let ie=Cf(j.location,k,ee);g=_()+1;let $=xy(ie,g),re=j.createHref(ie);try{u.pushState($,"",re)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(re)}a&&p&&p({action:d,location:j.location,delta:1})}function L(k,ee){d=Ii.Replace;let ie=Cf(j.location,k,ee);g=_();let $=xy(ie,g),re=j.createHref(ie);u.replaceState($,"",re),a&&p&&p({action:d,location:j.location,delta:0})}function x(k){let ee=o.location.origin!=="null"?o.location.origin:o.location.href,ie=typeof k=="string"?k:Nc(k);return ie=ie.replace(/ $/,"%20"),ct(ee,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,ee)}let j={get action(){return d},get location(){return n(o,u)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(ky,E),p=k,()=>{o.removeEventListener(ky,E),p=null}},createHref(k){return e(o,k)},createURL:x,encodeLocation(k){let ee=x(k);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:S,replace:L,go(k){return u.go(k)}};return j}var Ny;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ny||(Ny={}));function dI(n,e,t){return t===void 0&&(t="/"),fI(n,e,t)}function fI(n,e,t,i){let o=typeof e=="string"?Jo(e):e,a=lp(o.pathname||"/",t);if(a==null)return null;let u=Mv(n);pI(u);let d=null;for(let p=0;d==null&&p<u.length;++p){let g=RI(a);d=II(u[p],g)}return d}function Mv(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};p.relativePath.startsWith("/")&&(ct(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let g=Ai([i,p.relativePath]),_=t.concat(p);a.children&&a.children.length>0&&(ct(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Mv(a.children,e,_,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:wI(g,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let p of jv(a.path))o(a,u,p)}),e}function jv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=jv(i.join("/")),d=[];return d.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...u),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function pI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const mI=/^:[\w-]+$/,gI=3,yI=2,_I=1,vI=10,EI=-2,Dy=n=>n==="*";function wI(n,e){let t=n.split("/"),i=t.length;return t.some(Dy)&&(i+=EI),e&&(i+=yI),t.filter(o=>!Dy(o)).reduce((o,a)=>o+(mI.test(a)?gI:a===""?_I:vI),i)}function TI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function II(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=SI({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),S=p.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:Ai([a,E.pathname]),pathnameBase:NI(Ai([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=Ai([a,E.pathnameBase]))}return u}function SI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=AI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((g,_,E)=>{let{paramName:S,isOptional:L}=_;if(S==="*"){let j=d[E]||"";u=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const x=d[E];return L&&!x?g[S]=void 0:g[S]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:u,pattern:n}}function AI(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ap(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function RI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ap(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function lp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const CI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PI=n=>CI.test(n);function kI(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Jo(n):n,a;if(t)if(PI(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),ap(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=Oy(t.substring(1),"/"):a=Oy(t,e)}else a=e;return{pathname:a,search:DI(i),hash:OI(o)}}function Oy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function df(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function up(n,e){let t=xI(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function cp(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Jo(n):(o=_l({},n),ct(!o.pathname||!o.pathname.includes("?"),df("?","pathname","search",o)),ct(!o.pathname||!o.pathname.includes("#"),df("#","pathname","hash",o)),ct(!o.search||!o.search.includes("#"),df("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=kI(o,d),g=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}const Ai=n=>n.join("/").replace(/\/\/+/g,"/"),NI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),DI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Fv=["post","put","patch","delete"];new Set(Fv);const VI=["get",...Fv];new Set(VI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vl.apply(this,arguments)}const hp=Q.createContext(null),LI=Q.createContext(null),Ui=Q.createContext(null),sh=Q.createContext(null),Hr=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),Uv=Q.createContext(null);function MI(n,e){let{relative:t}=e===void 0?{}:e;Xo()||ct(!1);let{basename:i,navigator:o}=Q.useContext(Ui),{hash:a,pathname:u,search:d}=zv(n,{relative:t}),p=u;return i!=="/"&&(p=u==="/"?i:Ai([i,u])),o.createHref({pathname:p,search:d,hash:a})}function Xo(){return Q.useContext(sh)!=null}function kl(){return Xo()||ct(!1),Q.useContext(sh).location}function Bv(n){Q.useContext(Ui).static||Q.useLayoutEffect(n)}function Yo(){let{isDataRoute:n}=Q.useContext(Hr);return n?JI():jI()}function jI(){Xo()||ct(!1);let n=Q.useContext(hp),{basename:e,future:t,navigator:i}=Q.useContext(Ui),{matches:o}=Q.useContext(Hr),{pathname:a}=kl(),u=JSON.stringify(up(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return Bv(()=>{d.current=!0}),Q.useCallback(function(g,_){if(_===void 0&&(_={}),!d.current)return;if(typeof g=="number"){i.go(g);return}let E=cp(g,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ai([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,u,a,n])}function dp(){let{matches:n}=Q.useContext(Hr),e=n[n.length-1];return e?e.params:{}}function zv(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(Ui),{matches:o}=Q.useContext(Hr),{pathname:a}=kl(),u=JSON.stringify(up(o,i.v7_relativeSplatPath));return Q.useMemo(()=>cp(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function FI(n,e){return UI(n,e)}function UI(n,e,t,i){Xo()||ct(!1);let{navigator:o}=Q.useContext(Ui),{matches:a}=Q.useContext(Hr),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let g=kl(),_;if(e){var E;let k=typeof e=="string"?Jo(e):e;p==="/"||(E=k.pathname)!=null&&E.startsWith(p)||ct(!1),_=k}else _=g;let S=_.pathname||"/",L=S;if(p!=="/"){let k=p.replace(/^\//,"").split("/");L="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=dI(n,{pathname:L}),j=HI(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:Ai([p,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:Ai([p,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,i);return e&&j?Q.createElement(sh.Provider,{value:{location:vl({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ii.Pop}},j):j}function BI(){let n=QI(),e=bI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const zI=Q.createElement(BI,null);class $I extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(Hr.Provider,{value:this.props.routeContext},Q.createElement(Uv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qI(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(hp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(Hr.Provider,{value:e},i)}function HI(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=u.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);_>=0||ct(!1),u=u.slice(0,Math.min(u.length,_+1))}let p=!1,g=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=_),E.route.id){let{loaderData:S,errors:L}=t,x=E.route.loader&&S[E.route.id]===void 0&&(!L||L[E.route.id]===void 0);if(E.route.lazy||x){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((_,E,S)=>{let L,x=!1,j=null,k=null;t&&(L=d&&E.route.id?d[E.route.id]:void 0,j=E.route.errorElement||zI,p&&(g<0&&S===0?(XI("route-fallback"),x=!0,k=null):g===S&&(x=!0,k=E.route.hydrateFallbackElement||null)));let ee=e.concat(u.slice(0,S+1)),ie=()=>{let $;return L?$=j:x?$=k:E.route.Component?$=Q.createElement(E.route.Component,null):E.route.element?$=E.route.element:$=_,Q.createElement(qI,{match:E,routeContext:{outlet:_,matches:ee,isDataRoute:t!=null},children:$})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?Q.createElement($I,{location:t.location,revalidation:t.revalidation,component:j,error:L,children:ie(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):ie()},null)}var $v=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})($v||{}),qv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(qv||{});function WI(n){let e=Q.useContext(hp);return e||ct(!1),e}function GI(n){let e=Q.useContext(LI);return e||ct(!1),e}function KI(n){let e=Q.useContext(Hr);return e||ct(!1),e}function Hv(n){let e=KI(),t=e.matches[e.matches.length-1];return t.route.id||ct(!1),t.route.id}function QI(){var n;let e=Q.useContext(Uv),t=GI(),i=Hv();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function JI(){let{router:n}=WI($v.UseNavigateStable),e=Hv(qv.UseNavigateStable),t=Q.useRef(!1);return Bv(()=>{t.current=!0}),Q.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,vl({fromRouteId:e},a)))},[n,e])}const by={};function XI(n,e,t){by[n]||(by[n]=!0)}function YI(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Pf(n){let{to:e,replace:t,state:i,relative:o}=n;Xo()||ct(!1);let{future:a,static:u}=Q.useContext(Ui),{matches:d}=Q.useContext(Hr),{pathname:p}=kl(),g=Yo(),_=cp(e,up(d,a.v7_relativeSplatPath),p,o==="path"),E=JSON.stringify(_);return Q.useEffect(()=>g(JSON.parse(E),{replace:t,state:i,relative:o}),[g,E,o,t,i]),null}function qt(n){ct(!1)}function ZI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ii.Pop,navigator:a,static:u=!1,future:d}=n;Xo()&&ct(!1);let p=e.replace(/^\/*/,"/"),g=Q.useMemo(()=>({basename:p,navigator:a,static:u,future:vl({v7_relativeSplatPath:!1},d)}),[p,d,a,u]);typeof i=="string"&&(i=Jo(i));let{pathname:_="/",search:E="",hash:S="",state:L=null,key:x="default"}=i,j=Q.useMemo(()=>{let k=lp(_,p);return k==null?null:{location:{pathname:k,search:E,hash:S,state:L,key:x},navigationType:o}},[p,_,E,S,L,x,o]);return j==null?null:Q.createElement(Ui.Provider,{value:g},Q.createElement(sh.Provider,{children:t,value:j}))}function eS(n){let{children:e,location:t}=n;return FI(kf(e),t)}new Promise(()=>{});function kf(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let a=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,kf(i.props.children,a));return}i.type!==qt&&ct(!1),!i.props.index||!i.props.children||ct(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=kf(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xf.apply(this,arguments)}function tS(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function nS(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rS(n,e){return n.button===0&&(!e||e==="_self")&&!nS(n)}const iS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sS="6";try{window.__reactRouterVersion=sS}catch{}const oS="startTransition",Vy=rI[oS];function aS(n){let{basename:e,children:t,future:i,window:o}=n,a=Q.useRef();a.current==null&&(a.current=uI({window:o,v5Compat:!0}));let u=a.current,[d,p]=Q.useState({action:u.action,location:u.location}),{v7_startTransition:g}=i||{},_=Q.useCallback(E=>{g&&Vy?Vy(()=>p(E)):p(E)},[p,g]);return Q.useLayoutEffect(()=>u.listen(_),[u,_]),Q.useEffect(()=>YI(i),[i]),Q.createElement(ZI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:i})}const lS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fp=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:d,target:p,to:g,preventScrollReset:_,viewTransition:E}=e,S=tS(e,iS),{basename:L}=Q.useContext(Ui),x,j=!1;if(typeof g=="string"&&uS.test(g)&&(x=g,lS))try{let $=new URL(window.location.href),re=g.startsWith("//")?new URL($.protocol+g):new URL(g),me=lp(re.pathname,L);re.origin===$.origin&&me!=null?g=me+re.search+re.hash:j=!0}catch{}let k=MI(g,{relative:o}),ee=cS(g,{replace:u,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function ie($){i&&i($),$.defaultPrevented||ee($)}return Q.createElement("a",xf({},S,{href:x||k,onClick:j||a?i:ie,ref:t,target:p}))});var Ly;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ly||(Ly={}));var My;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(My||(My={}));function cS(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,p=Yo(),g=kl(),_=zv(n,{relative:u});return Q.useCallback(E=>{if(rS(E,t)){E.preventDefault();let S=i!==void 0?i:Nc(g)===Nc(_);p(n,{replace:S,state:o,preventScrollReset:a,relative:u,viewTransition:d})}},[g,p,_,i,o,t,n,a,u,d])}const Dc=[{value:"validation",label:"Validation"},{value:"mise_en_service",label:"Mise en service"},{value:"zero_stress",label:"Zro Stress"}],hS=()=>{};var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dS=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|g>>6,L=g&63;p||(L=64,u||(S=64)),i.push(t[_],t[E],t[S],t[L])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Wv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||g==null||E==null)throw new fS;const S=a<<2|d>>4;if(i.push(S),g!==64){const L=d<<4&240|g>>2;if(i.push(L),E!==64){const x=g<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pS=function(n){const e=Wv(n);return Gv.encodeByteArray(e,!0)},Oc=function(n){return pS(n).replace(/\./g,"")},Kv=function(n){try{return Gv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=()=>mS().__FIREBASE_DEFAULTS__,yS=()=>{if(typeof process>"u"||typeof jy>"u")return;const n=jy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_S=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kv(n[1]);return e&&JSON.parse(e)},oh=()=>{try{return hS()||gS()||yS()||_S()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qv=n=>{var e,t;return(t=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},vS=n=>{const e=Qv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Jv=()=>{var n;return(n=oh())===null||n===void 0?void 0:n.config},Xv=n=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Oc(JSON.stringify(t)),Oc(JSON.stringify(u)),""].join(".")}const hl={};function TS(){const n={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?n.emulator.push(e):n.prod.push(e);return n}function IS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Fy=!1;function Zv(n,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||hl[n]===e||hl[n]||Fy)return;hl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=TS().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,L){S.setAttribute("width","24"),S.setAttribute("id",L),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Fy=!0,u()},S}function _(S,L){S.setAttribute("id",L),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=IS(i),L=t("text"),x=document.getElementById(L)||document.createElement("span"),j=t("learnmore"),k=document.getElementById(j)||document.createElement("a"),ee=t("preprendIcon"),ie=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;d($),_(k,j);const re=g();p(ie,ee),$.append(ie,x,k,re),document.body.appendChild($)}a?(x.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function AS(){var n;const e=(n=oh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kS(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xS(){return!AS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NS(){try{return typeof indexedDB=="object"}catch{return!1}}function DS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="FirebaseError";class Wr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=OS,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xl.prototype.create)}}class xl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?bS(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Wr(o,d,i)}}function bS(n,e){return n.replace(VS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const VS=/\{\$([^}]+)}/g;function LS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function As(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(Uy(a)&&Uy(u)){if(!As(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Uy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function ol(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MS(n,e){const t=new jS(n,e);return t.subscribe.bind(t)}class jS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");FS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=ff),o.error===void 0&&(o.error=ff),o.complete===void 0&&(o.complete=ff);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(n){return n&&n._delegate?n._delegate:n}class Rs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ES;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zS(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BS(n){return n===Es?void 0:n}function zS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new US(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ne||(Ne={}));const qS={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},HS=Ne.INFO,WS={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},GS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=WS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=HS,this._logHandler=GS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const KS=(n,e)=>e.some(t=>n instanceof t);let By,zy;function QS(){return By||(By=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JS(){return zy||(zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,Nf=new WeakMap,tE=new WeakMap,pf=new WeakMap,mp=new WeakMap;function XS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Ri(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&eE.set(t,n)}).catch(()=>{}),mp.set(e,n),e}function YS(n){if(Nf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Nf.set(n,e)}let Df={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Nf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ZS(n){Df=n(Df)}function eA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(mf(this),e,...t);return tE.set(i,e.sort?e.sort():[e]),Ri(i)}:JS().includes(n)?function(...e){return n.apply(mf(this),e),Ri(eE.get(this))}:function(...e){return Ri(n.apply(mf(this),e))}}function tA(n){return typeof n=="function"?eA(n):(n instanceof IDBTransaction&&YS(n),KS(n,QS())?new Proxy(n,Df):n)}function Ri(n){if(n instanceof IDBRequest)return XS(n);if(pf.has(n))return pf.get(n);const e=tA(n);return e!==n&&(pf.set(n,e),mp.set(e,n)),e}const mf=n=>mp.get(n);function nA(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Ri(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Ri(u.result),p.oldVersion,p.newVersion,Ri(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const rA=["get","getKey","getAll","getAllKeys","count"],iA=["put","add","delete","clear"],gf=new Map;function $y(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=iA.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||rA.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&p.done]))[0]};return gf.set(e,a),a}ZS(n=>({...n,get:(e,t,i)=>$y(e,t)||n.get(e,t,i),has:(e,t)=>!!$y(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oA(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function oA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Of="@firebase/app",qy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new pp("@firebase/app"),aA="@firebase/app-compat",lA="@firebase/analytics-compat",uA="@firebase/analytics",cA="@firebase/app-check-compat",hA="@firebase/app-check",dA="@firebase/auth",fA="@firebase/auth-compat",pA="@firebase/database",mA="@firebase/data-connect",gA="@firebase/database-compat",yA="@firebase/functions",_A="@firebase/functions-compat",vA="@firebase/installations",EA="@firebase/installations-compat",wA="@firebase/messaging",TA="@firebase/messaging-compat",IA="@firebase/performance",SA="@firebase/performance-compat",AA="@firebase/remote-config",RA="@firebase/remote-config-compat",CA="@firebase/storage",PA="@firebase/storage-compat",kA="@firebase/firestore",xA="@firebase/ai",NA="@firebase/firestore-compat",DA="firebase",OA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",bA={[Of]:"fire-core",[aA]:"fire-core-compat",[uA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[cA]:"fire-app-check-compat",[dA]:"fire-auth",[fA]:"fire-auth-compat",[pA]:"fire-rtdb",[mA]:"fire-data-connect",[gA]:"fire-rtdb-compat",[yA]:"fire-fn",[_A]:"fire-fn-compat",[vA]:"fire-iid",[EA]:"fire-iid-compat",[wA]:"fire-fcm",[TA]:"fire-fcm-compat",[IA]:"fire-perf",[SA]:"fire-perf-compat",[AA]:"fire-rc",[RA]:"fire-rc-compat",[CA]:"fire-gcs",[PA]:"fire-gcs-compat",[kA]:"fire-fst",[NA]:"fire-fst-compat",[xA]:"fire-vertex","fire-js":"fire-js",[DA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,VA=new Map,Vf=new Map;function Hy(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zo(n){const e=n.name;if(Vf.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;Vf.set(e,n);for(const t of bc.values())Hy(t,n);for(const t of VA.values())Hy(t,n);return!0}function gp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new xl("app","Firebase",LA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=OA;function nE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:bf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ci.create("bad-app-name",{appName:String(o)});if(t||(t=Jv()),!t)throw Ci.create("no-options");const a=bc.get(o);if(a){if(As(t,a.options)&&As(i,a.config))return a;throw Ci.create("duplicate-app",{appName:o})}const u=new $S(o);for(const p of Vf.values())u.addComponent(p);const d=new MA(t,i,u);return bc.set(o,d),d}function rE(n=bf){const e=bc.get(n);if(!e&&n===bf&&Jv())return nE();if(!e)throw Ci.create("no-app",{appName:n});return e}function Pi(n,e,t){var i;let o=(i=bA[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(d.join(" "));return}zo(new Rs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebase-heartbeat-database",FA=1,El="firebase-heartbeat-store";let yf=null;function iE(){return yf||(yf=nA(jA,FA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(El)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ci.create("idb-open",{originalErrorMessage:n.message})})),yf}async function UA(n){try{const t=(await iE()).transaction(El),i=await t.objectStore(El).get(sE(n));return await t.done,i}catch(e){if(e instanceof Wr)Ur.warn(e.message);else{const t=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}}async function Wy(n,e){try{const i=(await iE()).transaction(El,"readwrite");await i.objectStore(El).put(e,sE(n)),await i.done}catch(t){if(t instanceof Wr)Ur.warn(t.message);else{const i=Ci.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(i.message)}}}function sE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=1024,zA=30;class $A{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Gy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>zA){const u=WA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ur.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gy(),{heartbeatsToSend:i,unsentEntries:o}=qA(this._heartbeatsCache.heartbeats),a=Oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ur.warn(t),""}}}function Gy(){return new Date().toISOString().substring(0,10)}function qA(n,e=BA){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),Ky(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ky(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class HA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NS()?DS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ky(n){return Oc(JSON.stringify({version:2,heartbeats:n})).length}function WA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){zo(new Rs("platform-logger",e=>new sA(e),"PRIVATE")),zo(new Rs("heartbeat",e=>new $A(e),"PRIVATE")),Pi(Of,qy,n),Pi(Of,qy,"esm2017"),Pi("fire-js","")}GA("");var KA="firebase",QA="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(KA,QA,"app");function yp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function oE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JA=oE,aE=new xl("auth","Firebase",oE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new pp("@firebase/auth");function XA(n,...e){Vc.logLevel<=Ne.WARN&&Vc.warn(`Auth (${ea}): ${n}`,...e)}function _c(n,...e){Vc.logLevel<=Ne.ERROR&&Vc.error(`Auth (${ea}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(n,...e){throw _p(n,...e)}function fr(n,...e){return _p(n,...e)}function lE(n,e,t){const i=Object.assign(Object.assign({},JA()),{[e]:t});return new xl("auth","Firebase",i).create(e,{appName:n.name})}function ki(n){return lE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _p(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return aE.create(n,...e)}function Ie(n,e,...t){if(!n)throw _p(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _c(e),new Error(e)}function Br(n,e){n||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function YA(){return Qy()==="http:"||Qy()==="https:"}function Qy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YA()||CS()||"connection"in navigator)?navigator.onLine:!0}function eR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Br(t>e,"Short delay should be less than long delay!"),this.isMobile=SS()||PS()}get(){return ZA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(n,e){Br(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rR=new Dl(3e4,6e4);function Ds(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Bi(n,e,t,i,o={}){return cE(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Nl(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},a);return RS()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Zo(n.emulatorConfig.host)&&(g.credentials="include"),uE.fetch()(await hE(n,n.config.apiHost,t,d),g)})}async function cE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},tR),e);try{const o=new sR(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw hc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw hc(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw hc(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw lE(n,_,g);Xn(n,_)}}catch(o){if(o instanceof Wr)throw o;Xn(n,"network-request-failed",{message:String(o)})}}async function ah(n,e,t,i,o={}){const a=await Bi(n,e,t,i,o);return"mfaPendingCredential"in a&&Xn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function hE(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?vp(n.config,o):`${n.config.apiScheme}://${o}`;return nR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function iR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fr(this.auth,"network-request-failed")),rR.get())})}}function hc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=fr(n,e,i);return o.customData._tokenResponse=t,o}function Jy(n){return n!==void 0&&n.enterprise!==void 0}class oR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return iR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aR(n,e){return Bi(n,"GET","/v2/recaptchaConfig",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(n,e){return Bi(n,"POST","/v1/accounts:delete",e)}async function Lc(n,e){return Bi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uR(n,e=!1){const t=ht(n),i=await t.getIdToken(e),o=Ep(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:dl(_f(o.auth_time)),issuedAtTime:dl(_f(o.iat)),expirationTime:dl(_f(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function _f(n){return Number(n)*1e3}function Ep(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kv(t);return o?JSON.parse(o):(_c("Failed to decode base64 JWT payload"),null)}catch(o){return _c("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Xy(n){const e=Ep(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Wr&&cR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function cR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await wl(n,Lc(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?dE(a.providerUserInfo):[],d=fR(n.providerData,u),p=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=p?g:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Mf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function dR(n){const e=ht(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function dE(n){return n.map(e=>{var{providerId:t}=e,i=yp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(n,e){const t=await cE(n,{},async()=>{const i=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await hE(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Zo(n.emulatorConfig.host)&&(p.credentials="include"),uE.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mR(n,e){return Bi(n,"POST","/v2/accounts:revokeToken",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Xy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await pR(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Mo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await wl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uR(this,e)}reload(){return dR(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await wl(this,lR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,g,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,L=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,j=(d=t.tenantId)!==null&&d!==void 0?d:void 0,k=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ee=(g=t.createdAt)!==null&&g!==void 0?g:void 0,ie=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:$,emailVerified:re,isAnonymous:me,providerData:_e,stsTokenManager:D}=t;Ie($&&D,e,"internal-error");const A=Mo.fromJSON(this.name,D);Ie(typeof $=="string",e,"internal-error"),_i(E,e.name),_i(S,e.name),Ie(typeof re=="boolean",e,"internal-error"),Ie(typeof me=="boolean",e,"internal-error"),_i(L,e.name),_i(x,e.name),_i(j,e.name),_i(k,e.name),_i(ee,e.name),_i(ie,e.name);const P=new Jn({uid:$,auth:e,email:S,emailVerified:re,displayName:E,isAnonymous:me,photoURL:x,phoneNumber:L,tenantId:j,stsTokenManager:A,createdAt:ee,lastLoginAt:ie});return _e&&Array.isArray(_e)&&(P.providerData=_e.map(b=>Object.assign({},b))),k&&(P._redirectEventId=k),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Mo;o.updateFromServerResponse(t);const a=new Jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Mc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?dE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Mo;d.updateFromIdToken(i);const p=new Jn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;function Fr(n){Br(n instanceof Function,"Expected a class definition");let e=Yy.get(n);return e?(Br(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Yy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fE.type="NONE";const Zy=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(n,e,t){return`firebase:${n}:${e}:${t}`}class jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=vc(this.userKey,o.apiKey,a),this.fullPersistenceKey=vc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lc(this.auth,{idToken:e}).catch(()=>{});return t?Jn._fromGetAccountInfoResponse(this.auth,t,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new jo(Fr(Zy),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=o[0]||Fr(Zy);const u=vc(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(u);if(_){let E;if(typeof _=="string"){const S=await Lc(e,{idToken:_}).catch(()=>{});if(!S)break;E=await Jn._fromGetAccountInfoResponse(e,S,_)}else E=Jn._fromJSON(e,_);g!==a&&(d=E),a=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new jo(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==a)try{await g._remove(u)}catch{}})),new jo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vE(e))return"Blackberry";if(EE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||gE(e))&&!e.includes("edge/"))return"Chrome";if(_E(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pE(n=Kt()){return/firefox\//i.test(n)}function mE(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gE(n=Kt()){return/crios\//i.test(n)}function yE(n=Kt()){return/iemobile/i.test(n)}function _E(n=Kt()){return/android/i.test(n)}function vE(n=Kt()){return/blackberry/i.test(n)}function EE(n=Kt()){return/webos/i.test(n)}function wp(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gR(n=Kt()){var e;return wp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yR(){return kS()&&document.documentMode===10}function wE(n=Kt()){return wp(n)||_E(n)||EE(n)||vE(n)||/windows phone/i.test(n)||yE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n,e=[]){let t;switch(n){case"Browser":t=e_(Kt());break;case"Worker":t=`${e_(Kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n,e={}){return Bi(n,"GET","/v2/passwordPolicy",Ds(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=6;class wR{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:ER,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t_(this),this.idTokenSubscription=new t_(this),this.beforeStateQueue=new _R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lc(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(ki(this));const t=e?ht(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vR(this),t=new wR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await mR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&XA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ta(n){return ht(n)}class t_{constructor(e){this.auth=e,this.observer=null,this.addObserver=MS(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IR(n){lh=n}function IE(n){return lh.loadJS(n)}function SR(){return lh.recaptchaEnterpriseScript}function AR(){return lh.gapiScript}function RR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class CR{constructor(){this.enterprise=new PR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class PR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kR="recaptcha-enterprise",SE="NO_RECAPTCHA";class xR{constructor(e){this.type=kR,this.auth=ta(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{aR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new oR(p);return a.tenantId==null?a._agentRecaptchaConfig=g:a._tenantRecaptchaConfigs[a.tenantId]=g,u(g.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;Jy(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(g=>{u(g)}).catch(()=>{u(SE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CR().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&Jy(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=SR();p.length!==0&&(p+=d),IE(p).then(()=>{o(d,a,u)}).catch(g=>{u(g)})}}).catch(d=>{u(d)})})}}async function n_(n,e,t,i=!1,o=!1){const a=new xR(n);let u;if(o)u=SE;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function r_(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await n_(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await n_(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n,e){const t=gp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(As(a,e??{}))return o;Xn(o,"already-initialized")}return t.initialize({options:e})}function DR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Fr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function OR(n,e,t){const i=ta(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=AE(e),{host:u,port:d}=bR(e),p=d===null?"":`:${d}`,g={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(As(g,i.config.emulator)&&As(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Zo(u)?(Yv(`${a}//${u}${p}`),Zv("Auth",!0)):VR()}function AE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bR(n){const e=AE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:i_(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:i_(u)}}}function i_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function VR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function LR(n,e){return Bi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return ah(n,"POST","/v1/accounts:signInWithPassword",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",Ds(n,e))}async function FR(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Tp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Tl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Tl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r_(e,t,"signInWithPassword",MR);case"emailLink":return jR(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r_(e,i,"signUpPassword",LR);case"emailLink":return FR(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(n,e){return ah(n,"POST","/v1/accounts:signInWithIdp",Ds(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="http://localhost";class Cs extends Tp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=yp(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Cs(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Fo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Fo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fo(e,t)}buildRequest(){const e={requestUri:UR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zR(n){const e=sl(ol(n)).link,t=e?sl(ol(e)).deep_link_id:null,i=sl(ol(n)).deep_link_id;return(i?sl(ol(i)).link:null)||i||t||e||n}class Ip{constructor(e){var t,i,o,a,u,d;const p=sl(ol(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=BR((o=p.mode)!==null&&o!==void 0?o:null);Ie(g&&_&&E,"argument-error"),this.apiKey=g,this.operation=E,this.code=_,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=zR(e);try{return new Ip(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.providerId=na.PROVIDER_ID}static credential(e,t){return Tl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ip.parseLink(t);return Ie(i,"argument-error"),Tl._fromEmailAndCode(e,i.code,i.tenantId)}}na.PROVIDER_ID="password";na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends RE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Ol{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ei.credential(t,i)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Ol{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Ol{constructor(){super("twitter.com")}static credential(e,t){return Cs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ti.credential(t,i)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Jn._fromIdTokenResponse(e,i,o),u=s_(i);return new $o({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=s_(i);return new $o({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function s_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Wr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new jc(e,t,i,o)}}function CE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(n,a,e,i):a})}async function $R(n,e,t=!1){const i=await wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $o._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e,t=!1){const{auth:i}=n;if(Qn(i.app))return Promise.reject(ki(i));const o="reauthenticate";try{const a=await wl(n,CE(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=Ep(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),$o._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(n,e,t=!1){if(Qn(n.app))return Promise.reject(ki(n));const i="signIn",o=await CE(n,i,e),a=await $o._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function HR(n,e){return PE(ta(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n){const e=ta(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function kE(n,e,t){return Qn(n.app)?Promise.reject(ki(n)):HR(ht(n),na.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WR(n),i})}function GR(n,e,t,i){return ht(n).onIdTokenChanged(e,t,i)}function KR(n,e,t){return ht(n).beforeAuthStateChanged(e,t)}function QR(n,e,t,i){return ht(n).onAuthStateChanged(e,t,i)}function JR(n){return ht(n).signOut()}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,YR=10;class NE extends xE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);yR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,YR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const ZR=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends xE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DE.type="SESSION";const OE=DE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new uh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async g=>g(t.origin,a)),p=await e1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const g=Sp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function n1(n){pr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function r1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function s1(){return bE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebaseLocalStorageDb",o1=1,Uc="firebaseLocalStorage",LE="fbase_key";class bl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ch(n,e){return n.transaction([Uc],e?"readwrite":"readonly").objectStore(Uc)}function a1(){const n=indexedDB.deleteDatabase(VE);return new bl(n).toPromise()}function jf(){const n=indexedDB.open(VE,o1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Uc,{keyPath:LE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Uc)?e(i):(i.close(),await a1(),e(await jf()))})})}async function o_(n,e,t){const i=ch(n,!0).put({[LE]:e,value:t});return new bl(i).toPromise()}async function l1(n,e){const t=ch(n,!1).get(e),i=await new bl(t).toPromise();return i===void 0?null:i.value}function a_(n,e){const t=ch(n,!0).delete(e);return new bl(t).toPromise()}const u1=800,c1=3;class ME{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>c1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(s1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await r1(),!this.activeServiceWorker)return;this.sender=new t1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jf();return await o_(e,Fc,"1"),await a_(e,Fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>o_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>l1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>a_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ch(o,!1).getAll();return new bl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ME.type="LOCAL";const h1=ME;new Dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(n,e){return e?Fr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends Tp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function f1(n){return PE(n.auth,new Ap(n),n.bypassAuthState)}function p1(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),qR(t,new Ap(n),n.bypassAuthState)}async function m1(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),$R(t,new Ap(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f1;case"linkViaPopup":case"linkViaRedirect":return m1;case"reauthViaPopup":case"reauthViaRedirect":return p1;default:Xn(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=new Dl(2e3,1e4);class Vo extends jE{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g1.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="pendingRedirect",Ec=new Map;class _1 extends jE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ec.get(this.auth._key());if(!e){try{const i=await v1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ec.set(this.auth._key(),e)}return this.bypassAuthState||Ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v1(n,e){const t=T1(e),i=w1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function E1(n,e){Ec.set(n._key(),e)}function w1(n){return Fr(n._redirectPersistence)}function T1(n){return vc(y1,n.config.apiKey,n.name)}async function I1(n,e,t=!1){if(Qn(n.app))return Promise.reject(ki(n));const i=ta(n),o=d1(i,e),u=await new _1(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=600*1e3;class A1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!FE(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S1&&this.cachedEventUids.clear(),this.cachedEventUids.has(l_(e))}saveEventToCache(e){this.cachedEventUids.add(l_(e)),this.lastProcessedEventTime=Date.now()}}function l_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function R1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(n,e={}){return Bi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k1=/^https?/;async function x1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await C1(n);for(const t of e)try{if(N1(t))return}catch{}Xn(n,"unauthorized-domain")}function N1(n){const e=Lf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!k1.test(t))return!1;if(P1.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new Dl(3e4,6e4);function u_(){const n=pr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function O1(n){return new Promise((e,t)=>{var i,o,a;function u(){u_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u_(),t(fr(n,"network-request-failed"))},timeout:D1.get()})}if(!((o=(i=pr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=pr().gapi)===null||a===void 0)&&a.load)u();else{const d=RR("iframefcb");return pr()[d]=()=>{gapi.load?u():t(fr(n,"network-request-failed"))},IE(`${AR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw wc=null,e})}let wc=null;function b1(n){return wc=wc||O1(n),wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Dl(5e3,15e3),L1="__/auth/iframe",M1="emulator/auth/iframe",j1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U1(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?vp(e,M1):`https://${n.config.authDomain}/${L1}`,i={apiKey:e.apiKey,appName:n.name,v:ea},o=F1.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Nl(i).slice(1)}`}async function B1(n){const e=await b1(n),t=pr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:U1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j1,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=fr(n,"network-request-failed"),d=pr().setTimeout(()=>{a(u)},V1.get());function p(){pr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$1=500,q1=600,H1="_blank",W1="http://localhost";class c_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G1(n,e,t,i=$1,o=q1){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},z1),{width:i.toString(),height:o.toString(),top:a,left:u}),g=Kt().toLowerCase();t&&(d=gE(g)?H1:t),pE(g)&&(e=e||W1,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[L,x])=>`${S}${L}=${x},`,"");if(gR(g)&&d!=="_self")return K1(e||"",d),new c_(null);const E=window.open(e||"",d,_);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new c_(E)}function K1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="__/auth/handler",J1="emulator/auth/handler",X1=encodeURIComponent("fac");async function h_(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ea,eventId:o};if(e instanceof RE){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",LS(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Ol){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${X1}=${encodeURIComponent(p)}`:"";return`${Y1(n)}?${Nl(d).slice(1)}${g}`}function Y1({config:n}){return n.emulator?vp(n,J1):`https://${n.authDomain}/${Q1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="webStorageSupport";class Z1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=I1,this._overrideRedirectResult=E1}async _openPopup(e,t,i,o){var a;Br((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await h_(e,t,i,Lf(),o);return G1(e,u,Sp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await h_(e,t,i,Lf(),o);return n1(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Br(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await B1(e),i=new A1(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vf,{type:vf},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[vf];u!==void 0&&t(!!u),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=x1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wE()||mE()||wp()}}const eC=Z1;var d_="@firebase/auth",f_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rC(n){zo(new Rs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(n)},g=new TR(i,o,a,p);return DR(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),zo(new Rs("auth-internal",e=>{const t=ta(e.getProvider("auth").getImmediate());return(i=>new tC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(d_,f_,nC(n)),Pi(d_,f_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=300,sC=Xv("authIdTokenMaxAge")||iC;let p_=null;const oC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sC)return;const o=t==null?void 0:t.token;p_!==o&&(p_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aC(n=rE()){const e=gp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=NR(n,{popupRedirectResolver:eC,persistence:[h1,ZR,OE]}),i=Xv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=oC(a.toString());KR(t,u,()=>u(t.currentUser)),GR(t,d=>u(d))}}const o=Qv("auth");return o&&OR(t,`http://${o}`),t}function lC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}IR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=fr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",lC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rC("Browser");var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,UE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function P(){}P.prototype=A.prototype,D.D=A.prototype,D.prototype=new P,D.prototype.constructor=D,D.C=function(b,O,F){for(var C=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)C[qe-2]=arguments[qe];return A.prototype[O].apply(b,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,P){P||(P=0);var b=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)b[O]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(O=0;16>O;++O)b[O]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=D.g[0],P=D.g[1],O=D.g[2];var F=D.g[3],C=A+(F^P&(O^F))+b[0]+3614090360&4294967295;A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+b[1]+3905402710&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+b[2]+606105819&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+b[3]+3250441966&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(F^P&(O^F))+b[4]+4118548399&4294967295,A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+b[5]+1200080426&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+b[6]+2821735955&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+b[7]+4249261313&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(F^P&(O^F))+b[8]+1770035416&4294967295,A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+b[9]+2336552879&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+b[10]+4294925233&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+b[11]+2304563134&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(F^P&(O^F))+b[12]+1804603682&4294967295,A=P+(C<<7&4294967295|C>>>25),C=F+(O^A&(P^O))+b[13]+4254626195&4294967295,F=A+(C<<12&4294967295|C>>>20),C=O+(P^F&(A^P))+b[14]+2792965006&4294967295,O=F+(C<<17&4294967295|C>>>15),C=P+(A^O&(F^A))+b[15]+1236535329&4294967295,P=O+(C<<22&4294967295|C>>>10),C=A+(O^F&(P^O))+b[1]+4129170786&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+b[6]+3225465664&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+b[11]+643717713&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+b[0]+3921069994&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(O^F&(P^O))+b[5]+3593408605&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+b[10]+38016083&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+b[15]+3634488961&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+b[4]+3889429448&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(O^F&(P^O))+b[9]+568446438&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+b[14]+3275163606&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+b[3]+4107603335&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+b[8]+1163531501&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(O^F&(P^O))+b[13]+2850285829&4294967295,A=P+(C<<5&4294967295|C>>>27),C=F+(P^O&(A^P))+b[2]+4243563512&4294967295,F=A+(C<<9&4294967295|C>>>23),C=O+(A^P&(F^A))+b[7]+1735328473&4294967295,O=F+(C<<14&4294967295|C>>>18),C=P+(F^A&(O^F))+b[12]+2368359562&4294967295,P=O+(C<<20&4294967295|C>>>12),C=A+(P^O^F)+b[5]+4294588738&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+b[8]+2272392833&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+b[11]+1839030562&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+b[14]+4259657740&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(P^O^F)+b[1]+2763975236&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+b[4]+1272893353&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+b[7]+4139469664&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+b[10]+3200236656&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(P^O^F)+b[13]+681279174&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+b[0]+3936430074&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+b[3]+3572445317&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+b[6]+76029189&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(P^O^F)+b[9]+3654602809&4294967295,A=P+(C<<4&4294967295|C>>>28),C=F+(A^P^O)+b[12]+3873151461&4294967295,F=A+(C<<11&4294967295|C>>>21),C=O+(F^A^P)+b[15]+530742520&4294967295,O=F+(C<<16&4294967295|C>>>16),C=P+(O^F^A)+b[2]+3299628645&4294967295,P=O+(C<<23&4294967295|C>>>9),C=A+(O^(P|~F))+b[0]+4096336452&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+b[7]+1126891415&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+b[14]+2878612391&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+b[5]+4237533241&4294967295,P=O+(C<<21&4294967295|C>>>11),C=A+(O^(P|~F))+b[12]+1700485571&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+b[3]+2399980690&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+b[10]+4293915773&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+b[1]+2240044497&4294967295,P=O+(C<<21&4294967295|C>>>11),C=A+(O^(P|~F))+b[8]+1873313359&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+b[15]+4264355552&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+b[6]+2734768916&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+b[13]+1309151649&4294967295,P=O+(C<<21&4294967295|C>>>11),C=A+(O^(P|~F))+b[4]+4149444226&4294967295,A=P+(C<<6&4294967295|C>>>26),C=F+(P^(A|~O))+b[11]+3174756917&4294967295,F=A+(C<<10&4294967295|C>>>22),C=O+(A^(F|~P))+b[2]+718787259&4294967295,O=F+(C<<15&4294967295|C>>>17),C=P+(F^(O|~A))+b[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+F&4294967295}i.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var P=A-this.blockSize,b=this.B,O=this.h,F=0;F<A;){if(O==0)for(;F<=P;)o(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<A;)if(b[O++]=D.charCodeAt(F++),O==this.blockSize){o(this,b),O=0;break}}else for(;F<A;)if(b[O++]=D[F++],O==this.blockSize){o(this,b),O=0;break}}this.h=O,this.o+=A},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var P=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=P&255,P/=256;for(this.u(D),D=Array(16),A=P=0;4>A;++A)for(var b=0;32>b;b+=8)D[P++]=this.g[A]>>>b&255;return D};function a(D,A){var P=d;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=A(D)}function u(D,A){this.h=A;for(var P=[],b=!0,O=D.length-1;0<=O;O--){var F=D[O]|0;b&&F==A||(P[O]=F,b=!1)}this.g=P}var d={};function p(D){return-128<=D&&128>D?a(D,function(A){return new u([A|0],0>A?-1:0)}):new u([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return k(g(-D));for(var A=[],P=1,b=0;D>=P;b++)A[b]=D/P|0,P*=4294967296;return new u(A,0)}function _(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return k(_(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=g(Math.pow(A,8)),b=E,O=0;O<D.length;O+=8){var F=Math.min(8,D.length-O),C=parseInt(D.substring(O,O+F),A);8>F?(F=g(Math.pow(A,F)),b=b.j(F).add(g(C))):(b=b.j(P),b=b.add(g(C)))}return b}var E=p(0),S=p(1),L=p(16777216);n=u.prototype,n.m=function(){if(j(this))return-k(this).m();for(var D=0,A=1,P=0;P<this.g.length;P++){var b=this.i(P);D+=(0<=b?b:4294967296+b)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(j(this))return"-"+k(this).toString(D);for(var A=g(Math.pow(D,6)),P=this,b="";;){var O=re(P,A).g;P=ee(P,O.j(A));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(D);if(P=O,x(P))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function j(D){return D.h==-1}n.l=function(D){return D=ee(this,D),j(D)?-1:x(D)?0:1};function k(D){for(var A=D.g.length,P=[],b=0;b<A;b++)P[b]=~D.g[b];return new u(P,~D.h).add(S)}n.abs=function(){return j(this)?k(this):this},n.add=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],b=0,O=0;O<=A;O++){var F=b+(this.i(O)&65535)+(D.i(O)&65535),C=(F>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);b=C>>>16,F&=65535,C&=65535,P[O]=C<<16|F}return new u(P,P[P.length-1]&-2147483648?-1:0)};function ee(D,A){return D.add(k(A))}n.j=function(D){if(x(this)||x(D))return E;if(j(this))return j(D)?k(this).j(k(D)):k(k(this).j(D));if(j(D))return k(this.j(k(D)));if(0>this.l(L)&&0>D.l(L))return g(this.m()*D.m());for(var A=this.g.length+D.g.length,P=[],b=0;b<2*A;b++)P[b]=0;for(b=0;b<this.g.length;b++)for(var O=0;O<D.g.length;O++){var F=this.i(b)>>>16,C=this.i(b)&65535,qe=D.i(O)>>>16,_t=D.i(O)&65535;P[2*b+2*O]+=C*_t,ie(P,2*b+2*O),P[2*b+2*O+1]+=F*_t,ie(P,2*b+2*O+1),P[2*b+2*O+1]+=C*qe,ie(P,2*b+2*O+1),P[2*b+2*O+2]+=F*qe,ie(P,2*b+2*O+2)}for(b=0;b<A;b++)P[b]=P[2*b+1]<<16|P[2*b];for(b=A;b<2*A;b++)P[b]=0;return new u(P,0)};function ie(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function $(D,A){this.g=D,this.h=A}function re(D,A){if(x(A))throw Error("division by zero");if(x(D))return new $(E,E);if(j(D))return A=re(k(D),A),new $(k(A.g),k(A.h));if(j(A))return A=re(D,k(A)),new $(k(A.g),A.h);if(30<D.g.length){if(j(D)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var P=S,b=A;0>=b.l(D);)P=me(P),b=me(b);var O=_e(P,1),F=_e(b,1);for(b=_e(b,2),P=_e(P,2);!x(b);){var C=F.add(b);0>=C.l(D)&&(O=O.add(P),F=C),b=_e(b,1),P=_e(P,1)}return A=ee(D,O.j(A)),new $(O,A)}for(O=E;0<=D.l(A);){for(P=Math.max(1,Math.floor(D.m()/A.m())),b=Math.ceil(Math.log(P)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=g(P),C=F.j(A);j(C)||0<C.l(D);)P-=b,F=g(P),C=F.j(A);x(F)&&(F=S),O=O.add(F),D=ee(D,C)}return new $(O,D)}n.A=function(D){return re(this,D).h},n.and=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],b=0;b<A;b++)P[b]=this.i(b)&D.i(b);return new u(P,this.h&D.h)},n.or=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],b=0;b<A;b++)P[b]=this.i(b)|D.i(b);return new u(P,this.h|D.h)},n.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),P=[],b=0;b<A;b++)P[b]=this.i(b)^D.i(b);return new u(P,this.h^D.h)};function me(D){for(var A=D.g.length+1,P=[],b=0;b<A;b++)P[b]=D.i(b)<<1|D.i(b-1)>>>31;return new u(P,D.h)}function _e(D,A){var P=A>>5;A%=32;for(var b=D.g.length-P,O=[],F=0;F<b;F++)O[F]=0<A?D.i(F+P)>>>A|D.i(F+P+1)<<32-A:D.i(F+P);return new u(O,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,UE=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=_,xi=u}).apply(typeof m_<"u"?m_:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,al,zE,Tc,Ff,$E,qE,HE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(c,m){if(m)e:{var v=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var U=c[I];if(!(U in v))break e;v=v[U]}c=c[c.length-1],I=v[c],m=m(I),m!=I&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var v=0,I=!1,U={next:function(){if(!I&&v<c.length){var W=v++;return{value:m(W,c[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(c){return c||function(){return a(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function g(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,v){return c.call.apply(c.bind,arguments)}function E(c,m,v){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),c.apply(m,U)}}return function(){return c.apply(m,arguments)}}function S(c,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function L(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function x(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(I,U,W){for(var se=Array(arguments.length-2),He=2;He<arguments.length;He++)se[He-2]=arguments[He];return m.prototype[U].apply(I,se)}}function j(c){const m=c.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=c[I];return v}return[]}function k(c,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const U=c.length||0,W=I.length||0;c.length=U+W;for(let se=0;se<W;se++)c[U+se]=I[se]}else c.push(I)}}class ee{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ie(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var me=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function _e(c,m,v){for(const I in c)m.call(v,c[I],I,c)}function D(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function A(c){const m={};for(const v in c)m[v]=c[v];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,m){let v,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(v in I)c[v]=I[v];for(let W=0;W<P.length;W++)v=P[W],Object.prototype.hasOwnProperty.call(I,v)&&(c[v]=I[v])}}function O(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function F(c){d.setTimeout(()=>{throw c},0)}function C(){var c=ge;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class qe{constructor(){this.h=this.g=null}add(m,v){const I=_t.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var _t=new ee(()=>new Ge,c=>c.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,ne=!1,ge=new qe,ae=()=>{const c=d.Promise.resolve(void 0);Ue=()=>{c.then(M)}};var M=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){F(v)}var m=_t;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}ne=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return c})();function Pe(c,m){if(fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(me){e:{try{re(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,fe);var be={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Qe(c,m,v,I,U){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=U,this.key=++ze,this.da=this.fa=!1}function At(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Er(c){this.src=c,this.g={},this.h=0}Er.prototype.add=function(c,m,v,I,U){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var se=Gr(c,m,I,U);return-1<se?(m=c[se],v||(m.fa=!1)):(m=new Qe(m,this.src,W,!!I,U),m.fa=v,c.push(m)),m};function Ms(c,m){var v=m.type;if(v in c.g){var I=c.g[v],U=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=U)&&Array.prototype.splice.call(I,U,1),W&&(At(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Gr(c,m,v,I){for(var U=0;U<c.length;++U){var W=c[U];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==I)return U}return-1}var qi="closure_lm_"+(1e6*Math.random()|0),js={};function ua(c,m,v,I,U){if(Array.isArray(m)){for(var W=0;W<m.length;W++)ua(c,m[W],v,I,U);return null}return v=da(v),c&&c[Be]?c.K(m,v,g(I)?!!I.capture:!1,U):ca(c,m,v,!1,I,U)}function ca(c,m,v,I,U,W){if(!m)throw Error("Invalid event type");var se=g(U)?!!U.capture:!!U,He=Us(c);if(He||(c[qi]=He=new Er(c)),v=He.add(m,v,I,se,W),v.proxy)return v;if(I=Ql(),v.proxy=I,I.src=c,I.listener=v,c.addEventListener)Re||(U=se),U===void 0&&(U=!1),c.addEventListener(m.toString(),I,U);else if(c.attachEvent)c.attachEvent(Tr(m.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ql(){function c(v){return m.call(c.src,c.listener,v)}const m=ha;return c}function Fs(c,m,v,I,U){if(Array.isArray(m))for(var W=0;W<m.length;W++)Fs(c,m[W],v,I,U);else I=g(I)?!!I.capture:!!I,v=da(v),c&&c[Be]?(c=c.i,m=String(m).toString(),m in c.g&&(W=c.g[m],v=Gr(W,v,I,U),-1<v&&(At(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete c.g[m],c.h--)))):c&&(c=Us(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Gr(m,v,I,U)),(v=-1<c?m[c]:null)&&wr(v))}function wr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Be])Ms(m.i,c);else{var v=c.type,I=c.proxy;m.removeEventListener?m.removeEventListener(v,I,c.capture):m.detachEvent?m.detachEvent(Tr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Us(m))?(Ms(v,c),v.h==0&&(v.src=null,m[qi]=null)):At(c)}}}function Tr(c){return c in js?js[c]:js[c]="on"+c}function ha(c,m){if(c.da)c=!0;else{m=new Pe(m,this);var v=c.listener,I=c.ha||c.src;c.fa&&wr(c),c=v.call(I,m)}return c}function Us(c){return c=c[qi],c instanceof Er?c:null}var Bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function da(c){return typeof c=="function"?c:(c[Bs]||(c[Bs]=function(m){return c.handleEvent(m)}),c[Bs])}function vt(){K.call(this),this.i=new Er(this),this.M=this,this.F=null}x(vt,K),vt.prototype[Be]=!0,vt.prototype.removeEventListener=function(c,m,v,I){Fs(this,c,m,v,I)};function Et(c,m){var v,I=c.F;if(I)for(v=[];I;I=I.F)v.push(I);if(c=c.M,I=m.type||m,typeof m=="string")m=new fe(m,c);else if(m instanceof fe)m.target=m.target||c;else{var U=m;m=new fe(I,c),b(m,U)}if(U=!0,v)for(var W=v.length-1;0<=W;W--){var se=m.g=v[W];U=Ir(se,I,!0,m)&&U}if(se=m.g=c,U=Ir(se,I,!0,m)&&U,U=Ir(se,I,!1,m)&&U,v)for(W=0;W<v.length;W++)se=m.g=v[W],U=Ir(se,I,!1,m)&&U}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],I=0;I<v.length;I++)At(v[I]);delete c.g[m],c.h--}}this.F=null},vt.prototype.K=function(c,m,v,I){return this.i.add(String(c),m,!1,v,I)},vt.prototype.L=function(c,m,v,I){return this.i.add(String(c),m,!0,v,I)};function Ir(c,m,v,I){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,W=0;W<m.length;++W){var se=m[W];if(se&&!se.da&&se.capture==v){var He=se.listener,wt=se.ha||se.src;se.fa&&Ms(c.i,se),U=He.call(wt,I)!==!1&&U}}return U&&!I.defaultPrevented}function fa(c,m,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(c,m||0)}function Kr(c){c.g=fa(()=>{c.g=null,c.i&&(c.i=!1,Kr(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Hi extends K{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(c){K.call(this),this.h=c,this.g={}}x(Wi,K);var pa=[];function ma(c){_e(c.g,function(m,v){this.g.hasOwnProperty(v)&&wr(m)},c),c.g={}}Wi.prototype.N=function(){Wi.aa.N.call(this),ma(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ga=d.JSON.stringify,ya=d.JSON.parse,_a=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Gi(){}Gi.prototype.h=null;function zs(c){return c.h||(c.h=c.i())}function $s(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function er(){fe.call(this,"d")}x(er,fe);function qs(){fe.call(this,"c")}x(qs,fe);var tr={},va=null;function Ki(){return va=va||new vt}tr.La="serverreachability";function Ea(c){fe.call(this,tr.La,c)}x(Ea,fe);function Sr(c){const m=Ki();Et(m,new Ea(m))}tr.STAT_EVENT="statevent";function wa(c,m){fe.call(this,tr.STAT_EVENT,c),this.stat=m}x(wa,fe);function at(c){const m=Ki();Et(m,new wa(m,c))}tr.Ma="timingevent";function Hs(c,m){fe.call(this,tr.Ma,c),this.size=m}x(Hs,fe);function bn(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},m)}function Qi(){this.g=!0}Qi.prototype.xa=function(){this.g=!1};function Ji(c,m,v,I,U,W){c.info(function(){if(c.g)if(W)for(var se="",He=W.split("&"),wt=0;wt<He.length;wt++){var Ve=He[wt].split("=");if(1<Ve.length){var Rt=Ve[0];Ve=Ve[1];var ft=Rt.split("_");se=2<=ft.length&&ft[1]=="type"?se+(Rt+"="+Ve+"&"):se+(Rt+"=redacted&")}}else se=null;else se=W;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+m+`
`+v+`
`+se})}function Ws(c,m,v,I,U,W,se){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+m+`
`+v+`
`+W+" "+se})}function Vn(c,m,v,I){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+bh(c,v)+(I?" "+I:"")})}function Ta(c,m){c.info(function(){return"TIMEOUT: "+m})}Qi.prototype.info=function(){};function bh(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var I=v[c];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var se=1;se<U.length;se++)U[se]=""}}}}return ga(v)}catch{return m}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function Xi(){}x(Xi,Gi),Xi.prototype.g=function(){return new XMLHttpRequest},Xi.prototype.i=function(){return{}},Ln=new Xi;function Mn(c,m,v,I){this.j=c,this.i=m,this.l=v,this.R=I||1,this.U=new Wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xl}function Xl(){this.i=null,this.g="",this.h=!1}var Ia={},Ks={};function Qs(c,m,v){c.L=1,c.v=Zr(fn(m)),c.m=v,c.P=!0,Sa(c,null)}function Sa(c,m){c.F=Date.now(),Je(c),c.A=fn(c.v);var v=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),ti(v.i,"t",I),c.C=0,v=c.j.J,c.h=new Xl,c.g=mu(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Hi(S(c.Y,c,c.g),c.O)),m=c.U,v=c.g,I=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(pa[0]=U.toString()),U=pa);for(var W=0;W<U.length;W++){var se=ua(v,U[W],I||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Sr(),Ji(c.i,c.u,c.A,c.l,c.R,c.m)}Mn.prototype.ca=function(c){c=c.target;const m=this.M;m&&tn(c)==3?m.j():this.Y(c)},Mn.prototype.Y=function(c){try{if(c==this.g)e:{const ft=tn(this.g);var m=this.g.Ba();const Rn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||ft!=4||m==7||(m==8||0>=Rn?Sr(3):Sr(2)),Yi(this);var v=this.g.Z();this.X=v;t:if(Yl(this)){var I=xa(this.g);c="";var U=I.length,W=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),Qr(this);var se="";break t}this.h.i=new d.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,c+=this.h.i.decode(I[m],{stream:!(W&&m==U-1)});I.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,Ws(this.i,this.u,this.A,this.l,this.R,ft,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,wt=this.g;if((He=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(He)){var Ve=He;break t}}Ve=null}if(v=Ve)Vn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Aa(this,v);else{this.o=!1,this.s=3,at(12),Sn(this),Qr(this);break e}}if(this.P){v=!0;let mn;for(;!this.J&&this.C<se.length;)if(mn=Vh(this,se),mn==Ks){ft==4&&(this.s=4,at(14),v=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Ia){this.s=4,at(15),Vn(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Vn(this.i,this.l,mn,null),Aa(this,mn);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||se.length!=0||this.h.h||(this.s=1,at(16),v=!1),this.o=this.o&&v,!v)Vn(this.i,this.l,se,"[Invalid Chunked Response]"),Sn(this),Qr(this);else if(0<se.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Da(Rt),Rt.M=!0,at(11))}}else Vn(this.i,this.l,se,null),Aa(this,se);ft==4&&Sn(this),this.o&&!this.J&&(ft==4?oo(this.j,this):(this.o=!1,Je(this)))}else to(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Sn(this),Qr(this)}}}catch{}finally{}};function Yl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Vh(c,m){var v=c.C,I=m.indexOf(`
`,v);return I==-1?Ks:(v=Number(m.substring(v,I)),isNaN(v)?Ia:(I+=1,I+v>m.length?Ks:(m=m.slice(I,I+v),c.C=I+v,m)))}Mn.prototype.cancel=function(){this.J=!0,Sn(this)};function Je(c){c.S=Date.now()+c.I,Zl(c,c.I)}function Zl(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=bn(S(c.ba,c),m)}function Yi(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ta(this.i,this.A),this.L!=2&&(Sr(),at(17)),Sn(this),this.s=2,Qr(this)):Zl(this,this.S-c)};function Qr(c){c.j.G==0||c.J||oo(c.j,c)}function Sn(c){Yi(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ma(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Aa(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||Qt(v.h,c))){if(!c.K&&Qt(v.h,c)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)so(v),zn(v);else break e;io(v),at(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=bn(S(v.Za,v),6e3));if(1>=tu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else kr(v,11)}else if((c.K||v.g==c)&&so(v),!ie(m))for(U=v.Da.g.parse(m),m=0;m<U.length;m++){let Ve=U[m];if(v.T=Ve[0],Ve=Ve[1],v.G==2)if(Ve[0]=="c"){v.K=Ve[1],v.ia=Ve[2];const Rt=Ve[3];Rt!=null&&(v.la=Rt,v.j.info("VER="+v.la));const ft=Ve[4];ft!=null&&(v.Aa=ft,v.j.info("SVER="+v.Aa));const Rn=Ve[5];Rn!=null&&typeof Rn=="number"&&0<Rn&&(I=1.5*Rn,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const mn=c.g;if(mn){const ss=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ss){var W=I.h;W.g||ss.indexOf("spdy")==-1&&ss.indexOf("quic")==-1&&ss.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ra(W,W.h),W.h=null))}if(I.D){const lo=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(I.ya=lo,Ke(I.I,I.D,lo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var se=c;if(I.qa=pu(I,I.J?I.ia:null,I.W),se.K){nu(I.h,se);var He=se,wt=I.L;wt&&(He.I=wt),He.B&&(Yi(He),Je(He)),I.g=se}else is(I);0<v.i.length&&sr(v)}else Ve[0]!="stop"&&Ve[0]!="close"||kr(v,7);else v.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?kr(v,7):Ot(v):Ve[0]!="noop"&&v.l&&v.l.ta(Ve),v.v=0)}}Sr(4)}catch{}}var eu=class{constructor(c,m){this.g=c,this.map=m}};function Zi(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function tu(c){return c.h?1:c.g?c.g.size:0}function Qt(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Ra(c,m){c.g?c.g.add(m):c.h=m}function nu(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Zi.prototype.cancel=function(){if(this.i=ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ru(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return j(c.i)}function Js(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],v=c.length,I=0;I<v;I++)m.push(c[I]);return m}m=[],v=0;for(I in c)m[v++]=c[I];return m}function Xs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const I in c)m[v++]=I;return m}}}function Jr(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=Xs(c),I=Js(c),U=I.length,W=0;W<U;W++)m.call(void 0,I[W],v&&v[W],c)}var es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lh(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var I=c[v].indexOf("="),U=null;if(0<=I){var W=c[v].substring(0,I);U=c[v].substring(I+1)}else W=c[v];m(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ar(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ar){this.h=c.h,ts(this,c.j),this.o=c.o,this.g=c.g,Xr(this,c.s),this.l=c.l;var m=c.i,v=new nr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Yr(this,v),this.m=c.m}else c&&(m=String(c).match(es))?(this.h=!1,ts(this,m[1]||"",!0),this.o=Oe(m[2]||""),this.g=Oe(m[3]||"",!0),Xr(this,m[4]),this.l=Oe(m[5]||"",!0),Yr(this,m[6]||"",!0),this.m=Oe(m[7]||"")):(this.h=!1,this.i=new nr(null,this.h))}Ar.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ei(m,Ys,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ei(m,Ys,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ei(v,v.charAt(0)=="/"?ou:su,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ei(v,Ca)),c.join("")};function fn(c){return new Ar(c)}function ts(c,m,v){c.j=v?Oe(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Xr(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Yr(c,m,v){m instanceof nr?(c.i=m,rr(c.i,c.h)):(v||(m=ei(m,au)),c.i=new nr(m,c.h))}function Ke(c,m,v){c.i.set(m,v)}function Zr(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oe(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ei(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,iu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function iu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ys=/[#\/\?@]/g,su=/[#\?:]/g,ou=/[#\?]/g,au=/[#\?@]/g,Ca=/#/g;function nr(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Dt(c){c.g||(c.g=new Map,c.h=0,c.i&&Lh(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=nr.prototype,n.add=function(c,m){Dt(this),this.i=null,c=An(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function jn(c,m){Dt(c),m=An(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Fn(c,m){return Dt(c),m=An(c,m),c.g.has(m)}n.forEach=function(c,m){Dt(this),this.g.forEach(function(v,I){v.forEach(function(U){c.call(m,U,I,this)},this)},this)},n.na=function(){Dt(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const U=c[I];for(let W=0;W<U.length;W++)v.push(m[I])}return v},n.V=function(c){Dt(this);let m=[];if(typeof c=="string")Fn(this,c)&&(m=m.concat(this.g.get(An(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},n.set=function(c,m){return Dt(this),this.i=null,c=An(this,c),Fn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function ti(c,m,v){jn(c,m),0<v.length&&(c.i=null,c.g.set(An(c,m),j(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const W=encodeURIComponent(String(I)),se=this.V(I);for(I=0;I<se.length;I++){var U=W;se[I]!==""&&(U+="="+encodeURIComponent(String(se[I]))),c.push(U)}}return this.i=c.join("&")};function An(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function rr(c,m){m&&!c.j&&(Dt(c),c.i=null,c.g.forEach(function(v,I){var U=I.toLowerCase();I!=U&&(jn(this,I),ti(this,U,v))},c)),c.j=m}function Mh(c,m){const v=new Qi;if(d.Image){const I=new Image;I.onload=L(en,v,"TestLoadImage: loaded",!0,m,I),I.onerror=L(en,v,"TestLoadImage: error",!1,m,I),I.onabort=L(en,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=L(en,v,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else m(!1)}function lu(c,m){const v=new Qi,I=new AbortController,U=setTimeout(()=>{I.abort(),en(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:I.signal}).then(W=>{clearTimeout(U),W.ok?en(v,"TestPingServer: ok",!0,m):en(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),en(v,"TestPingServer: error",!1,m)})}function en(c,m,v,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(v)}catch{}}function jh(){this.g=new _a}function uu(c,m,v){const I=v||"";try{Jr(c,function(U,W){let se=U;g(U)&&(se=ga(U)),m.push(I+W+"="+encodeURIComponent(se))})}catch(U){throw m.push(I+"type="+encodeURIComponent("_badmap")),U}}function Rr(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Rr,Gi),Rr.prototype.g=function(){return new ns(this.l,this.j)},Rr.prototype.i=(function(c){return function(){return c}})({});function ns(c,m){vt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ns,vt),n=ns.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Bn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Un(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function cu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Un(this):Bn(this),this.readyState==3&&cu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Un(this))},n.Qa=function(c){this.g&&(this.response=c,Un(this))},n.ga=function(){this.g&&Un(this)};function Un(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bn(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Bn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Cr(c){let m="";return _e(c,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function ni(c,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Cr(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Ke(c,m,v))}function et(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(et,vt);var Fh=/^https?$/i,Pa=["POST","PUT"];n=et.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?zs(this.o):zs(Ln),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(W){rs(this,W);return}if(c=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)v.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())v.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Pa,m,void 0))||I||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,se]of v)this.g.setRequestHeader(W,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){rs(this,W)}};function rs(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Zs(c),pn(c)}function Zs(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),pn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ka(this):this.bb())},n.bb=function(){ka(this)};function ka(c){if(c.h&&typeof u<"u"&&(!c.v[1]||tn(c)!=4||c.Z()!=2)){if(c.u&&tn(c)==4)fa(c.Ea,0,c);else if(Et(c,"readystatechange"),tn(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=se===0){var U=String(c.D).match(es)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),I=!Fh.test(U?U.toLowerCase():"")}v=I}if(v)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var W=2<tn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",Zs(c)}}finally{pn(c)}}}}function pn(c,m){if(c.g){eo(c);const v=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Et(c,"ready");try{v.onreadystatechange=I}catch{}}}function eo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function tn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ya(m)}};function xa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function to(c){const m={};c=(c.g&&2<=tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(ie(c[I]))continue;var v=O(c[I]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[U]||[];m[U]=W,W.push(v)}D(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ir(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Na(c){this.Aa=0,this.i=[],this.j=new Qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ir("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ir("baseRetryDelayMs",5e3,c),this.cb=ir("retryDelaySeedMs",1e4,c),this.Wa=ir("forwardChannelMaxRetries",2,c),this.wa=ir("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zi(c&&c.concurrentRequestLimit),this.Da=new jh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Na.prototype,n.la=8,n.G=1,n.connect=function(c,m,v,I){at(0),this.W=c,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=pu(this,null,this.W),sr(this)};function Ot(c){if(no(c),c.G==3){var m=c.U++,v=fn(c.I);if(Ke(v,"SID",c.K),Ke(v,"RID",m),Ke(v,"TYPE","terminate"),Pr(c,v),m=new Mn(c,c.j,m),m.L=2,m.v=Zr(fn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=mu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Je(m)}fu(c)}function zn(c){c.g&&(Da(c),c.g.cancel(),c.g=null)}function no(c){zn(c),c.u&&(d.clearTimeout(c.u),c.u=null),so(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function sr(c){if(!dn(c.h)&&!c.s){c.s=!0;var m=c.Ga;Ue||ae(),ne||(Ue(),ne=!0),ge.add(m,c),c.B=0}}function Uh(c,m){return tu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=bn(S(c.Ga,c,m),du(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Mn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=A(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ri(this,U,m),v=fn(this.I),Ke(v,"RID",c),Ke(v,"CVER",22),this.D&&Ke(v,"X-HTTP-Session-Id",this.D),Pr(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Cr(W)))+"&"+m:this.m&&ni(v,this.m,W)),Ra(this.h,U),this.Ua&&Ke(v,"TYPE","init"),this.P?(Ke(v,"$req",m),Ke(v,"SID","null"),U.T=!0,Qs(U,v,null)):Qs(U,v,m),this.G=2}}else this.G==3&&(c?ro(this,c):this.i.length==0||dn(this.h)||ro(this))};function ro(c,m){var v;m?v=m.l:v=c.U++;const I=fn(c.I);Ke(I,"SID",c.K),Ke(I,"RID",v),Ke(I,"AID",c.T),Pr(c,I),c.m&&c.o&&ni(I,c.m,c.o),v=new Mn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=ri(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ra(c.h,v),Qs(v,I,m)}function Pr(c,m){c.H&&_e(c.H,function(v,I){Ke(m,I,v)}),c.l&&Jr({},function(v,I){Ke(m,I,v)})}function ri(c,m,v){v=Math.min(c.i.length,v);var I=c.l?S(c.l.Na,c.l,c):null;e:{var U=c.i;let W=-1;for(;;){const se=["count="+v];W==-1?0<v?(W=U[0].g,se.push("ofs="+W)):W=0:se.push("ofs="+W);let He=!0;for(let wt=0;wt<v;wt++){let Ve=U[wt].g;const Rt=U[wt].map;if(Ve-=W,0>Ve)W=Math.max(0,U[wt].g-100),He=!1;else try{uu(Rt,se,"req"+Ve+"_")}catch{I&&I(Rt)}}if(He){I=se.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,I}function is(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Ue||ae(),ne||(Ue(),ne=!0),ge.add(m,c),c.v=0}}function io(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=bn(S(c.Fa,c),du(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=bn(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),zn(this),hu(this))};function Da(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function hu(c){c.g=new Mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=fn(c.qa);Ke(m,"RID","rpc"),Ke(m,"SID",c.K),Ke(m,"AID",c.T),Ke(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(m,"TO",c.ja),Ke(m,"TYPE","xmlhttp"),Pr(c,m),c.m&&c.o&&ni(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Zr(fn(m)),v.m=null,v.P=!0,Sa(v,c)}n.Za=function(){this.C!=null&&(this.C=null,zn(this),io(this),at(19))};function so(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function oo(c,m){var v=null;if(c.g==m){so(c),Da(c),c.g=null;var I=2}else if(Qt(c.h,m))v=m.D,nu(c.h,m),I=1;else return;if(c.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var U=c.B;I=Ki(),Et(I,new Hs(I,v)),sr(c)}else is(c);else if(U=m.s,U==3||U==0&&0<m.X||!(I==1&&Uh(c,m)||I==2&&io(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),U){case 1:kr(c,5);break;case 4:kr(c,10);break;case 3:kr(c,6);break;default:kr(c,2)}}}function du(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function kr(c,m){if(c.j.info("Error code "+m),m==2){var v=S(c.fb,c),I=c.Xa;const U=!I;I=new Ar(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ts(I,"https"),Zr(I),U?Mh(I.toString(),v):lu(I.toString(),v)}else at(2);c.G=0,c.l&&c.l.sa(m),fu(c),no(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function fu(c){if(c.G=0,c.ka=[],c.l){const m=ru(c.h);(m.length!=0||c.i.length!=0)&&(k(c.ka,m),k(c.ka,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.ra()}}function pu(c,m,v){var I=v instanceof Ar?fn(v):new Ar(v);if(I.g!="")m&&(I.g=m+"."+I.g),Xr(I,I.s);else{var U=d.location;I=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var W=new Ar(null);I&&ts(W,I),m&&(W.g=m),U&&Xr(W,U),v&&(W.l=v),I=W}return v=c.D,m=c.ya,v&&m&&Ke(I,v,m),Ke(I,"VER",c.la),Pr(c,I),I}function mu(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new et(new Rr({eb:v})):new et(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oa(){}n=Oa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ao(){}ao.prototype.g=function(c,m){return new Jt(c,m)};function Jt(c,m){vt.call(this),this.g=new Na(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!ie(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ie(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new or(this)}x(Jt,vt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Ot(this.g)},Jt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=ga(c),c=v);m.i.push(new eu(m.Ya++,c)),m.G==3&&sr(m)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Jt.aa.N.call(this)};function gu(c){er.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}x(gu,er);function yu(){qs.call(this),this.status=1}x(yu,qs);function or(c){this.g=c}x(or,Oa),or.prototype.ua=function(){Et(this.g,"a")},or.prototype.ta=function(c){Et(this.g,new gu(c))},or.prototype.sa=function(c){Et(this.g,new yu)},or.prototype.ra=function(){Et(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,HE=function(){return new ao},qE=function(){return Ki()},$E=tr,Ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Tc=Gs,Jl.COMPLETE="complete",zE=Jl,$s.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",vt.prototype.listen=vt.prototype.K,al=$s,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,BE=et}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const g_="@firebase/firestore",y_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new pp("@firebase/firestore");function No(){return Ps.logLevel}function ue(n,...e){if(Ps.logLevel<=Ne.DEBUG){const t=e.map(Rp);Ps.debug(`Firestore (${ra}): ${n}`,...t)}}function zr(n,...e){if(Ps.logLevel<=Ne.ERROR){const t=e.map(Rp);Ps.error(`Firestore (${ra}): ${n}`,...t)}}function Oi(n,...e){if(Ps.logLevel<=Ne.WARN){const t=e.map(Rp);Ps.warn(`Firestore (${ra}): ${n}`,...t)}}function Rp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,WE(n,i,t)}function WE(n,e,t){let i=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw zr(i),new Error(i)}function Me(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||WE(e,o,i)}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Wr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ht.UNAUTHENTICATED)))}shutdown(){}}class cC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class hC{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Me(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string",31837,{l:i}),new GE(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new Ht(e)}}class dC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new dC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Me(this.o===void 0,3512);const i=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new __(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=mC(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function Uf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return ke(i,o);{const a=KE(),u=gC(a.encode(v_(n,t)),a.encode(v_(e,t)));return u!==0?u:ke(i,o)}}t+=i>65535?2:1}return ke(n.length,e.length)}function v_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function gC(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function qo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="__name__";class dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=dr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return ke(e.length,t.length)}static compareSegments(e,t){const i=dr.isNumericId(e),o=dr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?dr.extractNumericId(e).compare(dr.extractNumericId(t)):Uf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class We extends dr{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const yC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends dr{construct(e,t,i){return new Mt(e,t,i)}static isValidIdentifier(e){return yC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E_}static keyField(){return new Mt([E_])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new oe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new oe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new oe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(t)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(We.fromString(e))}static fromName(e){return new ye(We.fromString(e).popFirst(5))}static empty(){return new ye(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e,t){if(!t)throw new oe(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _C(n,e,t,i){if(e===!0&&i===!0)throw new oe(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function w_(n){if(!ye.isDocumentKey(n))throw new oe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T_(n){if(ye.isDocumentKey(n))throw new oe(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hh(n);throw new oe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vl(n,e){if(!JE(n))throw new oe(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new oe(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=-62135596800,S_=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*S_);return new $e(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<I_)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S_}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vl(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-I_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:yt("string",$e._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new $e(0,0))}static max(){return new Te(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function vC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new $e(t+1,0):new $e(t,i));return new bi(o,ye.empty(),e)}function EC(n){return new bi(n.readTime,n.key,Il)}class bi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new bi(Te.min(),ye.empty(),Il)}static max(){return new bi(Te.max(),ye.empty(),Il)}}function wC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==TC)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,i)=>{t(e)}))}static reject(e){return new J(((t,i)=>{i(e)}))}static waitFor(e){return new J(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next((o=>o?J.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new J(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const g=p;t(e[g]).next((_=>{u[g]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new J(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function SC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}dh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Ll(n){return n==null}function Bc(n){return n===0&&1/n==-1/0}function AC(n){return typeof n=="number"&&Number.isInteger(n)&&!Bc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="";function RC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=A_(e)),e=CC(n.get(t),e);return A_(e)}function CC(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case XE:t+="";break;default:t+=a}}return t}function A_(n){return n+XE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Lt.RED,this.left=o??Lt.EMPTY,this.right=a??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Lt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new C_(this.data.getIterator())}getIteratorFrom(e){return new C_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class C_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new En([])}unionWith(e){let t=new St(Mt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZE("Invalid base64 string: "+a):a}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const PC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(n){if(Me(!!n,39018),typeof n=="string"){let e=0;const t=PC.exec(n);if(Me(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Li(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="server_timestamp",tw="__type__",nw="__previous_value__",rw="__local_write_time__";function kp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tw])===null||t===void 0?void 0:t.stringValue)===ew}function fh(n){const e=n.mapValue.fields[nw];return kp(e)?fh(e):e}function Sl(n){const e=Vi(n.mapValue.fields[rw].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,i,o,a,u,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const zc="(default)";class Al{constructor(e,t){this.projectId=e,this.database=t||zc}static empty(){return new Al("","")}get isDefaultDatabase(){return this.database===zc}isEqual(e){return e instanceof Al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="__type__",xC="__max__",pc={mapValue:{}},sw="__vector__",$c="value";function Mi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kp(n)?4:DC(n)?9007199254740991:NC(n)?10:11:ve(28295,{value:n})}function vr(n,e){if(n===e)return!0;const t=Mi(n);if(t!==Mi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Vi(o.timestampValue),d=Vi(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Li(o.bytesValue).isEqual(Li(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return ut(o.geoPointValue.latitude)===ut(a.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return ut(o.integerValue)===ut(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ut(o.doubleValue),d=ut(a.doubleValue);return u===d?Bc(u)===Bc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return qo(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(R_(u)!==R_(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!vr(u[p],d[p])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Rl(n,e){return(n.values||[]).find((t=>vr(t,e)))!==void 0}function Ho(n,e){if(n===e)return 0;const t=Mi(n),i=Mi(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=ut(a.integerValue||a.doubleValue),p=ut(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return P_(n.timestampValue,e.timestampValue);case 4:return P_(Sl(n),Sl(e));case 5:return Uf(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Li(a),p=Li(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=ke(d[g],p[g]);if(_!==0)return _}return ke(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ke(ut(a.latitude),ut(u.latitude));return d!==0?d:ke(ut(a.longitude),ut(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return k_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,g,_;const E=a.fields||{},S=u.fields||{},L=(d=E[$c])===null||d===void 0?void 0:d.arrayValue,x=(p=S[$c])===null||p===void 0?void 0:p.arrayValue,j=ke(((g=L==null?void 0:L.values)===null||g===void 0?void 0:g.length)||0,((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0);return j!==0?j:k_(L,x)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===pc.mapValue&&u===pc.mapValue)return 0;if(a===pc.mapValue)return 1;if(u===pc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),g=u.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const S=Uf(p[E],_[E]);if(S!==0)return S;const L=Ho(d[p[E]],g[_[E]]);if(L!==0)return L}return ke(p.length,_.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{le:t})}}function P_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=Vi(n),i=Vi(e),o=ke(t.seconds,i.seconds);return o!==0?o:ke(t.nanos,i.nanos)}function k_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ho(t[o],i[o]);if(a)return a}return ke(t.length,i.length)}function Wo(n){return Bf(n)}function Bf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Vi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Li(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Bf(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Bf(t.fields[u])}`;return o+"}"})(n.mapValue):ve(61005,{value:n})}function Ic(n){switch(Mi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fh(n);return e?16+Ic(e):16;case 5:return 2*n.stringValue.length;case 6:return Li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Ic(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return zi(i.fields,((a,u)=>{o+=a.length+Ic(u)})),o})(n.mapValue);default:throw ve(13486,{value:n})}}function x_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zf(n){return!!n&&"integerValue"in n}function xp(n){return!!n&&"arrayValue"in n}function N_(n){return!!n&&"nullValue"in n}function D_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sc(n){return!!n&&"mapValue"in n}function NC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iw])===null||t===void 0?void 0:t.stringValue)===sw}function fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=fl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=Mt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=fl(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){zi(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Zt(fl(this.value))}}function ow(n){const e=[];return zi(n.fields,((t,i)=>{const o=new Mt([t]);if(Sc(i)){const a=ow(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Nt(e,0,Te.min(),Te.min(),Te.min(),Zt.empty(),0)}static newFoundDocument(e,t,i,o){return new Nt(e,1,t,Te.min(),i,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Te.min(),Te.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Te.min(),Te.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.position=e,this.inclusive=t}}function O_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=ye.comparator(ye.fromName(u.referenceValue),t.key):i=Ho(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function b_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t="asc"){this.field=e,this.dir=t}}function OC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{}class gt extends aw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new VC(e,t,i):t==="array-contains"?new jC(e,i):t==="in"?new FC(e,i):t==="not-in"?new UC(e,i):t==="array-contains-any"?new BC(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new LC(e,i):new MC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ho(t,this.value)):t!==null&&Mi(this.value)===Mi(t)&&this.matchesComparison(Ho(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends aw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Yn(e,t)}matches(e){return lw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function lw(n){return n.op==="and"}function uw(n){return bC(n)&&lw(n)}function bC(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function $f(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Wo(n.value);if(uw(n))return n.filters.map((e=>$f(e))).join(",");{const e=n.filters.map((t=>$f(t))).join(",");return`${n.op}(${e})`}}function cw(n,e){return n instanceof gt?(function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&vr(i.value,o.value)})(n,e):n instanceof Yn?(function(i,o){return o instanceof Yn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&cw(u,o.filters[d])),!0):!1})(n,e):void ve(19439)}function hw(n){return n instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wo(t.value)}`})(n):n instanceof Yn?(function(t){return t.op.toString()+" {"+t.getFilters().map(hw).join(" ,")+"}"})(n):"Filter"}class VC extends gt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class LC extends gt{constructor(e,t){super(e,"in",t),this.keys=dw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class MC extends gt{constructor(e,t){super(e,"not-in",t),this.keys=dw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class jC extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xp(t)&&Rl(t.arrayValue,this.value)}}class FC extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rl(this.value.arrayValue,t)}}class UC extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rl(this.value.arrayValue,t)}}class BC extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Rl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function V_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new zC(n,e,t,i,o,a,u)}function Np(n){const e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$f(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Ll(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Wo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Wo(i))).join(",")),e.Pe=t}return e.Pe}function Dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b_(n.startAt,e.startAt)&&b_(n.endAt,e.endAt)}function qf(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $C(n,e,t,i,o,a,u,d){return new Ml(n,e,t,i,o,a,u,d)}function ph(n){return new Ml(n)}function L_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fw(n){return n.collectionGroup!==null}function pl(n){const e=Ae(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new St(Mt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Hc(a,i))})),t.has(Mt.keyField().canonicalString())||e.Te.push(new Hc(Mt.keyField(),i))}return e.Te}function gr(n){const e=Ae(n);return e.Ie||(e.Ie=qC(e,pl(n))),e.Ie}function qC(n,e){if(n.limitType==="F")return V_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Hc(o.field,a)}));const t=n.endAt?new qc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new qc(n.startAt.position,n.startAt.inclusive):null;return V_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Hf(n,e){const t=n.filters.concat([e]);return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wf(n,e,t){return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mh(n,e){return Dp(gr(n),gr(e))&&n.limitType===e.limitType}function pw(n){return`${Np(gr(n))}|lt:${n.limitType}`}function Do(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>hw(o))).join(", ")}]`),Ll(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Wo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Wo(o))).join(",")),`Target(${i})`})(gr(n))}; limitType=${n.limitType})`}function gh(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ye.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of pl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const g=O_(u,d,p);return u.inclusive?g<=0:g<0})(i.startAt,pl(i),o)||i.endAt&&!(function(u,d,p){const g=O_(u,d,p);return u.inclusive?g>=0:g>0})(i.endAt,pl(i),o))})(n,e)}function HC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mw(n){return(e,t)=>{let i=!1;for(const o of pl(n)){const a=WC(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function WC(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),g=d.data.field(a);return p!==null&&g!==null?Ho(p,g):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return YE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new it(ye.comparator);function $r(){return GC}const gw=new it(ye.comparator);function ll(...n){let e=gw;for(const t of n)e=e.insert(t.key,t);return e}function yw(n){let e=gw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ws(){return ml()}function _w(){return ml()}function ml(){return new Os((n=>n.toString()),((n,e)=>n.isEqual(e)))}const KC=new it(ye.comparator),QC=new St(ye.comparator);function De(...n){let e=QC;for(const t of n)e=e.add(t);return e}const JC=new St(ke);function XC(){return JC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function vw(n){return{integerValue:""+n}}function YC(n,e){return AC(e)?vw(e):Op(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this._=void 0}}function ZC(n,e,t){return n instanceof Wc?(function(o,a){const u={fields:{[tw]:{stringValue:ew},[rw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&kp(a)&&(a=fh(a)),a&&(u.fields[nw]=a),{mapValue:u}})(t,e):n instanceof Cl?ww(n,e):n instanceof Pl?Tw(n,e):(function(o,a){const u=Ew(o,a),d=M_(u)+M_(o.Ee);return zf(u)&&zf(o.Ee)?vw(d):Op(o.serializer,d)})(n,e)}function eP(n,e,t){return n instanceof Cl?ww(n,e):n instanceof Pl?Tw(n,e):t}function Ew(n,e){return n instanceof Gc?(function(i){return zf(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Wc extends yh{}class Cl extends yh{constructor(e){super(),this.elements=e}}function ww(n,e){const t=Iw(e);for(const i of n.elements)t.some((o=>vr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Pl extends yh{constructor(e){super(),this.elements=e}}function Tw(n,e){let t=Iw(e);for(const i of n.elements)t=t.filter((o=>!vr(o,i)));return{arrayValue:{values:t}}}class Gc extends yh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function M_(n){return ut(n.integerValue||n.doubleValue)}function Iw(n){return xp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function tP(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Cl&&o instanceof Cl||i instanceof Pl&&o instanceof Pl?qo(i.elements,o.elements,vr):i instanceof Gc&&o instanceof Gc?vr(i.Ee,o.Ee):i instanceof Wc&&o instanceof Wc})(n.transform,e.transform)}class nP{constructor(e,t){this.version=e,this.transformResults=t}}class Wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _h{}function Sw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vh(n.key,Wt.none()):new jl(n.key,n.data,Wt.none());{const t=n.data,i=Zt.empty();let o=new St(Mt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new $i(n.key,i,new En(o.toArray()),Wt.none())}}function rP(n,e,t){n instanceof jl?(function(o,a,u){const d=o.value.clone(),p=F_(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof $i?(function(o,a,u){if(!Ac(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=F_(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(Aw(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function gl(n,e,t,i){return n instanceof jl?(function(a,u,d,p){if(!Ac(a.precondition,u))return d;const g=a.value.clone(),_=U_(a.fieldTransforms,p,u);return g.setAll(_),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof $i?(function(a,u,d,p){if(!Ac(a.precondition,u))return d;const g=U_(a.fieldTransforms,p,u),_=u.data;return _.setAll(Aw(a)),_.setAll(g),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Ac(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function iP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=Ew(i.transform,o||null);a!=null&&(t===null&&(t=Zt.empty()),t.set(i.field,a))}return t||null}function j_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&qo(i,o,((a,u)=>tP(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class jl extends _h{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $i extends _h{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Aw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function F_(n,e,t){const i=new Map;Me(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,eP(u,d,t[o]))}return i}function U_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,ZC(a,u,e))}return i}class vh extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rw extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&rP(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=gl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=gl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=_w();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=Sw(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((t,i)=>j_(t,i)))&&qo(this.baseMutations,e.baseMutations,((t,i)=>j_(t,i)))}}class bp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Me(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return KC})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new bp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Le;function Cw(n){switch(n){case G.OK:return ve(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function Pw(n){if(n===void 0)return zr("GRPC error has no .code"),G.UNKNOWN;switch(n){case mt.OK:return G.OK;case mt.CANCELLED:return G.CANCELLED;case mt.UNKNOWN:return G.UNKNOWN;case mt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case mt.INTERNAL:return G.INTERNAL;case mt.UNAVAILABLE:return G.UNAVAILABLE;case mt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case mt.NOT_FOUND:return G.NOT_FOUND;case mt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case mt.ABORTED:return G.ABORTED;case mt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case mt.DATA_LOSS:return G.DATA_LOSS;default:return ve(39323,{code:n})}}(Le=mt||(mt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new xi([4294967295,4294967295],0);function B_(n){const e=KE().encode(n),t=new UE;return t.update(e),new Uint8Array(t.digest())}function z_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new xi([t,i],0),new xi([o,a],0)]}class Vp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ul(`Invalid padding: ${t}`);if(i<0)throw new ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ul(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=xi.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(xi.fromNumber(i)));return o.compare(lP)===1&&(o=new xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=B_(e),[i,o]=z_(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Vp(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=B_(e),[i,o]=z_(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Eh(Te.min(),o,new it(ke),$r(),De())}}class Fl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Fl(i,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class kw{constructor(e,t){this.targetId=e,this.De=t}}class xw{constructor(e,t,i=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class $_{constructor(){this.ve=0,this.Ce=q_(),this.Fe=jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=De(),t=De(),i=De();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ve(38017,{changeType:a})}})),new Fl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=q_()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class uP{constructor(e){this.We=e,this.Ge=new Map,this.ze=$r(),this.je=mc(),this.Je=mc(),this.He=new it(ke)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(qf(a))if(i===0){const u=new ye(a.path);this.Xe(t,u,Nt.newNoDocument(u,Te.min()))}else Me(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Li(i).toUint8Array()}catch(p){if(p instanceof ZE)return Oi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Vp(u,o,a)}catch(p){return Oi(p instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&qf(d.target)){const p=new ye(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,Nt.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=De();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new Eh(e,t,this.He,this.ze,i);return this.ze=$r(),this.je=mc(),this.Je=mc(),this.He=new it(ke),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new $_,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new St(ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new St(ke),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new $_),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function mc(){return new it(ye.comparator)}function q_(){return new it(ye.comparator)}const cP={asc:"ASCENDING",desc:"DESCENDING"},hP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dP={and:"AND",or:"OR"};class fP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gf(n,e){return n.useProto3Json||Ll(e)?e:{value:e}}function Kc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pP(n,e){return Kc(n,e.toTimestamp())}function Tn(n){return Me(!!n,49232),Te.fromTimestamp((function(t){const i=Vi(t);return new $e(i.seconds,i.nanos)})(n))}function Lp(n,e){return Kf(n,e).canonicalString()}function Kf(n,e){const t=(function(o){return new We(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Dw(n){const e=We.fromString(n);return Me(jw(e),10190,{key:e.toString()}),e}function Qc(n,e){return Lp(n.databaseId,e.path)}function yl(n,e){const t=Dw(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(bw(t))}function Ow(n,e){return Lp(n.databaseId,e)}function mP(n){const e=Dw(n);return e.length===4?We.emptyPath():bw(e)}function Qf(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bw(n){return Me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function H_(n,e,t){return{name:Qc(n,e),fields:t.value.mapValue.fields}}function gP(n,e){return"found"in e?(function(i,o){Me(!!o.found,43571),o.found.name,o.found.updateTime;const a=yl(i,o.found.name),u=Tn(o.found.updateTime),d=o.found.createTime?Tn(o.found.createTime):Te.min(),p=new Zt({mapValue:{fields:o.found.fields}});return Nt.newFoundDocument(a,u,d,p)})(n,e):"missing"in e?(function(i,o){Me(!!o.missing,3894),Me(!!o.readTime,22933);const a=yl(i,o.missing),u=Tn(o.readTime);return Nt.newNoDocument(a,u)})(n,e):ve(7234,{result:e})}function yP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(g,_){return g.useProto3Json?(Me(_===void 0||typeof _=="string",58123),jt.fromBase64String(_||"")):(Me(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),jt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(g){const _=g.code===void 0?G.UNKNOWN:Pw(g.code);return new oe(_,g.message||"")})(u);t=new xw(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=yl(n,i.document.name),a=Tn(i.document.updateTime),u=i.document.createTime?Tn(i.document.createTime):Te.min(),d=new Zt({mapValue:{fields:i.document.fields}}),p=Nt.newFoundDocument(o,a,u,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Rc(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=yl(n,i.document),a=i.readTime?Tn(i.readTime):Te.min(),u=Nt.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Rc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=yl(n,i.document),a=i.removedTargetIds||[];t=new Rc([],a,o,null)}else{if(!("filter"in e))return ve(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new aP(o,a),d=i.targetId;t=new kw(d,u)}}return t}function Vw(n,e){let t;if(e instanceof jl)t={update:H_(n,e.key,e.value)};else if(e instanceof vh)t={delete:Qc(n,e.key)};else if(e instanceof $i)t={update:H_(n,e.key,e.data),updateMask:RP(e.fieldMask)};else{if(!(e instanceof Rw))return ve(16599,{Rt:e.type});t={verify:Qc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gc)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw ve(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:pP(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ve(27497)})(n,e.precondition)),t}function _P(n,e){return n&&n.length>0?(Me(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Tn(o.updateTime):Tn(a);return u.isEqual(Te.min())&&(u=Tn(a)),new nP(u,o.transformResults||[])})(t,e)))):[]}function vP(n,e){return{documents:[Ow(n,e.path)]}}function EP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ow(n,o);const a=(function(g){if(g.length!==0)return Mw(Yn.create(g,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:Oo(S.field),direction:IP(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Gf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:o}}function wP(n){let e=mP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Me(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const S=Lw(E);return S instanceof Yn&&uw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(x){return new Hc(bo(x.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Ll(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,L=E.values||[];return new qc(L,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,L=E.values||[];return new qc(L,S)})(t.endAt)),$C(e,o,u,a,d,"F",p,g)}function TP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=bo(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bo(t.unaryFilter.field);return gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bo(t.unaryFilter.field);return gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return gt.create(bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yn.create(t.compositeFilter.filters.map((i=>Lw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function IP(n){return cP[n]}function SP(n){return hP[n]}function AP(n){return dP[n]}function Oo(n){return{fieldPath:n.canonicalString()}}function bo(n){return Mt.fromServerFormat(n.fieldPath)}function Mw(n){return n instanceof gt?(function(t){if(t.op==="=="){if(D_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NAN"}};if(N_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(D_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NAN"}};if(N_(t.value))return{unaryFilter:{field:Oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(t.field),op:SP(t.op),value:t.value}}})(n):n instanceof Yn?(function(t){const i=t.getFilters().map((o=>Mw(o)));return i.length===1?i[0]:{compositeFilter:{op:AP(t.op),filters:i}}})(n):ve(54877,{filter:n})}function RP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function jw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t,i,o,a=Te.min(),u=Te.min(),d=jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.gt=e}}function PP(n){const e=wP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.Dn=new xP}addToCollectionParentIndex(e,t){return this.Dn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(bi.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class xP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(We.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fw=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(Fw,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Go(0)}static ur(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LruGarbageCollector",NP=1048576;function K_([n,e],[t,i]){const o=ke(n,t);return o===0?ke(e,i):o}class DP{constructor(e){this.Tr=e,this.buffer=new St(K_),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();K_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(G_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sa(t)?ue(G_,"Ignoring IndexedDB error during garbage collection: ",t):await ia(t)}await this.Rr(3e5)}))}}class bP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(dh.ue);const i=new DP(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(W_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W_):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(g=Date.now(),No()<=Ne.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function VP(n,e){return new bP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.changes=new Os((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&gl(i.mutation,o,En.empty(),$e.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,De()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=De()){const o=ws();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=ll();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ws();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,De())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=$r();const u=ml(),d=(function(){return ml()})();return t.forEach(((p,g)=>{const _=i.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof $i)?a=a.insert(g.key,g):_!==void 0?(u.set(g.key,_.mutation.getFieldMask()),gl(_.mutation,g,_.mutation.getFieldMask(),$e.now())):u.set(g.key,En.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((g,_)=>u.set(g,_))),t.forEach(((g,_)=>{var E;return d.set(g,new MP(_,(E=u.get(g))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=ml();let o=new it(((u,d)=>u-d)),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||En.empty();_=d.applyToLocalView(g,_),i.set(p,_);const E=(o.get(d.batchId)||De()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,E=_w();_.forEach((S=>{if(!a.has(S)){const L=Sw(t.get(S),i.get(S));L!==null&&E.set(S,L),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,E))}return J.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):J.resolve(ws());let d=Il,p=a;return u.next((g=>J.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,a))).next((()=>this.computeViews(e,p,g,De()))).next((_=>({batchId:d,changes:yw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=ll();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=ll();return this.indexManager.getCollectionParents(e,a).next((d=>J.forEach(d,(p=>{const g=(function(E,S){return new Ml(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,g)=>{const _=g.getKey();u.get(_)===null&&(u=u.insert(_,Nt.newInvalidDocument(_)))}));let d=ll();return u.forEach(((p,g)=>{const _=a.get(p);_!==void 0&&gl(_.mutation,g,En.empty(),$e.now()),gh(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return J.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Tn(o.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:PP(o.bundledQuery),readTime:Tn(o.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.overlays=new it(ye.comparator),this.kr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ws();return J.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=ws(),a=t.length+1,u=new ye(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new it(((g,_)=>g-_));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=a.get(g.largestBatchId);_===null&&(_=ws(),a=a.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=ws(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=o)););return J.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new oP(t,i));let a=this.kr.get(t);a===void 0&&(a=De(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this.qr=new St(xt.Qr),this.$r=new St(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new xt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new ye(new We([])),i=new xt(t,e),o=new xt(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ye(new We([])),i=new xt(t,e),o=new xt(t,e+1);let a=De();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new xt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ye.comparator(e.key,t.key)||ke(e.Hr,t.Hr)}static Ur(e,t){return ke(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new St(xt.Qr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new sP(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new xt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Pp:this.er-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(ke);return t.forEach((o=>{const a=new xt(o,0),u=new xt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),J.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ye.isDocumentKey(a)||(a=a.child(""));const u=new xt(new ye(a),0);let d=new St(ke);return this.Yr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Hr)),!0)}),u),J.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Me(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return J.forEach(t.mutations,(o=>{const a=new xt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new xt(t,0),o=this.Yr.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.ni=e,this.docs=(function(){return new it(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let i=$r();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Nt.newInvalidDocument(o))})),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=$r();const u=t.path,d=new ye(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||wC(EC(_),i)<=0||(o.has(_.key)||gh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,t,i,o){ve(9500)}ri(e,t){return J.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new qP(this)}getSize(e){return J.resolve(this.size)}}class qP extends LP{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),J.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.persistence=e,this.ii=new Os((t=>Np(t)),Dp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.si=0,this.oi=new Mp,this.targetCount=0,this._i=Go.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),J.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Go(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.hr(t),J.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),J.waitFor(a).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),J.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t){this.ai={},this.overlays={},this.ui=new dh(0),this.ci=!1,this.ci=!0,this.li=new BP,this.referenceDelegate=e(this),this.hi=new HP(this),this.indexManager=new kP,this.remoteDocumentCache=(function(o){return new $P(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new CP(t),this.Ti=new FP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new zP(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new WP(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return J.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class WP extends IC{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Ai=new Mp,this.Ri=null}static Vi(e){return new jp(e)}get mi(){if(this.Ri)return this.Ri;throw ve(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.mi,(i=>{const o=ye.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,Te.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return J.or([()=>J.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Jc{constructor(e,t){this.persistence=e,this.gi=new Os((i=>RC(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=VP(this,t)}static Vi(e,t){return new Jc(e,t)}Ii(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return J.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?J.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Te.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),J.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ic(e.data.value)),t}Sr(e,t,i){return J.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return J.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=De(),o=De();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Fp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return xS()?8:SC(Kt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new GP;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(No()<=Ne.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Do(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),J.resolve()):(No()<=Ne.DEBUG&&ue("QueryEngine","Query:",Do(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(No()<=Ne.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Do(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(t))):J.resolve())}ps(e,t){if(L_(t))return J.resolve(null);let i=gr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Wf(t,null,"F"),i=gr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=De(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(t,d);return this.Ds(t,g,u,p.readTime)?this.ps(e,Wf(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ys(e,t,i,o){return L_(t)||o.isEqual(Te.min())?J.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?J.resolve(null):(No()<=Ne.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Do(t)),this.vs(e,u,t,vC(o,Il)).next((d=>d)))}))}bs(e,t){let i=new St(mw(e));return t.forEach(((o,a)=>{gh(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return No()<=Ne.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Do(t)),this.gs.getDocumentsMatchingQuery(e,t,bi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LocalStore",QP=3e8;class JP{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new it(ke),this.Ms=new Os((a=>Np(a)),Dp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function XP(n,e,t,i){return new JP(n,e,t,i)}async function Bw(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=De();for(const g of o){u.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of a){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Bs:g,removedBatchIds:u,addedBatchIds:d})))}))}))}function YP(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const E=g.batch,S=E.keys();let L=J.resolve();return S.forEach((x=>{L=L.next((()=>_.getEntry(p,x))).next((j=>{const k=g.docVersions.get(x);Me(k!==null,48541),j.version.compareTo(k)<0&&(E.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),_.addEntry(j)))}))})),L.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=De();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function zw(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function ZP(n,e){const t=Ae(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((_,E)=>{const S=o.get(E);if(!S)return;d.push(t.hi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(a,_.addedDocuments,E))));let L=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(jt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):_.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(_.resumeToken,i)),o=o.insert(E,L),(function(j,k,ee){return j.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=QP?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(S,L,_)&&d.push(t.hi.updateTargetData(a,L))}));let p=$r(),g=De();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(ek(a,u,e.documentUpdates).next((_=>{p=_.Ls,g=_.ks}))),!i.isEqual(Te.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next((E=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return J.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,g))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function ek(n,e,t){let i=De(),o=De();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=$r();return t.forEach(((d,p)=>{const g=a.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ue(Up,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function tk(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Pp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function nk(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,J.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new Si(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Jf(n,e,t){const i=Ae(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!sa(u))throw u;ue(Up,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Q_(n,e,t){const i=Ae(n);let o=Te.min(),a=De();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,g,_){const E=Ae(p),S=E.Ms.get(_);return S!==void 0?J.resolve(E.Fs.get(S)):E.hi.getTargetData(g,_)})(i,u,gr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Te.min(),t?a:De()))).next((d=>(rk(i,HC(e),d),{documents:d,qs:a})))))}function rk(n,e,t){let i=n.xs.get(e)||Te.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class J_{constructor(){this.activeTargetIds=XC()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ik{constructor(){this.Fo=new J_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new J_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class Y_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(X_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(X_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function Xf(){return gc===null?gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="RestConnection",ok={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ak{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===zc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=Xf(),d=this.Go(e,t.toUriEncodedString());ue(Ef,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:g}=new URL(d),_=Zo(g);return this.jo(e,d,p,i,_).then((E=>(ue(Ef,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Oi(Ef,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ra})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=ok[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class uk extends ak{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=Xf();return new Promise(((d,p)=>{const g=new BE;g.setWithCredentials(!0),g.listenOnce(zE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Tc.NO_ERROR:const E=g.getResponseJson();ue($t,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Tc.TIMEOUT:ue($t,`RPC '${e}' ${u} timed out`),p(new oe(G.DEADLINE_EXCEEDED,"Request time out"));break;case Tc.HTTP_ERROR:const S=g.getStatus();if(ue($t,`RPC '${e}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let L=g.getResponseJson();Array.isArray(L)&&(L=L[0]);const x=L==null?void 0:L.error;if(x&&x.status&&x.message){const j=(function(ee){const ie=ee.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(ie)>=0?ie:G.UNKNOWN})(x.status);p(new oe(j,x.message))}else p(new oe(G.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new oe(G.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{c_:e,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ue($t,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);ue($t,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",_,i,15)}))}P_(e,t,i){const o=Xf(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=HE(),d=qE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");ue($t,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=u.createWebChannel(_,p);this.T_(E);let S=!1,L=!1;const x=new lk({Ho:k=>{L?ue($t,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(S||(ue($t,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ue($t,`RPC '${e}' stream ${o} sending:`,k),E.send(k))},Yo:()=>E.close()}),j=(k,ee,ie)=>{k.listen(ee,($=>{try{ie($)}catch(re){setTimeout((()=>{throw re}),0)}}))};return j(E,al.EventType.OPEN,(()=>{L||(ue($t,`RPC '${e}' stream ${o} transport opened.`),x.s_())})),j(E,al.EventType.CLOSE,(()=>{L||(L=!0,ue($t,`RPC '${e}' stream ${o} transport closed`),x.__(),this.I_(E))})),j(E,al.EventType.ERROR,(k=>{L||(L=!0,Oi($t,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),x.__(new oe(G.UNAVAILABLE,"The operation could not be completed")))})),j(E,al.EventType.MESSAGE,(k=>{var ee;if(!L){const ie=k.data[0];Me(!!ie,16349);const $=ie,re=($==null?void 0:$.error)||((ee=$[0])===null||ee===void 0?void 0:ee.error);if(re){ue($t,`RPC '${e}' stream ${o} received error:`,re);const me=re.status;let _e=(function(P){const b=mt[P];if(b!==void 0)return Pw(b)})(me),D=re.message;_e===void 0&&(_e=G.INTERNAL,D="Unknown error status: "+me+" with message "+re.message),L=!0,x.__(new oe(_e,D)),E.close()}else ue($t,`RPC '${e}' stream ${o} received:`,ie),x.a_(ie)}})),j(d,$E.STAT_EVENT,(k=>{k.stat===Ff.PROXY?ue($t,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===Ff.NOPROXY&&ue($t,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{x.o_()}),0),x}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n){return new fP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="PersistentStream";class $w{constructor(e,t,i,o,a,u,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bp(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new oe(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ue(Z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ue(Z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ck extends $w{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=yP(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Te.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Te.min():u.readTime?Tn(u.readTime):Te.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Qf(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=qf(p)?{documents:vP(a,p)}:{query:EP(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=Nw(a,u.resumeToken);const g=Gf(a,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(Te.min())>0){d.readTime=Kc(a,u.snapshotVersion.toTimestamp());const g=Gf(a,u.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=TP(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Qf(this.serializer),t.removeTarget=e,this.k_(t)}}class hk extends $w{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=_P(e.writeResults,e.commitTime),i=Tn(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Qf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Vw(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{}class fk extends dk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Kf(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(G.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Kf(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(G.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class pk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zr(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class mk{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{bs(this)&&(ue(ks,"Restarting streams for network reachability change."),await(async function(p){const g=Ae(p);g.Ia.add(4),await Ul(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Th(g)})(this))}))})),this.Aa=new pk(i,o)}}async function Th(n){if(bs(n))for(const e of n.da)await e(!0)}async function Ul(n){for(const e of n.da)await e(!1)}function qw(n,e){const t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Hp(t)?qp(t):oa(t).x_()&&$p(t,e))}function zp(n,e){const t=Ae(n),i=oa(t);t.Ta.delete(e),i.x_()&&Hw(t,e),t.Ta.size===0&&(i.x_()?i.B_():bs(t)&&t.Aa.set("Unknown"))}function $p(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oa(n).H_(e)}function Hw(n,e){n.Ra.$e(e),oa(n).Y_(e)}function qp(n){n.Ra=new uP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),oa(n).start(),n.Aa.aa()}function Hp(n){return bs(n)&&!oa(n).M_()&&n.Ta.size>0}function bs(n){return Ae(n).Ia.size===0}function Ww(n){n.Ra=void 0}async function gk(n){n.Aa.set("Online")}async function yk(n){n.Ta.forEach(((e,t)=>{$p(n,e)}))}async function _k(n,e){Ww(n),Hp(n)?(n.Aa.la(e),qp(n)):n.Aa.set("Unknown")}async function vk(n,e,t){if(n.Aa.set("Online"),e instanceof xw&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){ue(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xc(n,i)}else if(e instanceof Rc?n.Ra.Ye(e):e instanceof kw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Te.min()))try{const i=await zw(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ta.get(g);_&&a.Ta.set(g,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,g)=>{const _=a.Ta.get(p);if(!_)return;a.Ta.set(p,_.withResumeToken(jt.EMPTY_BYTE_STRING,_.snapshotVersion)),Hw(a,p);const E=new Si(_.target,p,g,_.sequenceNumber);$p(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ue(ks,"Failed to raise snapshot:",i),await Xc(n,i)}}async function Xc(n,e,t){if(!sa(e))throw e;n.Ia.add(1),await Ul(n),n.Aa.set("Offline"),t||(t=()=>zw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(ks,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Th(n)}))}function Gw(n,e){return e().catch((t=>Xc(n,t,e)))}async function Ih(n){const e=Ae(n),t=ji(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Pp;for(;Ek(e);)try{const o=await tk(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,wk(e,o)}catch(o){await Xc(e,o)}Kw(e)&&Qw(e)}function Ek(n){return bs(n)&&n.Pa.length<10}function wk(n,e){n.Pa.push(e);const t=ji(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Kw(n){return bs(n)&&!ji(n).M_()&&n.Pa.length>0}function Qw(n){ji(n).start()}async function Tk(n){ji(n).na()}async function Ik(n){const e=ji(n);for(const t of n.Pa)e.X_(t.mutations)}async function Sk(n,e,t){const i=n.Pa.shift(),o=bp.from(i,e,t);await Gw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Ih(n)}async function Ak(n,e){e&&ji(n).Z_&&await(async function(i,o){if((function(u){return Cw(u)&&u!==G.ABORTED})(o.code)){const a=i.Pa.shift();ji(i).N_(),await Gw(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Ih(i)}})(n,e),Kw(n)&&Qw(n)}async function ev(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ue(ks,"RemoteStore received new credentials");const i=bs(t);t.Ia.add(3),await Ul(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Th(t)}async function Rk(n,e){const t=Ae(n);e?(t.Ia.delete(2),await Th(t)):e||(t.Ia.add(2),await Ul(t),t.Aa.set("Unknown"))}function oa(n){return n.Va||(n.Va=(function(t,i,o){const a=Ae(t);return a.ia(),new ck(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:gk.bind(null,n),e_:yk.bind(null,n),n_:_k.bind(null,n),J_:vk.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Hp(n)?qp(n):n.Aa.set("Unknown")):(await n.Va.stop(),Ww(n))}))),n.Va}function ji(n){return n.ma||(n.ma=(function(t,i,o){const a=Ae(t);return a.ia(),new hk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Tk.bind(null,n),n_:Ak.bind(null,n),ea:Ik.bind(null,n),ta:Sk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Ih(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(ks,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Wp(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(n,e){if(zr("AsyncQueue",`${e}: ${n}`),sa(n))return new oe(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=ll(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.fa=new it(ye.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ve(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ko{constructor(e,t,i,o,a,u,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ko(e,t,Uo.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Pk{constructor(){this.queries=nv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ae(t),a=o.queries;o.queries=nv(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new oe(G.ABORTED,"Firestore shutting down"))}}function nv(){return new Os((n=>pw(n)),mh)}async function Kp(n,e){const t=Ae(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new Ck,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Gp(u,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Jp(t)}async function Qp(n,e){const t=Ae(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function kk(n,e){const t=Ae(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&Jp(t)}function xk(n,e,t){const i=Ae(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function Jp(n){n.Da.forEach((e=>{e.next()}))}var Yf,rv;(rv=Yf||(Yf={})).Fa="default",rv.Cache="cache";class Xp{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.key=e}}class Xw{constructor(e){this.key=e}}class Nk{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=De(),this.mutatedKeys=De(),this.Xa=mw(e),this.eu=new Uo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new tv,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const S=o.get(_),L=gh(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),j=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let k=!1;S&&L?S.data.isEqual(L.data)?x!==j&&(i.track({type:3,doc:L}),k=!0):this.iu(S,L)||(i.track({type:2,doc:L}),k=!0,(p&&this.Xa(L,p)>0||g&&this.Xa(L,g)<0)&&(d=!0)):!S&&L?(i.track({type:0,doc:L}),k=!0):S&&!L&&(i.track({type:1,doc:S}),k=!0,(p||g)&&(d=!0)),k&&(L?(u=u.add(L),a=j?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,E)=>(function(L,x){const j=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{At:k})}};return j(L)-j(x)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,g=p!==this.Ya;return this.Ya=p,u.length!==0||g?{snapshot:new Ko(this.query,e.eu,a,u,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new tv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=De(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new Xw(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new Jw(i))})),t}uu(e){this.Ha=e.qs,this.Za=De();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ko.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Yp="SyncEngine";class Dk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Ok{constructor(e){this.key=e,this.lu=!1}}class bk{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Os((d=>pw(d)),mh),this.Tu=new Map,this.Iu=new Set,this.du=new it(ye.comparator),this.Eu=new Map,this.Au=new Mp,this.Ru={},this.Vu=new Map,this.mu=Go.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Vk(n,e,t=!0){const i=r0(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await Yw(i,e,t,!0),o}async function Lk(n,e){const t=r0(n);await Yw(t,e,!0,!1)}async function Yw(n,e,t,i){const o=await nk(n.localStore,gr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await Mk(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&qw(n.remoteStore,o),d}async function Mk(n,e,t,i,o){n.gu=(E,S,L)=>(async function(j,k,ee,ie){let $=k.view.nu(ee);$.Ds&&($=await Q_(j.localStore,k.query,!1).then((({documents:D})=>k.view.nu(D,$))));const re=ie&&ie.targetChanges.get(k.targetId),me=ie&&ie.targetMismatches.get(k.targetId)!=null,_e=k.view.applyChanges($,j.isPrimaryClient,re,me);return sv(j,k.targetId,_e._u),_e.snapshot})(n,E,S,L);const a=await Q_(n.localStore,e,!0),u=new Nk(e,a.qs),d=u.nu(a.documents),p=Fl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),g=u.applyChanges(d,n.isPrimaryClient,p);sv(n,t,g._u);const _=new Dk(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function jk(n,e,t){const i=Ae(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!mh(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Jf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&zp(i.remoteStore,o.targetId),Zf(i,o.targetId)})).catch(ia)):(Zf(i,o.targetId),await Jf(i.localStore,o.targetId,!0))}async function Fk(n,e){const t=Ae(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),zp(t.remoteStore,i.targetId))}async function Uk(n,e,t){const i=Gk(n);try{const o=await(function(u,d){const p=Ae(u),g=$e.now(),_=d.reduce(((L,x)=>L.add(x.key)),De());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let x=$r(),j=De();return p.Os.getEntries(L,_).next((k=>{x=k,x.forEach(((ee,ie)=>{ie.isValidDocument()||(j=j.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(L,x))).next((k=>{E=k;const ee=[];for(const ie of d){const $=iP(ie,E.get(ie.key).overlayedDocument);$!=null&&ee.push(new $i(ie.key,$,ow($.value.mapValue),Wt.exists(!0)))}return p.mutationQueue.addMutationBatch(L,g,ee,d)})).next((k=>{S=k;const ee=k.applyToLocalDocumentSet(E,j);return p.documentOverlayCache.saveOverlays(L,k.batchId,ee)}))})).then((()=>({batchId:S.batchId,changes:yw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let g=u.Ru[u.currentUser.toKey()];g||(g=new it(ke)),g=g.insert(d,p),u.Ru[u.currentUser.toKey()]=g})(i,o.batchId,t),await Bl(i,o.changes),await Ih(i.remoteStore)}catch(o){const a=Gp(o,"Failed to persist write");t.reject(a)}}async function Zw(n,e){const t=Ae(n);try{const i=await ZP(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(Me(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?Me(u.lu,14607):o.removedDocuments.size>0&&(Me(u.lu,42227),u.lu=!1))})),await Bl(t,i,e)}catch(i){await ia(i)}}function iv(n,e,t){const i=Ae(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ae(u);p.onlineState=d;let g=!1;p.queries.forEach(((_,E)=>{for(const S of E.wa)S.va(d)&&(g=!0)})),g&&Jp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Bk(n,e,t){const i=Ae(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new it(ye.comparator);u=u.insert(a,Nt.newNoDocument(a,Te.min()));const d=De().add(a),p=new Eh(Te.min(),new Map,new it(ke),u,d);await Zw(i,p),i.du=i.du.remove(a),i.Eu.delete(e),Zp(i)}else await Jf(i.localStore,e,!1).then((()=>Zf(i,e,t))).catch(ia)}async function zk(n,e){const t=Ae(n),i=e.batch.batchId;try{const o=await YP(t.localStore,e);t0(t,i,null),e0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Bl(t,o)}catch(o){await ia(o)}}async function $k(n,e,t){const i=Ae(n);try{const o=await(function(u,d){const p=Ae(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(Me(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);t0(i,e,t),e0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Bl(i,o)}catch(o){await ia(o)}}function e0(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function t0(n,e,t){const i=Ae(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Zf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||n0(n,i)}))}function n0(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(zp(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Zp(n))}function sv(n,e,t){for(const i of t)i instanceof Jw?(n.Au.addReference(i.key,e),qk(n,i)):i instanceof Xw?(ue(Yp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||n0(n,i.key)):ve(19791,{yu:i})}function qk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ue(Yp,"New document in limbo: "+t),n.Iu.add(i),Zp(n))}function Zp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ye(We.fromString(e)),i=n.mu.next();n.Eu.set(i,new Ok(t)),n.du=n.du.insert(t,i),qw(n.remoteStore,new Si(gr(ph(t.path)),i,"TargetPurposeLimboResolution",dh.ue))}}async function Bl(n,e,t){const i=Ae(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{u.push(i.gu(p,e,t).then((g=>{var _;if((g||t)&&i.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){o.push(g);const E=Fp.Es(p.targetId,g);a.push(E)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(p,g){const _=Ae(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>J.forEach(g,(S=>J.forEach(S.Is,(L=>_.persistence.referenceDelegate.addReference(E,S.targetId,L))).next((()=>J.forEach(S.ds,(L=>_.persistence.referenceDelegate.removeReference(E,S.targetId,L)))))))))}catch(E){if(!sa(E))throw E;ue(Up,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const L=_.Fs.get(S),x=L.snapshotVersion,j=L.withLastLimboFreeSnapshotVersion(x);_.Fs=_.Fs.insert(S,j)}}})(i.localStore,a))}async function Hk(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ue(Yp,"User change. New user:",e.toKey());const i=await Bw(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new oe(G.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bl(t,i.Bs)}}function Wk(n,e){const t=Ae(n),i=t.Eu.get(e);if(i&&i.lu)return De().add(i.key);{let o=De();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function r0(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bk.bind(null,e),e.hu.J_=kk.bind(null,e.eventManager),e.hu.pu=xk.bind(null,e.eventManager),e}function Gk(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$k.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return XP(this.persistence,new KP,e.initialUser,this.serializer)}Du(e){return new Uw(jp.Vi,this.serializer)}bu(e){return new ik}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class Kk extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Me(this.persistence.referenceDelegate instanceof Jc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new OP(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new Uw((i=>Jc.Vi(i,t)),this.serializer)}}class ep{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hk.bind(null,this.syncEngine),await Rk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Pk})()}createDatastore(e){const t=wh(e.databaseInfo.databaseId),i=(function(a){return new uk(a)})(e.databaseInfo);return(function(a,u,d,p){return new fk(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new mk(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>iv(this.syncEngine,t,0)),(function(){return Y_.C()?new Y_:new sk})())}createSyncEngine(e,t){return(function(o,a,u,d,p,g,_){const E=new bk(o,a,u,d,p,g);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ae(o);ue(ks,"RemoteStore shutting down."),a.Ia.add(5),await Ul(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,a){const u=Ae(o),d={documents:a.map((E=>Qc(u.serializer,E)))},p=await u.Jo("BatchGetDocuments",u.serializer.databaseId,We.emptyPath(),d,a.length),g=new Map;p.forEach((E=>{const S=gP(u.serializer,E);g.set(S.key.toString(),S)}));const _=[];return a.forEach((E=>{const S=g.get(E.toString());Me(!!S,55234,{key:E}),_.push(S)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const o=ye.fromPath(i);this.mutations.push(new Rw(o,this.precondition(o)))})),await(async function(i,o){const a=Ae(i),u={writes:o.map((d=>Vw(a.serializer,d)))};await a.Wo("Commit",a.serializer.databaseId,We.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ve(50498,{Wu:e.constructor.name});t=Te.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new oe(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?Wt.exists(!1):Wt.updateTime(t):Wt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new oe(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(t)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t,i,o,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=o,this.deferred=a,this.Gu=i.maxAttempts,this.F_=new Bp(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new Qk(this.datastore),t=this.Ju(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((o=>{this.Hu(o)}))))})).catch((i=>{this.Hu(i)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Ll(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Cw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="FirestoreClient";class Xk{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ue(Fi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ue(Fi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Gp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Tf(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Fi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Bw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Oi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Oi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function ov(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Yk(n);ue(Fi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ev(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>ev(e.remoteStore,o))),n._onlineComponents=e}async function Yk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Fi,"Using user provided OfflineComponentProvider");try{await Tf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Oi("Error using user provided cache. Falling back to memory cache: "+t),await Tf(n,new Yc)}}else ue(Fi,"Using default OfflineComponentProvider"),await Tf(n,new Kk(void 0));return n._offlineComponents}async function tm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Fi,"Using user provided OnlineComponentProvider"),await ov(n,n._uninitializedComponentsProvider._online)):(ue(Fi,"Using default OnlineComponentProvider"),await ov(n,new ep))),n._onlineComponents}function Zk(n){return tm(n).then((e=>e.syncEngine))}function ex(n){return tm(n).then((e=>e.datastore))}async function Zc(n){const e=await tm(n),t=e.eventManager;return t.onListen=Vk.bind(null,e.syncEngine),t.onUnlisten=jk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Lk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Fk.bind(null,e.syncEngine),t}function tx(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,g){const _=new em({next:S=>{_.Ou(),u.enqueueAndForget((()=>Qp(a,E)));const L=S.docs.has(d);!L&&S.fromCache?g.reject(new oe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&p&&p.source==="server"?g.reject(new oe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Xp(ph(d.path),_,{includeMetadataChanges:!0,ka:!0});return Kp(a,E)})(await Zc(n),n.asyncQueue,e,t,i))),i.promise}function nx(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,g){const _=new em({next:S=>{_.Ou(),u.enqueueAndForget((()=>Qp(a,E))),S.fromCache&&p.source==="server"?g.reject(new oe(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Xp(d,_,{includeMetadataChanges:!0,ka:!0});return Kp(a,E)})(await Zc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="firestore.googleapis.com",lv=!0;class uv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s0,this.ssl=lv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NP)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_C("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new uC;switch(i.type){case"firstParty":return new fC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=av.get(t);i&&(ue("ComponentProvider","Removing Datastore"),av.delete(t),i.terminate())})(this),Promise.resolve()}}function rx(n,e,t,i={}){var o;n=wn(n,Sh);const a=Zo(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Yv(`https://${p}`),Zv("Firestore",!0)),u.host!==s0&&u.host!==p&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!As(g,d)&&(n._setSettings(g),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=Ht.MOCK_USER;else{_=wS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new oe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ht(S)}n._authCredentials=new cC(new GE(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vl(t,ot._jsonSchema))return new ot(e,i||null,new ye(We.fromString(t.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:yt("string",ot._jsonSchemaVersion),referencePath:yt("string")};class Ni extends Vs{constructor(e,t,i){super(e,t,ph(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ye(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function Bo(n,e,...t){if(n=ht(n),QE("collection","path",e),n instanceof Sh){const i=We.fromString(e,...t);return T_(i),new Ni(n,null,i)}{if(!(n instanceof ot||n instanceof Ni))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return T_(i),new Ni(n.firestore,null,i)}}function xs(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Cp.newId()),QE("doc","path",e),n instanceof Sh){const i=We.fromString(e,...t);return w_(i),new ot(n,null,new ye(i))}{if(!(n instanceof ot||n instanceof Ni))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return w_(i),new ot(n.firestore,n instanceof Ni?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class hv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bp(this,"async_queue_retry"),this.oc=()=>{const i=wf();i&&ue(cv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=wf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=wf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new mr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!sa(e))throw e;ue(cv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,zr("INTERNAL UNHANDLED ERROR: ",dv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Wp.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&ve(47125,{hc:dv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function dv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class qr extends Sh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new hv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hv(e),this._firestoreClient=void 0,await e}}}function ix(n,e){const t=typeof n=="object"?n:rE(),i=typeof n=="string"?n:zc,o=gp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=vS("firestore");a&&rx(o,...a)}return o}function zl(n){if(n._terminated)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sx(n),n._firestoreClient}function sx(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,g,_){return new kC(d,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,i0(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new Xk(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(jt.fromBase64String(e))}catch(t){throw new oe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vl(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:yt("string",vn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(Vl(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:yt("string",yr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vl(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new oe(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:yt("string",_r._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=/^__.*__$/;class ax{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new jl(e,this.data,t,this.fieldTransforms)}}class o0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function a0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ec:n})}}class rm{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return eh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(a0(this.Ec)&&ox.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lx{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||wh(e)}Dc(e,t,i,o=!1){return new rm({Ec:e,methodName:t,bc:i,path:Mt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(n){const e=n._freezeSettings(),t=wh(n._databaseId);return new lx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function l0(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);im("Data must be an object, but it was:",u,i);const d=h0(i,u);let p,g;if(a.merge)p=new En(u.fieldMask),g=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const S=tp(e,E,t);if(!u.contains(S))throw new oe(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);f0(_,S)||_.push(S)}p=new En(_),g=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=u.fieldTransforms;return new ax(new Zt(d),p,g)}class Rh extends nm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}function u0(n,e,t,i){const o=n.Dc(1,e,t);im("Data must be an object, but it was:",o,i);const a=[],u=Zt.empty();zi(i,((p,g)=>{const _=sm(e,p,t);g=ht(g);const E=o.gc(_);if(g instanceof Rh)a.push(_);else{const S=ql(g,E);S!=null&&(a.push(_),u.set(_,S))}}));const d=new En(a);return new o0(u,d,o.fieldTransforms)}function c0(n,e,t,i,o,a){const u=n.Dc(1,e,t),d=[tp(e,i,t)],p=[o];if(a.length%2!=0)throw new oe(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(tp(e,a[S])),p.push(a[S+1]);const g=[],_=Zt.empty();for(let S=d.length-1;S>=0;--S)if(!f0(g,d[S])){const L=d[S];let x=p[S];x=ht(x);const j=u.gc(L);if(x instanceof Rh)g.push(L);else{const k=ql(x,j);k!=null&&(g.push(L),_.set(L,k))}}const E=new En(g);return new o0(_,E,u.fieldTransforms)}function ux(n,e,t,i=!1){return ql(t,n.Dc(i?4:3,e))}function ql(n,e){if(d0(n=ht(n)))return im("Unsupported field value:",e,n),h0(n,e);if(n instanceof nm)return(function(i,o){if(!a0(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=ql(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=$e.fromDate(i);return{timestampValue:Kc(o.serializer,a)}}if(i instanceof $e){const a=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kc(o.serializer,a)}}if(i instanceof yr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vn)return{bytesValue:Nw(o.serializer,i._byteString)};if(i instanceof ot){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Lp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof _r)return(function(u,d){return{mapValue:{fields:{[iw]:{stringValue:sw},[$c]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return Op(d.serializer,g)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${hh(i)}`)})(n,e)}function h0(n,e){const t={};return YE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,((i,o)=>{const a=ql(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function d0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof yr||n instanceof vn||n instanceof ot||n instanceof nm||n instanceof _r)}function im(n,e,t){if(!d0(t)||!JE(t)){const i=hh(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function tp(n,e,t){if((e=ht(e))instanceof $l)return e._internalPath;if(typeof e=="string")return sm(n,e);throw eh("Field path arguments must be of type string or ",n,!1,void 0,t)}const cx=new RegExp("[~\\*/\\[\\]]");function sm(n,e,t){if(e.search(cx)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $l(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eh(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new oe(G.INVALID_ARGUMENT,d+n+p)}function f0(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(om("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hx extends th{data(){return super.data()}}function om(n,e){return typeof e=="string"?sm(n,e):e instanceof $l?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class am{}class dx extends am{}function fx(n,e,...t){let i=[];e instanceof am&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof lm)).length,d=a.filter((p=>p instanceof Ch)).length;if(u>1||u>0&&d>0)throw new oe(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ch extends dx{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ch(e,t,i)}_apply(e){const t=this._parse(e);return m0(e._query,t),new Vs(e.firestore,e.converter,Hf(e._query,t))}_parse(e){const t=Ah(e.firestore);return(function(a,u,d,p,g,_,E){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new oe(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){mv(E,_);const x=[];for(const j of E)x.push(pv(p,a,j));S={arrayValue:{values:x}}}else S=pv(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||mv(E,_),S=ux(d,u,E,_==="in"||_==="not-in");return gt.create(g,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function px(n,e,t){const i=e,o=om("where",n);return Ch._create(o,i,t)}class lm extends am{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lm(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)m0(u,p),u=Hf(u,p)})(e._query,t),new Vs(e.firestore,e.converter,Hf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pv(n,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new oe(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fw(e)&&t.indexOf("/")!==-1)throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!ye.isDocumentKey(i))throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return x_(n,new ye(i))}if(t instanceof ot)return x_(n,t._key);throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(t)}.`)}function mv(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m0(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class g0{convertValue(e,t="none"){switch(Mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return zi(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[$c].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>ut(u.doubleValue)));return new _r(a)}convertGeoPoint(e){return new yr(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=fh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=Vi(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);Me(jw(i),9688,{name:e});const o=new Al(i.get(1),i.get(3)),a=new ye(i.popFirst(5));return o.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class mx extends g0{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}class Lo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends th{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(om("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Di._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:yt("string",Di._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Cc extends Di{data(e={}){return super.data(e)}}class Is{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Lo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Cc(this._firestore,this._userDataWriter,i.key,i,new Lo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Cc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Lo(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Cc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Lo(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:gx(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n){n=wn(n,ot);const e=wn(n.firestore,qr);return tx(zl(e),n._key).then((t=>E0(e,n,t)))}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:yt("string",Is._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Ph extends g0{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}function _0(n){n=wn(n,Vs);const e=wn(n.firestore,qr),t=zl(e),i=new Ph(e);return p0(n._query),nx(t,n._query).then((o=>new Is(e,i,n,o)))}function _x(n,e,t,...i){n=wn(n,ot);const o=wn(n.firestore,qr),a=Ah(o);let u;return u=typeof(e=ht(e))=="string"||e instanceof $l?c0(a,"updateDoc",n._key,e,t,i):u0(a,"updateDoc",n._key,e),um(o,[u.toMutation(n._key,Wt.exists(!0))])}function vx(n){return um(wn(n.firestore,qr),[new vh(n._key,Wt.none())])}function gv(n,e){const t=wn(n.firestore,qr),i=xs(n),o=y0(n.converter,e);return um(t,[l0(Ah(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Wt.exists(!1))]).then((()=>i))}function v0(n,...e){var t,i,o;n=ht(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||fv(e[u])||(a=e[u++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(fv(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[u+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let p,g,_;if(n instanceof ot)g=wn(n.firestore,qr),_=ph(n._key.path),p={next:E=>{e[u]&&e[u](E0(g,n,E))},error:e[u+1],complete:e[u+2]};else{const E=wn(n,Vs);g=wn(E.firestore,qr),_=E._query;const S=new Ph(g);p={next:L=>{e[u]&&e[u](new Is(g,S,E,L))},error:e[u+1],complete:e[u+2]},p0(n._query)}return(function(S,L,x,j){const k=new em(j),ee=new Xp(L,k,x);return S.asyncQueue.enqueueAndForget((async()=>Kp(await Zc(S),ee))),()=>{k.Ou(),S.asyncQueue.enqueueAndForget((async()=>Qp(await Zc(S),ee)))}})(zl(g),_,d,p)}function um(n,e){return(function(i,o){const a=new mr;return i.asyncQueue.enqueueAndForget((async()=>Uk(await Zk(i),o,a))),a.promise})(zl(n),e)}function E0(n,e,t){const i=t.docs.get(e._key),o=new Ph(n);return new Di(n,o,e._key,i,new Lo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex={maxAttempts:5};function cl(n,e){if((n=ht(n)).firestore!==e)throw new oe(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ah(e)}get(e){const t=cl(e,this._firestore),i=new mx(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return ve(24041);const a=o[0];if(a.isFoundDocument())return new th(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new th(this._firestore,i,t._key,null,t.converter);throw ve(18433,{doc:a})}))}set(e,t,i){const o=cl(e,this._firestore),a=y0(o.converter,t,i),u=l0(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,i);return this._transaction.set(o._key,u),this}update(e,t,i,...o){const a=cl(e,this._firestore);let u;return u=typeof(t=ht(t))=="string"||t instanceof $l?c0(this._dataReader,"Transaction.update",a._key,t,i,o):u0(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=cl(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends wx{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cl(e,this._firestore),i=new Ph(this._firestore);return super.get(e).then((o=>new Di(this._firestore,i,t._key,o._document,new Lo(!1,!1),t.converter)))}}function Ix(n,e,t){n=wn(n,qr);const i=Object.assign(Object.assign({},Ex),t);return(function(a){if(a.maxAttempts<1)throw new oe(G.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(a,u,d){const p=new mr;return a.asyncQueue.enqueueAndForget((async()=>{const g=await ex(a);new Jk(a.asyncQueue,g,d,u,p).zu()})),p.promise})(zl(n),(o=>e(new Tx(n,o))),i)}(function(e,t=!0){(function(o){ra=o})(ea),zo(new Rs("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new qr(new hC(i.getProvider("auth-internal")),new pC(u,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(g.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Pi(g_,y_,e),Pi(g_,y_,"esm2017")})();const Sx={apiKey:"AIzaSyBc1cYCEqFVXvB2YdxHTxhVlPqtTbfVVLM",authDomain:"solaire-frontend.firebaseapp.com",projectId:"solaire-frontend",storageBucket:"solaire-frontend.firebasestorage.app",messagingSenderId:"29459740400",appId:"1:29459740400:web:2fa88c891fece254c8f435"},w0=nE(Sx),nh=aC(w0),On=ix(w0);async function T0(n){const e=await yx(xs(On,"users",n));return e.exists()?e.data():null}async function Ax(n){const e=new Date().getFullYear(),t=xs(On,"counters",`files-${e}`),i=Bo(On,"files");return await Ix(On,async a=>{const u=await a.get(t),d=u.exists()?(u.data().seq||0)+1:1;a.set(t,{seq:d},{merge:!0});const p=`DOS-${e}-${String(d).padStart(4,"0")}`;if(!Dc.map(_=>_.value).includes(n.pack))throw new Error("Pack invalide");const g=xs(i);return a.set(g,{reference:p,installerId:"INST123",pack:n.pack,statutGlobal:n.statutGlobal||n.status||"en_cours",status:n.status||"en_cours",title:n.title||n.name||"Dossier",price:n.price||null,address:n.address||"",power:n.power||null,nextAction:n.nextAction||null,nextActionDate:n.nextActionDate?$e.fromDate(new Date(n.nextActionDate)):null,createdAt:$e.now(),updatedAt:$e.now()}),{id:g.id,reference:p}})}function Rx(){const n=Yo(),[e,t]=Q.useState(""),[i,o]=Q.useState(""),[a,u]=Q.useState(!1),[d,p]=Q.useState(null),g=async _=>{_.preventDefault(),p(null),u(!0);try{await kE(nh,e,i),n("/client/dashboard")}catch(E){console.error("Erreur login client:",E),p((E==null?void 0:E.message)||"Connexion impossible")}finally{u(!1)}};return w.jsxs("div",{className:"card",children:[w.jsx("h2",{children:"Solaire Admin  Espace Installateur"}),w.jsxs("form",{onSubmit:g,className:"form",children:[w.jsxs("div",{className:"field",children:[w.jsx("label",{children:"Email"}),w.jsx("input",{type:"email",value:e,onChange:_=>t(_.target.value),autoComplete:"email"})]}),w.jsxs("div",{className:"field",children:[w.jsx("label",{children:"Mot de passe"}),w.jsx("input",{type:"password",value:i,onChange:_=>o(_.target.value),autoComplete:"current-password"})]}),d&&w.jsx("div",{className:"error",children:d}),w.jsx("button",{className:"btn-primary",type:"submit",disabled:a,children:a?"Connexion...":"Connexion"})]})]})}const Cx="yrpmKIwuSydzH8nWMahRlWZictb2";function Ls(){const[n,e]=Q.useState(null),[t,i]=Q.useState(null),[o,a]=Q.useState(null),[u,d]=Q.useState(!0);return Q.useEffect(()=>{const p=QR(nh,async g=>{if(e(g),!g){i(null),a(null),d(!1);return}try{const _=await T0(g.uid);if(g.uid===Cx){const E={role:"admin",installerId:"ADMIN",..._||{}};i(E),a("admin")}else _?(i(_),a(_.role||"client")):(i({role:"client"}),a("client"))}catch{i({role:"client"}),a("client")}finally{console.log("[useAuth] user=",g==null?void 0:g.uid,g==null?void 0:g.email),d(!1)}});return()=>p()},[]),{user:n,claims:t,role:o,loading:u}}function rh(n,e){const{user:t,claims:i,role:o,loading:a}=Ls(),[u,d]=Q.useState(null),[p,g]=Q.useState(!0),[_,E]=Q.useState(null);return Q.useEffect(()=>{if(a){g(!0);return}if(!t){d([]),g(!1);return}const S=Bo(On,n);let L=S;if(o==="client"){const j=(i==null?void 0:i.installerId)||"INST123";L=fx(S,px("installerId","==",j))}const x=v0(L,j=>{d(j.docs.map(k=>({id:k.id,...k.data()}))),g(!1),E(null)},j=>{E(j),g(!1)});return()=>x()},[n,a,t,o,i==null?void 0:i.installerId]),{data:u,loading:p,error:_}}function Px(){const{data:n,loading:e}=rh("files"),t=n||[];if(e)return w.jsx("div",{className:"card",children:"Chargement"});const i={total:t.length,enCours:t.filter(o=>o.statutGlobal==="en_cours").length,attente:t.filter(o=>["en_attente","incomplet"].includes(o.statutGlobal)).length,finalises:t.filter(o=>["finalise","clos"].includes(o.statutGlobal)).length};return w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Mon tableau de bord"}),w.jsxs("div",{className:"cards",children:[w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"Total dossiers"}),w.jsx("div",{className:"big",children:i.total})]}),w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"En cours"}),w.jsx("div",{className:"big",children:i.enCours})]}),w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"En attente docs"}),w.jsx("div",{className:"big",children:i.attente})]}),w.jsxs("div",{className:"metric",children:[w.jsx("h4",{children:"Finaliss"}),w.jsx("div",{className:"big",children:i.finalises})]})]}),w.jsxs("div",{className:"card",style:{marginTop:20},children:[w.jsx("h4",{style:{marginBottom:12},children:"Mes dossiers"}),e&&w.jsx("div",{children:"Chargement des dossiers"}),!e&&!t.length&&w.jsx("div",{children:"Aucun dossier pour le moment."}),!e&&t.length>0&&w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rfrence"}),w.jsx("th",{children:"Pack"}),w.jsx("th",{children:"Statut"})]})}),w.jsx("tbody",{children:t.map(o=>w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(fp,{to:`/client/dossiers/${o.id}`,children:o.reference||o.title||o.id})}),w.jsx("td",{children:o.pack||o.status}),w.jsx("td",{children:o.statutGlobal||o.status})]},o.id))})]})]})]})}const kx="https://solaire-api.onrender.com";function xx(){const{user:n}=Ls(),[e,t]=Q.useState([]),[i,o]=Q.useState(!0),[a,u]=Q.useState(null);return Q.useEffect(()=>{let d=!0;return(async()=>{try{o(!0);const g=await fetch(`${kx}/files?limit=200`);if(!g.ok)throw new Error(`API ${g.status}`);const _=await g.json(),E=_.items||_||[],S=n!=null&&n.uid?E.filter(L=>L.clientId===n.uid):E;d&&t(S)}catch(g){d&&u(g.message||"Erreur de chargement")}finally{d&&o(!1)}})(),()=>{d=!1}},[n==null?void 0:n.uid]),i?w.jsx("div",{className:"card",children:"Chargement"}):a?w.jsxs("div",{className:"card error",children:["Erreur: ",a]}):w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Mes dossiers"}),w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rf"}),w.jsx("th",{children:"Adresse"}),w.jsx("th",{children:"Pack"}),w.jsx("th",{children:"Statut"})]})}),w.jsxs("tbody",{children:[e.map(d=>{var p;return w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(fp,{to:`/client/dossiers/${d.id}`,children:d.reference||d.ref||d.id})}),w.jsx("td",{children:d.address||""}),w.jsx("td",{children:((p=Dc.find(g=>g.value===d.pack))==null?void 0:p.label)||d.pack||""}),w.jsx("td",{children:w.jsx("span",{className:`badge-status ${d.statutGlobal||d.status||"en_cours"}`,children:d.statutGlobal||d.status||"en_cours"})})]},d.id)}),e.length===0&&w.jsx("tr",{children:w.jsx("td",{colSpan:4,style:{textAlign:"center"},children:"Aucun dossier pour ce compte."})})]})]})]})}const yv="https://solaire-api.onrender.com";function Nx(){const{id:n}=dp(),[e,t]=Q.useState(null),[i,o]=Q.useState([]),[a,u]=Q.useState(!0),[d,p]=Q.useState(null);if(Q.useEffect(()=>{let E=!0;return n&&(async()=>{try{u(!0);const L=await fetch(`${yv}/files/${n}`);if(!L.ok)throw new Error(`API files/${n} ${L.status}`);const x=await L.json();E&&t(x);const j=await fetch(`${yv}/files/${n}/events`);if(j.ok){const k=await j.json();E&&o(k)}}catch(L){E&&p(L.message||"Erreur de chargement")}finally{E&&u(!1)}})(),()=>{E=!1}},[n]),a)return w.jsx("div",{className:"card",children:"Chargement"});if(d)return w.jsxs("div",{className:"card error",children:["Erreur: ",d]});if(!e)return w.jsx("div",{className:"card",children:"Dossier introuvable"});const g=E=>E?new Date(E!=null&&E.toDate?E.toDate():E).toLocaleDateString():"",_=(E,S,L)=>w.jsxs("li",{children:[w.jsxs("strong",{children:[E," :"]})," ",S||""," ",L?`(${L})`:""]});return w.jsxs("div",{className:"grid",children:[w.jsxs("div",{className:"card",children:[w.jsx(fp,{to:"/client/dossiers",className:"small",children:" Retour aux dossiers"}),w.jsx("h3",{children:e.reference||e.ref||e.id}),w.jsx("div",{className:"small",children:e.address||""}),w.jsxs("div",{children:["Pack : ",e.pack||""]}),w.jsxs("div",{children:["Statut :"," ",w.jsx("span",{className:`badge-status ${e.statutGlobal||e.status||"en_cours"}`,children:e.statutGlobal||e.status||"en_cours"})]}),w.jsxs("div",{children:["Client final : ",e.clientFinal||""]}),w.jsxs("div",{children:["Puissance : ",e.power||""," kWc"]}),w.jsx("h4",{children:"Suivi administratif"}),w.jsxs("ul",{className:"small",children:[_("Mairie",e.mairieStatus,g(e.mairieDepositDate)),_("Consuel",e.consuelStatus,g(e.consuelVisitDate)),_("Enedis",e.enedisStatus,e.enedisPdL),_("EDF OA",e.edfStatus,e.edfContractNumber)]})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Documents"}),w.jsxs("ul",{className:"small",children:[(e.documents||[]).map(E=>w.jsx("li",{children:w.jsx("a",{href:E.url,target:"_blank",rel:"noreferrer",children:E.name})},E.name)),(e.documents||[]).length===0&&w.jsx("li",{children:"Aucun document"})]}),w.jsx("h4",{children:"Timeline"}),w.jsxs("ul",{className:"small",children:[i.map(E=>w.jsxs("li",{children:[new Date(E.at).toLocaleString(),"  ",E.action]},E.id||E.at)),i.length===0&&w.jsx("li",{children:"Aucun vnement"})]})]})]})}const If=({children:n})=>{const{user:e,role:t,loading:i}=Ls();return i?null:!e||t!=="client"?w.jsx(Pf,{to:"/client/login",replace:!0}):n},xo=n=>n?n.toDate?n.toDate():n.seconds?new Date(n.seconds*1e3):new Date(n):null,_v=()=>{const n=new Date;return n.setHours(0,0,0,0),n.getTime()},Dx=(n="")=>{const e=n.toLowerCase();return e==="en_cours"?"badge-status info":e==="en_attente"||e==="incomplet"?"badge-status warning":e==="finalise"||e==="clos"?"badge-status success":e==="bloque"?"badge-status warning":"badge-status"},Ox=(n="")=>`badge-pack badge-pack-${n.replace(/[^a-z0-9]/gi,"_")}`;function bx(){var ie;const n=Yo(),{data:e,loading:t}=rh("leads"),{data:i,loading:o}=rh("files"),[a,u]=Q.useState(""),[d,p]=Q.useState(""),[g,_]=Q.useState(""),E=t||o,S=e||[],L=i||[],x=Q.useMemo(()=>{const $=Date.now(),re=720*60*60*1e3,me=S.map(O=>({...O,__created:xo(O.createdAt)||new Date})).filter(O=>$-O.__created.getTime()<=re).sort((O,F)=>F.__created.getTime()-O.__created.getTime()),_e=me.filter(O=>(O.status||"").toLowerCase()==="gagne"),D=me.filter(O=>(O.status||"").toLowerCase()==="perdu"),A=L.filter(O=>(O.statutGlobal||O.status||"").toLowerCase()==="en_cours"),P=L.filter(O=>["finalise","clos"].includes((O.statutGlobal||O.status||"").toLowerCase())),b=L.filter(O=>(O.statutGlobal||O.status||"").toLowerCase()==="bloque");return{leads30:me.length,gained:_e.length,lost:D.length,recentLeads:me,filesTotal:L.length,filesActive:A.length,filesFinalised:P.length,filesBlocked:b.length}},[S,L]),j=Q.useMemo(()=>{const $=_v(),re=$+1440*60*1e3;return L.filter(me=>{const _e=xo(me.nextActionDate);if(!_e)return!1;const D=_e.getTime();return D>=$&&D<re})},[L]),k=Q.useMemo(()=>{const $=_v();return L.filter(re=>{const me=xo(re.nextActionDate);if(!me)return!1;const _e=(re.statutGlobal||re.status||"").toLowerCase();return["finalise","clos"].includes(_e)?!1:me.getTime()<$})},[L]),ee=Q.useMemo(()=>L.filter($=>{const re=($.pack||$.status||"").toLowerCase();if(a&&re!==a)return!1;const me=($.statutGlobal||$.status||"").toLowerCase();if(d&&me!==d)return!1;if(g){const _e=g.toLowerCase();return[$.reference,$.title,$.clientFinal,$.address].filter(Boolean).some(D=>D.toLowerCase().includes(_e))}return!0}),[L,a,d,g]);return E?w.jsx("div",{className:"card",children:"Chargement du dashboard"}):w.jsxs("div",{className:"dashboard",children:[w.jsxs("div",{className:"cards",children:[w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"Leads (30 j)"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:x.leads30}),w.jsxs("div",{className:"small",children:["Gagns : ",x.gained,"  Perdus : ",x.lost]})]}),w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"Dossiers"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:x.filesTotal}),w.jsxs("div",{className:"small",children:["En cours : ",x.filesActive,"  Finaliss : ",x.filesFinalised]})]}),w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"Actions du jour"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:j.length}),w.jsx("div",{className:"small",children:"planifies aujourdhui"})]}),w.jsxs("div",{className:"metric",children:[w.jsxs("div",{className:"metric-header",children:[w.jsx("span",{children:"En retard"}),w.jsx("span",{style:{fontSize:18},children:""})]}),w.jsx("div",{className:"big",children:k.length}),w.jsx("div",{className:"small",children:"Bloqus + relances"})]})]}),((ie=x.recentLeads)==null?void 0:ie.length)>0&&w.jsxs("div",{className:"card",style:{marginTop:16},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsx("h4",{children:"Leads rcents (30 j)"}),w.jsxs("div",{className:"small",children:["Total : ",x.recentLeads.length]})]}),w.jsx("div",{className:"table-wrapper",style:{maxHeight:260},children:w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Nom / Profil"}),w.jsx("th",{children:"Email"}),w.jsx("th",{children:"Tlphone"}),w.jsx("th",{children:"Statut"}),w.jsx("th",{children:"Date"})]})}),w.jsx("tbody",{children:x.recentLeads.slice(0,20).map($=>w.jsxs("tr",{className:"clickable-row",onClick:()=>n(`/leads/${$.id}`),style:{cursor:"pointer"},children:[w.jsx("td",{children:$.name||$.fullName||$.profile||""}),w.jsx("td",{children:$.email||""}),w.jsx("td",{children:$.phone||""}),w.jsx("td",{children:w.jsx("span",{className:`badge-status ${$.status||"nouveau"}`,children:$.status||"nouveau"})}),w.jsx("td",{children:($.__created||xo($.createdAt)||new Date).toLocaleDateString()})]},$.id))})]})})]}),w.jsxs("div",{className:"grid",style:{marginTop:24,gap:16},children:[w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Actions du jour"}),j.length===0&&w.jsx("div",{className:"small",children:"Aucune action planifie."}),j.length>0&&w.jsx("ul",{className:"timeline",children:j.map($=>{var re;return w.jsxs("li",{children:[w.jsx("strong",{children:$.reference||$.title}),w.jsx("span",{children:$.nextAction||""}),w.jsx("small",{children:(re=xo($.nextActionDate))==null?void 0:re.toLocaleDateString()})]},$.id)})})]}),w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Dossiers en retard"}),k.length===0&&w.jsx("div",{className:"small",children:"Aucun dossier en retard."}),k.length>0&&w.jsx("ul",{className:"timeline",children:k.map($=>{var re;return w.jsxs("li",{children:[w.jsx("strong",{children:$.reference||$.title}),w.jsx("span",{children:$.nextAction||""}),w.jsxs("small",{children:["Prvu : ",(re=xo($.nextActionDate))==null?void 0:re.toLocaleDateString()]})]},$.id)})})]})]}),w.jsxs("div",{className:"card",style:{marginTop:24},children:[w.jsxs("div",{className:"filters",style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[w.jsxs("select",{value:a,onChange:$=>u($.target.value),children:[w.jsx("option",{value:"",children:"Pack (tous)"}),Dc.map($=>w.jsx("option",{value:$.value,children:$.label},$.value))]}),w.jsxs("select",{value:d,onChange:$=>p($.target.value),children:[w.jsx("option",{value:"",children:"Statut (tous)"}),w.jsx("option",{value:"en_cours",children:"En cours"}),w.jsx("option",{value:"en_attente",children:"En attente"}),w.jsx("option",{value:"bloque",children:"Bloqu"}),w.jsx("option",{value:"finalise",children:"Finalis"}),w.jsx("option",{value:"clos",children:"Clos"})]}),w.jsx("input",{placeholder:"Recherche rfrence / client",value:g,onChange:$=>_($.target.value),style:{flex:1}})]}),w.jsx("div",{className:"table-wrapper",children:w.jsxs("table",{className:"table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rfrence"}),w.jsx("th",{children:"Client"}),w.jsx("th",{children:"Pack"}),w.jsx("th",{children:"Statut"}),w.jsx("th",{children:"Prochaine action"})]})}),w.jsx("tbody",{children:ee.map($=>{var re;return w.jsxs("tr",{className:"clickable-row",onClick:()=>n(`/dossiers/${$.id}`),children:[w.jsx("td",{children:$.reference||$.title}),w.jsx("td",{children:$.clientFinal||$.address||""}),w.jsx("td",{children:w.jsx("span",{className:Ox($.pack||$.status),children:((re=Dc.find(me=>me.value===($.pack||$.status)))==null?void 0:re.label)||$.pack||$.status})}),w.jsx("td",{children:w.jsx("span",{className:Dx($.statutGlobal||$.status),children:$.statutGlobal||$.status})}),w.jsx("td",{children:$.nextAction||""})]},$.id)})})]})})]})]})}function Vx(n,e){const{user:t,loading:i}=Ls(),[o,a]=Q.useState(null),[u,d]=Q.useState(!0),[p,g]=Q.useState(null);return Q.useEffect(()=>{if(i){d(!0);return}if(!t||!e){a(null),d(!1);return}const _=xs(On,n,e),E=v0(_,S=>{a(S.exists()?{id:S.id,...S.data()}:null),d(!1),g(null)},S=>{g(S),d(!1)});return()=>E()},[n,e,i,t]),{data:o,loading:u,error:p}}const Lx=n=>n?n.toDate?n.toDate():n.seconds?new Date(n.seconds*1e3):new Date(n):null,_s=n=>{const e=Lx(n);return e?e.toLocaleDateString():""},Mx=(n="")=>{const e=n.toLowerCase();return e==="en_cours"?"badge-status info":e==="en_attente"||e==="incomplet"?"badge-status warning":e==="finalise"||e==="clos"?"badge-status success":e==="bloque"?"badge-status warning":"badge-status"},jx=(n="")=>`badge-pack badge-pack-${n.replace(/[^a-z0-9]/gi,"_")}`;function Fx(){var u,d;const{id:n}=dp(),e=Yo(),{data:t,loading:i}=Vx("files",n||""),o=Q.useMemo(()=>{const p=[];return t!=null&&t.nextAction&&p.push({label:"Next action",value:t.nextAction,date:_s(t.nextActionDate)}),t!=null&&t.notes&&p.push({label:"Notes",value:t.notes}),p},[t]);if(i)return w.jsx("div",{className:"card",children:"Chargement du dossier"});if(!t)return w.jsx("div",{className:"card",children:"Dossier introuvable"});const a=[{label:"Mairie",status:t.mairieStatus,meta:_s(t.mairieDepositDate)},{label:"Consuel",status:t.consuelStatus,meta:_s(t.consuelVisitDate)},{label:"Enedis",status:t.enedisStatus,meta:t.enedisPdL||"PDL non renseign"},{label:"EDF OA",status:t.edfStatus,meta:t.edfContractNumber||"N non renseign"}];return w.jsxs("div",{className:"dashboard",children:[w.jsxs("div",{className:"header",style:{marginBottom:24,gap:12},children:[w.jsx("button",{className:"btn-secondary",onClick:()=>e("/dashboard"),children:" Retour"}),w.jsxs("div",{children:[w.jsx("div",{className:"small",children:"Dossier"}),w.jsx("h2",{style:{margin:2},children:t.reference||t.title}),w.jsxs("div",{className:"small",children:[t.clientFinal||"","  ",t.address||"Adresse non renseigne"]})]}),w.jsxs("div",{style:{display:"flex",gap:6},children:[w.jsx("span",{className:jx(t.pack||t.status),children:t.pack||t.status||"Autre"}),w.jsx("span",{className:Mx(t.statutGlobal||t.status),children:t.statutGlobal||t.status||"Statut inconnu"})]})]}),w.jsxs("div",{className:"grid",style:{gap:16},children:[w.jsxs("div",{className:"card",style:{flex:2},children:[w.jsxs("div",{className:"info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:[w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Puissance"}),w.jsx("div",{className:"mini-value",children:t.power?`${t.power} kWc`:""})]}),w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Installateur"}),w.jsx("div",{className:"mini-value",children:t.installerId||""})]}),w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Cr le"}),w.jsx("div",{className:"mini-value",children:_s(t.createdAt)})]}),w.jsxs("div",{children:[w.jsx("div",{className:"mini-label",children:"Dernire MAJ"}),w.jsx("div",{className:"mini-value",children:_s(t.updatedAt)})]})]}),w.jsxs("div",{style:{marginTop:20},children:[w.jsx("h4",{children:"Suivi administratif"}),w.jsx("ul",{className:"admin-follow",children:a.map(p=>w.jsxs("li",{children:[w.jsxs("strong",{children:[p.label," :"]})," ",p.status||""," ",w.jsx("span",{children:p.meta})]},p.label))})]})]}),w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Prochaine action"}),w.jsx("div",{className:"small",children:t.nextAction||"Pas daction planifie."}),t.nextActionDate&&w.jsx("div",{style:{marginTop:8},children:_s(t.nextActionDate)}),w.jsxs("div",{style:{marginTop:16},children:[w.jsx("h4",{children:"Actions complmentaires"}),o.length===0&&w.jsx("div",{className:"small",children:"Aucune donne supplmentaire."}),o.length>0&&w.jsx("ul",{className:"timeline",children:o.map(p=>w.jsxs("li",{children:[w.jsx("strong",{children:p.label}),w.jsx("span",{children:p.value}),p.date&&w.jsx("small",{children:p.date})]},p.label))})]})]})]}),w.jsxs("div",{className:"grid",style:{marginTop:24,gap:16},children:[w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Documents"}),(u=t.documents)!=null&&u.length?w.jsx("ul",{className:"timeline",children:t.documents.map(p=>w.jsx("li",{children:w.jsxs("div",{className:"doc-card",children:[w.jsxs("div",{className:"doc-meta",children:[w.jsx("div",{className:"doc-pill",children:"PDF"}),w.jsxs("div",{className:"doc-texts",children:[w.jsx("div",{className:"doc-name",children:p.name||"Document"}),p.uploadedAt&&w.jsx("small",{children:_s(p.uploadedAt)}),p.url&&w.jsx("a",{href:p.url,target:"_blank",rel:"noreferrer",className:"doc-open",children:"Ouvrir dans un nouvel onglet "})]})]}),w.jsx("div",{className:"doc-preview-wrapper",children:p.url?w.jsx("object",{data:p.url,type:"application/pdf",className:"doc-preview","aria-label":`Aperu ${p.name||"document"}`,children:"Aperu indisponible"}):w.jsx("div",{className:"doc-preview fallback",children:"Aperu indisponible"})})]})},p.url||p.name))}):w.jsx("div",{className:"small",children:"Aucun document enregistr."})]}),w.jsxs("div",{className:"card",style:{flex:1},children:[w.jsx("h4",{children:"Historique"}),(d=t.history)!=null&&d.length?w.jsx("ul",{className:"timeline",children:t.history.map(p=>w.jsx("li",{children:p.action||""},p.at))}):w.jsx("div",{className:"small",children:"Historique non structur."})]})]})]})}function Ux(){return w.jsxs("div",{className:"admin-page",children:[w.jsx("div",{className:"admin-page-header",children:w.jsxs("div",{children:[w.jsx("div",{className:"admin-page-title",children:"Planning (Admin)   venir"}),w.jsx("div",{className:"admin-page-subtitle",children:"Cette page prsentera le planning dtaill des actions."})]})}),w.jsxs("div",{className:"planning-grid",children:[w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Colonne 1"}),w.jsx("p",{children:"Placeholder planning."})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Colonne 2"}),w.jsx("p",{children:"Placeholder planning."})]})]})]})}function Bx(){return w.jsxs("div",{className:"admin-page",children:[w.jsx("div",{className:"admin-page-header",children:w.jsxs("div",{children:[w.jsx("div",{className:"admin-page-title",children:"Mode Oprateur / Tlprospection   venir"}),w.jsx("div",{className:"admin-page-subtitle",children:"Vue simplifie pour les appels et relances."})]})}),w.jsxs("div",{className:"grid-operator",children:[w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Leads  appeler"}),w.jsx("p",{children:"Placeholder oprateur."})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Script dappel"}),w.jsx("p",{children:"Placeholder oprateur."})]}),w.jsxs("div",{className:"card",children:[w.jsx("h4",{children:"Notes"}),w.jsx("p",{children:"Placeholder oprateur."})]})]})]})}const zx="https://solaire-api.onrender.com",$x="saftoken-123";function vv(n){if(!n)return"";if(n.seconds)return new Date(n.seconds*1e3).toLocaleDateString("fr-FR");const e=new Date(n);return isNaN(e.getTime())?"":e.toLocaleDateString("fr-FR")}function qx(){const{id:n}=dp(),e=Yo(),{data:t,loading:i,error:o}=rh("leads"),a=Q.useMemo(()=>(t||[]).find(E=>E.id===n),[t,n]),[u,d]=Q.useState(!1),[p,g]=Q.useState(null),_=async()=>{if(a){d(!0),g(null);try{const E=await fetch(`${zx}/leads/${a.id}/convert`,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Token":$x},body:JSON.stringify({})}),S=await E.json().catch(()=>({}));if(!E.ok)throw new Error(S.error||E.statusText);g(`Dossier cr : ${S.reference||S.id||"OK"}`),setTimeout(()=>e("/dashboard"),1200)}catch(E){g((E==null?void 0:E.message)||"Erreur de conversion")}finally{d(!1)}}};return i?w.jsx("div",{className:"card",children:"Chargement du lead"}):o?w.jsx("div",{className:"card error",children:"Erreur Firestore"}):a?w.jsxs("div",{className:"admin-page",children:[w.jsxs("div",{className:"admin-page-header",children:[w.jsxs("div",{children:[w.jsx("button",{className:"btn-link",onClick:()=>e(-1),children:" Retour"}),w.jsxs("h1",{className:"admin-page-title",children:["Lead : ",a.name||a.nom||"Sans nom"]}),w.jsxs("p",{className:"admin-page-subtitle",children:[a.email||"","  ",a.phone||a.tlphone||""]})]}),w.jsx("div",{className:"pill",children:a.status||"nouveau"})]}),p&&w.jsx("div",{className:"alert-info",children:p}),w.jsxs("div",{className:"grid two-cols",children:[w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Informations"}),w.jsxs("ul",{className:"data-list",children:[w.jsxs("li",{children:[w.jsx("span",{children:"Source"}),w.jsx("strong",{children:a.source||""})]}),w.jsxs("li",{children:[w.jsx("span",{children:"Adresse"}),w.jsx("strong",{children:a.address||a.adresse||""})]}),w.jsxs("li",{children:[w.jsx("span",{children:"Cr le"}),w.jsx("strong",{children:vv(a.createdAt)})]}),w.jsxs("li",{children:[w.jsx("span",{children:"Mis  jour"}),w.jsx("strong",{children:vv(a.updatedAt)})]})]}),a.needs&&a.needs.length>0&&w.jsxs("div",{style:{marginTop:12},children:[w.jsx("div",{className:"small",children:"Besoins"}),w.jsx("div",{className:"tags",children:a.needs.map(E=>w.jsx("span",{className:"pill",children:E},E))})]})]}),w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Actions"}),w.jsx("p",{className:"small",children:"Convertir ce lead en dossier."}),w.jsx("button",{className:"btn-primary",disabled:u,onClick:_,children:u?"Conversion...":"Convertir en dossier"})]})]})]}):w.jsx("div",{className:"card",children:"Lead introuvable"})}function Hx(){const{user:n,claims:e,loading:t}=Ls(),[i,o]=Q.useState(""),[a,u]=Q.useState(!1);if(t)return null;if(!n||(e==null?void 0:e.role)!=="admin")return w.jsx("div",{className:"card",children:"Accs admin requis"});const d=async()=>{u(!0),o("Seeding");let g=0,_=0,E=0;try{const S=[{name:"Alice Photon",email:"alice@test.com",phone:"0600000001",source:"landing",createdAt:$e.now()},{name:"Bob Solaire",email:"bob@test.com",phone:"0600000002",source:"partenaire",createdAt:$e.fromDate(new Date(Date.now()-1728e5))},{name:"Charlie Watt",email:"charlie@test.com",phone:"0600000003",source:"landing",createdAt:$e.fromDate(new Date(Date.now()-432e6))}];for(const ee of S)await gv(Bo(On,"leads"),ee),g++;const L=[{name:"Installateur Alpha",email:"contact@alpha.com",phone:"0700000001",installerId:"INST123"},{name:"Installateur Beta",email:"contact@beta.com",phone:"0700000002",installerId:"INST123"}];for(const ee of L)await gv(Bo(On,"clients"),ee),_++;const x=new Date,j=new Date(Date.now()-8*864e5),k=[{installerId:"INST123",pack:"validation",statutGlobal:"en_cours",title:"Validation Maison",clientFinal:"Famille Durand",address:"12 rue du Soleil, 75000 Paris",power:6,nextAction:"Appel client",nextActionDate:x},{installerId:"INST123",pack:"mise_en_service",statutGlobal:"en_attente",title:"Mise en service Site B",clientFinal:"SCI Lumire",address:"45 av. des nergies, Lyon",power:9,nextAction:"Relance Consuel",nextActionDate:j},{installerId:"INST123",pack:"zero_stress",statutGlobal:"finalise",title:"Zro Stress Villa C",clientFinal:"Mme Ray",address:"8 impasse Volt, Marseille",power:12,nextAction:"Facture envoye",nextActionDate:null}];for(const ee of k)await Ax(ee),E++;o(`Seed termin : ${g} leads, ${_} clients, ${E} dossiers crs.`)}catch(S){o(`Erreur seed: ${S.message||S}`)}finally{u(!1)}},p=async()=>{u(!0),o("Suppression des donnes");try{const g=["leads","clients","files","counters"];for(const _ of g){const E=await _0(Bo(On,_));await Promise.all(E.docs.map(S=>vx(xs(On,_,S.id))))}o("Toutes les collections ont t vides.")}catch(g){o(`Erreur suppression: ${g.message||g}`)}finally{u(!1)}};return w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Gnrer des donnes de dmonstration"}),w.jsx("p",{className:"small",children:"Admin uniquement. Ajoute quelques leads/clients/dossiers de test."}),w.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[w.jsx("button",{className:"btn-primary",disabled:a,onClick:d,children:a?"En cours...":"Seed de dmo"}),w.jsx("button",{className:"btn-danger",disabled:a,onClick:p,children:a?"Suppression...":"Vider les collections"})]}),i&&w.jsx("div",{style:{marginTop:10},children:i})]})}function Wx(){const{user:n,claims:e,loading:t}=Ls(),[i,o]=Q.useState(!1),[a,u]=Q.useState("");if(t)return null;if(!n||(e==null?void 0:e.role)!=="admin")return w.jsx("div",{className:"card",children:"Accs admin requis"});const d=async()=>{o(!0),u("Migration en cours...");let p=0;try{const g=await _0(Bo(On,"clients"));for(const _ of g.docs)await _x(xs(On,"clients",_.id),{installerId:"INST123"}),p+=1;u(`Migration termine : ${p} document${p>1?"s":""} mis  jour.`)}catch(g){u(`Erreur migration : ${g.message||g}`)}finally{o(!1)}};return w.jsxs("div",{className:"card",children:[w.jsx("h3",{children:"Corriger les installerId"}),w.jsx("p",{className:"small",children:`Force l'installerId sur "INST123" dans tous les clients Firestore.`}),w.jsx("button",{className:"btn-primary",disabled:i,onClick:d,children:i?"Correction en cours...":"Corriger maintenant"}),a&&w.jsx("div",{style:{marginTop:10},children:a})]})}function Gx(){const[n,e]=Q.useState(""),[t,i]=Q.useState(""),[o,a]=Q.useState(""),[u,d]=Q.useState(!1),p=async g=>{g.preventDefault(),a(""),d(!0);try{const _=await kE(nh,n,t),E=await T0(_.user.uid);if((E==null?void 0:E.role)!=="admin"){a("Accs admin requis."),await JR(nh),d(!1);return}window.location.href="/dashboard"}catch(_){a(_.message)}finally{d(!1)}};return w.jsxs("div",{className:"card narrow",children:[w.jsx("h3",{children:"Connexion Admin"}),w.jsxs("form",{onSubmit:p,className:"two-cols",children:[w.jsx("input",{placeholder:"Email",value:n,onChange:g=>e(g.target.value)}),w.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:g=>i(g.target.value)}),o&&w.jsx("div",{className:"small",style:{color:"red"},children:o}),w.jsx("button",{className:"btn-primary",type:"submit",disabled:u,children:u?"Connexion...":"Se connecter"})]})]})}function I0(n,e){return function(){return n.apply(e,arguments)}}const{toString:Kx}=Object.prototype,{getPrototypeOf:cm}=Object,{iterator:kh,toStringTag:S0}=Symbol,xh=(n=>e=>{const t=Kx.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Zn=n=>(n=n.toLowerCase(),e=>xh(e)===n),Nh=n=>e=>typeof e===n,{isArray:aa}=Array,Qo=Nh("undefined");function Hl(n){return n!==null&&!Qo(n)&&n.constructor!==null&&!Qo(n.constructor)&&cn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const A0=Zn("ArrayBuffer");function Qx(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&A0(n.buffer),e}const Jx=Nh("string"),cn=Nh("function"),R0=Nh("number"),Wl=n=>n!==null&&typeof n=="object",Xx=n=>n===!0||n===!1,Pc=n=>{if(xh(n)!=="object")return!1;const e=cm(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(S0 in n)&&!(kh in n)},Yx=n=>{if(!Wl(n)||Hl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Zx=Zn("Date"),eN=Zn("File"),tN=Zn("Blob"),nN=Zn("FileList"),rN=n=>Wl(n)&&cn(n.pipe),iN=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||cn(n.append)&&((e=xh(n))==="formdata"||e==="object"&&cn(n.toString)&&n.toString()==="[object FormData]"))},sN=Zn("URLSearchParams"),[oN,aN,lN,uN]=["ReadableStream","Request","Response","Headers"].map(Zn),cN=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),aa(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{if(Hl(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(i=0;i<u;i++)d=a[i],e.call(null,n[d],d,n)}}function C0(n,e){if(Hl(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const Ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,P0=n=>!Qo(n)&&n!==Ts;function np(){const{caseless:n,skipUndefined:e}=P0(this)&&this||{},t={},i=(o,a)=>{const u=n&&C0(t,a)||a;Pc(t[u])&&Pc(o)?t[u]=np(t[u],o):Pc(o)?t[u]=np({},o):aa(o)?t[u]=o.slice():(!e||!Qo(o))&&(t[u]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Gl(arguments[o],i);return t}const hN=(n,e,t,{allOwnKeys:i}={})=>(Gl(e,(o,a)=>{t&&cn(o)?n[a]=I0(o,t):n[a]=o},{allOwnKeys:i}),n),dN=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),fN=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},pN=(n,e,t,i)=>{let o,a,u;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),a=o.length;a-- >0;)u=o[a],(!i||i(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&cm(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},mN=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},gN=n=>{if(!n)return null;if(aa(n))return n;let e=n.length;if(!R0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},yN=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&cm(Uint8Array)),_N=(n,e)=>{const i=(n&&n[kh]).call(n);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(n,a[0],a[1])}},vN=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},EN=Zn("HTMLFormElement"),wN=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),Ev=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),TN=Zn("RegExp"),k0=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Gl(t,(o,a)=>{let u;(u=e(o,a,n))!==!1&&(i[a]=u||o)}),Object.defineProperties(n,i)},IN=n=>{k0(n,(e,t)=>{if(cn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(cn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},SN=(n,e)=>{const t={},i=o=>{o.forEach(a=>{t[a]=!0})};return aa(n)?i(n):i(String(n).split(e)),t},AN=()=>{},RN=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function CN(n){return!!(n&&cn(n.append)&&n[S0]==="FormData"&&n[kh])}const PN=n=>{const e=new Array(10),t=(i,o)=>{if(Wl(i)){if(e.indexOf(i)>=0)return;if(Hl(i))return i;if(!("toJSON"in i)){e[o]=i;const a=aa(i)?[]:{};return Gl(i,(u,d)=>{const p=t(u,o+1);!Qo(p)&&(a[d]=p)}),e[o]=void 0,a}}return i};return t(n,0)},kN=Zn("AsyncFunction"),xN=n=>n&&(Wl(n)||cn(n))&&cn(n.then)&&cn(n.catch),x0=((n,e)=>n?setImmediate:e?((t,i)=>(Ts.addEventListener("message",({source:o,data:a})=>{o===Ts&&a===t&&i.length&&i.shift()()},!1),o=>{i.push(o),Ts.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",cn(Ts.postMessage)),NN=typeof queueMicrotask<"u"?queueMicrotask.bind(Ts):typeof process<"u"&&process.nextTick||x0,DN=n=>n!=null&&cn(n[kh]),H={isArray:aa,isArrayBuffer:A0,isBuffer:Hl,isFormData:iN,isArrayBufferView:Qx,isString:Jx,isNumber:R0,isBoolean:Xx,isObject:Wl,isPlainObject:Pc,isEmptyObject:Yx,isReadableStream:oN,isRequest:aN,isResponse:lN,isHeaders:uN,isUndefined:Qo,isDate:Zx,isFile:eN,isBlob:tN,isRegExp:TN,isFunction:cn,isStream:rN,isURLSearchParams:sN,isTypedArray:yN,isFileList:nN,forEach:Gl,merge:np,extend:hN,trim:cN,stripBOM:dN,inherits:fN,toFlatObject:pN,kindOf:xh,kindOfTest:Zn,endsWith:mN,toArray:gN,forEachEntry:_N,matchAll:vN,isHTMLForm:EN,hasOwnProperty:Ev,hasOwnProp:Ev,reduceDescriptors:k0,freezeMethods:IN,toObjectSet:SN,toCamelCase:wN,noop:AN,toFiniteNumber:RN,findKey:C0,global:Ts,isContextDefined:P0,isSpecCompliantForm:CN,toJSONObject:PN,isAsyncFn:kN,isThenable:xN,setImmediate:x0,asap:NN,isIterable:DN};function Ce(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const N0=Ce.prototype,D0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{D0[n]={value:n}});Object.defineProperties(Ce,D0);Object.defineProperty(N0,"isAxiosError",{value:!0});Ce.from=(n,e,t,i,o,a)=>{const u=Object.create(N0);H.toFlatObject(n,u,function(_){return _!==Error.prototype},g=>g!=="isAxiosError");const d=n&&n.message?n.message:"Error",p=e==null&&n?n.code:e;return Ce.call(u,d,p,t,i,o),n&&u.cause==null&&Object.defineProperty(u,"cause",{value:n,configurable:!0}),u.name=n&&n.name||"Error",a&&Object.assign(u,a),u};const ON=null;function rp(n){return H.isPlainObject(n)||H.isArray(n)}function O0(n){return H.endsWith(n,"[]")?n.slice(0,-2):n}function wv(n,e,t){return n?n.concat(e).map(function(o,a){return o=O0(o),!t&&a?"["+o+"]":o}).join(t?".":""):e}function bN(n){return H.isArray(n)&&!n.some(rp)}const VN=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Dh(n,e,t){if(!H.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,k){return!H.isUndefined(k[j])});const i=t.metaTokens,o=t.visitor||_,a=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function g(x){if(x===null)return"";if(H.isDate(x))return x.toISOString();if(H.isBoolean(x))return x.toString();if(!p&&H.isBlob(x))throw new Ce("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(x)||H.isTypedArray(x)?p&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function _(x,j,k){let ee=x;if(x&&!k&&typeof x=="object"){if(H.endsWith(j,"{}"))j=i?j:j.slice(0,-2),x=JSON.stringify(x);else if(H.isArray(x)&&bN(x)||(H.isFileList(x)||H.endsWith(j,"[]"))&&(ee=H.toArray(x)))return j=O0(j),ee.forEach(function($,re){!(H.isUndefined($)||$===null)&&e.append(u===!0?wv([j],re,a):u===null?j:j+"[]",g($))}),!1}return rp(x)?!0:(e.append(wv(k,j,a),g(x)),!1)}const E=[],S=Object.assign(VN,{defaultVisitor:_,convertValue:g,isVisitable:rp});function L(x,j){if(!H.isUndefined(x)){if(E.indexOf(x)!==-1)throw Error("Circular reference detected in "+j.join("."));E.push(x),H.forEach(x,function(ee,ie){(!(H.isUndefined(ee)||ee===null)&&o.call(e,ee,H.isString(ie)?ie.trim():ie,j,S))===!0&&L(ee,j?j.concat(ie):[ie])}),E.pop()}}if(!H.isObject(n))throw new TypeError("data must be an object");return L(n),e}function Tv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function hm(n,e){this._pairs=[],n&&Dh(n,this,e)}const b0=hm.prototype;b0.append=function(e,t){this._pairs.push([e,t])};b0.toString=function(e){const t=e?function(i){return e.call(this,i,Tv)}:Tv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function LN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function V0(n,e,t){if(!e)return n;const i=t&&t.encode||LN;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let a;if(o?a=o(e,t):a=H.isURLSearchParams(e)?e.toString():new hm(e,t).toString(i),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class Iv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(i){i!==null&&e(i)})}}const L0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MN=typeof URLSearchParams<"u"?URLSearchParams:hm,jN=typeof FormData<"u"?FormData:null,FN=typeof Blob<"u"?Blob:null,UN={isBrowser:!0,classes:{URLSearchParams:MN,FormData:jN,Blob:FN},protocols:["http","https","file","blob","url","data"]},dm=typeof window<"u"&&typeof document<"u",ip=typeof navigator=="object"&&navigator||void 0,BN=dm&&(!ip||["ReactNative","NativeScript","NS"].indexOf(ip.product)<0),zN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$N=dm&&window.location.href||"http://localhost",qN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dm,hasStandardBrowserEnv:BN,hasStandardBrowserWebWorkerEnv:zN,navigator:ip,origin:$N},Symbol.toStringTag,{value:"Module"})),Gt={...qN,...UN};function HN(n,e){return Dh(n,new Gt.classes.URLSearchParams,{visitor:function(t,i,o,a){return Gt.isNode&&H.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function WN(n){return H.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function GN(n){const e={},t=Object.keys(n);let i;const o=t.length;let a;for(i=0;i<o;i++)a=t[i],e[a]=n[a];return e}function M0(n){function e(t,i,o,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),p=a>=t.length;return u=!u&&H.isArray(o)?o.length:u,p?(H.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!d):((!o[u]||!H.isObject(o[u]))&&(o[u]=[]),e(t,i,o[u],a)&&H.isArray(o[u])&&(o[u]=GN(o[u])),!d)}if(H.isFormData(n)&&H.isFunction(n.entries)){const t={};return H.forEachEntry(n,(i,o)=>{e(WN(i),o,t,0)}),t}return null}function KN(n,e,t){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Kl={transitional:L0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,a=H.isObject(e);if(a&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(M0(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return HN(e,this.formSerializer).toString();if((d=H.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Dh(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(t.setContentType("application/json",!1),KN(e)):e}],transformResponse:[function(e){const t=this.transitional||Kl.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(i&&!this.responseType||o)){const u=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?Ce.from(d,Ce.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],n=>{Kl.headers[n]={}});const QN=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JN=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(u){o=u.indexOf(":"),t=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!t||e[t]&&QN[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Sv=Symbol("internals");function il(n){return n&&String(n).trim().toLowerCase()}function kc(n){return n===!1||n==null?n:H.isArray(n)?n.map(kc):String(n)}function XN(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const YN=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Sf(n,e,t,i,o){if(H.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(i))return e.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(e)}}function ZN(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function eD(n,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,a,u){return this[i].call(this,e,o,a,u)},configurable:!0})})}let hn=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function a(d,p,g){const _=il(p);if(!_)throw new Error("header name must be a non-empty string");const E=H.findKey(o,_);(!E||o[E]===void 0||g===!0||g===void 0&&o[E]!==!1)&&(o[E||p]=kc(d))}const u=(d,p)=>H.forEach(d,(g,_)=>a(g,_,p));if(H.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(H.isString(e)&&(e=e.trim())&&!YN(e))u(JN(e),t);else if(H.isObject(e)&&H.isIterable(e)){let d={},p,g;for(const _ of e){if(!H.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[g=_[0]]=(p=d[g])?H.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}u(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=il(e),e){const i=H.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return XN(o);if(H.isFunction(t))return t.call(this,o,i);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=il(e),e){const i=H.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Sf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function a(u){if(u=il(u),u){const d=H.findKey(i,u);d&&(!t||Sf(i,i[d],d,t))&&(delete i[d],o=!0)}}return H.isArray(e)?e.forEach(a):a(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const a=t[i];(!e||Sf(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const t=this,i={};return H.forEach(this,(o,a)=>{const u=H.findKey(i,a);if(u){t[u]=kc(o),delete t[a];return}const d=e?ZN(a):String(a).trim();d!==a&&delete t[a],t[d]=kc(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&H.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Sv]=this[Sv]={accessors:{}}).accessors,o=this.prototype;function a(u){const d=il(u);i[d]||(eD(o,u),i[d]=!0)}return H.isArray(e)?e.forEach(a):a(e),this}};hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(hn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});H.freezeMethods(hn);function Af(n,e){const t=this||Kl,i=e||t,o=hn.from(i.headers);let a=i.data;return H.forEach(n,function(d){a=d.call(t,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function j0(n){return!!(n&&n.__CANCEL__)}function la(n,e,t){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(la,Ce,{__CANCEL__:!0});function F0(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ce("Request failed with status code "+t.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function tD(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function nD(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,a=0,u;return e=e!==void 0?e:1e3,function(p){const g=Date.now(),_=i[a];u||(u=g),t[o]=p,i[o]=g;let E=a,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===a&&(a=(a+1)%n),g-u<e)return;const L=_&&g-_;return L?Math.round(S*1e3/L):void 0}}function rD(n,e){let t=0,i=1e3/e,o,a;const u=(g,_=Date.now())=>{t=_,o=null,a&&(clearTimeout(a),a=null),n(...g)};return[(...g)=>{const _=Date.now(),E=_-t;E>=i?u(g,_):(o=g,a||(a=setTimeout(()=>{a=null,u(o)},i-E)))},()=>o&&u(o)]}const ih=(n,e,t=3)=>{let i=0;const o=nD(50,250);return rD(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,p=u-i,g=o(p),_=u<=d;i=u;const E={loaded:u,total:d,progress:d?u/d:void 0,bytes:p,rate:g||void 0,estimated:g&&d&&_?(d-u)/g:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},Av=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Rv=n=>(...e)=>H.asap(()=>n(...e)),iD=Gt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Gt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,sD=Gt.hasStandardBrowserEnv?{write(n,e,t,i,o,a,u){if(typeof document>"u")return;const d=[`${n}=${encodeURIComponent(e)}`];H.isNumber(t)&&d.push(`expires=${new Date(t).toUTCString()}`),H.isString(i)&&d.push(`path=${i}`),H.isString(o)&&d.push(`domain=${o}`),a===!0&&d.push("secure"),H.isString(u)&&d.push(`SameSite=${u}`),document.cookie=d.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function oD(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function aD(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function U0(n,e,t){let i=!oD(e);return n&&(i||t==!1)?aD(n,e):e}const Cv=n=>n instanceof hn?{...n}:n;function Ns(n,e){e=e||{};const t={};function i(g,_,E,S){return H.isPlainObject(g)&&H.isPlainObject(_)?H.merge.call({caseless:S},g,_):H.isPlainObject(_)?H.merge({},_):H.isArray(_)?_.slice():_}function o(g,_,E,S){if(H.isUndefined(_)){if(!H.isUndefined(g))return i(void 0,g,E,S)}else return i(g,_,E,S)}function a(g,_){if(!H.isUndefined(_))return i(void 0,_)}function u(g,_){if(H.isUndefined(_)){if(!H.isUndefined(g))return i(void 0,g)}else return i(void 0,_)}function d(g,_,E){if(E in e)return i(g,_);if(E in n)return i(void 0,g)}const p={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(g,_,E)=>o(Cv(g),Cv(_),E,!0)};return H.forEach(Object.keys({...n,...e}),function(_){const E=p[_]||o,S=E(n[_],e[_],_);H.isUndefined(S)&&E!==d||(t[_]=S)}),t}const B0=n=>{const e=Ns({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:d}=e;if(e.headers=u=hn.from(u),e.url=V0(U0(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),H.isFormData(t)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(H.isFunction(t.getHeaders)){const p=t.getHeaders(),g=["content-type","content-length"];Object.entries(p).forEach(([_,E])=>{g.includes(_.toLowerCase())&&u.set(_,E)})}}if(Gt.hasStandardBrowserEnv&&(i&&H.isFunction(i)&&(i=i(e)),i||i!==!1&&iD(e.url))){const p=o&&a&&sD.read(a);p&&u.set(o,p)}return e},lD=typeof XMLHttpRequest<"u",uD=lD&&function(n){return new Promise(function(t,i){const o=B0(n);let a=o.data;const u=hn.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:g}=o,_,E,S,L,x;function j(){L&&L(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function ee(){if(!k)return;const $=hn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),me={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:$,config:n,request:k};F0(function(D){t(D),j()},function(D){i(D),j()},me),k=null}"onloadend"in k?k.onloadend=ee:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(ee)},k.onabort=function(){k&&(i(new Ce("Request aborted",Ce.ECONNABORTED,n,k)),k=null)},k.onerror=function(re){const me=re&&re.message?re.message:"Network Error",_e=new Ce(me,Ce.ERR_NETWORK,n,k);_e.event=re||null,i(_e),k=null},k.ontimeout=function(){let re=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const me=o.transitional||L0;o.timeoutErrorMessage&&(re=o.timeoutErrorMessage),i(new Ce(re,me.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,k)),k=null},a===void 0&&u.setContentType(null),"setRequestHeader"in k&&H.forEach(u.toJSON(),function(re,me){k.setRequestHeader(me,re)}),H.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),d&&d!=="json"&&(k.responseType=o.responseType),g&&([S,x]=ih(g,!0),k.addEventListener("progress",S)),p&&k.upload&&([E,L]=ih(p),k.upload.addEventListener("progress",E),k.upload.addEventListener("loadend",L)),(o.cancelToken||o.signal)&&(_=$=>{k&&(i(!$||$.type?new la(null,n,k):$),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const ie=tD(o.url);if(ie&&Gt.protocols.indexOf(ie)===-1){i(new Ce("Unsupported protocol "+ie+":",Ce.ERR_BAD_REQUEST,n));return}k.send(a||null)})},cD=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const a=function(g){if(!o){o=!0,d();const _=g instanceof Error?g:this.reason;i.abort(_ instanceof Ce?_:new la(_ instanceof Error?_.message:_))}};let u=e&&setTimeout(()=>{u=null,a(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(a):g.removeEventListener("abort",a)}),n=null)};n.forEach(g=>g.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>H.asap(d),p}},hD=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},dD=async function*(n,e){for await(const t of fD(n))yield*hD(t,e)},fD=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Pv=(n,e,t,i)=>{const o=dD(n,e);let a=0,u,d=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:g,value:_}=await o.next();if(g){d(),p.close();return}let E=_.byteLength;if(t){let S=a+=E;t(S)}p.enqueue(new Uint8Array(_))}catch(g){throw d(g),g}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},kv=64*1024,{isFunction:yc}=H,pD=(({Request:n,Response:e})=>({Request:n,Response:e}))(H.global),{ReadableStream:xv,TextEncoder:Nv}=H.global,Dv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},mD=n=>{n=H.merge.call({skipUndefined:!0},pD,n);const{fetch:e,Request:t,Response:i}=n,o=e?yc(e):typeof fetch=="function",a=yc(t),u=yc(i);if(!o)return!1;const d=o&&yc(xv),p=o&&(typeof Nv=="function"?(x=>j=>x.encode(j))(new Nv):async x=>new Uint8Array(await new t(x).arrayBuffer())),g=a&&d&&Dv(()=>{let x=!1;const j=new t(Gt.origin,{body:new xv,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!j}),_=u&&d&&Dv(()=>H.isReadableStream(new i("").body)),E={stream:_&&(x=>x.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!E[x]&&(E[x]=(j,k)=>{let ee=j&&j[x];if(ee)return ee.call(j);throw new Ce(`Response type '${x}' is not supported`,Ce.ERR_NOT_SUPPORT,k)})});const S=async x=>{if(x==null)return 0;if(H.isBlob(x))return x.size;if(H.isSpecCompliantForm(x))return(await new t(Gt.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(H.isArrayBufferView(x)||H.isArrayBuffer(x))return x.byteLength;if(H.isURLSearchParams(x)&&(x=x+""),H.isString(x))return(await p(x)).byteLength},L=async(x,j)=>{const k=H.toFiniteNumber(x.getContentLength());return k??S(j)};return async x=>{let{url:j,method:k,data:ee,signal:ie,cancelToken:$,timeout:re,onDownloadProgress:me,onUploadProgress:_e,responseType:D,headers:A,withCredentials:P="same-origin",fetchOptions:b}=B0(x),O=e||fetch;D=D?(D+"").toLowerCase():"text";let F=cD([ie,$&&$.toAbortSignal()],re),C=null;const qe=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let _t;try{if(_e&&g&&k!=="get"&&k!=="head"&&(_t=await L(A,ee))!==0){let M=new t(j,{method:"POST",body:ee,duplex:"half"}),K;if(H.isFormData(ee)&&(K=M.headers.get("content-type"))&&A.setContentType(K),M.body){const[fe,Re]=Av(_t,ih(Rv(_e)));ee=Pv(M.body,kv,fe,Re)}}H.isString(P)||(P=P?"include":"omit");const Ge=a&&"credentials"in t.prototype,Ue={...b,signal:F,method:k.toUpperCase(),headers:A.normalize().toJSON(),body:ee,duplex:"half",credentials:Ge?P:void 0};C=a&&new t(j,Ue);let ne=await(a?O(C,b):O(j,Ue));const ge=_&&(D==="stream"||D==="response");if(_&&(me||ge&&qe)){const M={};["status","statusText","headers"].forEach(Pe=>{M[Pe]=ne[Pe]});const K=H.toFiniteNumber(ne.headers.get("content-length")),[fe,Re]=me&&Av(K,ih(Rv(me),!0))||[];ne=new i(Pv(ne.body,kv,fe,()=>{Re&&Re(),qe&&qe()}),M)}D=D||"text";let ae=await E[H.findKey(E,D)||"text"](ne,x);return!ge&&qe&&qe(),await new Promise((M,K)=>{F0(M,K,{data:ae,headers:hn.from(ne.headers),status:ne.status,statusText:ne.statusText,config:x,request:C})})}catch(Ge){throw qe&&qe(),Ge&&Ge.name==="TypeError"&&/Load failed|fetch/i.test(Ge.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,x,C),{cause:Ge.cause||Ge}):Ce.from(Ge,Ge&&Ge.code,x,C)}}},gD=new Map,z0=n=>{let e=n&&n.env||{};const{fetch:t,Request:i,Response:o}=e,a=[i,o,t];let u=a.length,d=u,p,g,_=gD;for(;d--;)p=a[d],g=_.get(p),g===void 0&&_.set(p,g=d?new Map:mD(e)),_=g;return g};z0();const fm={http:ON,xhr:uD,fetch:{get:z0}};H.forEach(fm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Ov=n=>`- ${n}`,yD=n=>H.isFunction(n)||n===null||n===!1;function _D(n,e){n=H.isArray(n)?n:[n];const{length:t}=n;let i,o;const a={};for(let u=0;u<t;u++){i=n[u];let d;if(o=i,!yD(i)&&(o=fm[(d=String(i)).toLowerCase()],o===void 0))throw new Ce(`Unknown adapter '${d}'`);if(o&&(H.isFunction(o)||(o=o.get(e))))break;a[d||"#"+u]=o}if(!o){const u=Object.entries(a).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=t?u.length>1?`since :
`+u.map(Ov).join(`
`):" "+Ov(u[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return o}const $0={getAdapter:_D,adapters:fm};function Rf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new la(null,n)}function bv(n){return Rf(n),n.headers=hn.from(n.headers),n.data=Af.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),$0.getAdapter(n.adapter||Kl.adapter,n)(n).then(function(i){return Rf(n),i.data=Af.call(n,n.transformResponse,i),i.headers=hn.from(i.headers),i},function(i){return j0(i)||(Rf(n),i&&i.response&&(i.response.data=Af.call(n,n.transformResponse,i.response),i.response.headers=hn.from(i.response.headers))),Promise.reject(i)})}const q0="1.13.2",Oh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Oh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Vv={};Oh.transitional=function(e,t,i){function o(a,u){return"[Axios v"+q0+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return(a,u,d)=>{if(e===!1)throw new Ce(o(u," has been removed"+(t?" in "+t:"")),Ce.ERR_DEPRECATED);return t&&!Vv[u]&&(Vv[u]=!0,console.warn(o(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Oh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function vD(n,e,t){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const a=i[o],u=e[a];if(u){const d=n[a],p=d===void 0||u(d,a,n);if(p!==!0)throw new Ce("option "+a+" must be "+p,Ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ce("Unknown option "+a,Ce.ERR_BAD_OPTION)}}const xc={assertOptions:vD,validators:Oh},hr=xc.validators;let Ss=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Iv,response:new Iv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ns(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:a}=t;i!==void 0&&xc.assertOptions(i,{silentJSONParsing:hr.transitional(hr.boolean),forcedJSONParsing:hr.transitional(hr.boolean),clarifyTimeoutError:hr.transitional(hr.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:xc.assertOptions(o,{encode:hr.function,serialize:hr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xc.assertOptions(t,{baseUrl:hr.spelling("baseURL"),withXsrfToken:hr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&H.merge(a.common,a[t.method]);a&&H.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=hn.concat(u,a);const d=[];let p=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(t)===!1||(p=p&&j.synchronous,d.unshift(j.fulfilled,j.rejected))});const g=[];this.interceptors.response.forEach(function(j){g.push(j.fulfilled,j.rejected)});let _,E=0,S;if(!p){const x=[bv.bind(this),void 0];for(x.unshift(...d),x.push(...g),S=x.length,_=Promise.resolve(t);E<S;)_=_.then(x[E++],x[E++]);return _}S=d.length;let L=t;for(;E<S;){const x=d[E++],j=d[E++];try{L=x(L)}catch(k){j.call(this,k);break}}try{_=bv.call(this,L)}catch(x){return Promise.reject(x)}for(E=0,S=g.length;E<S;)_=_.then(g[E++],g[E++]);return _}getUri(e){e=Ns(this.defaults,e);const t=U0(e.baseURL,e.url,e.allowAbsoluteUrls);return V0(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){Ss.prototype[e]=function(t,i){return this.request(Ns(i||{},{method:e,url:t,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(i){return function(a,u,d){return this.request(Ns(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}Ss.prototype[e]=t(),Ss.prototype[e+"Form"]=t(!0)});let ED=class H0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(d=>{i.subscribe(d),a=d}).then(o);return u.cancel=function(){i.unsubscribe(a)},u},e(function(a,u,d){i.reason||(i.reason=new la(a,u,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new H0(function(o){e=o}),cancel:e}}};function wD(n){return function(t){return n.apply(null,t)}}function TD(n){return H.isObject(n)&&n.isAxiosError===!0}const sp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(sp).forEach(([n,e])=>{sp[e]=n});function W0(n){const e=new Ss(n),t=I0(Ss.prototype.request,e);return H.extend(t,Ss.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return W0(Ns(n,o))},t}const dt=W0(Kl);dt.Axios=Ss;dt.CanceledError=la;dt.CancelToken=ED;dt.isCancel=j0;dt.VERSION=q0;dt.toFormData=Dh;dt.AxiosError=Ce;dt.Cancel=dt.CanceledError;dt.all=function(e){return Promise.all(e)};dt.spread=wD;dt.isAxiosError=TD;dt.mergeConfig=Ns;dt.AxiosHeaders=hn;dt.formToJSON=n=>M0(H.isHTMLForm(n)?new FormData(n):n);dt.getAdapter=$0.getAdapter;dt.HttpStatusCode=sp;dt.default=dt;const{Axios:ND,AxiosError:DD,CanceledError:OD,isCancel:bD,CancelToken:VD,VERSION:LD,all:MD,Cancel:jD,isAxiosError:FD,spread:UD,toFormData:BD,AxiosHeaders:zD,HttpStatusCode:$D,formToJSON:qD,getAdapter:HD,mergeConfig:WD}=dt;var ID={};const SD=ID.REACT_APP_API_URL||"http://localhost:3000",G0=dt.create({baseURL:SD,headers:{"Content-Type":"application/json"}});G0.interceptors.request.use(n=>{const e=localStorage.getItem("firebaseToken");return e&&(n.headers.Authorization=`Bearer ${e}`),n});const AD={ping:()=>G0.get("/health")};function RD(){const[n,e]=Q.useState("..."),[t,i]=Q.useState(""),[o,a]=Q.useState("");return Q.useEffect(()=>{AD.ping().then(u=>{var d,p;e(((d=u.data)==null?void 0:d.status)||"unknown"),i(((p=u.data)==null?void 0:p.timestamp)||"")}).catch(u=>a((u==null?void 0:u.message)||"error"))},[]),w.jsxs("div",{style:{padding:"1rem"},children:[w.jsx("h2",{children:"Health Debug"}),w.jsxs("p",{children:["Status: ",n]}),w.jsxs("p",{children:["Timestamp: ",t]}),o&&w.jsxs("p",{style:{color:"red"},children:["Error: ",o]})]})}function CD(){return w.jsxs(eS,{children:[w.jsx(qt,{path:"/login",element:w.jsx(Gx,{})}),w.jsx(qt,{path:"/dashboard",element:w.jsx(vs,{children:w.jsx(bx,{})})}),w.jsx(qt,{path:"/dossiers/:id",element:w.jsx(vs,{children:w.jsx(Fx,{})})}),w.jsx(qt,{path:"/planning",element:w.jsx(vs,{children:w.jsx(Ux,{})})}),w.jsx(qt,{path:"/operator",element:w.jsx(vs,{children:w.jsx(Bx,{})})}),w.jsx(qt,{path:"/leads/:id",element:w.jsx(vs,{children:w.jsx(qx,{})})}),w.jsx(qt,{path:"/dev/seed",element:w.jsx(vs,{children:w.jsx(Hx,{})})}),w.jsx(qt,{path:"/admin/fix-installer",element:w.jsx(vs,{children:w.jsx(Wx,{})})}),w.jsx(qt,{path:"/debug/health",element:w.jsx(RD,{})}),w.jsx(qt,{path:"/client/login",element:w.jsx(Rx,{})}),w.jsx(qt,{path:"/client/dashboard",element:w.jsx(If,{children:w.jsx(Px,{})})}),w.jsx(qt,{path:"/client/dossiers",element:w.jsx(If,{children:w.jsx(xx,{})})}),w.jsx(qt,{path:"/client/dossiers/:id",element:w.jsx(If,{children:w.jsx(Nx,{})})}),w.jsx(qt,{path:"/",element:w.jsx(Pf,{to:"/dashboard",replace:!0})}),w.jsx(qt,{path:"/*",element:w.jsx(Pf,{to:"/dashboard",replace:!0})})]})}function vs({children:n}){const{user:e,loading:t}=Ls();return t||!e?w.jsx("div",{className:"page-loader",children:"Chargement de la session"}):n}lI.createRoot(document.getElementById("root")).render(w.jsx(aS,{children:w.jsx(CD,{})}));
